(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function ax(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var m_={exports:{}},Up={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HS;function dC(){if(HS)return Up;HS=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:r,type:n,key:u,ref:a!==void 0?a:null,props:o}}return Up.Fragment=t,Up.jsx=e,Up.jsxs=e,Up}var zS;function pC(){return zS||(zS=1,m_.exports=dC()),m_.exports}var de=pC(),g_={exports:{}},an={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FS;function mC(){if(FS)return an;FS=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function A(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function C(X,nt,_t){this.props=X,this.context=nt,this.refs=R,this.updater=_t||S}C.prototype.isReactComponent={},C.prototype.setState=function(X,nt){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,nt,"setState")},C.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function M(){}M.prototype=C.prototype;function w(X,nt,_t){this.props=X,this.context=nt,this.refs=R,this.updater=_t||S}var U=w.prototype=new M;U.constructor=w,E(U,C.prototype),U.isPureReactComponent=!0;var D=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function F(X,nt,_t,Tt,it,Ct){return _t=Ct.ref,{$$typeof:r,type:X,key:nt,ref:_t!==void 0?_t:null,props:Ct}}function k(X,nt){return F(X.type,nt,void 0,void 0,void 0,X.props)}function L(X){return typeof X=="object"&&X!==null&&X.$$typeof===r}function N(X){var nt={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(_t){return nt[_t]})}var J=/\/+/g;function ct(X,nt){return typeof X=="object"&&X!==null&&X.key!=null?N(""+X.key):nt.toString(36)}function at(){}function pt(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(at,at):(X.status="pending",X.then(function(nt){X.status==="pending"&&(X.status="fulfilled",X.value=nt)},function(nt){X.status==="pending"&&(X.status="rejected",X.reason=nt)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function ut(X,nt,_t,Tt,it){var Ct=typeof X;(Ct==="undefined"||Ct==="boolean")&&(X=null);var Ht=!1;if(X===null)Ht=!0;else switch(Ct){case"bigint":case"string":case"number":Ht=!0;break;case"object":switch(X.$$typeof){case r:case t:Ht=!0;break;case v:return Ht=X._init,ut(Ht(X._payload),nt,_t,Tt,it)}}if(Ht)return it=it(X),Ht=Tt===""?"."+ct(X,0):Tt,D(it)?(_t="",Ht!=null&&(_t=Ht.replace(J,"$&/")+"/"),ut(it,nt,_t,"",function(Ee){return Ee})):it!=null&&(L(it)&&(it=k(it,_t+(it.key==null||X&&X.key===it.key?"":(""+it.key).replace(J,"$&/")+"/")+Ht)),nt.push(it)),1;Ht=0;var Qt=Tt===""?".":Tt+":";if(D(X))for(var qt=0;qt<X.length;qt++)Tt=X[qt],Ct=Qt+ct(Tt,qt),Ht+=ut(Tt,nt,_t,Ct,it);else if(qt=A(X),typeof qt=="function")for(X=qt.call(X),qt=0;!(Tt=X.next()).done;)Tt=Tt.value,Ct=Qt+ct(Tt,qt++),Ht+=ut(Tt,nt,_t,Ct,it);else if(Ct==="object"){if(typeof X.then=="function")return ut(pt(X),nt,_t,Tt,it);throw nt=String(X),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.")}return Ht}function H(X,nt,_t){if(X==null)return X;var Tt=[],it=0;return ut(X,Tt,"","",function(Ct){return nt.call(_t,Ct,it++)}),Tt}function W(X){if(X._status===-1){var nt=X._result;nt=nt(),nt.then(function(_t){(X._status===0||X._status===-1)&&(X._status=1,X._result=_t)},function(_t){(X._status===0||X._status===-1)&&(X._status=2,X._result=_t)}),X._status===-1&&(X._status=0,X._result=nt)}if(X._status===1)return X._result.default;throw X._result}var j=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var nt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(nt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function lt(){}return an.Children={map:H,forEach:function(X,nt,_t){H(X,function(){nt.apply(this,arguments)},_t)},count:function(X){var nt=0;return H(X,function(){nt++}),nt},toArray:function(X){return H(X,function(nt){return nt})||[]},only:function(X){if(!L(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},an.Component=C,an.Fragment=e,an.Profiler=a,an.PureComponent=w,an.StrictMode=n,an.Suspense=d,an.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,an.__COMPILER_RUNTIME={__proto__:null,c:function(X){return P.H.useMemoCache(X)}},an.cache=function(X){return function(){return X.apply(null,arguments)}},an.cloneElement=function(X,nt,_t){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Tt=E({},X.props),it=X.key,Ct=void 0;if(nt!=null)for(Ht in nt.ref!==void 0&&(Ct=void 0),nt.key!==void 0&&(it=""+nt.key),nt)!I.call(nt,Ht)||Ht==="key"||Ht==="__self"||Ht==="__source"||Ht==="ref"&&nt.ref===void 0||(Tt[Ht]=nt[Ht]);var Ht=arguments.length-2;if(Ht===1)Tt.children=_t;else if(1<Ht){for(var Qt=Array(Ht),qt=0;qt<Ht;qt++)Qt[qt]=arguments[qt+2];Tt.children=Qt}return F(X.type,it,void 0,void 0,Ct,Tt)},an.createContext=function(X){return X={$$typeof:u,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:o,_context:X},X},an.createElement=function(X,nt,_t){var Tt,it={},Ct=null;if(nt!=null)for(Tt in nt.key!==void 0&&(Ct=""+nt.key),nt)I.call(nt,Tt)&&Tt!=="key"&&Tt!=="__self"&&Tt!=="__source"&&(it[Tt]=nt[Tt]);var Ht=arguments.length-2;if(Ht===1)it.children=_t;else if(1<Ht){for(var Qt=Array(Ht),qt=0;qt<Ht;qt++)Qt[qt]=arguments[qt+2];it.children=Qt}if(X&&X.defaultProps)for(Tt in Ht=X.defaultProps,Ht)it[Tt]===void 0&&(it[Tt]=Ht[Tt]);return F(X,Ct,void 0,void 0,null,it)},an.createRef=function(){return{current:null}},an.forwardRef=function(X){return{$$typeof:h,render:X}},an.isValidElement=L,an.lazy=function(X){return{$$typeof:v,_payload:{_status:-1,_result:X},_init:W}},an.memo=function(X,nt){return{$$typeof:m,type:X,compare:nt===void 0?null:nt}},an.startTransition=function(X){var nt=P.T,_t={};P.T=_t;try{var Tt=X(),it=P.S;it!==null&&it(_t,Tt),typeof Tt=="object"&&Tt!==null&&typeof Tt.then=="function"&&Tt.then(lt,j)}catch(Ct){j(Ct)}finally{P.T=nt}},an.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},an.use=function(X){return P.H.use(X)},an.useActionState=function(X,nt,_t){return P.H.useActionState(X,nt,_t)},an.useCallback=function(X,nt){return P.H.useCallback(X,nt)},an.useContext=function(X){return P.H.useContext(X)},an.useDebugValue=function(){},an.useDeferredValue=function(X,nt){return P.H.useDeferredValue(X,nt)},an.useEffect=function(X,nt,_t){var Tt=P.H;if(typeof _t=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Tt.useEffect(X,nt)},an.useId=function(){return P.H.useId()},an.useImperativeHandle=function(X,nt,_t){return P.H.useImperativeHandle(X,nt,_t)},an.useInsertionEffect=function(X,nt){return P.H.useInsertionEffect(X,nt)},an.useLayoutEffect=function(X,nt){return P.H.useLayoutEffect(X,nt)},an.useMemo=function(X,nt){return P.H.useMemo(X,nt)},an.useOptimistic=function(X,nt){return P.H.useOptimistic(X,nt)},an.useReducer=function(X,nt,_t){return P.H.useReducer(X,nt,_t)},an.useRef=function(X){return P.H.useRef(X)},an.useState=function(X){return P.H.useState(X)},an.useSyncExternalStore=function(X,nt,_t){return P.H.useSyncExternalStore(X,nt,_t)},an.useTransition=function(){return P.H.useTransition()},an.version="19.1.0",an}var GS;function fd(){return GS||(GS=1,g_.exports=mC()),g_.exports}var kt=fd();const gC=ax(kt);var v_={exports:{}},Np={},y_={exports:{}},__={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VS;function vC(){return VS||(VS=1,function(r){function t(H,W){var j=H.length;H.push(W);t:for(;0<j;){var lt=j-1>>>1,X=H[lt];if(0<a(X,W))H[lt]=W,H[j]=X,j=lt;else break t}}function e(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var W=H[0],j=H.pop();if(j!==W){H[0]=j;t:for(var lt=0,X=H.length,nt=X>>>1;lt<nt;){var _t=2*(lt+1)-1,Tt=H[_t],it=_t+1,Ct=H[it];if(0>a(Tt,j))it<X&&0>a(Ct,Tt)?(H[lt]=Ct,H[it]=j,lt=it):(H[lt]=Tt,H[_t]=j,lt=_t);else if(it<X&&0>a(Ct,j))H[lt]=Ct,H[it]=j,lt=it;else break t}}return W}function a(H,W){var j=H.sortIndex-W.sortIndex;return j!==0?j:H.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],m=[],v=1,y=null,A=3,S=!1,E=!1,R=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var W=e(m);W!==null;){if(W.callback===null)n(m);else if(W.startTime<=H)n(m),W.sortIndex=W.expirationTime,t(d,W);else break;W=e(m)}}function P(H){if(R=!1,D(H),!E)if(e(d)!==null)E=!0,I||(I=!0,ct());else{var W=e(m);W!==null&&ut(P,W.startTime-H)}}var I=!1,F=-1,k=5,L=-1;function N(){return C?!0:!(r.unstable_now()-L<k)}function J(){if(C=!1,I){var H=r.unstable_now();L=H;var W=!0;try{t:{E=!1,R&&(R=!1,w(F),F=-1),S=!0;var j=A;try{e:{for(D(H),y=e(d);y!==null&&!(y.expirationTime>H&&N());){var lt=y.callback;if(typeof lt=="function"){y.callback=null,A=y.priorityLevel;var X=lt(y.expirationTime<=H);if(H=r.unstable_now(),typeof X=="function"){y.callback=X,D(H),W=!0;break e}y===e(d)&&n(d),D(H)}else n(d);y=e(d)}if(y!==null)W=!0;else{var nt=e(m);nt!==null&&ut(P,nt.startTime-H),W=!1}}break t}finally{y=null,A=j,S=!1}W=void 0}}finally{W?ct():I=!1}}}var ct;if(typeof U=="function")ct=function(){U(J)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,pt=at.port2;at.port1.onmessage=J,ct=function(){pt.postMessage(null)}}else ct=function(){M(J,0)};function ut(H,W){F=M(function(){H(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(H){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var j=A;A=W;try{return H()}finally{A=j}},r.unstable_requestPaint=function(){C=!0},r.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=A;A=H;try{return W()}finally{A=j}},r.unstable_scheduleCallback=function(H,W,j){var lt=r.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?lt+j:lt):j=lt,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=j+X,H={id:v++,callback:W,priorityLevel:H,startTime:j,expirationTime:X,sortIndex:-1},j>lt?(H.sortIndex=j,t(m,H),e(d)===null&&H===e(m)&&(R?(w(F),F=-1):R=!0,ut(P,j-lt))):(H.sortIndex=X,t(d,H),E||S||(E=!0,I||(I=!0,ct()))),H},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(H){var W=A;return function(){var j=A;A=W;try{return H.apply(this,arguments)}finally{A=j}}}}(__)),__}var XS;function yC(){return XS||(XS=1,y_.exports=vC()),y_.exports}var A_={exports:{}},Ra={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YS;function _C(){if(YS)return Ra;YS=1;var r=fd();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:m,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ra.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ra.createPortal=function(d,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,v)},Ra.flushSync=function(d){var m=u.T,v=n.p;try{if(u.T=null,n.p=2,d)return d()}finally{u.T=m,n.p=v,n.d.f()}},Ra.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(d,m))},Ra.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ra.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?n.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:A,fetchPriority:S}):v==="script"&&n.d.X(d,{crossOrigin:y,integrity:A,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ra.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);n.d.M(d,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(d)},Ra.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin);n.d.L(d,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ra.preloadModule=function(d,m){if(typeof d=="string")if(m){var v=h(m.as,m.crossOrigin);n.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(d)},Ra.requestFormReset=function(d){n.d.r(d)},Ra.unstable_batchedUpdates=function(d,m){return d(m)},Ra.useFormState=function(d,m,v){return u.H.useFormState(d,m,v)},Ra.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ra.version="19.1.0",Ra}var kS;function AC(){if(kS)return A_.exports;kS=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),A_.exports=_C(),A_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qS;function xC(){if(qS)return Np;qS=1;var r=yC(),t=fd(),e=AC();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,f=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(f=s.return),i=s.return;while(i)}return s.tag===3?f:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(n(188))}function d(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(n(188));return s!==i?null:i}for(var f=i,p=s;;){var _=f.return;if(_===null)break;var b=_.alternate;if(b===null){if(p=_.return,p!==null){f=p;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===f)return h(_),i;if(b===p)return h(_),s;b=b.sibling}throw Error(n(188))}if(f.return!==p.return)f=_,p=b;else{for(var O=!1,G=_.child;G;){if(G===f){O=!0,f=_,p=b;break}if(G===p){O=!0,p=_,f=b;break}G=G.sibling}if(!O){for(G=b.child;G;){if(G===f){O=!0,f=b,p=_;break}if(G===p){O=!0,p=b,f=_;break}G=G.sibling}if(!O)throw Error(n(189))}}if(f.alternate!==p)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),U=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ct(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var at=Symbol.for("react.client.reference");function pt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===at?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case C:return"Profiler";case R:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList";case L:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case U:return(i.displayName||"Context")+".Provider";case w:return(i._context.displayName||"Context")+".Consumer";case D:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return s=i.displayName||null,s!==null?s:pt(i.type)||"Memo";case k:s=i._payload,i=i._init;try{return pt(i(s))}catch{}}return null}var ut=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j={pending:!1,data:null,method:null,action:null},lt=[],X=-1;function nt(i){return{current:i}}function _t(i){0>X||(i.current=lt[X],lt[X]=null,X--)}function Tt(i,s){X++,lt[X]=i.current,i.current=s}var it=nt(null),Ct=nt(null),Ht=nt(null),Qt=nt(null);function qt(i,s){switch(Tt(Ht,s),Tt(Ct,i),Tt(it,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?hS(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=hS(s),i=dS(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}_t(it),Tt(it,i)}function Ee(){_t(it),_t(Ct),_t(Ht)}function fe(i){i.memoizedState!==null&&Tt(Qt,i);var s=it.current,f=dS(s,i.type);s!==f&&(Tt(Ct,i),Tt(it,f))}function _e(i){Ct.current===i&&(_t(it),_t(Ct)),Qt.current===i&&(_t(Qt),Cp._currentValue=j)}var De=Object.prototype.hasOwnProperty,Ae=r.unstable_scheduleCallback,K=r.unstable_cancelCallback,Wt=r.unstable_shouldYield,Xt=r.unstable_requestPaint,Gt=r.unstable_now,Dt=r.unstable_getCurrentPriorityLevel,se=r.unstable_ImmediatePriority,Vt=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,Oe=r.unstable_LowPriority,Q=r.unstable_IdlePriority,z=r.log,mt=r.unstable_setDisableYieldValue,Rt=null,wt=null;function Bt(i){if(typeof z=="function"&&mt(i),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode(Rt,i)}catch{}}var re=Math.clz32?Math.clz32:ve,te=Math.log,ge=Math.LN2;function ve(i){return i>>>=0,i===0?32:31-(te(i)/ge|0)|0}var Lt=256,ee=4194304;function ye(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function et(i,s,f){var p=i.pendingLanes;if(p===0)return 0;var _=0,b=i.suspendedLanes,O=i.pingedLanes;i=i.warmLanes;var G=p&134217727;return G!==0?(p=G&~b,p!==0?_=ye(p):(O&=G,O!==0?_=ye(O):f||(f=G&~i,f!==0&&(_=ye(f))))):(G=p&~b,G!==0?_=ye(G):O!==0?_=ye(O):f||(f=p&~i,f!==0&&(_=ye(f)))),_===0?0:s!==0&&s!==_&&(s&b)===0&&(b=_&-_,f=s&-s,b>=f||b===32&&(f&4194048)!==0)?s:_}function gt(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Jt(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $(){var i=Lt;return Lt<<=1,(Lt&4194048)===0&&(Lt=256),i}function jt(){var i=ee;return ee<<=1,(ee&62914560)===0&&(ee=4194304),i}function zt(i){for(var s=[],f=0;31>f;f++)s.push(i);return s}function ae(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Kt(i,s,f,p,_,b){var O=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var G=i.entanglements,Z=i.expirationTimes,yt=i.hiddenUpdates;for(f=O&~f;0<f;){var Nt=31-re(f),Ft=1<<Nt;G[Nt]=0,Z[Nt]=-1;var xt=yt[Nt];if(xt!==null)for(yt[Nt]=null,Nt=0;Nt<xt.length;Nt++){var bt=xt[Nt];bt!==null&&(bt.lane&=-536870913)}f&=~Ft}p!==0&&It(i,p,0),b!==0&&_===0&&i.tag!==0&&(i.suspendedLanes|=b&~(O&~s))}function It(i,s,f){i.pendingLanes|=s,i.suspendedLanes&=~s;var p=31-re(s);i.entangledLanes|=s,i.entanglements[p]=i.entanglements[p]|1073741824|f&4194090}function le(i,s){var f=i.entangledLanes|=s;for(i=i.entanglements;f;){var p=31-re(f),_=1<<p;_&s|i[p]&s&&(i[p]|=s),f&=~_}}function Me(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function nn(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function je(){var i=W.p;return i!==0?i:(i=window.event,i===void 0?32:US(i.type))}function di(i,s){var f=W.p;try{return W.p=i,s()}finally{W.p=f}}var Kn=Math.random().toString(36).slice(2),pi="__reactFiber$"+Kn,xi="__reactProps$"+Kn,Wi="__reactContainer$"+Kn,_a="__reactEvents$"+Kn,Gc="__reactListeners$"+Kn,_s="__reactHandles$"+Kn,ra="__reactResources$"+Kn,As="__reactMarker$"+Kn;function Dn(i){delete i[pi],delete i[xi],delete i[_a],delete i[Gc],delete i[_s]}function xs(i){var s=i[pi];if(s)return s;for(var f=i.parentNode;f;){if(s=f[Wi]||f[pi]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(i=vS(i);i!==null;){if(f=i[pi])return f;i=vS(i)}return s}i=f,f=i.parentNode}return null}function Ss(i){if(i=i[pi]||i[Wi]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Zr(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function gr(i){var s=i[ra];return s||(s=i[ra]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function mi(i){i[As]=!0}var Bl=new Set,wl={};function Ms(i,s){V(i,s),V(i+"Capture",s)}function V(i,s){for(wl[i]=s,i=0;i<s.length;i++)Bl.add(s[i])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),St={},Mt={};function ht(i){return De.call(Mt,i)?!0:De.call(St,i)?!1:ot.test(i)?Mt[i]=!0:(St[i]=!0,!1)}function Yt(i,s,f){if(ht(s))if(f===null)i.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var p=s.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+f)}}function ne(i,s,f){if(f===null)i.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+f)}}function he(i,s,f,p){if(p===null)i.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(s,f,""+p)}}var pe,Le;function Re(i){if(pe===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);pe=s&&s[1]||"",Le=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+i+Le}var be=!1;function We(i,s){if(!i||be)return"";be=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(s){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(bt){var xt=bt}Reflect.construct(i,[],Ft)}else{try{Ft.call()}catch(bt){xt=bt}i.call(Ft.prototype)}}else{try{throw Error()}catch(bt){xt=bt}(Ft=i())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(bt){if(bt&&xt&&typeof bt.stack=="string")return[bt.stack,xt.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),O=b[0],G=b[1];if(O&&G){var Z=O.split(`
`),yt=G.split(`
`);for(_=p=0;p<Z.length&&!Z[p].includes("DetermineComponentFrameRoot");)p++;for(;_<yt.length&&!yt[_].includes("DetermineComponentFrameRoot");)_++;if(p===Z.length||_===yt.length)for(p=Z.length-1,_=yt.length-1;1<=p&&0<=_&&Z[p]!==yt[_];)_--;for(;1<=p&&0<=_;p--,_--)if(Z[p]!==yt[_]){if(p!==1||_!==1)do if(p--,_--,0>_||Z[p]!==yt[_]){var Nt=`
`+Z[p].replace(" at new "," at ");return i.displayName&&Nt.includes("<anonymous>")&&(Nt=Nt.replace("<anonymous>",i.displayName)),Nt}while(1<=p&&0<=_);break}}}finally{be=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?Re(f):""}function xn(i){switch(i.tag){case 26:case 27:case 5:return Re(i.type);case 16:return Re("Lazy");case 13:return Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return We(i.type,!1);case 11:return We(i.type.render,!1);case 1:return We(i.type,!0);case 31:return Re("Activity");default:return""}}function Fn(i){try{var s="";do s+=xn(i),i=i.return;while(i);return s}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function $e(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Sn(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Be(i){var s=Sn(i)?"checked":"value",f=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),p=""+i[s];if(!i.hasOwnProperty(s)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,b=f.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return _.call(this)},set:function(O){p=""+O,b.call(this,O)}}),Object.defineProperty(i,s,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(O){p=""+O},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Bn(i){i._valueTracker||(i._valueTracker=Be(i))}function ln(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var f=s.getValue(),p="";return i&&(p=Sn(i)?i.checked?"true":"false":i.value),i=p,i!==f?(s.setValue(i),!0):!1}function Si(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Vs=/[\n"\\]/g;function On(i){return i.replace(Vs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Xs(i,s,f,p,_,b,O,G){i.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.type=O:i.removeAttribute("type"),s!=null?O==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+$e(s)):i.value!==""+$e(s)&&(i.value=""+$e(s)):O!=="submit"&&O!=="reset"||i.removeAttribute("value"),s!=null?Hi(i,O,$e(s)):f!=null?Hi(i,O,$e(f)):p!=null&&i.removeAttribute("value"),_==null&&b!=null&&(i.defaultChecked=!!b),_!=null&&(i.checked=_&&typeof _!="function"&&typeof _!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?i.name=""+$e(G):i.removeAttribute("name")}function Un(i,s,f,p,_,b,O,G){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),s!=null||f!=null){if(!(b!=="submit"&&b!=="reset"||s!=null))return;f=f!=null?""+$e(f):"",s=s!=null?""+$e(s):f,G||s===i.value||(i.value=s),i.defaultValue=s}p=p??_,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=G?i.checked:!!p,i.defaultChecked=!!p,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(i.name=O)}function Hi(i,s,f){s==="number"&&Si(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function gi(i,s,f,p){if(i=i.options,s){s={};for(var _=0;_<f.length;_++)s["$"+f[_]]=!0;for(f=0;f<i.length;f++)_=s.hasOwnProperty("$"+i[f].value),i[f].selected!==_&&(i[f].selected=_),_&&p&&(i[f].defaultSelected=!0)}else{for(f=""+$e(f),s=null,_=0;_<i.length;_++){if(i[_].value===f){i[_].selected=!0,p&&(i[_].defaultSelected=!0);return}s!==null||i[_].disabled||(s=i[_])}s!==null&&(s.selected=!0)}}function Bi(i,s,f){if(s!=null&&(s=""+$e(s),s!==i.value&&(i.value=s),f==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=f!=null?""+$e(f):""}function wi(i,s,f,p){if(s==null){if(p!=null){if(f!=null)throw Error(n(92));if(ut(p)){if(1<p.length)throw Error(n(93));p=p[0]}f=p}f==null&&(f=""),s=f}f=$e(s),i.defaultValue=f,p=i.textContent,p===f&&p!==""&&p!==null&&(i.value=p)}function oa(i,s){if(s){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=s;return}}i.textContent=s}var Ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vc(i,s,f){var p=s.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":p?i.setProperty(s,f):typeof f!="number"||f===0||Ys.has(s)?s==="float"?i.cssFloat=f:i[s]=(""+f).trim():i[s]=f+"px"}function Xc(i,s,f){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||s!=null&&s.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var _ in s)p=s[_],s.hasOwnProperty(_)&&f[_]!==p&&Vc(i,_,p)}else for(var b in s)s.hasOwnProperty(b)&&Vc(i,b,s[b])}function Sf(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _d=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Yc(i){return Dm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Mf=null;function bf(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var $r=null,Vo=null;function Ad(i){var s=Ss(i);if(s&&(i=s.stateNode)){var f=i[xi]||null;t:switch(i=s.stateNode,s.type){case"input":if(Xs(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),s=f.name,f.type==="radio"&&s!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+On(""+s)+'"][type="radio"]'),s=0;s<f.length;s++){var p=f[s];if(p!==i&&p.form===i.form){var _=p[xi]||null;if(!_)throw Error(n(90));Xs(p,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(s=0;s<f.length;s++)p=f[s],p.form===i.form&&ln(p)}break t;case"textarea":Bi(i,f.value,f.defaultValue);break t;case"select":s=f.value,s!=null&&gi(i,!!f.multiple,s,!1)}}}var kc=!1;function xd(i,s,f){if(kc)return i(s,f);kc=!0;try{var p=i(s);return p}finally{if(kc=!1,($r!==null||Vo!==null)&&(rr(),$r&&(s=$r,i=Vo,Vo=$r=null,Ad(s),i)))for(s=0;s<i.length;s++)Ad(i[s])}}function Dl(i,s){var f=i.stateNode;if(f===null)return null;var p=f[xi]||null;if(p===null)return null;f=p[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break t;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(n(231,s,typeof f));return f}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(ks)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{qc=!1}var vr=null,Sd=null,Ef=null;function Md(){if(Ef)return Ef;var i,s=Sd,f=s.length,p,_="value"in vr?vr.value:vr.textContent,b=_.length;for(i=0;i<f&&s[i]===_[i];i++);var O=f-i;for(p=1;p<=O&&s[f-p]===_[b-p];p++);return Ef=_.slice(i,1<p?1-p:void 0)}function to(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Nl(){return!0}function Jc(){return!1}function la(i){function s(f,p,_,b,O){this._reactName=f,this._targetInst=_,this.type=p,this.nativeEvent=b,this.target=O,this.currentTarget=null;for(var G in i)i.hasOwnProperty(G)&&(f=i[G],this[G]=f?f(b):b[G]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Nl:Jc,this.isPropagationStopped=Jc,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),s}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=la(eo),Ll=v({},eo,{view:0,detail:0}),Um=la(Ll),yr,Il,Pl,Hl=v({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Pl&&(Pl&&i.type==="mousemove"?(yr=i.screenX-Pl.screenX,Il=i.screenY-Pl.screenY):Il=yr=0,Pl=i),yr)},movementY:function(i){return"movementY"in i?i.movementY:Il}}),bd=la(Hl),Nm=v({},Hl,{dataTransfer:0}),Ny=la(Nm),zi=v({},Ll,{relatedTarget:0}),Tf=la(zi),Om=v({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),Lm=la(Om),Im=v({},eo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Pm=la(Im),Kc=v({},eo,{data:0}),Cf=la(Kc),Hm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ed(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Fm[i])?!!s[i]:!1}function jc(){return Ed}var Gm=v({},Ll,{key:function(i){if(i.key){var s=Hm[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=to(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?zm[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jc,charCode:function(i){return i.type==="keypress"?to(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?to(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Td=la(Gm),Cd=v({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rf=la(Cd),Vm=v({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jc}),Rd=la(Vm),Xm=v({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_r=la(Xm),Bd=v({},Hl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Oy=la(Bd),Ym=v({},eo,{newState:0,oldState:0}),no=la(Ym),Ar=[9,13,27,32],Wc=ks&&"CompositionEvent"in window,Xo=null;ks&&"documentMode"in document&&(Xo=document.documentMode);var Qc=ks&&"TextEvent"in window&&!Xo,Zc=ks&&(!Wc||Xo&&8<Xo&&11>=Xo),io=" ",Fi=!1;function $c(i,s){switch(i){case"keyup":return Ar.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wd(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ao=!1;function tu(i,s){switch(i){case"compositionend":return wd(s);case"keypress":return s.which!==32?null:(Fi=!0,io);case"textInput":return i=s.data,i===io&&Fi?null:i;default:return null}}function Dd(i,s){if(ao)return i==="compositionend"||!Wc&&$c(i,s)?(i=Md(),Ef=Sd=vr=null,ao=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Zc&&s.locale!=="ko"?null:s.data;default:return null}}var Bf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ud(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Bf[i.type]:s==="textarea"}function Aa(i,s,f,p){$r?Vo?Vo.push(p):Vo=[p]:$r=p,s=Xg(s,"onChange"),0<s.length&&(f=new Ol("onChange","change",null,f,p),i.push({event:f,listeners:s}))}var zl=null,Yo=null;function km(i){oS(i,0)}function eu(i){var s=Zr(i);if(ln(s))return i}function wf(i,s){if(i==="change")return s}var Df=!1;if(ks){var Uf;if(ks){var Fl="oninput"in document;if(!Fl){var Gl=document.createElement("div");Gl.setAttribute("oninput","return;"),Fl=typeof Gl.oninput=="function"}Uf=Fl}else Uf=!1;Df=Uf&&(!document.documentMode||9<document.documentMode)}function jn(){zl&&(zl.detachEvent("onpropertychange",qm),Yo=zl=null)}function qm(i){if(i.propertyName==="value"&&eu(Yo)){var s=[];Aa(s,Yo,i,bf(i)),xd(km,s)}}function Ly(i,s,f){i==="focusin"?(jn(),zl=s,Yo=f,zl.attachEvent("onpropertychange",qm)):i==="focusout"&&jn()}function Jm(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return eu(Yo)}function nu(i,s){if(i==="click")return eu(s)}function so(i,s){if(i==="input"||i==="change")return eu(s)}function Km(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var xa=typeof Object.is=="function"?Object.is:Km;function bs(i,s){if(xa(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var f=Object.keys(i),p=Object.keys(s);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var _=f[p];if(!De.call(s,_)||!xa(i[_],s[_]))return!1}return!0}function Sa(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Nd(i,s){var f=Sa(i);i=0;for(var p;f;){if(f.nodeType===3){if(p=i+f.textContent.length,i<=s&&p>=s)return{node:f,offset:s-i};i=p}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=Sa(f)}}function Od(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Od(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Ld(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Si(i.document);s instanceof i.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)i=s.contentWindow;else break;s=Si(i.document)}return s}function iu(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var Id=ks&&"documentMode"in document&&11>=document.documentMode,xr=null,Nf=null,au=null,Of=!1;function Pd(i,s,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Of||xr==null||xr!==Si(p)||(p=xr,"selectionStart"in p&&iu(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),au&&bs(au,p)||(au=p,p=Xg(Nf,"onSelect"),0<p.length&&(s=new Ol("onSelect","select",null,s,f),i.push({event:s,listeners:p}),s.target=xr)))}function Gi(i,s){var f={};return f[i.toLowerCase()]=s.toLowerCase(),f["Webkit"+i]="webkit"+s,f["Moz"+i]="moz"+s,f}var ro={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},Lf={},jm={};ks&&(jm=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function Sr(i){if(Lf[i])return Lf[i];if(!ro[i])return i;var s=ro[i],f;for(f in s)if(s.hasOwnProperty(f)&&f in jm)return Lf[i]=s[f];return i}var ca=Sr("animationend"),Hd=Sr("animationiteration"),Ma=Sr("animationstart"),Wm=Sr("transitionrun"),Mr=Sr("transitionstart"),Vl=Sr("transitioncancel"),br=Sr("transitionend"),If=new Map,su="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");su.push("scrollEnd");function Di(i,s){If.set(i,s),Ms(s,[i])}var zd=new WeakMap;function Vi(i,s){if(typeof i=="object"&&i!==null){var f=zd.get(i);return f!==void 0?f:(s={value:i,source:s,stack:Fn(s)},zd.set(i,s),s)}return{value:i,source:s,stack:Fn(s)}}var Qi=[],ns=0,Pf=0;function ru(){for(var i=ns,s=Pf=ns=0;s<i;){var f=Qi[s];Qi[s++]=null;var p=Qi[s];Qi[s++]=null;var _=Qi[s];Qi[s++]=null;var b=Qi[s];if(Qi[s++]=null,p!==null&&_!==null){var O=p.pending;O===null?_.next=_:(_.next=O.next,O.next=_),p.pending=_}b!==0&&Fd(f,_,b)}}function oo(i,s,f,p){Qi[ns++]=i,Qi[ns++]=s,Qi[ns++]=f,Qi[ns++]=p,Pf|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function Hf(i,s,f,p){return oo(i,s,f,p),Xl(i)}function Er(i,s){return oo(i,null,null,s),Xl(i)}function Fd(i,s,f){i.lanes|=f;var p=i.alternate;p!==null&&(p.lanes|=f);for(var _=!1,b=i.return;b!==null;)b.childLanes|=f,p=b.alternate,p!==null&&(p.childLanes|=f),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(_=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,_&&s!==null&&(_=31-re(f),i=b.hiddenUpdates,p=i[_],p===null?i[_]=[s]:p.push(s),s.lane=f|536870912),b):null}function Xl(i){if(50<sr)throw sr=0,ll=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var lo={};function Gd(i,s,f,p){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(i,s,f,p){return new Gd(i,s,f,p)}function ou(i){return i=i.prototype,!(!i||!i.isReactComponent)}function si(i,s){var f=i.alternate;return f===null?(f=ba(i.tag,s,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=s,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,s=i.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function Vd(i,s){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,s=f.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Ui(i,s,f,p,_,b){var O=0;if(p=i,typeof i=="function")ou(i)&&(O=1);else if(typeof i=="string")O=tC(i,f,it.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case L:return i=ba(31,f,s,_),i.elementType=L,i.lanes=b,i;case E:return co(f.children,_,b,s);case R:O=8,_|=24;break;case C:return i=ba(12,f,s,_|2),i.elementType=C,i.lanes=b,i;case P:return i=ba(13,f,s,_),i.elementType=P,i.lanes=b,i;case I:return i=ba(19,f,s,_),i.elementType=I,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case M:case U:O=10;break t;case w:O=9;break t;case D:O=11;break t;case F:O=14;break t;case k:O=16,p=null;break t}O=29,f=Error(n(130,i===null?"null":typeof i,"")),p=null}return s=ba(O,f,s,_),s.elementType=i,s.type=p,s.lanes=b,s}function co(i,s,f,p){return i=ba(7,i,p,s),i.lanes=f,i}function lu(i,s,f){return i=ba(6,i,null,s),i.lanes=f,i}function zf(i,s,f){return s=ba(4,i.children!==null?i.children:[],i.key,s),s.lanes=f,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Yl=[],Ea=0,cu=null,kl=0,Xi=[],Ia=0,uo=null,qs=1,Js="";function Tr(i,s){Yl[Ea++]=kl,Yl[Ea++]=cu,cu=i,kl=s}function Ff(i,s,f){Xi[Ia++]=qs,Xi[Ia++]=Js,Xi[Ia++]=uo,uo=i;var p=qs;i=Js;var _=32-re(p)-1;p&=~(1<<_),f+=1;var b=32-re(s)+_;if(30<b){var O=_-_%5;b=(p&(1<<O)-1).toString(32),p>>=O,_-=O,qs=1<<32-re(s)+_|f<<_|p,Js=b+i}else qs=1<<b|f<<_|p,Js=i}function Xd(i){i.return!==null&&(Tr(i,1),Ff(i,1,0))}function Yd(i){for(;i===cu;)cu=Yl[--Ea],Yl[Ea]=null,kl=Yl[--Ea],Yl[Ea]=null;for(;i===uo;)uo=Xi[--Ia],Xi[Ia]=null,Js=Xi[--Ia],Xi[Ia]=null,qs=Xi[--Ia],Xi[Ia]=null}var ua=null,Wn=null,yn=!1,is=null,Pa=!1,Gf=Error(n(519));function fo(i){var s=Error(n(418,""));throw ko(Vi(s,i)),Gf}function Qm(i){var s=i.stateNode,f=i.type,p=i.memoizedProps;switch(s[pi]=i,s[xi]=p,f){case"dialog":fn("cancel",s),fn("close",s);break;case"iframe":case"object":case"embed":fn("load",s);break;case"video":case"audio":for(f=0;f<xp.length;f++)fn(xp[f],s);break;case"source":fn("error",s);break;case"img":case"image":case"link":fn("error",s),fn("load",s);break;case"details":fn("toggle",s);break;case"input":fn("invalid",s),Un(s,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Bn(s);break;case"select":fn("invalid",s);break;case"textarea":fn("invalid",s),wi(s,p.value,p.defaultValue,p.children),Bn(s)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||s.textContent===""+f||p.suppressHydrationWarning===!0||fS(s.textContent,f)?(p.popover!=null&&(fn("beforetoggle",s),fn("toggle",s)),p.onScroll!=null&&fn("scroll",s),p.onScrollEnd!=null&&fn("scrollend",s),p.onClick!=null&&(s.onclick=Yg),s=!0):s=!1,s||fo(i)}function kd(i){for(ua=i.return;ua;)switch(ua.tag){case 5:case 13:Pa=!1;return;case 27:case 3:Pa=!0;return;default:ua=ua.return}}function Es(i){if(i!==ua)return!1;if(!yn)return kd(i),yn=!0,!1;var s=i.tag,f;if((f=s!==3&&s!==27)&&((f=s===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||e_(i.type,i.memoizedProps)),f=!f),f&&Wn&&fo(i),kd(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));t:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(f=i.data,f==="/$"){if(s===0){Wn=Fr(i.nextSibling);break t}s--}else f!=="$"&&f!=="$!"&&f!=="$?"||s++;i=i.nextSibling}Wn=null}}else s===27?(s=Wn,gc(i.type)?(i=s_,s_=null,Wn=i):Wn=s):Wn=ua?Fr(i.stateNode.nextSibling):null;return!0}function ql(){Wn=ua=null,yn=!1}function En(){var i=is;return i!==null&&(Ie===null?Ie=i:Ie.push.apply(Ie,i),is=null),i}function ko(i){is===null?is=[i]:is.push(i)}var qd=nt(null),ho=null,Cr=null;function po(i,s,f){Tt(qd,s._currentValue),s._currentValue=f}function Rr(i){i._currentValue=qd.current,_t(qd)}function Jd(i,s,f){for(;i!==null;){var p=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),i===f)break;i=i.return}}function uu(i,s,f,p){var _=i.child;for(_!==null&&(_.return=i);_!==null;){var b=_.dependencies;if(b!==null){var O=_.child;b=b.firstContext;t:for(;b!==null;){var G=b;b=_;for(var Z=0;Z<s.length;Z++)if(G.context===s[Z]){b.lanes|=f,G=b.alternate,G!==null&&(G.lanes|=f),Jd(b.return,f,i),p||(O=null);break t}b=G.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(n(341));O.lanes|=f,b=O.alternate,b!==null&&(b.lanes|=f),Jd(O,f,i),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===i){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function as(i,s,f,p){i=null;for(var _=s,b=!1;_!==null;){if(!b){if((_.flags&524288)!==0)b=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(n(387));if(O=O.memoizedProps,O!==null){var G=_.type;xa(_.pendingProps.value,O.value)||(i!==null?i.push(G):i=[G])}}else if(_===Qt.current){if(O=_.alternate,O===null)throw Error(n(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(i!==null?i.push(Cp):i=[Cp])}_=_.return}i!==null&&uu(s,i,f,p),s.flags|=262144}function fu(i){for(i=i.firstContext;i!==null;){if(!xa(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ks(i){ho=i,Cr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Zn(i){return Vf(ho,i)}function hu(i,s){return ho===null&&Ks(i),Vf(i,s)}function Vf(i,s){var f=s._currentValue;if(s={context:s,memoizedValue:f,next:null},Cr===null){if(i===null)throw Error(n(308));Cr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Cr=Cr.next=s;return f}var Kd=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(f,p){i.push(p)}};this.abort=function(){s.aborted=!0,i.forEach(function(f){return f()})}},Iy=r.unstable_scheduleCallback,Zm=r.unstable_NormalPriority,vi={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new Kd,data:new Map,refCount:0}}function Jl(i){i.refCount--,i.refCount===0&&Iy(Zm,function(){i.controller.abort()})}var Kl=null,du=0,ke=0,jl=null;function Ha(i,s){if(Kl===null){var f=Kl=[];du=0,ke=qy(),jl={status:"pending",value:void 0,then:function(p){f.push(p)}}}return du++,s.then(Yf,Yf),s}function Yf(){if(--du===0&&Kl!==null){jl!==null&&(jl.status="fulfilled");var i=Kl;Kl=null,ke=0,jl=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function Py(i,s){var f=[],p={status:"pending",value:null,reason:null,then:function(_){f.push(_)}};return i.then(function(){p.status="fulfilled",p.value=s;for(var _=0;_<f.length;_++)(0,f[_])(s)},function(_){for(p.status="rejected",p.reason=_,_=0;_<f.length;_++)(0,f[_])(void 0)}),p}var pu=H.S;H.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Ha(i,s),pu!==null&&pu(i,s)};var ss=nt(null);function mo(){var i=ss.current;return i!==null?i:Xe.pooledCache}function mu(i,s){s===null?Tt(ss,ss.current):Tt(ss,s.pool)}function kf(){var i=mo();return i===null?null:{parent:vi._currentValue,pool:i}}var gu=Error(n(460)),jd=Error(n(474)),Ts=Error(n(542)),vu={then:function(){}};function qf(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Wl(){}function Jf(i,s,f){switch(f=i[f],f===void 0?i.push(s):f!==s&&(s.then(Wl,Wl),s=f),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,$m(i),i;default:if(typeof s.status=="string")s.then(Wl,Wl);else{if(i=Xe,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(p){if(s.status==="pending"){var _=s;_.status="fulfilled",_.value=p}},function(p){if(s.status==="pending"){var _=s;_.status="rejected",_.reason=p}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,$m(i),i}throw rs=s,gu}}var rs=null;function Wd(){if(rs===null)throw Error(n(459));var i=rs;return rs=null,i}function $m(i){if(i===gu||i===Ts)throw Error(n(483))}var Br=!1;function Qd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fe(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function js(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function wr(i,s,f){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Tn&2)!==0){var _=p.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),p.pending=s,s=Xl(i),Fd(i,null,f),s}return oo(i,p,s,f),Xl(i)}function qo(i,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194048)!==0)){var p=s.lanes;p&=i.pendingLanes,f|=p,s.lanes=f,le(i,f)}}function Ql(i,s){var f=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var _=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var O={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};b===null?_=b=O:b=b.next=O,f=f.next}while(f!==null);b===null?_=b=s:b=b.next=s}else _=b=s;f={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=s:i.next=s,f.lastBaseUpdate=s}var Zd=!1;function yu(){if(Zd){var i=jl;if(i!==null)throw i}}function Zl(i,s,f,p){Zd=!1;var _=i.updateQueue;Br=!1;var b=_.firstBaseUpdate,O=_.lastBaseUpdate,G=_.shared.pending;if(G!==null){_.shared.pending=null;var Z=G,yt=Z.next;Z.next=null,O===null?b=yt:O.next=yt,O=Z;var Nt=i.alternate;Nt!==null&&(Nt=Nt.updateQueue,G=Nt.lastBaseUpdate,G!==O&&(G===null?Nt.firstBaseUpdate=yt:G.next=yt,Nt.lastBaseUpdate=Z))}if(b!==null){var Ft=_.baseState;O=0,Nt=yt=Z=null,G=b;do{var xt=G.lane&-536870913,bt=xt!==G.lane;if(bt?(we&xt)===xt:(p&xt)===xt){xt!==0&&xt===ke&&(Zd=!0),Nt!==null&&(Nt=Nt.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});t:{var Ve=i,He=G;xt=s;var kn=f;switch(He.tag){case 1:if(Ve=He.payload,typeof Ve=="function"){Ft=Ve.call(kn,Ft,xt);break t}Ft=Ve;break t;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=He.payload,xt=typeof Ve=="function"?Ve.call(kn,Ft,xt):Ve,xt==null)break t;Ft=v({},Ft,xt);break t;case 2:Br=!0}}xt=G.callback,xt!==null&&(i.flags|=64,bt&&(i.flags|=8192),bt=_.callbacks,bt===null?_.callbacks=[xt]:bt.push(xt))}else bt={lane:xt,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Nt===null?(yt=Nt=bt,Z=Ft):Nt=Nt.next=bt,O|=xt;if(G=G.next,G===null){if(G=_.shared.pending,G===null)break;bt=G,G=bt.next,bt.next=null,_.lastBaseUpdate=bt,_.shared.pending=null}}while(!0);Nt===null&&(Z=Ft),_.baseState=Z,_.firstBaseUpdate=yt,_.lastBaseUpdate=Nt,b===null&&(_.shared.lanes=0),Os|=O,i.lanes=O,i.memoizedState=Ft}}function $l(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function tg(i,s){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)$l(f[i],s)}var tc=nt(null),Kf=nt(0);function eg(i,s){i=hs,Tt(Kf,i),Tt(tc,s),hs=i|s.baseLanes}function $d(){Tt(Kf,hs),Tt(tc,tc.current)}function _u(){hs=Kf.current,_t(tc),_t(Kf)}var Dr=0,qe=null,wn=null,yi=null,jf=!1,go=!1,fa=!1,Mi=0,os=0,Yi=null,ng=0;function ri(){throw Error(n(321))}function Zi(i,s){if(s===null)return!1;for(var f=0;f<s.length&&f<i.length;f++)if(!xa(i[f],s[f]))return!1;return!0}function Ur(i,s,f,p,_,b){return Dr=b,qe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=i===null||i.memoizedState===null?ah:mp,fa=!1,b=f(p,_),fa=!1,go&&(b=ag(s,f,p,_)),ig(i),b}function ig(i){H.H=Su;var s=wn!==null&&wn.next!==null;if(Dr=0,yi=wn=qe=null,jf=!1,os=0,Yi=null,s)throw Error(n(300));i===null||Ni||(i=i.dependencies,i!==null&&fu(i)&&(Ni=!0))}function ag(i,s,f,p){qe=i;var _=0;do{if(go&&(Yi=null),os=0,go=!1,25<=_)throw Error(n(301));if(_+=1,yi=wn=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}H.H=wg,b=s(f,p)}while(go);return b}function Hy(){var i=H.H,s=i.useState()[0];return s=typeof s.then=="function"?Cs(s):s,i=i.useState()[0],(wn!==null?wn.memoizedState:null)!==i&&(qe.flags|=1024),s}function tp(){var i=Mi!==0;return Mi=0,i}function Wf(i,s,f){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f}function ep(i){if(jf){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}jf=!1}Dr=0,yi=wn=qe=null,go=!1,os=Mi=0,Yi=null}function ha(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?qe.memoizedState=yi=i:yi=yi.next=i,yi}function _i(){if(wn===null){var i=qe.alternate;i=i!==null?i.memoizedState:null}else i=wn.next;var s=yi===null?qe.memoizedState:yi.next;if(s!==null)yi=s,wn=i;else{if(i===null)throw qe.alternate===null?Error(n(467)):Error(n(310));wn=i,i={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},yi===null?qe.memoizedState=yi=i:yi=yi.next=i}return yi}function vo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cs(i){var s=os;return os+=1,Yi===null&&(Yi=[]),i=Jf(Yi,i,s),s=qe,(yi===null?s.memoizedState:yi.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?ah:mp),i}function Qf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Cs(i);if(i.$$typeof===U)return Zn(i)}throw Error(n(438,String(i)))}function np(i){var s=null,f=qe.updateQueue;if(f!==null&&(s=f.memoCache),s==null){var p=qe.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(s={data:p.data.map(function(_){return _.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),f===null&&(f=vo(),qe.updateQueue=f),f.memoCache=s,f=s.data[s.index],f===void 0)for(f=s.data[s.index]=Array(i),p=0;p<i;p++)f[p]=N;return s.index++,f}function Nr(i,s){return typeof s=="function"?s(i):s}function yo(i){var s=_i();return ip(s,wn,i)}function ip(i,s,f){var p=i.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=f;var _=i.baseQueue,b=p.pending;if(b!==null){if(_!==null){var O=_.next;_.next=b.next,b.next=O}s.baseQueue=_=b,p.pending=null}if(b=i.baseState,_===null)i.memoizedState=b;else{s=_.next;var G=O=null,Z=null,yt=s,Nt=!1;do{var Ft=yt.lane&-536870913;if(Ft!==yt.lane?(we&Ft)===Ft:(Dr&Ft)===Ft){var xt=yt.revertLane;if(xt===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null}),Ft===ke&&(Nt=!0);else if((Dr&xt)===xt){yt=yt.next,xt===ke&&(Nt=!0);continue}else Ft={lane:0,revertLane:yt.revertLane,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null},Z===null?(G=Z=Ft,O=b):Z=Z.next=Ft,qe.lanes|=xt,Os|=xt;Ft=yt.action,fa&&f(b,Ft),b=yt.hasEagerState?yt.eagerState:f(b,Ft)}else xt={lane:Ft,revertLane:yt.revertLane,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null},Z===null?(G=Z=xt,O=b):Z=Z.next=xt,qe.lanes|=Ft,Os|=Ft;yt=yt.next}while(yt!==null&&yt!==s);if(Z===null?O=b:Z.next=G,!xa(b,i.memoizedState)&&(Ni=!0,Nt&&(f=jl,f!==null)))throw f;i.memoizedState=b,i.baseState=O,i.baseQueue=Z,p.lastRenderedState=b}return _===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function ap(i){var s=_i(),f=s.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=i;var p=f.dispatch,_=f.pending,b=s.memoizedState;if(_!==null){f.pending=null;var O=_=_.next;do b=i(b,O.action),O=O.next;while(O!==_);xa(b,s.memoizedState)||(Ni=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),f.lastRenderedState=b}return[b,p]}function sg(i,s,f){var p=qe,_=_i(),b=yn;if(b){if(f===void 0)throw Error(n(407));f=f()}else f=s();var O=!xa((wn||_).memoizedState,f);O&&(_.memoizedState=f,Ni=!0),_=_.queue;var G=og.bind(null,p,_,i);if(ic(2048,8,G,[i]),_.getSnapshot!==s||O||yi!==null&&yi.memoizedState.tag&1){if(p.flags|=2048,nc(9,Au(),rg.bind(null,p,_,f,s),null),Xe===null)throw Error(n(349));b||(Dr&124)!==0||ec(p,s,f)}return f}function ec(i,s,f){i.flags|=16384,i={getSnapshot:s,value:f},s=qe.updateQueue,s===null?(s=vo(),qe.updateQueue=s,s.stores=[i]):(f=s.stores,f===null?s.stores=[i]:f.push(i))}function rg(i,s,f,p){s.value=f,s.getSnapshot=p,lg(s)&&cg(i)}function og(i,s,f){return f(function(){lg(s)&&cg(i)})}function lg(i){var s=i.getSnapshot;i=i.value;try{var f=s();return!xa(i,f)}catch{return!0}}function cg(i){var s=Er(i,2);s!==null&&ma(s,i,2)}function sp(i){var s=ha();if(typeof i=="function"){var f=i;if(i=f(),fa){Bt(!0);try{f()}finally{Bt(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:i},s}function ug(i,s,f,p){return i.baseState=f,ip(i,wn,typeof p=="function"?p:Nr)}function zy(i,s,f,p,_){if(ih(i))throw Error(n(485));if(i=s.action,i!==null){var b={payload:_,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){b.listeners.push(O)}};H.T!==null?f(!0):b.isTransition=!1,p(b),f=s.pending,f===null?(b.next=s.pending=b,fg(s,b)):(b.next=f.next,s.pending=f.next=b)}}function fg(i,s){var f=s.action,p=s.payload,_=i.state;if(s.isTransition){var b=H.T,O={};H.T=O;try{var G=f(_,p),Z=H.S;Z!==null&&Z(O,G),hg(i,s,G)}catch(yt){rp(i,s,yt)}finally{H.T=b}}else try{b=f(_,p),hg(i,s,b)}catch(yt){rp(i,s,yt)}}function hg(i,s,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){dg(i,s,p)},function(p){return rp(i,s,p)}):dg(i,s,f)}function dg(i,s,f){s.status="fulfilled",s.value=f,pg(s),i.state=f,s=i.pending,s!==null&&(f=s.next,f===s?i.pending=null:(f=f.next,s.next=f,fg(i,f)))}function rp(i,s,f){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do s.status="rejected",s.reason=f,pg(s),s=s.next;while(s!==p)}i.action=null}function pg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function op(i,s){return s}function mg(i,s){if(yn){var f=Xe.formState;if(f!==null){t:{var p=qe;if(yn){if(Wn){e:{for(var _=Wn,b=Pa;_.nodeType!==8;){if(!b){_=null;break e}if(_=Fr(_.nextSibling),_===null){_=null;break e}}b=_.data,_=b==="F!"||b==="F"?_:null}if(_){Wn=Fr(_.nextSibling),p=_.data==="F!";break t}}fo(p)}p=!1}p&&(s=f[0])}}return f=ha(),f.memoizedState=f.baseState=s,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:op,lastRenderedState:s},f.queue=p,f=Rg.bind(null,qe,p),p.dispatch=f,p=sp(!1),b=nh.bind(null,qe,!1,p.queue),p=ha(),_={state:s,dispatch:null,action:i,pending:null},p.queue=_,f=zy.bind(null,qe,_,b,f),_.dispatch=f,p.memoizedState=i,[s,f,!1]}function gg(i){var s=_i();return vg(s,wn,i)}function vg(i,s,f){if(s=ip(i,s,op)[0],i=yo(Nr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var p=Cs(s)}catch(O){throw O===gu?Ts:O}else p=s;s=_i();var _=s.queue,b=_.dispatch;return f!==s.memoizedState&&(qe.flags|=2048,nc(9,Au(),Fy.bind(null,_,f),null)),[p,b,i]}function Fy(i,s){i.action=s}function yg(i){var s=_i(),f=wn;if(f!==null)return vg(s,f,i);_i(),s=s.memoizedState,f=_i();var p=f.queue.dispatch;return f.memoizedState=i,[s,p,!1]}function nc(i,s,f,p){return i={tag:i,create:f,deps:p,inst:s,next:null},s=qe.updateQueue,s===null&&(s=vo(),qe.updateQueue=s),f=s.lastEffect,f===null?s.lastEffect=i.next=i:(p=f.next,f.next=i,i.next=p,s.lastEffect=i),i}function Au(){return{destroy:void 0,resource:void 0}}function lp(){return _i().memoizedState}function Zf(i,s,f,p){var _=ha();p=p===void 0?null:p,qe.flags|=i,_.memoizedState=nc(1|s,Au(),f,p)}function ic(i,s,f,p){var _=_i();p=p===void 0?null:p;var b=_.memoizedState.inst;wn!==null&&p!==null&&Zi(p,wn.memoizedState.deps)?_.memoizedState=nc(s,b,f,p):(qe.flags|=i,_.memoizedState=nc(1|s,b,f,p))}function cp(i,s){Zf(8390656,8,i,s)}function up(i,s){ic(2048,8,i,s)}function $f(i,s){return ic(4,2,i,s)}function th(i,s){return ic(4,4,i,s)}function _g(i,s){if(typeof s=="function"){i=i();var f=s(i);return function(){typeof f=="function"?f():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Ag(i,s,f){f=f!=null?f.concat([i]):null,ic(4,4,_g.bind(null,s,i),f)}function fp(){}function xg(i,s){var f=_i();s=s===void 0?null:s;var p=f.memoizedState;return s!==null&&Zi(s,p[1])?p[0]:(f.memoizedState=[i,s],i)}function hp(i,s){var f=_i();s=s===void 0?null:s;var p=f.memoizedState;if(s!==null&&Zi(s,p[1]))return p[0];if(p=i(),fa){Bt(!0);try{i()}finally{Bt(!1)}}return f.memoizedState=[p,s],p}function eh(i,s,f){return f===void 0||(Dr&1073741824)!==0?i.memoizedState=s:(i.memoizedState=f,i=mh(),qe.lanes|=i,Os|=i,f)}function Sg(i,s,f,p){return xa(f,s)?f:tc.current!==null?(i=eh(i,f,p),xa(i,s)||(Ni=!0),i):(Dr&42)===0?(Ni=!0,i.memoizedState=f):(i=mh(),qe.lanes|=i,Os|=i,s)}function Mg(i,s,f,p,_){var b=W.p;W.p=b!==0&&8>b?b:8;var O=H.T,G={};H.T=G,nh(i,!1,s,f);try{var Z=_(),yt=H.S;if(yt!==null&&yt(G,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Nt=Py(Z,p);xu(i,s,Nt,ei(i))}else xu(i,s,p,ei(i))}catch(Ft){xu(i,s,{then:function(){},status:"rejected",reason:Ft},ei())}finally{W.p=b,H.T=O}}function Gy(){}function dp(i,s,f,p){if(i.tag!==5)throw Error(n(476));var _=bg(i).queue;Mg(i,_,s,j,f===null?Gy:function(){return Eg(i),f(p)})}function bg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:j},next:null};var f={};return s.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:f},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Eg(i){var s=bg(i).next.queue;xu(i,s,{},ei())}function pp(){return Zn(Cp)}function Tg(){return _i().memoizedState}function Cg(){return _i().memoizedState}function Vy(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var f=ei();i=js(f);var p=wr(s,i,f);p!==null&&(ma(p,s,f),qo(p,s,f)),s={cache:Xf()},i.payload=s;return}s=s.return}}function Xy(i,s,f){var p=ei();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},ih(i)?Bg(s,f):(f=Hf(i,s,f,p),f!==null&&(ma(f,i,p),za(f,s,p)))}function Rg(i,s,f){var p=ei();xu(i,s,f,p)}function xu(i,s,f,p){var _={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(ih(i))Bg(s,_);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var O=s.lastRenderedState,G=b(O,f);if(_.hasEagerState=!0,_.eagerState=G,xa(G,O))return oo(i,s,_,0),Xe===null&&ru(),!1}catch{}finally{}if(f=Hf(i,s,_,p),f!==null)return ma(f,i,p),za(f,s,p),!0}return!1}function nh(i,s,f,p){if(p={lane:2,revertLane:qy(),action:p,hasEagerState:!1,eagerState:null,next:null},ih(i)){if(s)throw Error(n(479))}else s=Hf(i,f,p,2),s!==null&&ma(s,i,2)}function ih(i){var s=i.alternate;return i===qe||s!==null&&s===qe}function Bg(i,s){go=jf=!0;var f=i.pending;f===null?s.next=s:(s.next=f.next,f.next=s),i.pending=s}function za(i,s,f){if((f&4194048)!==0){var p=s.lanes;p&=i.pendingLanes,f|=p,s.lanes=f,le(i,f)}}var Su={readContext:Zn,use:Qf,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useLayoutEffect:ri,useInsertionEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useSyncExternalStore:ri,useId:ri,useHostTransitionStatus:ri,useFormState:ri,useActionState:ri,useOptimistic:ri,useMemoCache:ri,useCacheRefresh:ri},ah={readContext:Zn,use:Qf,useCallback:function(i,s){return ha().memoizedState=[i,s===void 0?null:s],i},useContext:Zn,useEffect:cp,useImperativeHandle:function(i,s,f){f=f!=null?f.concat([i]):null,Zf(4194308,4,_g.bind(null,s,i),f)},useLayoutEffect:function(i,s){return Zf(4194308,4,i,s)},useInsertionEffect:function(i,s){Zf(4,2,i,s)},useMemo:function(i,s){var f=ha();s=s===void 0?null:s;var p=i();if(fa){Bt(!0);try{i()}finally{Bt(!1)}}return f.memoizedState=[p,s],p},useReducer:function(i,s,f){var p=ha();if(f!==void 0){var _=f(s);if(fa){Bt(!0);try{f(s)}finally{Bt(!1)}}}else _=s;return p.memoizedState=p.baseState=_,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:_},p.queue=i,i=i.dispatch=Xy.bind(null,qe,i),[p.memoizedState,i]},useRef:function(i){var s=ha();return i={current:i},s.memoizedState=i},useState:function(i){i=sp(i);var s=i.queue,f=Rg.bind(null,qe,s);return s.dispatch=f,[i.memoizedState,f]},useDebugValue:fp,useDeferredValue:function(i,s){var f=ha();return eh(f,i,s)},useTransition:function(){var i=sp(!1);return i=Mg.bind(null,qe,i.queue,!0,!1),ha().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,f){var p=qe,_=ha();if(yn){if(f===void 0)throw Error(n(407));f=f()}else{if(f=s(),Xe===null)throw Error(n(349));(we&124)!==0||ec(p,s,f)}_.memoizedState=f;var b={value:f,getSnapshot:s};return _.queue=b,cp(og.bind(null,p,b,i),[i]),p.flags|=2048,nc(9,Au(),rg.bind(null,p,b,f,s),null),f},useId:function(){var i=ha(),s=Xe.identifierPrefix;if(yn){var f=Js,p=qs;f=(p&~(1<<32-re(p)-1)).toString(32)+f,s=""+s+"R"+f,f=Mi++,0<f&&(s+="H"+f.toString(32)),s+=""}else f=ng++,s=""+s+"r"+f.toString(32)+"";return i.memoizedState=s},useHostTransitionStatus:pp,useFormState:mg,useActionState:mg,useOptimistic:function(i){var s=ha();s.memoizedState=s.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=f,s=nh.bind(null,qe,!0,f),f.dispatch=s,[i,s]},useMemoCache:np,useCacheRefresh:function(){return ha().memoizedState=Vy.bind(null,qe)}},mp={readContext:Zn,use:Qf,useCallback:xg,useContext:Zn,useEffect:up,useImperativeHandle:Ag,useInsertionEffect:$f,useLayoutEffect:th,useMemo:hp,useReducer:yo,useRef:lp,useState:function(){return yo(Nr)},useDebugValue:fp,useDeferredValue:function(i,s){var f=_i();return Sg(f,wn.memoizedState,i,s)},useTransition:function(){var i=yo(Nr)[0],s=_i().memoizedState;return[typeof i=="boolean"?i:Cs(i),s]},useSyncExternalStore:sg,useId:Tg,useHostTransitionStatus:pp,useFormState:gg,useActionState:gg,useOptimistic:function(i,s){var f=_i();return ug(f,wn,i,s)},useMemoCache:np,useCacheRefresh:Cg},wg={readContext:Zn,use:Qf,useCallback:xg,useContext:Zn,useEffect:up,useImperativeHandle:Ag,useInsertionEffect:$f,useLayoutEffect:th,useMemo:hp,useReducer:ap,useRef:lp,useState:function(){return ap(Nr)},useDebugValue:fp,useDeferredValue:function(i,s){var f=_i();return wn===null?eh(f,i,s):Sg(f,wn.memoizedState,i,s)},useTransition:function(){var i=ap(Nr)[0],s=_i().memoizedState;return[typeof i=="boolean"?i:Cs(i),s]},useSyncExternalStore:sg,useId:Tg,useHostTransitionStatus:pp,useFormState:yg,useActionState:yg,useOptimistic:function(i,s){var f=_i();return wn!==null?ug(f,wn,i,s):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:np,useCacheRefresh:Cg},Jo=null,Mu=0;function bu(i){var s=Mu;return Mu+=1,Jo===null&&(Jo=[]),Jf(Jo,i,s)}function ac(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function sh(i,s){throw s.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Dg(i){var s=i._init;return s(i._payload)}function Ug(i){function s(ft,rt){if(i){var vt=ft.deletions;vt===null?(ft.deletions=[rt],ft.flags|=16):vt.push(rt)}}function f(ft,rt){if(!i)return null;for(;rt!==null;)s(ft,rt),rt=rt.sibling;return null}function p(ft){for(var rt=new Map;ft!==null;)ft.key!==null?rt.set(ft.key,ft):rt.set(ft.index,ft),ft=ft.sibling;return rt}function _(ft,rt){return ft=si(ft,rt),ft.index=0,ft.sibling=null,ft}function b(ft,rt,vt){return ft.index=vt,i?(vt=ft.alternate,vt!==null?(vt=vt.index,vt<rt?(ft.flags|=67108866,rt):vt):(ft.flags|=67108866,rt)):(ft.flags|=1048576,rt)}function O(ft){return i&&ft.alternate===null&&(ft.flags|=67108866),ft}function G(ft,rt,vt,Pt){return rt===null||rt.tag!==6?(rt=lu(vt,ft.mode,Pt),rt.return=ft,rt):(rt=_(rt,vt),rt.return=ft,rt)}function Z(ft,rt,vt,Pt){var xe=vt.type;return xe===E?Nt(ft,rt,vt.props.children,Pt,vt.key):rt!==null&&(rt.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===k&&Dg(xe)===rt.type)?(rt=_(rt,vt.props),ac(rt,vt),rt.return=ft,rt):(rt=Ui(vt.type,vt.key,vt.props,null,ft.mode,Pt),ac(rt,vt),rt.return=ft,rt)}function yt(ft,rt,vt,Pt){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==vt.containerInfo||rt.stateNode.implementation!==vt.implementation?(rt=zf(vt,ft.mode,Pt),rt.return=ft,rt):(rt=_(rt,vt.children||[]),rt.return=ft,rt)}function Nt(ft,rt,vt,Pt,xe){return rt===null||rt.tag!==7?(rt=co(vt,ft.mode,Pt,xe),rt.return=ft,rt):(rt=_(rt,vt),rt.return=ft,rt)}function Ft(ft,rt,vt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=lu(""+rt,ft.mode,vt),rt.return=ft,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case A:return vt=Ui(rt.type,rt.key,rt.props,null,ft.mode,vt),ac(vt,rt),vt.return=ft,vt;case S:return rt=zf(rt,ft.mode,vt),rt.return=ft,rt;case k:var Pt=rt._init;return rt=Pt(rt._payload),Ft(ft,rt,vt)}if(ut(rt)||ct(rt))return rt=co(rt,ft.mode,vt,null),rt.return=ft,rt;if(typeof rt.then=="function")return Ft(ft,bu(rt),vt);if(rt.$$typeof===U)return Ft(ft,hu(ft,rt),vt);sh(ft,rt)}return null}function xt(ft,rt,vt,Pt){var xe=rt!==null?rt.key:null;if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return xe!==null?null:G(ft,rt,""+vt,Pt);if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case A:return vt.key===xe?Z(ft,rt,vt,Pt):null;case S:return vt.key===xe?yt(ft,rt,vt,Pt):null;case k:return xe=vt._init,vt=xe(vt._payload),xt(ft,rt,vt,Pt)}if(ut(vt)||ct(vt))return xe!==null?null:Nt(ft,rt,vt,Pt,null);if(typeof vt.then=="function")return xt(ft,rt,bu(vt),Pt);if(vt.$$typeof===U)return xt(ft,rt,hu(ft,vt),Pt);sh(ft,vt)}return null}function bt(ft,rt,vt,Pt,xe){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number"||typeof Pt=="bigint")return ft=ft.get(vt)||null,G(rt,ft,""+Pt,xe);if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case A:return ft=ft.get(Pt.key===null?vt:Pt.key)||null,Z(rt,ft,Pt,xe);case S:return ft=ft.get(Pt.key===null?vt:Pt.key)||null,yt(rt,ft,Pt,xe);case k:var un=Pt._init;return Pt=un(Pt._payload),bt(ft,rt,vt,Pt,xe)}if(ut(Pt)||ct(Pt))return ft=ft.get(vt)||null,Nt(rt,ft,Pt,xe,null);if(typeof Pt.then=="function")return bt(ft,rt,vt,bu(Pt),xe);if(Pt.$$typeof===U)return bt(ft,rt,vt,hu(rt,Pt),xe);sh(rt,Pt)}return null}function Ve(ft,rt,vt,Pt){for(var xe=null,un=null,Ce=rt,ze=rt=0,ea=null;Ce!==null&&ze<vt.length;ze++){Ce.index>ze?(ea=Ce,Ce=null):ea=Ce.sibling;var Rn=xt(ft,Ce,vt[ze],Pt);if(Rn===null){Ce===null&&(Ce=ea);break}i&&Ce&&Rn.alternate===null&&s(ft,Ce),rt=b(Rn,rt,ze),un===null?xe=Rn:un.sibling=Rn,un=Rn,Ce=ea}if(ze===vt.length)return f(ft,Ce),yn&&Tr(ft,ze),xe;if(Ce===null){for(;ze<vt.length;ze++)Ce=Ft(ft,vt[ze],Pt),Ce!==null&&(rt=b(Ce,rt,ze),un===null?xe=Ce:un.sibling=Ce,un=Ce);return yn&&Tr(ft,ze),xe}for(Ce=p(Ce);ze<vt.length;ze++)ea=bt(Ce,ft,ze,vt[ze],Pt),ea!==null&&(i&&ea.alternate!==null&&Ce.delete(ea.key===null?ze:ea.key),rt=b(ea,rt,ze),un===null?xe=ea:un.sibling=ea,un=ea);return i&&Ce.forEach(function(xc){return s(ft,xc)}),yn&&Tr(ft,ze),xe}function He(ft,rt,vt,Pt){if(vt==null)throw Error(n(151));for(var xe=null,un=null,Ce=rt,ze=rt=0,ea=null,Rn=vt.next();Ce!==null&&!Rn.done;ze++,Rn=vt.next()){Ce.index>ze?(ea=Ce,Ce=null):ea=Ce.sibling;var xc=xt(ft,Ce,Rn.value,Pt);if(xc===null){Ce===null&&(Ce=ea);break}i&&Ce&&xc.alternate===null&&s(ft,Ce),rt=b(xc,rt,ze),un===null?xe=xc:un.sibling=xc,un=xc,Ce=ea}if(Rn.done)return f(ft,Ce),yn&&Tr(ft,ze),xe;if(Ce===null){for(;!Rn.done;ze++,Rn=vt.next())Rn=Ft(ft,Rn.value,Pt),Rn!==null&&(rt=b(Rn,rt,ze),un===null?xe=Rn:un.sibling=Rn,un=Rn);return yn&&Tr(ft,ze),xe}for(Ce=p(Ce);!Rn.done;ze++,Rn=vt.next())Rn=bt(Ce,ft,ze,Rn.value,Pt),Rn!==null&&(i&&Rn.alternate!==null&&Ce.delete(Rn.key===null?ze:Rn.key),rt=b(Rn,rt,ze),un===null?xe=Rn:un.sibling=Rn,un=Rn);return i&&Ce.forEach(function(hC){return s(ft,hC)}),yn&&Tr(ft,ze),xe}function kn(ft,rt,vt,Pt){if(typeof vt=="object"&&vt!==null&&vt.type===E&&vt.key===null&&(vt=vt.props.children),typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case A:t:{for(var xe=vt.key;rt!==null;){if(rt.key===xe){if(xe=vt.type,xe===E){if(rt.tag===7){f(ft,rt.sibling),Pt=_(rt,vt.props.children),Pt.return=ft,ft=Pt;break t}}else if(rt.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===k&&Dg(xe)===rt.type){f(ft,rt.sibling),Pt=_(rt,vt.props),ac(Pt,vt),Pt.return=ft,ft=Pt;break t}f(ft,rt);break}else s(ft,rt);rt=rt.sibling}vt.type===E?(Pt=co(vt.props.children,ft.mode,Pt,vt.key),Pt.return=ft,ft=Pt):(Pt=Ui(vt.type,vt.key,vt.props,null,ft.mode,Pt),ac(Pt,vt),Pt.return=ft,ft=Pt)}return O(ft);case S:t:{for(xe=vt.key;rt!==null;){if(rt.key===xe)if(rt.tag===4&&rt.stateNode.containerInfo===vt.containerInfo&&rt.stateNode.implementation===vt.implementation){f(ft,rt.sibling),Pt=_(rt,vt.children||[]),Pt.return=ft,ft=Pt;break t}else{f(ft,rt);break}else s(ft,rt);rt=rt.sibling}Pt=zf(vt,ft.mode,Pt),Pt.return=ft,ft=Pt}return O(ft);case k:return xe=vt._init,vt=xe(vt._payload),kn(ft,rt,vt,Pt)}if(ut(vt))return Ve(ft,rt,vt,Pt);if(ct(vt)){if(xe=ct(vt),typeof xe!="function")throw Error(n(150));return vt=xe.call(vt),He(ft,rt,vt,Pt)}if(typeof vt.then=="function")return kn(ft,rt,bu(vt),Pt);if(vt.$$typeof===U)return kn(ft,rt,hu(ft,vt),Pt);sh(ft,vt)}return typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint"?(vt=""+vt,rt!==null&&rt.tag===6?(f(ft,rt.sibling),Pt=_(rt,vt),Pt.return=ft,ft=Pt):(f(ft,rt),Pt=lu(vt,ft.mode,Pt),Pt.return=ft,ft=Pt),O(ft)):f(ft,rt)}return function(ft,rt,vt,Pt){try{Mu=0;var xe=kn(ft,rt,vt,Pt);return Jo=null,xe}catch(Ce){if(Ce===gu||Ce===Ts)throw Ce;var un=ba(29,Ce,null,ft.mode);return un.lanes=Pt,un.return=ft,un}finally{}}}var Ko=Ug(!0),Ng=Ug(!1),Ln=nt(null),Rs=null;function _o(i){var s=i.alternate;Tt(oi,oi.current&1),Tt(Ln,i),Rs===null&&(s===null||tc.current!==null||s.memoizedState!==null)&&(Rs=i)}function Og(i){if(i.tag===22){if(Tt(oi,oi.current),Tt(Ln,i),Rs===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Rs=i)}}else Ao()}function Ao(){Tt(oi,oi.current),Tt(Ln,Ln.current)}function Ws(i){_t(Ln),Rs===i&&(Rs=null),_t(oi)}var oi=nt(0);function Or(i){for(var s=i;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||a_(f)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function xo(i,s,f,p){s=i.memoizedState,f=f(p,s),f=f==null?s:v({},s,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var da={enqueueSetState:function(i,s,f){i=i._reactInternals;var p=ei(),_=js(p);_.payload=s,f!=null&&(_.callback=f),s=wr(i,_,p),s!==null&&(ma(s,i,p),qo(s,i,p))},enqueueReplaceState:function(i,s,f){i=i._reactInternals;var p=ei(),_=js(p);_.tag=1,_.payload=s,f!=null&&(_.callback=f),s=wr(i,_,p),s!==null&&(ma(s,i,p),qo(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var f=ei(),p=js(f);p.tag=2,s!=null&&(p.callback=s),s=wr(i,p,f),s!==null&&(ma(s,i,f),qo(s,i,f))}};function Lg(i,s,f,p,_,b,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,b,O):s.prototype&&s.prototype.isPureReactComponent?!bs(f,p)||!bs(_,b):!0}function Ig(i,s,f,p){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,p),s.state!==i&&da.enqueueReplaceState(s,s.state,null)}function Qs(i,s){var f=s;if("ref"in s){f={};for(var p in s)p!=="ref"&&(f[p]=s[p])}if(i=i.defaultProps){f===s&&(f=v({},f));for(var _ in i)f[_]===void 0&&(f[_]=i[_])}return f}var jo=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Eu(i){jo(i)}function rh(i){console.error(i)}function Pg(i){jo(i)}function oh(i,s){try{var f=i.onUncaughtError;f(s.value,{componentStack:s.stack})}catch(p){setTimeout(function(){throw p})}}function ls(i,s,f){try{var p=i.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function lh(i,s,f){return f=js(f),f.tag=3,f.payload={element:null},f.callback=function(){oh(i,s)},f}function Hg(i){return i=js(i),i.tag=3,i}function ch(i,s,f,p){var _=f.type.getDerivedStateFromError;if(typeof _=="function"){var b=p.value;i.payload=function(){return _(b)},i.callback=function(){ls(s,f,p)}}var O=f.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(i.callback=function(){ls(s,f,p),typeof _!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var G=p.stack;this.componentDidCatch(p.value,{componentStack:G!==null?G:""})})}function Yy(i,s,f,p,_){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(s=f.alternate,s!==null&&as(s,f,_,!0),f=Ln.current,f!==null){switch(f.tag){case 13:return Rs===null?l():f.alternate===null&&qn===0&&(qn=3),f.flags&=-257,f.flags|=65536,f.lanes=_,p===vu?f.flags|=16384:(s=f.updateQueue,s===null?f.updateQueue=new Set([p]):s.add(p),Et(i,p,_)),!1;case 22:return f.flags|=65536,p===vu?f.flags|=16384:(s=f.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=s):(f=s.retryQueue,f===null?s.retryQueue=new Set([p]):f.add(p)),Et(i,p,_)),!1}throw Error(n(435,f.tag))}return Et(i,p,_),l(),!1}if(yn)return s=Ln.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=_,p!==Gf&&(i=Error(n(422),{cause:p}),ko(Vi(i,f)))):(p!==Gf&&(s=Error(n(423),{cause:p}),ko(Vi(s,f))),i=i.current.alternate,i.flags|=65536,_&=-_,i.lanes|=_,p=Vi(p,f),_=lh(i.stateNode,p,_),Ql(i,_),qn!==4&&(qn=2)),!1;var b=Error(n(520),{cause:p});if(b=Vi(b,f),Cn===null?Cn=[b]:Cn.push(b),qn!==4&&(qn=2),s===null)return!0;p=Vi(p,f),f=s;do{switch(f.tag){case 3:return f.flags|=65536,i=_&-_,f.lanes|=i,i=lh(f.stateNode,p,i),Ql(f,i),!1;case 1:if(s=f.type,b=f.stateNode,(f.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ja===null||!Ja.has(b))))return f.flags|=65536,_&=-_,f.lanes|=_,_=Hg(_),ch(_,i,f,p),Ql(f,_),!1}f=f.return}while(f!==null);return!1}var zg=Error(n(461)),Ni=!1;function li(i,s,f,p){s.child=i===null?Ng(s,null,f,p):Ko(s,i.child,f,p)}function Ta(i,s,f,p,_){f=f.render;var b=s.ref;if("ref"in p){var O={};for(var G in p)G!=="ref"&&(O[G]=p[G])}else O=p;return Ks(s),p=Ur(i,s,f,O,b,_),G=tp(),i!==null&&!Ni?(Wf(i,s,_),Oi(i,s,_)):(yn&&G&&Xd(s),s.flags|=1,li(i,s,p,_),s.child)}function Ca(i,s,f,p,_){if(i===null){var b=f.type;return typeof b=="function"&&!ou(b)&&b.defaultProps===void 0&&f.compare===null?(s.tag=15,s.type=b,gp(i,s,b,p,_)):(i=Ui(f.type,null,p,s,s.mode,_),i.ref=s.ref,i.return=s,s.child=i)}if(b=i.child,!Tu(i,_)){var O=b.memoizedProps;if(f=f.compare,f=f!==null?f:bs,f(O,p)&&i.ref===s.ref)return Oi(i,s,_)}return s.flags|=1,i=si(b,p),i.ref=s.ref,i.return=s,s.child=i}function gp(i,s,f,p,_){if(i!==null){var b=i.memoizedProps;if(bs(b,p)&&i.ref===s.ref)if(Ni=!1,s.pendingProps=p=b,Tu(i,_))(i.flags&131072)!==0&&(Ni=!0);else return s.lanes=i.lanes,Oi(i,s,_)}return sc(i,s,f,p,_)}function Wo(i,s,f){var p=s.pendingProps,_=p.children,b=i!==null?i.memoizedState:null;if(p.mode==="hidden"){if((s.flags&128)!==0){if(p=b!==null?b.baseLanes|f:f,i!==null){for(_=s.child=i.child,b=0;_!==null;)b=b|_.lanes|_.childLanes,_=_.sibling;s.childLanes=b&~p}else s.childLanes=0,s.child=null;return Qo(i,s,p,f)}if((f&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&mu(s,b!==null?b.cachePool:null),b!==null?eg(s,b):$d(),Og(s);else return s.lanes=s.childLanes=536870912,Qo(i,s,b!==null?b.baseLanes|f:f,f)}else b!==null?(mu(s,b.cachePool),eg(s,b),Ao(),s.memoizedState=null):(i!==null&&mu(s,null),$d(),Ao());return li(i,s,_,f),s.child}function Qo(i,s,f,p){var _=mo();return _=_===null?null:{parent:vi._currentValue,pool:_},s.memoizedState={baseLanes:f,cachePool:_},i!==null&&mu(s,null),$d(),Og(s),i!==null&&as(i,s,p,!0),null}function Zo(i,s){var f=s.ref;if(f===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(i===null||i.ref!==f)&&(s.flags|=4194816)}}function sc(i,s,f,p,_){return Ks(s),f=Ur(i,s,f,p,void 0,_),p=tp(),i!==null&&!Ni?(Wf(i,s,_),Oi(i,s,_)):(yn&&p&&Xd(s),s.flags|=1,li(i,s,f,_),s.child)}function Fa(i,s,f,p,_,b){return Ks(s),s.updateQueue=null,f=ag(s,p,f,_),ig(i),p=tp(),i!==null&&!Ni?(Wf(i,s,b),Oi(i,s,b)):(yn&&p&&Xd(s),s.flags|=1,li(i,s,f,b),s.child)}function Ga(i,s,f,p,_){if(Ks(s),s.stateNode===null){var b=lo,O=f.contextType;typeof O=="object"&&O!==null&&(b=Zn(O)),b=new f(p,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=da,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=p,b.state=s.memoizedState,b.refs={},Qd(s),O=f.contextType,b.context=typeof O=="object"&&O!==null?Zn(O):lo,b.state=s.memoizedState,O=f.getDerivedStateFromProps,typeof O=="function"&&(xo(s,f,O,p),b.state=s.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(O=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),O!==b.state&&da.enqueueReplaceState(b,b.state,null),Zl(s,p,b,_),yu(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),p=!0}else if(i===null){b=s.stateNode;var G=s.memoizedProps,Z=Qs(f,G);b.props=Z;var yt=b.context,Nt=f.contextType;O=lo,typeof Nt=="object"&&Nt!==null&&(O=Zn(Nt));var Ft=f.getDerivedStateFromProps;Nt=typeof Ft=="function"||typeof b.getSnapshotBeforeUpdate=="function",G=s.pendingProps!==G,Nt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(G||yt!==O)&&Ig(s,b,p,O),Br=!1;var xt=s.memoizedState;b.state=xt,Zl(s,p,b,_),yu(),yt=s.memoizedState,G||xt!==yt||Br?(typeof Ft=="function"&&(xo(s,f,Ft,p),yt=s.memoizedState),(Z=Br||Lg(s,f,Z,p,xt,yt,O))?(Nt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=yt),b.props=p,b.state=yt,b.context=O,p=Z):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{b=s.stateNode,Fe(i,s),O=s.memoizedProps,Nt=Qs(f,O),b.props=Nt,Ft=s.pendingProps,xt=b.context,yt=f.contextType,Z=lo,typeof yt=="object"&&yt!==null&&(Z=Zn(yt)),G=f.getDerivedStateFromProps,(yt=typeof G=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(O!==Ft||xt!==Z)&&Ig(s,b,p,Z),Br=!1,xt=s.memoizedState,b.state=xt,Zl(s,p,b,_),yu();var bt=s.memoizedState;O!==Ft||xt!==bt||Br||i!==null&&i.dependencies!==null&&fu(i.dependencies)?(typeof G=="function"&&(xo(s,f,G,p),bt=s.memoizedState),(Nt=Br||Lg(s,f,Nt,p,xt,bt,Z)||i!==null&&i.dependencies!==null&&fu(i.dependencies))?(yt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,bt,Z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,bt,Z)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||O===i.memoizedProps&&xt===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&xt===i.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=bt),b.props=p,b.state=bt,b.context=Z,p=Nt):(typeof b.componentDidUpdate!="function"||O===i.memoizedProps&&xt===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&xt===i.memoizedState||(s.flags|=1024),p=!1)}return b=p,Zo(i,s),p=(s.flags&128)!==0,b||p?(b=s.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,i!==null&&p?(s.child=Ko(s,i.child,null,_),s.child=Ko(s,null,f,_)):li(i,s,f,_),s.memoizedState=b.state,i=s.child):i=Oi(i,s,_),i}function So(i,s,f,p){return ql(),s.flags|=256,li(i,s,f,p),s.child}var Bs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ws(i){return{baseLanes:i,cachePool:kf()}}function bi(i,s,f){return i=i!==null?i.childLanes&~f:0,s&&(i|=ds),i}function rc(i,s,f){var p=s.pendingProps,_=!1,b=(s.flags&128)!==0,O;if((O=b)||(O=i!==null&&i.memoizedState===null?!1:(oi.current&2)!==0),O&&(_=!0,s.flags&=-129),O=(s.flags&32)!==0,s.flags&=-33,i===null){if(yn){if(_?_o(s):Ao(),yn){var G=Wn,Z;if(Z=G){t:{for(Z=G,G=Pa;Z.nodeType!==8;){if(!G){G=null;break t}if(Z=Fr(Z.nextSibling),Z===null){G=null;break t}}G=Z}G!==null?(s.memoizedState={dehydrated:G,treeContext:uo!==null?{id:qs,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},Z=ba(18,null,null,0),Z.stateNode=G,Z.return=s,s.child=Z,ua=s,Wn=null,Z=!0):Z=!1}Z||fo(s)}if(G=s.memoizedState,G!==null&&(G=G.dehydrated,G!==null))return a_(G)?s.lanes=32:s.lanes=536870912,null;Ws(s)}return G=p.children,p=p.fallback,_?(Ao(),_=s.mode,G=$o({mode:"hidden",children:G},_),p=co(p,_,f,null),G.return=s,p.return=s,G.sibling=p,s.child=G,_=s.child,_.memoizedState=ws(f),_.childLanes=bi(i,O,f),s.memoizedState=Bs,p):(_o(s),Zs(s,G))}if(Z=i.memoizedState,Z!==null&&(G=Z.dehydrated,G!==null)){if(b)s.flags&256?(_o(s),s.flags&=-257,s=ki(i,s,f)):s.memoizedState!==null?(Ao(),s.child=i.child,s.flags|=128,s=null):(Ao(),_=p.fallback,G=s.mode,p=$o({mode:"visible",children:p.children},G),_=co(_,G,f,null),_.flags|=2,p.return=s,_.return=s,p.sibling=_,s.child=p,Ko(s,i.child,null,f),p=s.child,p.memoizedState=ws(f),p.childLanes=bi(i,O,f),s.memoizedState=Bs,s=_);else if(_o(s),a_(G)){if(O=G.nextSibling&&G.nextSibling.dataset,O)var yt=O.dgst;O=yt,p=Error(n(419)),p.stack="",p.digest=O,ko({value:p,source:null,stack:null}),s=ki(i,s,f)}else if(Ni||as(i,s,f,!1),O=(f&i.childLanes)!==0,Ni||O){if(O=Xe,O!==null&&(p=f&-f,p=(p&42)!==0?1:Me(p),p=(p&(O.suspendedLanes|f))!==0?0:p,p!==0&&p!==Z.retryLane))throw Z.retryLane=p,Er(i,p),ma(O,i,p),zg;G.data==="$?"||l(),s=ki(i,s,f)}else G.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=Z.treeContext,Wn=Fr(G.nextSibling),ua=s,yn=!0,is=null,Pa=!1,i!==null&&(Xi[Ia++]=qs,Xi[Ia++]=Js,Xi[Ia++]=uo,qs=i.id,Js=i.overflow,uo=s),s=Zs(s,p.children),s.flags|=4096);return s}return _?(Ao(),_=p.fallback,G=s.mode,Z=i.child,yt=Z.sibling,p=si(Z,{mode:"hidden",children:p.children}),p.subtreeFlags=Z.subtreeFlags&65011712,yt!==null?_=si(yt,_):(_=co(_,G,f,null),_.flags|=2),_.return=s,p.return=s,p.sibling=_,s.child=p,p=_,_=s.child,G=i.child.memoizedState,G===null?G=ws(f):(Z=G.cachePool,Z!==null?(yt=vi._currentValue,Z=Z.parent!==yt?{parent:yt,pool:yt}:Z):Z=kf(),G={baseLanes:G.baseLanes|f,cachePool:Z}),_.memoizedState=G,_.childLanes=bi(i,O,f),s.memoizedState=Bs,p):(_o(s),f=i.child,i=f.sibling,f=si(f,{mode:"visible",children:p.children}),f.return=s,f.sibling=null,i!==null&&(O=s.deletions,O===null?(s.deletions=[i],s.flags|=16):O.push(i)),s.child=f,s.memoizedState=null,f)}function Zs(i,s){return s=$o({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function $o(i,s){return i=ba(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function ki(i,s,f){return Ko(s,i.child,null,f),i=Zs(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function qi(i,s,f){i.lanes|=s;var p=i.alternate;p!==null&&(p.lanes|=s),Jd(i.return,s,f)}function dn(i,s,f,p,_){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:_}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=f,b.tailMode=_)}function cs(i,s,f){var p=s.pendingProps,_=p.revealOrder,b=p.tail;if(li(i,s,p.children,f),p=oi.current,(p&2)!==0)p=p&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&qi(i,f,s);else if(i.tag===19)qi(i,f,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}switch(Tt(oi,p),_){case"forwards":for(f=s.child,_=null;f!==null;)i=f.alternate,i!==null&&Or(i)===null&&(_=f),f=f.sibling;f=_,f===null?(_=s.child,s.child=null):(_=f.sibling,f.sibling=null),dn(s,!1,_,f,b);break;case"backwards":for(f=null,_=s.child,s.child=null;_!==null;){if(i=_.alternate,i!==null&&Or(i)===null){s.child=_;break}i=_.sibling,_.sibling=f,f=_,_=i}dn(s,!0,f,null,b);break;case"together":dn(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Oi(i,s,f){if(i!==null&&(s.dependencies=i.dependencies),Os|=s.lanes,(f&s.childLanes)===0)if(i!==null){if(as(i,s,f,!1),(f&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,f=si(i,i.pendingProps),s.child=f,f.return=s;i.sibling!==null;)i=i.sibling,f=f.sibling=si(i,i.pendingProps),f.return=s;f.sibling=null}return s.child}function Tu(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&fu(i)))}function us(i,s,f){switch(s.tag){case 3:qt(s,s.stateNode.containerInfo),po(s,vi,i.memoizedState.cache),ql();break;case 27:case 5:fe(s);break;case 4:qt(s,s.stateNode.containerInfo);break;case 10:po(s,s.type,s.memoizedProps.value);break;case 13:var p=s.memoizedState;if(p!==null)return p.dehydrated!==null?(_o(s),s.flags|=128,null):(f&s.child.childLanes)!==0?rc(i,s,f):(_o(s),i=Oi(i,s,f),i!==null?i.sibling:null);_o(s);break;case 19:var _=(i.flags&128)!==0;if(p=(f&s.childLanes)!==0,p||(as(i,s,f,!1),p=(f&s.childLanes)!==0),_){if(p)return cs(i,s,f);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Tt(oi,oi.current),p)break;return null;case 22:case 23:return s.lanes=0,Wo(i,s,f);case 24:po(s,vi,i.memoizedState.cache)}return Oi(i,s,f)}function tl(i,s,f){if(i!==null)if(i.memoizedProps!==s.pendingProps)Ni=!0;else{if(!Tu(i,f)&&(s.flags&128)===0)return Ni=!1,us(i,s,f);Ni=(i.flags&131072)!==0}else Ni=!1,yn&&(s.flags&1048576)!==0&&Ff(s,kl,s.index);switch(s.lanes=0,s.tag){case 16:t:{i=s.pendingProps;var p=s.elementType,_=p._init;if(p=_(p._payload),s.type=p,typeof p=="function")ou(p)?(i=Qs(p,i),s.tag=1,s=Ga(null,s,p,i,f)):(s.tag=0,s=sc(null,s,p,i,f));else{if(p!=null){if(_=p.$$typeof,_===D){s.tag=11,s=Ta(null,s,p,i,f);break t}else if(_===F){s.tag=14,s=Ca(null,s,p,i,f);break t}}throw s=pt(p)||p,Error(n(306,s,""))}}return s;case 0:return sc(i,s,s.type,s.pendingProps,f);case 1:return p=s.type,_=Qs(p,s.pendingProps),Ga(i,s,p,_,f);case 3:t:{if(qt(s,s.stateNode.containerInfo),i===null)throw Error(n(387));p=s.pendingProps;var b=s.memoizedState;_=b.element,Fe(i,s),Zl(s,p,null,f);var O=s.memoizedState;if(p=O.cache,po(s,vi,p),p!==b.cache&&uu(s,[vi],f,!0),yu(),p=O.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:O.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=So(i,s,p,f);break t}else if(p!==_){_=Vi(Error(n(424)),s),ko(_),s=So(i,s,p,f);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Wn=Fr(i.firstChild),ua=s,yn=!0,is=null,Pa=!0,f=Ng(s,null,p,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(ql(),p===_){s=Oi(i,s,f);break t}li(i,s,p,f)}s=s.child}return s;case 26:return Zo(i,s),i===null?(f=xS(s.type,null,s.pendingProps,null))?s.memoizedState=f:yn||(f=s.type,i=s.pendingProps,p=kg(Ht.current).createElement(f),p[pi]=s,p[xi]=i,ga(p,f,i),mi(p),s.stateNode=p):s.memoizedState=xS(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return fe(s),i===null&&yn&&(p=s.stateNode=yS(s.type,s.pendingProps,Ht.current),ua=s,Pa=!0,_=Wn,gc(s.type)?(s_=_,Wn=Fr(p.firstChild)):Wn=_),li(i,s,s.pendingProps.children,f),Zo(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&yn&&((_=p=Wn)&&(p=GT(p,s.type,s.pendingProps,Pa),p!==null?(s.stateNode=p,ua=s,Wn=Fr(p.firstChild),Pa=!1,_=!0):_=!1),_||fo(s)),fe(s),_=s.type,b=s.pendingProps,O=i!==null?i.memoizedProps:null,p=b.children,e_(_,b)?p=null:O!==null&&e_(_,O)&&(s.flags|=32),s.memoizedState!==null&&(_=Ur(i,s,Hy,null,null,f),Cp._currentValue=_),Zo(i,s),li(i,s,p,f),s.child;case 6:return i===null&&yn&&((i=f=Wn)&&(f=VT(f,s.pendingProps,Pa),f!==null?(s.stateNode=f,ua=s,Wn=null,i=!0):i=!1),i||fo(s)),null;case 13:return rc(i,s,f);case 4:return qt(s,s.stateNode.containerInfo),p=s.pendingProps,i===null?s.child=Ko(s,null,p,f):li(i,s,p,f),s.child;case 11:return Ta(i,s,s.type,s.pendingProps,f);case 7:return li(i,s,s.pendingProps,f),s.child;case 8:return li(i,s,s.pendingProps.children,f),s.child;case 12:return li(i,s,s.pendingProps.children,f),s.child;case 10:return p=s.pendingProps,po(s,s.type,p.value),li(i,s,p.children,f),s.child;case 9:return _=s.type._context,p=s.pendingProps.children,Ks(s),_=Zn(_),p=p(_),s.flags|=1,li(i,s,p,f),s.child;case 14:return Ca(i,s,s.type,s.pendingProps,f);case 15:return gp(i,s,s.type,s.pendingProps,f);case 19:return cs(i,s,f);case 31:return p=s.pendingProps,f=s.mode,p={mode:p.mode,children:p.children},i===null?(f=$o(p,f),f.ref=s.ref,s.child=f,f.return=s,s=f):(f=si(i.child,p),f.ref=s.ref,s.child=f,f.return=s,s=f),s;case 22:return Wo(i,s,f);case 24:return Ks(s),p=Zn(vi),i===null?(_=mo(),_===null&&(_=Xe,b=Xf(),_.pooledCache=b,b.refCount++,b!==null&&(_.pooledCacheLanes|=f),_=b),s.memoizedState={parent:p,cache:_},Qd(s),po(s,vi,_)):((i.lanes&f)!==0&&(Fe(i,s),Zl(s,null,null,f),yu()),_=i.memoizedState,b=s.memoizedState,_.parent!==p?(_={parent:p,cache:p},s.memoizedState=_,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=_),po(s,vi,p)):(p=b.cache,po(s,vi,p),p!==_.cache&&uu(s,[vi],f,!0))),li(i,s,s.pendingProps.children,f),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Ds(i){i.flags|=4}function Cu(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!TS(s)){if(s=Ln.current,s!==null&&((we&4194048)===we?Rs!==null:(we&62914560)!==we&&(we&536870912)===0||s!==Rs))throw rs=vu,jd;i.flags|=8192}}function Lr(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?jt():536870912,i.lanes|=s,mn|=s)}function el(i,s){if(!yn)switch(i.tailMode){case"hidden":s=i.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Gn(i){var s=i.alternate!==null&&i.alternate.child===i.child,f=0,p=0;if(s)for(var _=i.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags&65011712,p|=_.flags&65011712,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=p,i.childLanes=f,s}function vp(i,s,f){var p=s.pendingProps;switch(Yd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(s),null;case 1:return Gn(s),null;case 3:return f=s.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),s.memoizedState.cache!==p&&(s.flags|=2048),Rr(vi),Ee(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Es(s)?Ds(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,En())),Gn(s),null;case 26:return f=s.memoizedState,i===null?(Ds(s),f!==null?(Gn(s),Cu(s,f)):(Gn(s),s.flags&=-16777217)):f?f!==i.memoizedState?(Ds(s),Gn(s),Cu(s,f)):(Gn(s),s.flags&=-16777217):(i.memoizedProps!==p&&Ds(s),Gn(s),s.flags&=-16777217),null;case 27:_e(s),f=Ht.current;var _=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==p&&Ds(s);else{if(!p){if(s.stateNode===null)throw Error(n(166));return Gn(s),null}i=it.current,Es(s)?Qm(s):(i=yS(_,p,f),s.stateNode=i,Ds(s))}return Gn(s),null;case 5:if(_e(s),f=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==p&&Ds(s);else{if(!p){if(s.stateNode===null)throw Error(n(166));return Gn(s),null}if(i=it.current,Es(s))Qm(s);else{switch(_=kg(Ht.current),i){case 1:i=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:i=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":i=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":i=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":i=_.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof p.is=="string"?_.createElement("select",{is:p.is}):_.createElement("select"),p.multiple?i.multiple=!0:p.size&&(i.size=p.size);break;default:i=typeof p.is=="string"?_.createElement(f,{is:p.is}):_.createElement(f)}}i[pi]=s,i[xi]=p;t:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)i.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break t;for(;_.sibling===null;){if(_.return===null||_.return===s)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=i;t:switch(ga(i,f,p),f){case"button":case"input":case"select":case"textarea":i=!!p.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Ds(s)}}return Gn(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==p&&Ds(s);else{if(typeof p!="string"&&s.stateNode===null)throw Error(n(166));if(i=Ht.current,Es(s)){if(i=s.stateNode,f=s.memoizedProps,p=null,_=ua,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}i[pi]=s,i=!!(i.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||fS(i.nodeValue,f)),i||fo(s)}else i=kg(i).createTextNode(p),i[pi]=s,s.stateNode=i}return Gn(s),null;case 13:if(p=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(_=Es(s),p!==null&&p.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[pi]=s}else ql(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gn(s),_=!1}else _=En(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=_),_=!0;if(!_)return s.flags&256?(Ws(s),s):(Ws(s),null)}if(Ws(s),(s.flags&128)!==0)return s.lanes=f,s;if(f=p!==null,i=i!==null&&i.memoizedState!==null,f){p=s.child,_=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(_=p.alternate.memoizedState.cachePool.pool);var b=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==_&&(p.flags|=2048)}return f!==i&&f&&(s.child.flags|=8192),Lr(s,s.updateQueue),Gn(s),null;case 4:return Ee(),i===null&&Wy(s.stateNode.containerInfo),Gn(s),null;case 10:return Rr(s.type),Gn(s),null;case 19:if(_t(oi),_=s.memoizedState,_===null)return Gn(s),null;if(p=(s.flags&128)!==0,b=_.rendering,b===null)if(p)el(_,!1);else{if(qn!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(b=Or(i),b!==null){for(s.flags|=128,el(_,!1),i=b.updateQueue,s.updateQueue=i,Lr(s,i),s.subtreeFlags=0,i=f,f=s.child;f!==null;)Vd(f,i),f=f.sibling;return Tt(oi,oi.current&1|2),s.child}i=i.sibling}_.tail!==null&&Gt()>$i&&(s.flags|=128,p=!0,el(_,!1),s.lanes=4194304)}else{if(!p)if(i=Or(b),i!==null){if(s.flags|=128,p=!0,i=i.updateQueue,s.updateQueue=i,Lr(s,i),el(_,!0),_.tail===null&&_.tailMode==="hidden"&&!b.alternate&&!yn)return Gn(s),null}else 2*Gt()-_.renderingStartTime>$i&&f!==536870912&&(s.flags|=128,p=!0,el(_,!1),s.lanes=4194304);_.isBackwards?(b.sibling=s.child,s.child=b):(i=_.last,i!==null?i.sibling=b:s.child=b,_.last=b)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=Gt(),s.sibling=null,i=oi.current,Tt(oi,p?i&1|2:i&1),s):(Gn(s),null);case 22:case 23:return Ws(s),_u(),p=s.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(s.flags|=8192):p&&(s.flags|=8192),p?(f&536870912)!==0&&(s.flags&128)===0&&(Gn(s),s.subtreeFlags&6&&(s.flags|=8192)):Gn(s),f=s.updateQueue,f!==null&&Lr(s,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),p=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),p!==f&&(s.flags|=2048),i!==null&&_t(ss),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),Rr(vi),Gn(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function oc(i,s){switch(Yd(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Rr(vi),Ee(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return _e(s),null;case 13:if(Ws(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));ql()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return _t(oi),null;case 4:return Ee(),null;case 10:return Rr(s.type),null;case 22:case 23:return Ws(s),_u(),i!==null&&_t(ss),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Rr(vi),null;case 25:return null;default:return null}}function lc(i,s){switch(Yd(s),s.tag){case 3:Rr(vi),Ee();break;case 26:case 27:case 5:_e(s);break;case 4:Ee();break;case 13:Ws(s);break;case 19:_t(oi);break;case 10:Rr(s.type);break;case 22:case 23:Ws(s),_u(),i!==null&&_t(ss);break;case 24:Rr(vi)}}function nl(i,s){try{var f=s.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var _=p.next;f=_;do{if((f.tag&i)===i){p=void 0;var b=f.create,O=f.inst;p=b(),O.destroy=p}f=f.next}while(f!==_)}}catch(G){st(s,s.return,G)}}function Va(i,s,f){try{var p=s.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var b=_.next;p=b;do{if((p.tag&i)===i){var O=p.inst,G=O.destroy;if(G!==void 0){O.destroy=void 0,_=s;var Z=f,yt=G;try{yt()}catch(Nt){st(_,Z,Nt)}}}p=p.next}while(p!==b)}}catch(Nt){st(s,s.return,Nt)}}function il(i){var s=i.updateQueue;if(s!==null){var f=i.stateNode;try{tg(s,f)}catch(p){st(i,i.return,p)}}}function Ir(i,s,f){f.props=Qs(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(p){st(i,s,p)}}function al(i,s){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof f=="function"?i.refCleanup=f(p):f.current=p}}catch(_){st(i,s,_)}}function $s(i,s){var f=i.ref,p=i.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(_){st(i,s,_)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(_){st(i,s,_)}else f.current=null}function cc(i){var s=i.type,f=i.memoizedProps,p=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break t;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(_){st(i,i.return,_)}}function Ru(i,s,f){try{var p=i.stateNode;IT(p,i.type,f,s),p[xi]=s}catch(_){st(i,i.return,_)}}function Bu(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&gc(i.type)||i.tag===4}function Mo(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Bu(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&gc(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bo(i,s,f){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,s):(s=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,s.appendChild(i),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=Yg));else if(p!==4&&(p===27&&gc(i.type)&&(f=i.stateNode,s=null),i=i.child,i!==null))for(bo(i,s,f),i=i.sibling;i!==null;)bo(i,s,f),i=i.sibling}function Eo(i,s,f){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?f.insertBefore(i,s):f.appendChild(i);else if(p!==4&&(p===27&&gc(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(Eo(i,s,f),i=i.sibling;i!==null;)Eo(i,s,f),i=i.sibling}function To(i){var s=i.stateNode,f=i.memoizedProps;try{for(var p=i.type,_=s.attributes;_.length;)s.removeAttributeNode(_[0]);ga(s,p,f),s[pi]=i,s[xi]=f}catch(b){st(i,i.return,b)}}var tr=!1,Vn=!1,uc=!1,Xa=typeof WeakSet=="function"?WeakSet:Set,In=null;function Ei(i,s){if(i=i.containerInfo,$y=Qg,i=Ld(i),iu(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else t:{f=(f=i.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var _=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break t}var O=0,G=-1,Z=-1,yt=0,Nt=0,Ft=i,xt=null;e:for(;;){for(var bt;Ft!==f||_!==0&&Ft.nodeType!==3||(G=O+_),Ft!==b||p!==0&&Ft.nodeType!==3||(Z=O+p),Ft.nodeType===3&&(O+=Ft.nodeValue.length),(bt=Ft.firstChild)!==null;)xt=Ft,Ft=bt;for(;;){if(Ft===i)break e;if(xt===f&&++yt===_&&(G=O),xt===b&&++Nt===p&&(Z=O),(bt=Ft.nextSibling)!==null)break;Ft=xt,xt=Ft.parentNode}Ft=bt}f=G===-1||Z===-1?null:{start:G,end:Z}}else f=null}f=f||{start:0,end:0}}else f=null;for(t_={focusedElem:i,selectionRange:f},Qg=!1,In=s;In!==null;)if(s=In,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,In=i;else for(;In!==null;){switch(s=In,b=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,f=s,_=b.memoizedProps,b=b.memoizedState,p=f.stateNode;try{var Ve=Qs(f.type,_,f.elementType===f.type);i=p.getSnapshotBeforeUpdate(Ve,b),p.__reactInternalSnapshotBeforeUpdate=i}catch(He){st(f,f.return,He)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,f=i.nodeType,f===9)i_(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":i_(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,In=i;break}In=s.return}}function Pr(i,s,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:pa(i,f),p&4&&nl(5,f);break;case 1:if(pa(i,f),p&4)if(i=f.stateNode,s===null)try{i.componentDidMount()}catch(O){st(f,f.return,O)}else{var _=Qs(f.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(_,s,i.__reactInternalSnapshotBeforeUpdate)}catch(O){st(f,f.return,O)}}p&64&&il(f),p&512&&al(f,f.return);break;case 3:if(pa(i,f),p&64&&(i=f.updateQueue,i!==null)){if(s=null,f.child!==null)switch(f.child.tag){case 27:case 5:s=f.child.stateNode;break;case 1:s=f.child.stateNode}try{tg(i,s)}catch(O){st(f,f.return,O)}}break;case 27:s===null&&p&4&&To(f);case 26:case 5:pa(i,f),s===null&&p&4&&cc(f),p&512&&al(f,f.return);break;case 12:pa(i,f);break;case 13:pa(i,f),p&4&&Co(i,f),p&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=Jn.bind(null,f),XT(i,f))));break;case 22:if(p=f.memoizedState!==null||tr,!p){s=s!==null&&s.memoizedState!==null||Vn,_=tr;var b=Vn;tr=p,(Vn=s)&&!b?er(i,f,(f.subtreeFlags&8772)!==0):pa(i,f),tr=_,Vn=b}break;case 30:break;default:pa(i,f)}}function tn(i){var s=i.alternate;s!==null&&(i.alternate=null,tn(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Dn(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ue=null,pn=!1;function fs(i,s,f){for(f=f.child;f!==null;)sl(i,s,f),f=f.sibling}function sl(i,s,f){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount(Rt,f)}catch{}switch(f.tag){case 26:Vn||$s(f,s),fs(i,s,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Vn||$s(f,s);var p=Ue,_=pn;gc(f.type)&&(Ue=f.stateNode,pn=!1),fs(i,s,f),Mp(f.stateNode),Ue=p,pn=_;break;case 5:Vn||$s(f,s);case 6:if(p=Ue,_=pn,Ue=null,fs(i,s,f),Ue=p,pn=_,Ue!==null)if(pn)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(f.stateNode)}catch(b){st(f,s,b)}else try{Ue.removeChild(f.stateNode)}catch(b){st(f,s,b)}break;case 18:Ue!==null&&(pn?(i=Ue,gS(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),Dp(i)):gS(Ue,f.stateNode));break;case 4:p=Ue,_=pn,Ue=f.stateNode.containerInfo,pn=!0,fs(i,s,f),Ue=p,pn=_;break;case 0:case 11:case 14:case 15:Vn||Va(2,f,s),Vn||Va(4,f,s),fs(i,s,f);break;case 1:Vn||($s(f,s),p=f.stateNode,typeof p.componentWillUnmount=="function"&&Ir(f,s,p)),fs(i,s,f);break;case 21:fs(i,s,f);break;case 22:Vn=(p=Vn)||f.memoizedState!==null,fs(i,s,f),Vn=p;break;default:fs(i,s,f)}}function Co(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Dp(i)}catch(f){st(s,s.return,f)}}function uh(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Xa),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Xa),s;default:throw Error(n(435,i.tag))}}function rl(i,s){var f=uh(i);s.forEach(function(p){var _=Ge.bind(null,i,p);f.has(p)||(f.add(p),p.then(_,_))})}function Li(i,s){var f=s.deletions;if(f!==null)for(var p=0;p<f.length;p++){var _=f[p],b=i,O=s,G=O;t:for(;G!==null;){switch(G.tag){case 27:if(gc(G.type)){Ue=G.stateNode,pn=!1;break t}break;case 5:Ue=G.stateNode,pn=!1;break t;case 3:case 4:Ue=G.stateNode.containerInfo,pn=!0;break t}G=G.return}if(Ue===null)throw Error(n(160));sl(b,O,_),Ue=null,pn=!1,b=_.alternate,b!==null&&(b.return=null),_.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)fh(s,i),s=s.sibling}var Us=null;function fh(i,s){var f=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Li(s,i),$n(i),p&4&&(Va(3,i,i.return),nl(3,i),Va(5,i,i.return));break;case 1:Li(s,i),$n(i),p&512&&(Vn||f===null||$s(f,f.return)),p&64&&tr&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var _=Us;if(Li(s,i),$n(i),p&512&&(Vn||f===null||$s(f,f.return)),p&4){var b=f!==null?f.memoizedState:null;if(p=i.memoizedState,f===null)if(p===null)if(i.stateNode===null){t:{p=i.type,f=i.memoizedProps,_=_.ownerDocument||_;e:switch(p){case"title":b=_.getElementsByTagName("title")[0],(!b||b[As]||b[pi]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=_.createElement(p),_.head.insertBefore(b,_.querySelector("head > title"))),ga(b,p,f),b[pi]=i,mi(b),p=b;break t;case"link":var O=bS("link","href",_).get(p+(f.href||""));if(O){for(var G=0;G<O.length;G++)if(b=O[G],b.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&b.getAttribute("rel")===(f.rel==null?null:f.rel)&&b.getAttribute("title")===(f.title==null?null:f.title)&&b.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){O.splice(G,1);break e}}b=_.createElement(p),ga(b,p,f),_.head.appendChild(b);break;case"meta":if(O=bS("meta","content",_).get(p+(f.content||""))){for(G=0;G<O.length;G++)if(b=O[G],b.getAttribute("content")===(f.content==null?null:""+f.content)&&b.getAttribute("name")===(f.name==null?null:f.name)&&b.getAttribute("property")===(f.property==null?null:f.property)&&b.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&b.getAttribute("charset")===(f.charSet==null?null:f.charSet)){O.splice(G,1);break e}}b=_.createElement(p),ga(b,p,f),_.head.appendChild(b);break;default:throw Error(n(468,p))}b[pi]=i,mi(b),p=b}i.stateNode=p}else ES(_,i.type,i.stateNode);else i.stateNode=MS(_,p,i.memoizedProps);else b!==p?(b===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):b.count--,p===null?ES(_,i.type,i.stateNode):MS(_,p,i.memoizedProps)):p===null&&i.stateNode!==null&&Ru(i,i.memoizedProps,f.memoizedProps)}break;case 27:Li(s,i),$n(i),p&512&&(Vn||f===null||$s(f,f.return)),f!==null&&p&4&&Ru(i,i.memoizedProps,f.memoizedProps);break;case 5:if(Li(s,i),$n(i),p&512&&(Vn||f===null||$s(f,f.return)),i.flags&32){_=i.stateNode;try{oa(_,"")}catch(bt){st(i,i.return,bt)}}p&4&&i.stateNode!=null&&(_=i.memoizedProps,Ru(i,_,f!==null?f.memoizedProps:_)),p&1024&&(uc=!0);break;case 6:if(Li(s,i),$n(i),p&4){if(i.stateNode===null)throw Error(n(162));p=i.memoizedProps,f=i.stateNode;try{f.nodeValue=p}catch(bt){st(i,i.return,bt)}}break;case 3:if(Kg=null,_=Us,Us=qg(s.containerInfo),Li(s,i),Us=_,$n(i),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Dp(s.containerInfo)}catch(bt){st(i,i.return,bt)}uc&&(uc=!1,Ro(i));break;case 4:p=Us,Us=qg(i.stateNode.containerInfo),Li(s,i),$n(i),Us=p;break;case 12:Li(s,i),$n(i);break;case 13:Li(s,i),$n(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Nn=Gt()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,rl(i,p)));break;case 22:_=i.memoizedState!==null;var Z=f!==null&&f.memoizedState!==null,yt=tr,Nt=Vn;if(tr=yt||_,Vn=Nt||Z,Li(s,i),Vn=Nt,tr=yt,$n(i),p&8192)t:for(s=i.stateNode,s._visibility=_?s._visibility&-2:s._visibility|1,_&&(f===null||Z||tr||Vn||Ya(i)),f=null,s=i;;){if(s.tag===5||s.tag===26){if(f===null){Z=f=s;try{if(b=Z.stateNode,_)O=b.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{G=Z.stateNode;var Ft=Z.memoizedProps.style,xt=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;G.style.display=xt==null||typeof xt=="boolean"?"":(""+xt).trim()}}catch(bt){st(Z,Z.return,bt)}}}else if(s.tag===6){if(f===null){Z=s;try{Z.stateNode.nodeValue=_?"":Z.memoizedProps}catch(bt){st(Z,Z.return,bt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;f===s&&(f=null),s=s.return}f===s&&(f=null),s.sibling.return=s.return,s=s.sibling}p&4&&(p=i.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,rl(i,f))));break;case 19:Li(s,i),$n(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,rl(i,p)));break;case 30:break;case 21:break;default:Li(s,i),$n(i)}}function $n(i){var s=i.flags;if(s&2){try{for(var f,p=i.return;p!==null;){if(Bu(p)){f=p;break}p=p.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var _=f.stateNode,b=Mo(i);Eo(i,b,_);break;case 5:var O=f.stateNode;f.flags&32&&(oa(O,""),f.flags&=-33);var G=Mo(i);Eo(i,G,O);break;case 3:case 4:var Z=f.stateNode.containerInfo,yt=Mo(i);bo(i,yt,Z);break;default:throw Error(n(161))}}catch(Nt){st(i,i.return,Nt)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Ro(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Ro(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function pa(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Pr(i,s.alternate,s),s=s.sibling}function Ya(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Va(4,s,s.return),Ya(s);break;case 1:$s(s,s.return);var f=s.stateNode;typeof f.componentWillUnmount=="function"&&Ir(s,s.return,f),Ya(s);break;case 27:Mp(s.stateNode);case 26:case 5:$s(s,s.return),Ya(s);break;case 22:s.memoizedState===null&&Ya(s);break;case 30:Ya(s);break;default:Ya(s)}i=i.sibling}}function er(i,s,f){for(f=f&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var p=s.alternate,_=i,b=s,O=b.flags;switch(b.tag){case 0:case 11:case 15:er(_,b,f),nl(4,b);break;case 1:if(er(_,b,f),p=b,_=p.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(yt){st(p,p.return,yt)}if(p=b,_=p.updateQueue,_!==null){var G=p.stateNode;try{var Z=_.shared.hiddenCallbacks;if(Z!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Z.length;_++)$l(Z[_],G)}catch(yt){st(p,p.return,yt)}}f&&O&64&&il(b),al(b,b.return);break;case 27:To(b);case 26:case 5:er(_,b,f),f&&p===null&&O&4&&cc(b),al(b,b.return);break;case 12:er(_,b,f);break;case 13:er(_,b,f),f&&O&4&&Co(_,b);break;case 22:b.memoizedState===null&&er(_,b,f),al(b,b.return);break;case 30:break;default:er(_,b,f)}s=s.sibling}}function hh(i,s){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&Jl(f))}function dh(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Jl(i))}function Pn(i,s,f,p){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ph(i,s,f,p),s=s.sibling}function ph(i,s,f,p){var _=s.flags;switch(s.tag){case 0:case 11:case 15:Pn(i,s,f,p),_&2048&&nl(9,s);break;case 1:Pn(i,s,f,p);break;case 3:Pn(i,s,f,p),_&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Jl(i)));break;case 12:if(_&2048){Pn(i,s,f,p),i=s.stateNode;try{var b=s.memoizedProps,O=b.id,G=b.onPostCommit;typeof G=="function"&&G(O,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Z){st(s,s.return,Z)}}else Pn(i,s,f,p);break;case 13:Pn(i,s,f,p);break;case 23:break;case 22:b=s.stateNode,O=s.alternate,s.memoizedState!==null?b._visibility&2?Pn(i,s,f,p):Ns(i,s):b._visibility&2?Pn(i,s,f,p):(b._visibility|=2,Hr(i,s,f,p,(s.subtreeFlags&10256)!==0)),_&2048&&hh(O,s);break;case 24:Pn(i,s,f,p),_&2048&&dh(s.alternate,s);break;default:Pn(i,s,f,p)}}function Hr(i,s,f,p,_){for(_=_&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var b=i,O=s,G=f,Z=p,yt=O.flags;switch(O.tag){case 0:case 11:case 15:Hr(b,O,G,Z,_),nl(8,O);break;case 23:break;case 22:var Nt=O.stateNode;O.memoizedState!==null?Nt._visibility&2?Hr(b,O,G,Z,_):Ns(b,O):(Nt._visibility|=2,Hr(b,O,G,Z,_)),_&&yt&2048&&hh(O.alternate,O);break;case 24:Hr(b,O,G,Z,_),_&&yt&2048&&dh(O.alternate,O);break;default:Hr(b,O,G,Z,_)}s=s.sibling}}function Ns(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var f=i,p=s,_=p.flags;switch(p.tag){case 22:Ns(f,p),_&2048&&hh(p.alternate,p);break;case 24:Ns(f,p),_&2048&&dh(p.alternate,p);break;default:Ns(f,p)}s=s.sibling}}var ka=8192;function fc(i){if(i.subtreeFlags&ka)for(i=i.child;i!==null;)Fg(i),i=i.sibling}function Fg(i){switch(i.tag){case 26:fc(i),i.flags&ka&&i.memoizedState!==null&&nC(Us,i.memoizedState,i.memoizedProps);break;case 5:fc(i);break;case 3:case 4:var s=Us;Us=qg(i.stateNode.containerInfo),fc(i),Us=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=ka,ka=16777216,fc(i),ka=s):fc(i));break;default:fc(i)}}function Gg(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Xn(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var p=s[f];In=p,ir(p,i)}Gg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yp(i),i=i.sibling}function yp(i){switch(i.tag){case 0:case 11:case 15:Xn(i),i.flags&2048&&Va(9,i,i.return);break;case 3:Xn(i);break;case 12:Xn(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,nr(i)):Xn(i);break;default:Xn(i)}}function nr(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var p=s[f];In=p,ir(p,i)}Gg(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Va(8,s,s.return),nr(s);break;case 22:f=s.stateNode,f._visibility&2&&(f._visibility&=-3,nr(s));break;default:nr(s)}i=i.sibling}}function ir(i,s){for(;In!==null;){var f=In;switch(f.tag){case 0:case 11:case 15:Va(8,f,s);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Jl(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,In=p;else t:for(f=i;In!==null;){p=In;var _=p.sibling,b=p.return;if(tn(p),p===f){In=null;break t}if(_!==null){_.return=b,In=_;break t}In=b}}}var ti={getCacheForType:function(i){var s=Zn(vi),f=s.data.get(i);return f===void 0&&(f=i(),s.data.set(i,f)),f}},_p=typeof WeakMap=="function"?WeakMap:Map,Tn=0,Xe=null,rn=null,we=0,Qe=0,Qn=null,qa=!1,hc=!1,dc=!1,hs=0,qn=0,Os=0,ar=0,ol=0,ds=0,mn=0,Cn=null,Ie=null,cn=!1,Nn=0,$i=1/0,ps=null,Ja=null,Ti=0,ta=null,Hn=null,Ka=0,zr=0,wu=null,ja=null,sr=0,ll=null;function ei(){if((Tn&2)!==0&&we!==0)return we&-we;if(H.T!==null){var i=ke;return i!==0?i:qy()}return je()}function mh(){ds===0&&(ds=(we&536870912)===0||yn?$():536870912);var i=Ln.current;return i!==null&&(i.flags|=32),ds}function ma(i,s,f){(i===Xe&&(Qe===2||Qe===9)||i.cancelPendingCommit!==null)&&(wo(i,0),Ls(i,we,ds,!1)),ae(i,f),((Tn&2)===0||i!==Xe)&&(i===Xe&&((Tn&2)===0&&(ar|=f),qn===4&&Ls(i,we,ds,!1)),No(i))}function pc(i,s,f){if((Tn&6)!==0)throw Error(n(327));var p=!f&&(s&124)===0&&(s&i.expiredLanes)===0||gt(i,s),_=p?x(i,s):c(i,s,!0),b=p;do{if(_===0){hc&&!p&&Ls(i,s,0,!1);break}else{if(f=i.current.alternate,b&&!Bo(f)){_=c(i,s,!1),b=!1;continue}if(_===2){if(b=s,i.errorRecoveryDisabledLanes&b)var O=0;else O=i.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){s=O;t:{var G=i;_=Cn;var Z=G.current.memoizedState.isDehydrated;if(Z&&(wo(G,O).flags|=256),O=c(G,O,!1),O!==2){if(dc&&!Z){G.errorRecoveryDisabledLanes|=b,ar|=b,_=4;break t}b=Ie,Ie=_,b!==null&&(Ie===null?Ie=b:Ie.push.apply(Ie,b))}_=O}if(b=!1,_!==2)continue}}if(_===1){wo(i,0),Ls(i,s,0,!0);break}t:{switch(p=i,b=_,b){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Ls(p,s,ds,!qa);break t;case 2:Ie=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(_=Nn+300-Gt(),10<_)){if(Ls(p,s,ds,!qa),et(p,0,!0)!==0)break t;p.timeoutHandle=pS(Du.bind(null,p,f,Ie,ps,cn,s,ds,ar,mn,qa,b,2,-0,0),_);break t}Du(p,f,Ie,ps,cn,s,ds,ar,mn,qa,b,0,-0,0)}}break}while(!0);No(i)}function Du(i,s,f,p,_,b,O,G,Z,yt,Nt,Ft,xt,bt){if(i.timeoutHandle=-1,Ft=s.subtreeFlags,(Ft&8192||(Ft&16785408)===16785408)&&(Tp={stylesheets:null,count:0,unsuspend:eC},Fg(s),Ft=iC(),Ft!==null)){i.cancelPendingCommit=Ft($t.bind(null,i,s,b,f,p,_,O,G,Z,Nt,1,xt,bt)),Ls(i,b,O,!yt);return}$t(i,s,b,f,p,_,O,G,Z)}function Bo(i){for(var s=i;;){var f=s.tag;if((f===0||f===11||f===15)&&s.flags&16384&&(f=s.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var _=f[p],b=_.getSnapshot;_=_.value;try{if(!xa(b(),_))return!1}catch{return!1}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ls(i,s,f,p){s&=~ol,s&=~ar,i.suspendedLanes|=s,i.pingedLanes&=~s,p&&(i.warmLanes|=s),p=i.expirationTimes;for(var _=s;0<_;){var b=31-re(_),O=1<<b;p[b]=-1,_&=~O}f!==0&&It(i,f,s)}function rr(){return(Tn&6)===0?(Ap(0),!1):!0}function cl(){if(rn!==null){if(Qe===0)var i=rn.return;else i=rn,Cr=ho=null,ep(i),Jo=null,Mu=0,i=rn;for(;i!==null;)lc(i.alternate,i),i=i.return;rn=null}}function wo(i,s){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,HT(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),cl(),Xe=i,rn=f=si(i.current,null),we=s,Qe=0,Qn=null,qa=!1,hc=gt(i,s),dc=!1,mn=ds=ol=ar=Os=qn=0,Ie=Cn=null,cn=!1,(s&8)!==0&&(s|=s&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=s;0<p;){var _=31-re(p),b=1<<_;s|=i[_],p&=~b}return hs=s,ru(),f}function gh(i,s){qe=null,H.H=Su,s===gu||s===Ts?(s=Wd(),Qe=3):s===jd?(s=Wd(),Qe=4):Qe=s===zg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Qn=s,rn===null&&(qn=1,oh(i,Vi(s,i.current)))}function mc(){var i=H.H;return H.H=Su,i===null?Su:i}function vh(){var i=H.A;return H.A=ti,i}function l(){qn=4,qa||(we&4194048)!==we&&Ln.current!==null||(hc=!0),(Os&134217727)===0&&(ar&134217727)===0||Xe===null||Ls(Xe,we,ds,!1)}function c(i,s,f){var p=Tn;Tn|=2;var _=mc(),b=vh();(Xe!==i||we!==s)&&(ps=null,wo(i,s)),s=!1;var O=qn;t:do try{if(Qe!==0&&rn!==null){var G=rn,Z=Qn;switch(Qe){case 8:cl(),O=6;break t;case 3:case 2:case 9:case 6:Ln.current===null&&(s=!0);var yt=Qe;if(Qe=0,Qn=null,tt(i,G,Z,yt),f&&hc){O=0;break t}break;default:yt=Qe,Qe=0,Qn=null,tt(i,G,Z,yt)}}g(),O=qn;break}catch(Nt){gh(i,Nt)}while(!0);return s&&i.shellSuspendCounter++,Cr=ho=null,Tn=p,H.H=_,H.A=b,rn===null&&(Xe=null,we=0,ru()),O}function g(){for(;rn!==null;)B(rn)}function x(i,s){var f=Tn;Tn|=2;var p=mc(),_=vh();Xe!==i||we!==s?(ps=null,$i=Gt()+500,wo(i,s)):hc=gt(i,s);t:do try{if(Qe!==0&&rn!==null){s=rn;var b=Qn;e:switch(Qe){case 1:Qe=0,Qn=null,tt(i,s,b,1);break;case 2:case 9:if(qf(b)){Qe=0,Qn=null,Y(s);break}s=function(){Qe!==2&&Qe!==9||Xe!==i||(Qe=7),No(i)},b.then(s,s);break t;case 3:Qe=7;break t;case 4:Qe=5;break t;case 7:qf(b)?(Qe=0,Qn=null,Y(s)):(Qe=0,Qn=null,tt(i,s,b,7));break;case 5:var O=null;switch(rn.tag){case 26:O=rn.memoizedState;case 5:case 27:var G=rn;if(!O||TS(O)){Qe=0,Qn=null;var Z=G.sibling;if(Z!==null)rn=Z;else{var yt=G.return;yt!==null?(rn=yt,dt(yt)):rn=null}break e}}Qe=0,Qn=null,tt(i,s,b,5);break;case 6:Qe=0,Qn=null,tt(i,s,b,6);break;case 8:cl(),qn=6;break t;default:throw Error(n(462))}}T();break}catch(Nt){gh(i,Nt)}while(!0);return Cr=ho=null,H.H=p,H.A=_,Tn=f,rn!==null?0:(Xe=null,we=0,ru(),qn)}function T(){for(;rn!==null&&!Wt();)B(rn)}function B(i){var s=tl(i.alternate,i,hs);i.memoizedProps=i.pendingProps,s===null?dt(i):rn=s}function Y(i){var s=i,f=s.alternate;switch(s.tag){case 15:case 0:s=Fa(f,s,s.pendingProps,s.type,void 0,we);break;case 11:s=Fa(f,s,s.pendingProps,s.type.render,s.ref,we);break;case 5:ep(s);default:lc(f,s),s=rn=Vd(s,hs),s=tl(f,s,hs)}i.memoizedProps=i.pendingProps,s===null?dt(i):rn=s}function tt(i,s,f,p){Cr=ho=null,ep(s),Jo=null,Mu=0;var _=s.return;try{if(Yy(i,_,s,f,we)){qn=1,oh(i,Vi(f,i.current)),rn=null;return}}catch(b){if(_!==null)throw rn=_,b;qn=1,oh(i,Vi(f,i.current)),rn=null;return}s.flags&32768?(yn||p===1?i=!0:hc||(we&536870912)!==0?i=!1:(qa=i=!0,(p===2||p===9||p===3||p===6)&&(p=Ln.current,p!==null&&p.tag===13&&(p.flags|=16384))),Ut(s,i)):dt(s)}function dt(i){var s=i;do{if((s.flags&32768)!==0){Ut(s,qa);return}i=s.return;var f=vp(s.alternate,s,hs);if(f!==null){rn=f;return}if(s=s.sibling,s!==null){rn=s;return}rn=s=i}while(s!==null);qn===0&&(qn=5)}function Ut(i,s){do{var f=oc(i.alternate,i);if(f!==null){f.flags&=32767,rn=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!s&&(i=i.sibling,i!==null)){rn=i;return}rn=i=f}while(i!==null);qn=6,rn=null}function $t(i,s,f,p,_,b,O,G,Z){i.cancelPendingCommit=null;do Do();while(Ti!==0);if((Tn&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(b=s.lanes|s.childLanes,b|=Pf,Kt(i,f,b,O,G,Z),i===Xe&&(rn=Xe=null,we=0),Hn=s,ta=i,Ka=f,zr=b,wu=_,ja=p,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_n(ie,function(){return Uo(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||p){p=H.T,H.T=null,_=W.p,W.p=2,O=Tn,Tn|=4;try{Ei(i,s,f)}finally{Tn=O,W.p=_,H.T=p}}Ti=1,ce(),me(),Ye()}}function ce(){if(Ti===1){Ti=0;var i=ta,s=Hn,f=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var p=W.p;W.p=2;var _=Tn;Tn|=4;try{fh(s,i);var b=t_,O=Ld(i.containerInfo),G=b.focusedElem,Z=b.selectionRange;if(O!==G&&G&&G.ownerDocument&&Od(G.ownerDocument.documentElement,G)){if(Z!==null&&iu(G)){var yt=Z.start,Nt=Z.end;if(Nt===void 0&&(Nt=yt),"selectionStart"in G)G.selectionStart=yt,G.selectionEnd=Math.min(Nt,G.value.length);else{var Ft=G.ownerDocument||document,xt=Ft&&Ft.defaultView||window;if(xt.getSelection){var bt=xt.getSelection(),Ve=G.textContent.length,He=Math.min(Z.start,Ve),kn=Z.end===void 0?He:Math.min(Z.end,Ve);!bt.extend&&He>kn&&(O=kn,kn=He,He=O);var ft=Nd(G,He),rt=Nd(G,kn);if(ft&&rt&&(bt.rangeCount!==1||bt.anchorNode!==ft.node||bt.anchorOffset!==ft.offset||bt.focusNode!==rt.node||bt.focusOffset!==rt.offset)){var vt=Ft.createRange();vt.setStart(ft.node,ft.offset),bt.removeAllRanges(),He>kn?(bt.addRange(vt),bt.extend(rt.node,rt.offset)):(vt.setEnd(rt.node,rt.offset),bt.addRange(vt))}}}}for(Ft=[],bt=G;bt=bt.parentNode;)bt.nodeType===1&&Ft.push({element:bt,left:bt.scrollLeft,top:bt.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Ft.length;G++){var Pt=Ft[G];Pt.element.scrollLeft=Pt.left,Pt.element.scrollTop=Pt.top}}Qg=!!$y,t_=$y=null}finally{Tn=_,W.p=p,H.T=f}}i.current=s,Ti=2}}function me(){if(Ti===2){Ti=0;var i=ta,s=Hn,f=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var p=W.p;W.p=2;var _=Tn;Tn|=4;try{Pr(i,s.alternate,s)}finally{Tn=_,W.p=p,H.T=f}}Ti=3}}function Ye(){if(Ti===4||Ti===3){Ti=0,Xt();var i=ta,s=Hn,f=Ka,p=ja;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ti=5:(Ti=0,Hn=ta=null,Wa(i,i.pendingLanes));var _=i.pendingLanes;if(_===0&&(Ja=null),nn(f),s=s.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot(Rt,s,void 0,(s.current.flags&128)===128)}catch{}if(p!==null){s=H.T,_=W.p,W.p=2,H.T=null;try{for(var b=i.onRecoverableError,O=0;O<p.length;O++){var G=p[O];b(G.value,{componentStack:G.stack})}}finally{H.T=s,W.p=_}}(Ka&3)!==0&&Do(),No(i),_=i.pendingLanes,(f&4194090)!==0&&(_&42)!==0?i===ll?sr++:(sr=0,ll=i):sr=0,Ap(0)}}function Wa(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Jl(s)))}function Do(i){return ce(),me(),Ye(),Uo()}function Uo(){if(Ti!==5)return!1;var i=ta,s=zr;zr=0;var f=nn(Ka),p=H.T,_=W.p;try{W.p=32>f?32:f,H.T=null,f=wu,wu=null;var b=ta,O=Ka;if(Ti=0,Hn=ta=null,Ka=0,(Tn&6)!==0)throw Error(n(331));var G=Tn;if(Tn|=4,yp(b.current),ph(b,b.current,O,f),Tn=G,Ap(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot(Rt,b)}catch{}return!0}finally{W.p=_,H.T=p,Wa(i,s)}}function At(i,s,f){s=Vi(f,s),s=lh(i.stateNode,s,2),i=wr(i,s,2),i!==null&&(ae(i,2),No(i))}function st(i,s,f){if(i.tag===3)At(i,i,f);else for(;s!==null;){if(s.tag===3){At(s,i,f);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Ja===null||!Ja.has(p))){i=Vi(f,i),f=Hg(2),p=wr(s,f,2),p!==null&&(ch(f,p,s,i),ae(p,2),No(p));break}}s=s.return}}function Et(i,s,f){var p=i.pingCache;if(p===null){p=i.pingCache=new _p;var _=new Set;p.set(s,_)}else _=p.get(s),_===void 0&&(_=new Set,p.set(s,_));_.has(f)||(dc=!0,_.add(f),i=Zt.bind(null,i,s,f),s.then(i,i))}function Zt(i,s,f){var p=i.pingCache;p!==null&&p.delete(s),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,Xe===i&&(we&f)===f&&(qn===4||qn===3&&(we&62914560)===we&&300>Gt()-Nn?(Tn&2)===0&&wo(i,0):ol|=f,mn===we&&(mn=0)),No(i)}function Te(i,s){s===0&&(s=jt()),i=Er(i,s),i!==null&&(ae(i,s),No(i))}function Jn(i){var s=i.memoizedState,f=0;s!==null&&(f=s.retryLane),Te(i,f)}function Ge(i,s){var f=0;switch(i.tag){case 13:var p=i.stateNode,_=i.memoizedState;_!==null&&(f=_.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(s),Te(i,f)}function _n(i,s){return Ae(i,s)}var ci=null,on=null,or=!1,yh=!1,ky=!1,Uu=0;function No(i){i!==on&&i.next===null&&(on===null?ci=on=i:on=on.next=i),yh=!0,or||(or=!0,BT())}function Ap(i,s){if(!ky&&yh){ky=!0;do for(var f=!1,p=ci;p!==null;){if(i!==0){var _=p.pendingLanes;if(_===0)var b=0;else{var O=p.suspendedLanes,G=p.pingedLanes;b=(1<<31-re(42|i)+1)-1,b&=_&~(O&~G),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(f=!0,aS(p,b))}else b=we,b=et(p,p===Xe?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||gt(p,b)||(f=!0,aS(p,b));p=p.next}while(f);ky=!1}}function RT(){eS()}function eS(){yh=or=!1;var i=0;Uu!==0&&(PT()&&(i=Uu),Uu=0);for(var s=Gt(),f=null,p=ci;p!==null;){var _=p.next,b=nS(p,s);b===0?(p.next=null,f===null?ci=_:f.next=_,_===null&&(on=f)):(f=p,(i!==0||(b&3)!==0)&&(yh=!0)),p=_}Ap(i)}function nS(i,s){for(var f=i.suspendedLanes,p=i.pingedLanes,_=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var O=31-re(b),G=1<<O,Z=_[O];Z===-1?((G&f)===0||(G&p)!==0)&&(_[O]=Jt(G,s)):Z<=s&&(i.expiredLanes|=G),b&=~G}if(s=Xe,f=we,f=et(i,i===s?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,f===0||i===s&&(Qe===2||Qe===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&K(p),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||gt(i,f)){if(s=f&-f,s===i.callbackPriority)return s;switch(p!==null&&K(p),nn(f)){case 2:case 8:f=Vt;break;case 32:f=ie;break;case 268435456:f=Q;break;default:f=ie}return p=iS.bind(null,i),f=Ae(f,p),i.callbackPriority=s,i.callbackNode=f,s}return p!==null&&p!==null&&K(p),i.callbackPriority=2,i.callbackNode=null,2}function iS(i,s){if(Ti!==0&&Ti!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(Do()&&i.callbackNode!==f)return null;var p=we;return p=et(i,i===Xe?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(pc(i,p,s),nS(i,Gt()),i.callbackNode!=null&&i.callbackNode===f?iS.bind(null,i):null)}function aS(i,s){if(Do())return null;pc(i,s,!0)}function BT(){zT(function(){(Tn&6)!==0?Ae(se,RT):eS()})}function qy(){return Uu===0&&(Uu=$()),Uu}function sS(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Yc(""+i)}function rS(i,s){var f=s.ownerDocument.createElement("input");return f.name=s.name,f.value=s.value,i.id&&f.setAttribute("form",i.id),s.parentNode.insertBefore(f,s),i=new FormData(i),f.parentNode.removeChild(f),i}function wT(i,s,f,p,_){if(s==="submit"&&f&&f.stateNode===_){var b=sS((_[xi]||null).action),O=p.submitter;O&&(s=(s=O[xi]||null)?sS(s.formAction):O.getAttribute("formAction"),s!==null&&(b=s,O=null));var G=new Ol("action","action",null,p,_);i.push({event:G,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Uu!==0){var Z=O?rS(_,O):new FormData(_);dp(f,{pending:!0,data:Z,method:_.method,action:b},null,Z)}}else typeof b=="function"&&(G.preventDefault(),Z=O?rS(_,O):new FormData(_),dp(f,{pending:!0,data:Z,method:_.method,action:b},b,Z))},currentTarget:_}]})}}for(var Jy=0;Jy<su.length;Jy++){var Ky=su[Jy],DT=Ky.toLowerCase(),UT=Ky[0].toUpperCase()+Ky.slice(1);Di(DT,"on"+UT)}Di(ca,"onAnimationEnd"),Di(Hd,"onAnimationIteration"),Di(Ma,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Wm,"onTransitionRun"),Di(Mr,"onTransitionStart"),Di(Vl,"onTransitionCancel"),Di(br,"onTransitionEnd"),V("onMouseEnter",["mouseout","mouseover"]),V("onMouseLeave",["mouseout","mouseover"]),V("onPointerEnter",["pointerout","pointerover"]),V("onPointerLeave",["pointerout","pointerover"]),Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xp));function oS(i,s){s=(s&4)!==0;for(var f=0;f<i.length;f++){var p=i[f],_=p.event;p=p.listeners;t:{var b=void 0;if(s)for(var O=p.length-1;0<=O;O--){var G=p[O],Z=G.instance,yt=G.currentTarget;if(G=G.listener,Z!==b&&_.isPropagationStopped())break t;b=G,_.currentTarget=yt;try{b(_)}catch(Nt){jo(Nt)}_.currentTarget=null,b=Z}else for(O=0;O<p.length;O++){if(G=p[O],Z=G.instance,yt=G.currentTarget,G=G.listener,Z!==b&&_.isPropagationStopped())break t;b=G,_.currentTarget=yt;try{b(_)}catch(Nt){jo(Nt)}_.currentTarget=null,b=Z}}}}function fn(i,s){var f=s[_a];f===void 0&&(f=s[_a]=new Set);var p=i+"__bubble";f.has(p)||(lS(s,i,2,!1),f.add(p))}function jy(i,s,f){var p=0;s&&(p|=4),lS(f,i,p,s)}var Vg="_reactListening"+Math.random().toString(36).slice(2);function Wy(i){if(!i[Vg]){i[Vg]=!0,Bl.forEach(function(f){f!=="selectionchange"&&(NT.has(f)||jy(f,!1,i),jy(f,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Vg]||(s[Vg]=!0,jy("selectionchange",!1,s))}}function lS(i,s,f,p){switch(US(s)){case 2:var _=rC;break;case 8:_=oC;break;default:_=u_}f=_.bind(null,s,f,i),_=void 0,!qc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),p?_!==void 0?i.addEventListener(s,f,{capture:!0,passive:_}):i.addEventListener(s,f,!0):_!==void 0?i.addEventListener(s,f,{passive:_}):i.addEventListener(s,f,!1)}function Qy(i,s,f,p,_){var b=p;if((s&1)===0&&(s&2)===0&&p!==null)t:for(;;){if(p===null)return;var O=p.tag;if(O===3||O===4){var G=p.stateNode.containerInfo;if(G===_)break;if(O===4)for(O=p.return;O!==null;){var Z=O.tag;if((Z===3||Z===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;G!==null;){if(O=xs(G),O===null)return;if(Z=O.tag,Z===5||Z===6||Z===26||Z===27){p=b=O;continue t}G=G.parentNode}}p=p.return}xd(function(){var yt=b,Nt=bf(f),Ft=[];t:{var xt=If.get(i);if(xt!==void 0){var bt=Ol,Ve=i;switch(i){case"keypress":if(to(f)===0)break t;case"keydown":case"keyup":bt=Td;break;case"focusin":Ve="focus",bt=Tf;break;case"focusout":Ve="blur",bt=Tf;break;case"beforeblur":case"afterblur":bt=Tf;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Ny;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=Rd;break;case ca:case Hd:case Ma:bt=Lm;break;case br:bt=_r;break;case"scroll":case"scrollend":bt=Um;break;case"wheel":bt=Oy;break;case"copy":case"cut":case"paste":bt=Pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Rf;break;case"toggle":case"beforetoggle":bt=no}var He=(s&4)!==0,kn=!He&&(i==="scroll"||i==="scrollend"),ft=He?xt!==null?xt+"Capture":null:xt;He=[];for(var rt=yt,vt;rt!==null;){var Pt=rt;if(vt=Pt.stateNode,Pt=Pt.tag,Pt!==5&&Pt!==26&&Pt!==27||vt===null||ft===null||(Pt=Dl(rt,ft),Pt!=null&&He.push(Sp(rt,Pt,vt))),kn)break;rt=rt.return}0<He.length&&(xt=new bt(xt,Ve,null,f,Nt),Ft.push({event:xt,listeners:He}))}}if((s&7)===0){t:{if(xt=i==="mouseover"||i==="pointerover",bt=i==="mouseout"||i==="pointerout",xt&&f!==Mf&&(Ve=f.relatedTarget||f.fromElement)&&(xs(Ve)||Ve[Wi]))break t;if((bt||xt)&&(xt=Nt.window===Nt?Nt:(xt=Nt.ownerDocument)?xt.defaultView||xt.parentWindow:window,bt?(Ve=f.relatedTarget||f.toElement,bt=yt,Ve=Ve?xs(Ve):null,Ve!==null&&(kn=o(Ve),He=Ve.tag,Ve!==kn||He!==5&&He!==27&&He!==6)&&(Ve=null)):(bt=null,Ve=yt),bt!==Ve)){if(He=bd,Pt="onMouseLeave",ft="onMouseEnter",rt="mouse",(i==="pointerout"||i==="pointerover")&&(He=Rf,Pt="onPointerLeave",ft="onPointerEnter",rt="pointer"),kn=bt==null?xt:Zr(bt),vt=Ve==null?xt:Zr(Ve),xt=new He(Pt,rt+"leave",bt,f,Nt),xt.target=kn,xt.relatedTarget=vt,Pt=null,xs(Nt)===yt&&(He=new He(ft,rt+"enter",Ve,f,Nt),He.target=vt,He.relatedTarget=kn,Pt=He),kn=Pt,bt&&Ve)e:{for(He=bt,ft=Ve,rt=0,vt=He;vt;vt=_h(vt))rt++;for(vt=0,Pt=ft;Pt;Pt=_h(Pt))vt++;for(;0<rt-vt;)He=_h(He),rt--;for(;0<vt-rt;)ft=_h(ft),vt--;for(;rt--;){if(He===ft||ft!==null&&He===ft.alternate)break e;He=_h(He),ft=_h(ft)}He=null}else He=null;bt!==null&&cS(Ft,xt,bt,He,!1),Ve!==null&&kn!==null&&cS(Ft,kn,Ve,He,!0)}}t:{if(xt=yt?Zr(yt):window,bt=xt.nodeName&&xt.nodeName.toLowerCase(),bt==="select"||bt==="input"&&xt.type==="file")var xe=wf;else if(Ud(xt))if(Df)xe=so;else{xe=Jm;var un=Ly}else bt=xt.nodeName,!bt||bt.toLowerCase()!=="input"||xt.type!=="checkbox"&&xt.type!=="radio"?yt&&Sf(yt.elementType)&&(xe=wf):xe=nu;if(xe&&(xe=xe(i,yt))){Aa(Ft,xe,f,Nt);break t}un&&un(i,xt,yt),i==="focusout"&&yt&&xt.type==="number"&&yt.memoizedProps.value!=null&&Hi(xt,"number",xt.value)}switch(un=yt?Zr(yt):window,i){case"focusin":(Ud(un)||un.contentEditable==="true")&&(xr=un,Nf=yt,au=null);break;case"focusout":au=Nf=xr=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,Pd(Ft,f,Nt);break;case"selectionchange":if(Id)break;case"keydown":case"keyup":Pd(Ft,f,Nt)}var Ce;if(Wc)t:{switch(i){case"compositionstart":var ze="onCompositionStart";break t;case"compositionend":ze="onCompositionEnd";break t;case"compositionupdate":ze="onCompositionUpdate";break t}ze=void 0}else ao?$c(i,f)&&(ze="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(ze="onCompositionStart");ze&&(Zc&&f.locale!=="ko"&&(ao||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&ao&&(Ce=Md()):(vr=Nt,Sd="value"in vr?vr.value:vr.textContent,ao=!0)),un=Xg(yt,ze),0<un.length&&(ze=new Cf(ze,i,null,f,Nt),Ft.push({event:ze,listeners:un}),Ce?ze.data=Ce:(Ce=wd(f),Ce!==null&&(ze.data=Ce)))),(Ce=Qc?tu(i,f):Dd(i,f))&&(ze=Xg(yt,"onBeforeInput"),0<ze.length&&(un=new Cf("onBeforeInput","beforeinput",null,f,Nt),Ft.push({event:un,listeners:ze}),un.data=Ce)),wT(Ft,i,yt,f,Nt)}oS(Ft,s)})}function Sp(i,s,f){return{instance:i,listener:s,currentTarget:f}}function Xg(i,s){for(var f=s+"Capture",p=[];i!==null;){var _=i,b=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||b===null||(_=Dl(i,f),_!=null&&p.unshift(Sp(i,_,b)),_=Dl(i,s),_!=null&&p.push(Sp(i,_,b))),i.tag===3)return p;i=i.return}return[]}function _h(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function cS(i,s,f,p,_){for(var b=s._reactName,O=[];f!==null&&f!==p;){var G=f,Z=G.alternate,yt=G.stateNode;if(G=G.tag,Z!==null&&Z===p)break;G!==5&&G!==26&&G!==27||yt===null||(Z=yt,_?(yt=Dl(f,b),yt!=null&&O.unshift(Sp(f,yt,Z))):_||(yt=Dl(f,b),yt!=null&&O.push(Sp(f,yt,Z)))),f=f.return}O.length!==0&&i.push({event:s,listeners:O})}var OT=/\r\n?/g,LT=/\u0000|\uFFFD/g;function uS(i){return(typeof i=="string"?i:""+i).replace(OT,`
`).replace(LT,"")}function fS(i,s){return s=uS(s),uS(i)===s}function Yg(){}function Yn(i,s,f,p,_,b){switch(f){case"children":typeof p=="string"?s==="body"||s==="textarea"&&p===""||oa(i,p):(typeof p=="number"||typeof p=="bigint")&&s!=="body"&&oa(i,""+p);break;case"className":ne(i,"class",p);break;case"tabIndex":ne(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":ne(i,f,p);break;case"style":Xc(i,p,b);break;case"data":if(s!=="object"){ne(i,"data",p);break}case"src":case"href":if(p===""&&(s!=="a"||f!=="href")){i.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(f);break}p=Yc(""+p),i.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(f==="formAction"?(s!=="input"&&Yn(i,s,"name",_.name,_,null),Yn(i,s,"formEncType",_.formEncType,_,null),Yn(i,s,"formMethod",_.formMethod,_,null),Yn(i,s,"formTarget",_.formTarget,_,null)):(Yn(i,s,"encType",_.encType,_,null),Yn(i,s,"method",_.method,_,null),Yn(i,s,"target",_.target,_,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(f);break}p=Yc(""+p),i.setAttribute(f,p);break;case"onClick":p!=null&&(i.onclick=Yg);break;case"onScroll":p!=null&&fn("scroll",i);break;case"onScrollEnd":p!=null&&fn("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(n(60));i.innerHTML=f}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}f=Yc(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,""+p):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":p===!0?i.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,p):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(f,p):i.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(f):i.setAttribute(f,p);break;case"popover":fn("beforetoggle",i),fn("toggle",i),Yt(i,"popover",p);break;case"xlinkActuate":he(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":he(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":he(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":he(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":he(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":he(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":he(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":he(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":he(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Yt(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=_d.get(f)||f,Yt(i,f,p))}}function Zy(i,s,f,p,_,b){switch(f){case"style":Xc(i,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(f=p.__html,f!=null){if(_.children!=null)throw Error(n(60));i.innerHTML=f}}break;case"children":typeof p=="string"?oa(i,p):(typeof p=="number"||typeof p=="bigint")&&oa(i,""+p);break;case"onScroll":p!=null&&fn("scroll",i);break;case"onScrollEnd":p!=null&&fn("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Yg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wl.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(_=f.endsWith("Capture"),s=f.slice(2,_?f.length-7:void 0),b=i[xi]||null,b=b!=null?b[f]:null,typeof b=="function"&&i.removeEventListener(s,b,_),typeof p=="function")){typeof b!="function"&&b!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(s,p,_);break t}f in i?i[f]=p:p===!0?i.setAttribute(f,""):Yt(i,f,p)}}}function ga(i,s,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fn("error",i),fn("load",i);var p=!1,_=!1,b;for(b in f)if(f.hasOwnProperty(b)){var O=f[b];if(O!=null)switch(b){case"src":p=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Yn(i,s,b,O,f,null)}}_&&Yn(i,s,"srcSet",f.srcSet,f,null),p&&Yn(i,s,"src",f.src,f,null);return;case"input":fn("invalid",i);var G=b=O=_=null,Z=null,yt=null;for(p in f)if(f.hasOwnProperty(p)){var Nt=f[p];if(Nt!=null)switch(p){case"name":_=Nt;break;case"type":O=Nt;break;case"checked":Z=Nt;break;case"defaultChecked":yt=Nt;break;case"value":b=Nt;break;case"defaultValue":G=Nt;break;case"children":case"dangerouslySetInnerHTML":if(Nt!=null)throw Error(n(137,s));break;default:Yn(i,s,p,Nt,f,null)}}Un(i,b,G,Z,yt,O,_,!1),Bn(i);return;case"select":fn("invalid",i),p=O=b=null;for(_ in f)if(f.hasOwnProperty(_)&&(G=f[_],G!=null))switch(_){case"value":b=G;break;case"defaultValue":O=G;break;case"multiple":p=G;default:Yn(i,s,_,G,f,null)}s=b,f=O,i.multiple=!!p,s!=null?gi(i,!!p,s,!1):f!=null&&gi(i,!!p,f,!0);return;case"textarea":fn("invalid",i),b=_=p=null;for(O in f)if(f.hasOwnProperty(O)&&(G=f[O],G!=null))switch(O){case"value":p=G;break;case"defaultValue":_=G;break;case"children":b=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(91));break;default:Yn(i,s,O,G,f,null)}wi(i,p,_,b),Bn(i);return;case"option":for(Z in f)if(f.hasOwnProperty(Z)&&(p=f[Z],p!=null))switch(Z){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Yn(i,s,Z,p,f,null)}return;case"dialog":fn("beforetoggle",i),fn("toggle",i),fn("cancel",i),fn("close",i);break;case"iframe":case"object":fn("load",i);break;case"video":case"audio":for(p=0;p<xp.length;p++)fn(xp[p],i);break;case"image":fn("error",i),fn("load",i);break;case"details":fn("toggle",i);break;case"embed":case"source":case"link":fn("error",i),fn("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(yt in f)if(f.hasOwnProperty(yt)&&(p=f[yt],p!=null))switch(yt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:Yn(i,s,yt,p,f,null)}return;default:if(Sf(s)){for(Nt in f)f.hasOwnProperty(Nt)&&(p=f[Nt],p!==void 0&&Zy(i,s,Nt,p,f,void 0));return}}for(G in f)f.hasOwnProperty(G)&&(p=f[G],p!=null&&Yn(i,s,G,p,f,null))}function IT(i,s,f,p){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,b=null,O=null,G=null,Z=null,yt=null,Nt=null;for(bt in f){var Ft=f[bt];if(f.hasOwnProperty(bt)&&Ft!=null)switch(bt){case"checked":break;case"value":break;case"defaultValue":Z=Ft;default:p.hasOwnProperty(bt)||Yn(i,s,bt,null,p,Ft)}}for(var xt in p){var bt=p[xt];if(Ft=f[xt],p.hasOwnProperty(xt)&&(bt!=null||Ft!=null))switch(xt){case"type":b=bt;break;case"name":_=bt;break;case"checked":yt=bt;break;case"defaultChecked":Nt=bt;break;case"value":O=bt;break;case"defaultValue":G=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(n(137,s));break;default:bt!==Ft&&Yn(i,s,xt,bt,p,Ft)}}Xs(i,O,G,Z,yt,Nt,b,_);return;case"select":bt=O=G=xt=null;for(b in f)if(Z=f[b],f.hasOwnProperty(b)&&Z!=null)switch(b){case"value":break;case"multiple":bt=Z;default:p.hasOwnProperty(b)||Yn(i,s,b,null,p,Z)}for(_ in p)if(b=p[_],Z=f[_],p.hasOwnProperty(_)&&(b!=null||Z!=null))switch(_){case"value":xt=b;break;case"defaultValue":G=b;break;case"multiple":O=b;default:b!==Z&&Yn(i,s,_,b,p,Z)}s=G,f=O,p=bt,xt!=null?gi(i,!!f,xt,!1):!!p!=!!f&&(s!=null?gi(i,!!f,s,!0):gi(i,!!f,f?[]:"",!1));return;case"textarea":bt=xt=null;for(G in f)if(_=f[G],f.hasOwnProperty(G)&&_!=null&&!p.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:Yn(i,s,G,null,p,_)}for(O in p)if(_=p[O],b=f[O],p.hasOwnProperty(O)&&(_!=null||b!=null))switch(O){case"value":xt=_;break;case"defaultValue":bt=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(n(91));break;default:_!==b&&Yn(i,s,O,_,p,b)}Bi(i,xt,bt);return;case"option":for(var Ve in f)if(xt=f[Ve],f.hasOwnProperty(Ve)&&xt!=null&&!p.hasOwnProperty(Ve))switch(Ve){case"selected":i.selected=!1;break;default:Yn(i,s,Ve,null,p,xt)}for(Z in p)if(xt=p[Z],bt=f[Z],p.hasOwnProperty(Z)&&xt!==bt&&(xt!=null||bt!=null))switch(Z){case"selected":i.selected=xt&&typeof xt!="function"&&typeof xt!="symbol";break;default:Yn(i,s,Z,xt,p,bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in f)xt=f[He],f.hasOwnProperty(He)&&xt!=null&&!p.hasOwnProperty(He)&&Yn(i,s,He,null,p,xt);for(yt in p)if(xt=p[yt],bt=f[yt],p.hasOwnProperty(yt)&&xt!==bt&&(xt!=null||bt!=null))switch(yt){case"children":case"dangerouslySetInnerHTML":if(xt!=null)throw Error(n(137,s));break;default:Yn(i,s,yt,xt,p,bt)}return;default:if(Sf(s)){for(var kn in f)xt=f[kn],f.hasOwnProperty(kn)&&xt!==void 0&&!p.hasOwnProperty(kn)&&Zy(i,s,kn,void 0,p,xt);for(Nt in p)xt=p[Nt],bt=f[Nt],!p.hasOwnProperty(Nt)||xt===bt||xt===void 0&&bt===void 0||Zy(i,s,Nt,xt,p,bt);return}}for(var ft in f)xt=f[ft],f.hasOwnProperty(ft)&&xt!=null&&!p.hasOwnProperty(ft)&&Yn(i,s,ft,null,p,xt);for(Ft in p)xt=p[Ft],bt=f[Ft],!p.hasOwnProperty(Ft)||xt===bt||xt==null&&bt==null||Yn(i,s,Ft,xt,p,bt)}var $y=null,t_=null;function kg(i){return i.nodeType===9?i:i.ownerDocument}function hS(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dS(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function e_(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var n_=null;function PT(){var i=window.event;return i&&i.type==="popstate"?i===n_?!1:(n_=i,!0):(n_=null,!1)}var pS=typeof setTimeout=="function"?setTimeout:void 0,HT=typeof clearTimeout=="function"?clearTimeout:void 0,mS=typeof Promise=="function"?Promise:void 0,zT=typeof queueMicrotask=="function"?queueMicrotask:typeof mS<"u"?function(i){return mS.resolve(null).then(i).catch(FT)}:pS;function FT(i){setTimeout(function(){throw i})}function gc(i){return i==="head"}function gS(i,s){var f=s,p=0,_=0;do{var b=f.nextSibling;if(i.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"){if(0<p&&8>p){f=p;var O=i.ownerDocument;if(f&1&&Mp(O.documentElement),f&2&&Mp(O.body),f&4)for(f=O.head,Mp(f),O=f.firstChild;O;){var G=O.nextSibling,Z=O.nodeName;O[As]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&O.rel.toLowerCase()==="stylesheet"||f.removeChild(O),O=G}}if(_===0){i.removeChild(b),Dp(s);return}_--}else f==="$"||f==="$?"||f==="$!"?_++:p=f.charCodeAt(0)-48;else p=0;f=b}while(f);Dp(s)}function i_(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var f=s;switch(s=s.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":i_(f),Dn(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function GT(i,s,f,p){for(;i.nodeType===1;){var _=f;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[As])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==_.rel||i.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||i.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||i.getAttribute("title")!==(_.title==null?null:_.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(_.src==null?null:_.src)||i.getAttribute("type")!==(_.type==null?null:_.type)||i.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var b=_.name==null?null:""+_.name;if(_.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Fr(i.nextSibling),i===null)break}return null}function VT(i,s,f){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=Fr(i.nextSibling),i===null))return null;return i}function a_(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function XT(i,s){var f=i.ownerDocument;if(i.data!=="$?"||f.readyState==="complete")s();else{var p=function(){s(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function Fr(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var s_=null;function vS(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"){if(s===0)return i;s--}else f==="/$"&&s++}i=i.previousSibling}return null}function yS(i,s,f){switch(s=kg(f),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Mp(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Dn(i)}var lr=new Map,_S=new Set;function qg(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ul=W.d;W.d={f:YT,r:kT,D:qT,C:JT,L:KT,m:jT,X:QT,S:WT,M:ZT};function YT(){var i=ul.f(),s=rr();return i||s}function kT(i){var s=Ss(i);s!==null&&s.tag===5&&s.type==="form"?Eg(s):ul.r(i)}var Ah=typeof document>"u"?null:document;function AS(i,s,f){var p=Ah;if(p&&typeof s=="string"&&s){var _=On(s);_='link[rel="'+i+'"][href="'+_+'"]',typeof f=="string"&&(_+='[crossorigin="'+f+'"]'),_S.has(_)||(_S.add(_),i={rel:i,crossOrigin:f,href:s},p.querySelector(_)===null&&(s=p.createElement("link"),ga(s,"link",i),mi(s),p.head.appendChild(s)))}}function qT(i){ul.D(i),AS("dns-prefetch",i,null)}function JT(i,s){ul.C(i,s),AS("preconnect",i,s)}function KT(i,s,f){ul.L(i,s,f);var p=Ah;if(p&&i&&s){var _='link[rel="preload"][as="'+On(s)+'"]';s==="image"&&f&&f.imageSrcSet?(_+='[imagesrcset="'+On(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(_+='[imagesizes="'+On(f.imageSizes)+'"]')):_+='[href="'+On(i)+'"]';var b=_;switch(s){case"style":b=xh(i);break;case"script":b=Sh(i)}lr.has(b)||(i=v({rel:"preload",href:s==="image"&&f&&f.imageSrcSet?void 0:i,as:s},f),lr.set(b,i),p.querySelector(_)!==null||s==="style"&&p.querySelector(bp(b))||s==="script"&&p.querySelector(Ep(b))||(s=p.createElement("link"),ga(s,"link",i),mi(s),p.head.appendChild(s)))}}function jT(i,s){ul.m(i,s);var f=Ah;if(f&&i){var p=s&&typeof s.as=="string"?s.as:"script",_='link[rel="modulepreload"][as="'+On(p)+'"][href="'+On(i)+'"]',b=_;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Sh(i)}if(!lr.has(b)&&(i=v({rel:"modulepreload",href:i},s),lr.set(b,i),f.querySelector(_)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Ep(b)))return}p=f.createElement("link"),ga(p,"link",i),mi(p),f.head.appendChild(p)}}}function WT(i,s,f){ul.S(i,s,f);var p=Ah;if(p&&i){var _=gr(p).hoistableStyles,b=xh(i);s=s||"default";var O=_.get(b);if(!O){var G={loading:0,preload:null};if(O=p.querySelector(bp(b)))G.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},f),(f=lr.get(b))&&r_(i,f);var Z=O=p.createElement("link");mi(Z),ga(Z,"link",i),Z._p=new Promise(function(yt,Nt){Z.onload=yt,Z.onerror=Nt}),Z.addEventListener("load",function(){G.loading|=1}),Z.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Jg(O,s,p)}O={type:"stylesheet",instance:O,count:1,state:G},_.set(b,O)}}}function QT(i,s){ul.X(i,s);var f=Ah;if(f&&i){var p=gr(f).hoistableScripts,_=Sh(i),b=p.get(_);b||(b=f.querySelector(Ep(_)),b||(i=v({src:i,async:!0},s),(s=lr.get(_))&&o_(i,s),b=f.createElement("script"),mi(b),ga(b,"link",i),f.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(_,b))}}function ZT(i,s){ul.M(i,s);var f=Ah;if(f&&i){var p=gr(f).hoistableScripts,_=Sh(i),b=p.get(_);b||(b=f.querySelector(Ep(_)),b||(i=v({src:i,async:!0,type:"module"},s),(s=lr.get(_))&&o_(i,s),b=f.createElement("script"),mi(b),ga(b,"link",i),f.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(_,b))}}function xS(i,s,f,p){var _=(_=Ht.current)?qg(_):null;if(!_)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(s=xh(f.href),f=gr(_).hoistableStyles,p=f.get(s),p||(p={type:"style",instance:null,count:0,state:null},f.set(s,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=xh(f.href);var b=gr(_).hoistableStyles,O=b.get(i);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,O),(b=_.querySelector(bp(i)))&&!b._p&&(O.instance=b,O.state.loading=5),lr.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},lr.set(i,f),b||$T(_,i,f,O.state))),s&&p===null)throw Error(n(528,""));return O}if(s&&p!==null)throw Error(n(529,""));return null;case"script":return s=f.async,f=f.src,typeof f=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Sh(f),f=gr(_).hoistableScripts,p=f.get(s),p||(p={type:"script",instance:null,count:0,state:null},f.set(s,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function xh(i){return'href="'+On(i)+'"'}function bp(i){return'link[rel="stylesheet"]['+i+"]"}function SS(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function $T(i,s,f,p){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?p.loading=1:(s=i.createElement("link"),p.preload=s,s.addEventListener("load",function(){return p.loading|=1}),s.addEventListener("error",function(){return p.loading|=2}),ga(s,"link",f),mi(s),i.head.appendChild(s))}function Sh(i){return'[src="'+On(i)+'"]'}function Ep(i){return"script[async]"+i}function MS(i,s,f){if(s.count++,s.instance===null)switch(s.type){case"style":var p=i.querySelector('style[data-href~="'+On(f.href)+'"]');if(p)return s.instance=p,mi(p),p;var _=v({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),mi(p),ga(p,"style",_),Jg(p,f.precedence,i),s.instance=p;case"stylesheet":_=xh(f.href);var b=i.querySelector(bp(_));if(b)return s.state.loading|=4,s.instance=b,mi(b),b;p=SS(f),(_=lr.get(_))&&r_(p,_),b=(i.ownerDocument||i).createElement("link"),mi(b);var O=b;return O._p=new Promise(function(G,Z){O.onload=G,O.onerror=Z}),ga(b,"link",p),s.state.loading|=4,Jg(b,f.precedence,i),s.instance=b;case"script":return b=Sh(f.src),(_=i.querySelector(Ep(b)))?(s.instance=_,mi(_),_):(p=f,(_=lr.get(b))&&(p=v({},f),o_(p,_)),i=i.ownerDocument||i,_=i.createElement("script"),mi(_),ga(_,"link",p),i.head.appendChild(_),s.instance=_);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(p=s.instance,s.state.loading|=4,Jg(p,f.precedence,i));return s.instance}function Jg(i,s,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=p.length?p[p.length-1]:null,b=_,O=0;O<p.length;O++){var G=p[O];if(G.dataset.precedence===s)b=G;else if(b!==_)break}b?b.parentNode.insertBefore(i,b.nextSibling):(s=f.nodeType===9?f.head:f,s.insertBefore(i,s.firstChild))}function r_(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function o_(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Kg=null;function bS(i,s,f){if(Kg===null){var p=new Map,_=Kg=new Map;_.set(f,p)}else _=Kg,p=_.get(f),p||(p=new Map,_.set(f,p));if(p.has(i))return p;for(p.set(i,null),f=f.getElementsByTagName(i),_=0;_<f.length;_++){var b=f[_];if(!(b[As]||b[pi]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var O=b.getAttribute(s)||"";O=i+O;var G=p.get(O);G?G.push(b):p.set(O,[b])}}return p}function ES(i,s,f){i=i.ownerDocument||i,i.head.insertBefore(f,s==="title"?i.querySelector("head > title"):null)}function tC(i,s,f){if(f===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function TS(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Tp=null;function eC(){}function nC(i,s,f){if(Tp===null)throw Error(n(475));var p=Tp;if(s.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var _=xh(f.href),b=i.querySelector(bp(_));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(p.count++,p=jg.bind(p),i.then(p,p)),s.state.loading|=4,s.instance=b,mi(b);return}b=i.ownerDocument||i,f=SS(f),(_=lr.get(_))&&r_(f,_),b=b.createElement("link"),mi(b);var O=b;O._p=new Promise(function(G,Z){O.onload=G,O.onerror=Z}),ga(b,"link",f),s.instance=b}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(p.count++,s=jg.bind(p),i.addEventListener("load",s),i.addEventListener("error",s))}}function iC(){if(Tp===null)throw Error(n(475));var i=Tp;return i.stylesheets&&i.count===0&&l_(i,i.stylesheets),0<i.count?function(s){var f=setTimeout(function(){if(i.stylesheets&&l_(i,i.stylesheets),i.unsuspend){var p=i.unsuspend;i.unsuspend=null,p()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(f)}}:null}function jg(){if(this.count--,this.count===0){if(this.stylesheets)l_(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wg=null;function l_(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wg=new Map,s.forEach(aC,i),Wg=null,jg.call(i))}function aC(i,s){if(!(s.state.loading&4)){var f=Wg.get(i);if(f)var p=f.get(null);else{f=new Map,Wg.set(i,f);for(var _=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<_.length;b++){var O=_[b];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(f.set(O.dataset.precedence,O),p=O)}p&&f.set(null,p)}_=s.instance,O=_.getAttribute("data-precedence"),b=f.get(O)||p,b===p&&f.set(null,_),f.set(O,_),this.count++,p=jg.bind(this),_.addEventListener("load",p),_.addEventListener("error",p),b?b.parentNode.insertBefore(_,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(_,i.firstChild)),s.state.loading|=4}}var Cp={$$typeof:U,Provider:null,Consumer:null,_currentValue:j,_currentValue2:j,_threadCount:0};function sC(i,s,f,p,_,b,O,G){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.hiddenUpdates=zt(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=b,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function CS(i,s,f,p,_,b,O,G,Z,yt,Nt,Ft){return i=new sC(i,s,f,O,G,Z,yt,Ft),s=1,b===!0&&(s|=24),b=ba(3,null,null,s),i.current=b,b.stateNode=i,s=Xf(),s.refCount++,i.pooledCache=s,s.refCount++,b.memoizedState={element:p,isDehydrated:f,cache:s},Qd(b),i}function RS(i){return i?(i=lo,i):lo}function BS(i,s,f,p,_,b){_=RS(_),p.context===null?p.context=_:p.pendingContext=_,p=js(s),p.payload={element:f},b=b===void 0?null:b,b!==null&&(p.callback=b),f=wr(i,p,s),f!==null&&(ma(f,i,s),qo(f,i,s))}function wS(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<s?f:s}}function c_(i,s){wS(i,s),(i=i.alternate)&&wS(i,s)}function DS(i){if(i.tag===13){var s=Er(i,67108864);s!==null&&ma(s,i,67108864),c_(i,67108864)}}var Qg=!0;function rC(i,s,f,p){var _=H.T;H.T=null;var b=W.p;try{W.p=2,u_(i,s,f,p)}finally{W.p=b,H.T=_}}function oC(i,s,f,p){var _=H.T;H.T=null;var b=W.p;try{W.p=8,u_(i,s,f,p)}finally{W.p=b,H.T=_}}function u_(i,s,f,p){if(Qg){var _=f_(p);if(_===null)Qy(i,s,p,Zg,f),NS(i,p);else if(cC(_,i,s,f,p))p.stopPropagation();else if(NS(i,p),s&4&&-1<lC.indexOf(i)){for(;_!==null;){var b=Ss(_);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var O=ye(b.pendingLanes);if(O!==0){var G=b;for(G.pendingLanes|=2,G.entangledLanes|=2;O;){var Z=1<<31-re(O);G.entanglements[1]|=Z,O&=~Z}No(b),(Tn&6)===0&&($i=Gt()+500,Ap(0))}}break;case 13:G=Er(b,2),G!==null&&ma(G,b,2),rr(),c_(b,2)}if(b=f_(p),b===null&&Qy(i,s,p,Zg,f),b===_)break;_=b}_!==null&&p.stopPropagation()}else Qy(i,s,p,null,f)}}function f_(i){return i=bf(i),h_(i)}var Zg=null;function h_(i){if(Zg=null,i=xs(i),i!==null){var s=o(i);if(s===null)i=null;else{var f=s.tag;if(f===13){if(i=u(s),i!==null)return i;i=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Zg=i,null}function US(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case se:return 2;case Vt:return 8;case ie:case Oe:return 32;case Q:return 268435456;default:return 32}default:return 32}}var d_=!1,vc=null,yc=null,_c=null,Rp=new Map,Bp=new Map,Ac=[],lC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NS(i,s){switch(i){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":yc=null;break;case"mouseover":case"mouseout":_c=null;break;case"pointerover":case"pointerout":Rp.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bp.delete(s.pointerId)}}function wp(i,s,f,p,_,b){return i===null||i.nativeEvent!==b?(i={blockedOn:s,domEventName:f,eventSystemFlags:p,nativeEvent:b,targetContainers:[_]},s!==null&&(s=Ss(s),s!==null&&DS(s)),i):(i.eventSystemFlags|=p,s=i.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),i)}function cC(i,s,f,p,_){switch(s){case"focusin":return vc=wp(vc,i,s,f,p,_),!0;case"dragenter":return yc=wp(yc,i,s,f,p,_),!0;case"mouseover":return _c=wp(_c,i,s,f,p,_),!0;case"pointerover":var b=_.pointerId;return Rp.set(b,wp(Rp.get(b)||null,i,s,f,p,_)),!0;case"gotpointercapture":return b=_.pointerId,Bp.set(b,wp(Bp.get(b)||null,i,s,f,p,_)),!0}return!1}function OS(i){var s=xs(i.target);if(s!==null){var f=o(s);if(f!==null){if(s=f.tag,s===13){if(s=u(f),s!==null){i.blockedOn=s,di(i.priority,function(){if(f.tag===13){var p=ei();p=Me(p);var _=Er(f,p);_!==null&&ma(_,f,p),c_(f,p)}});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function $g(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var f=f_(i.nativeEvent);if(f===null){f=i.nativeEvent;var p=new f.constructor(f.type,f);Mf=p,f.target.dispatchEvent(p),Mf=null}else return s=Ss(f),s!==null&&DS(s),i.blockedOn=f,!1;s.shift()}return!0}function LS(i,s,f){$g(i)&&f.delete(s)}function uC(){d_=!1,vc!==null&&$g(vc)&&(vc=null),yc!==null&&$g(yc)&&(yc=null),_c!==null&&$g(_c)&&(_c=null),Rp.forEach(LS),Bp.forEach(LS)}function t0(i,s){i.blockedOn===s&&(i.blockedOn=null,d_||(d_=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,uC)))}var e0=null;function IS(i){e0!==i&&(e0=i,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){e0===i&&(e0=null);for(var s=0;s<i.length;s+=3){var f=i[s],p=i[s+1],_=i[s+2];if(typeof p!="function"){if(h_(p||f)===null)continue;break}var b=Ss(f);b!==null&&(i.splice(s,3),s-=3,dp(b,{pending:!0,data:_,method:f.method,action:p},p,_))}}))}function Dp(i){function s(Z){return t0(Z,i)}vc!==null&&t0(vc,i),yc!==null&&t0(yc,i),_c!==null&&t0(_c,i),Rp.forEach(s),Bp.forEach(s);for(var f=0;f<Ac.length;f++){var p=Ac[f];p.blockedOn===i&&(p.blockedOn=null)}for(;0<Ac.length&&(f=Ac[0],f.blockedOn===null);)OS(f),f.blockedOn===null&&Ac.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var _=f[p],b=f[p+1],O=_[xi]||null;if(typeof b=="function")O||IS(f);else if(O){var G=null;if(b&&b.hasAttribute("formAction")){if(_=b,O=b[xi]||null)G=O.formAction;else if(h_(_)!==null)continue}else G=O.action;typeof G=="function"?f[p+1]=G:(f.splice(p,3),p-=3),IS(f)}}}function p_(i){this._internalRoot=i}n0.prototype.render=p_.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var f=s.current,p=ei();BS(f,p,i,s,null,null)},n0.prototype.unmount=p_.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;BS(i.current,2,null,i,null,null),rr(),s[Wi]=null}};function n0(i){this._internalRoot=i}n0.prototype.unstable_scheduleHydration=function(i){if(i){var s=je();i={blockedOn:null,target:i,priority:s};for(var f=0;f<Ac.length&&s!==0&&s<Ac[f].priority;f++);Ac.splice(f,0,i),f===0&&OS(i)}};var PS=t.version;if(PS!=="19.1.0")throw Error(n(527,PS,"19.1.0"));W.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=d(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var fC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var i0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!i0.isDisabled&&i0.supportsFiber)try{Rt=i0.inject(fC),wt=i0}catch{}}return Np.createRoot=function(i,s){if(!a(i))throw Error(n(299));var f=!1,p="",_=Eu,b=rh,O=Pg,G=null;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(_=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(O=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(G=s.unstable_transitionCallbacks)),s=CS(i,1,!1,null,null,f,p,_,b,O,G,null),i[Wi]=s.current,Wy(i),new p_(s)},Np.hydrateRoot=function(i,s,f){if(!a(i))throw Error(n(299));var p=!1,_="",b=Eu,O=rh,G=Pg,Z=null,yt=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(b=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(G=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Z=f.unstable_transitionCallbacks),f.formState!==void 0&&(yt=f.formState)),s=CS(i,1,!0,s,f??null,p,_,b,O,G,Z,yt),s.context=RS(null),f=s.current,p=ei(),p=Me(p),_=js(p),_.callback=null,wr(f,_,p),f=p,s.current.lanes=f,ae(s,f),No(s),i[Wi]=s.current,Wy(i),new n0(s)},Np.version="19.1.0",Np}var JS;function SC(){if(JS)return v_.exports;JS=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),v_.exports=xC(),v_.exports}var aE=SC();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const _m="178",Ku={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ju={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},sE=0,NA=1,rE=2,MC=3,oE=0,Qv=1,Wp=2,Yr=3,zo=0,Na=1,va=2,Ml=0,rf=1,OA=2,LA=3,IA=4,lE=5,wc=100,cE=101,uE=102,fE=103,hE=104,dE=200,pE=201,mE=202,gE=203,sv=204,rv=205,vE=206,yE=207,_E=208,AE=209,xE=210,SE=211,ME=212,bE=213,EE=214,ov=0,lv=1,cv=2,cf=3,uv=4,fv=5,hv=6,dv=7,Am=0,TE=1,CE=2,Po=0,RE=1,BE=2,wE=3,sx=4,DE=5,UE=6,NE=7,PA="attached",OE="detached",Zv=300,Tl=301,Lc=302,om=303,lm=304,hd=306,Jr=1e3,zs=1001,Zh=1002,aa=1003,$v=1004,bC=1004,$u=1005,EC=1005,hi=1006,Kh=1007,LE=1007,fr=1008,IE=1008,dr=1009,rx=1010,ox=1011,$h=1012,ty=1013,Cl=1014,ys=1015,dd=1016,ey=1017,ny=1018,td=1020,lx=35902,cx=1021,ux=1022,Ua=1023,ed=1026,nd=1027,iy=1028,xm=1029,fx=1030,ay=1031,TC=1032,sy=1033,Qp=33776,Zp=33777,$p=33778,tm=33779,pv=35840,mv=35841,gv=35842,vv=35843,yv=36196,_v=37492,Av=37496,xv=37808,Sv=37809,Mv=37810,bv=37811,Ev=37812,Tv=37813,Cv=37814,Rv=37815,Bv=37816,wv=37817,Dv=37818,Uv=37819,Nv=37820,Ov=37821,em=36492,Lv=36494,Iv=36495,hx=36283,Pv=36284,Hv=36285,zv=36286,PE=2200,HE=2201,zE=2202,id=2300,ad=2301,tv=2302,tf=2400,ef=2401,cm=2402,ry=2500,dx=2501,FE=0,px=1,Fv=2,GE=3200,VE=3201,CC=3202,RC=3203,Hc=0,XE=1,Al="",Pi="srgb",Ic="srgb-linear",um="linear",zn="srgb",BC=0,Wu=7680,wC=7681,DC=7682,UC=7683,NC=34055,OC=34056,LC=5386,IC=512,PC=513,HC=514,zC=515,FC=516,GC=517,VC=518,HA=519,YE=512,kE=513,qE=514,mx=515,JE=516,KE=517,jE=518,WE=519,fm=35044,XC=35048,YC=35040,kC=35045,qC=35049,JC=35041,KC=35046,jC=35050,WC=35042,QC="100",zA="300 es",hr=2e3,hm=2001,ZC={COMPUTE:"compute",RENDER:"render"},$C={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},tR={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Go=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const a=n[t];if(a!==void 0){const o=a.indexOf(e);o!==-1&&a.splice(o,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const a=n.slice(0);for(let o=0,u=a.length;o<u;o++)a[o].call(this,t);t.target=null}}};const Ba=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let KS=1234567;const of=Math.PI/180,sd=180/Math.PI;function Fs(){const r=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ba[r&255]+Ba[r>>8&255]+Ba[r>>16&255]+Ba[r>>24&255]+"-"+Ba[t&255]+Ba[t>>8&255]+"-"+Ba[t>>16&15|64]+Ba[t>>24&255]+"-"+Ba[e&63|128]+Ba[e>>8&255]+"-"+Ba[e>>16&255]+Ba[e>>24&255]+Ba[n&255]+Ba[n>>8&255]+Ba[n>>16&255]+Ba[n>>24&255]).toLowerCase()}function Je(r,t,e){return Math.max(t,Math.min(e,r))}function gx(r,t){return(r%t+t)%t}function eR(r,t,e,n,a){return n+(r-t)*(a-n)/(e-t)}function nR(r,t,e){return r!==t?(e-r)/(t-r):0}function nm(r,t,e){return(1-e)*r+e*t}function iR(r,t,e,n){return nm(r,t,1-Math.exp(-e*n))}function aR(r,t=1){return t-Math.abs(gx(r,t*2)-t)}function sR(r,t,e){return r<=t?0:r>=e?1:(r=(r-t)/(e-t),r*r*(3-2*r))}function rR(r,t,e){return r<=t?0:r>=e?1:(r=(r-t)/(e-t),r*r*r*(r*(r*6-15)+10))}function oR(r,t){return r+Math.floor(Math.random()*(t-r+1))}function lR(r,t){return r+Math.random()*(t-r)}function cR(r){return r*(.5-Math.random())}function uR(r){r!==void 0&&(KS=r);let t=KS+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function fR(r){return r*of}function hR(r){return r*sd}function dR(r){return(r&r-1)===0&&r!==0}function pR(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function mR(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function gR(r,t,e,n,a){const o=Math.cos,u=Math.sin,h=o(e/2),d=u(e/2),m=o((t+n)/2),v=u((t+n)/2),y=o((t-n)/2),A=u((t-n)/2),S=o((n-t)/2),E=u((n-t)/2);switch(a){case"XYX":r.set(h*v,d*y,d*A,h*m);break;case"YZY":r.set(d*A,h*v,d*y,h*m);break;case"ZXZ":r.set(d*y,d*A,h*v,h*m);break;case"XZX":r.set(h*v,d*E,d*S,h*m);break;case"YXY":r.set(d*S,h*v,d*E,h*m);break;case"ZYZ":r.set(d*E,d*S,h*v,h*m);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function ts(r,t){switch(t.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function en(r,t){switch(t.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const kh={DEG2RAD:of,RAD2DEG:sd,generateUUID:Fs,clamp:Je,euclideanModulo:gx,mapLinear:eR,inverseLerp:nR,lerp:nm,damp:iR,pingpong:aR,smoothstep:sR,smootherstep:rR,randInt:oR,randFloat:lR,randFloatSpread:cR,seededRandom:uR,degToRad:fR,radToDeg:hR,isPowerOfTwo:dR,ceilPowerOfTwo:pR,floorPowerOfTwo:mR,setQuaternionFromProperEuler:gR,normalize:en,denormalize:ts};class Ot{constructor(t=0,e=0){Ot.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,a=t.elements;return this.x=a[0]*e+a[3]*n+a[6],this.y=a[1]*e+a[4]*n+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Je(this.x,t.x,e.x),this.y=Je(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Je(this.x,t,e),this.y=Je(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Je(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Je(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),a=Math.sin(e),o=this.x-t.x,u=this.y-t.y;return this.x=o*n-u*a+t.x,this.y=o*a+u*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ui{constructor(t=0,e=0,n=0,a=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=a}static slerpFlat(t,e,n,a,o,u,h){let d=n[a+0],m=n[a+1],v=n[a+2],y=n[a+3];const A=o[u+0],S=o[u+1],E=o[u+2],R=o[u+3];if(h===0){t[e+0]=d,t[e+1]=m,t[e+2]=v,t[e+3]=y;return}if(h===1){t[e+0]=A,t[e+1]=S,t[e+2]=E,t[e+3]=R;return}if(y!==R||d!==A||m!==S||v!==E){let C=1-h;const M=d*A+m*S+v*E+y*R,w=M>=0?1:-1,U=1-M*M;if(U>Number.EPSILON){const P=Math.sqrt(U),I=Math.atan2(P,M*w);C=Math.sin(C*I)/P,h=Math.sin(h*I)/P}const D=h*w;if(d=d*C+A*D,m=m*C+S*D,v=v*C+E*D,y=y*C+R*D,C===1-h){const P=1/Math.sqrt(d*d+m*m+v*v+y*y);d*=P,m*=P,v*=P,y*=P}}t[e]=d,t[e+1]=m,t[e+2]=v,t[e+3]=y}static multiplyQuaternionsFlat(t,e,n,a,o,u){const h=n[a],d=n[a+1],m=n[a+2],v=n[a+3],y=o[u],A=o[u+1],S=o[u+2],E=o[u+3];return t[e]=h*E+v*y+d*S-m*A,t[e+1]=d*E+v*A+m*y-h*S,t[e+2]=m*E+v*S+h*A-d*y,t[e+3]=v*E-h*y-d*A-m*S,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,a){return this._x=t,this._y=e,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,a=t._y,o=t._z,u=t._order,h=Math.cos,d=Math.sin,m=h(n/2),v=h(a/2),y=h(o/2),A=d(n/2),S=d(a/2),E=d(o/2);switch(u){case"XYZ":this._x=A*v*y+m*S*E,this._y=m*S*y-A*v*E,this._z=m*v*E+A*S*y,this._w=m*v*y-A*S*E;break;case"YXZ":this._x=A*v*y+m*S*E,this._y=m*S*y-A*v*E,this._z=m*v*E-A*S*y,this._w=m*v*y+A*S*E;break;case"ZXY":this._x=A*v*y-m*S*E,this._y=m*S*y+A*v*E,this._z=m*v*E+A*S*y,this._w=m*v*y-A*S*E;break;case"ZYX":this._x=A*v*y-m*S*E,this._y=m*S*y+A*v*E,this._z=m*v*E-A*S*y,this._w=m*v*y+A*S*E;break;case"YZX":this._x=A*v*y+m*S*E,this._y=m*S*y+A*v*E,this._z=m*v*E-A*S*y,this._w=m*v*y-A*S*E;break;case"XZY":this._x=A*v*y-m*S*E,this._y=m*S*y-A*v*E,this._z=m*v*E+A*S*y,this._w=m*v*y+A*S*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,a=Math.sin(n);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],a=e[4],o=e[8],u=e[1],h=e[5],d=e[9],m=e[2],v=e[6],y=e[10],A=n+h+y;if(A>0){const S=.5/Math.sqrt(A+1);this._w=.25/S,this._x=(v-d)*S,this._y=(o-m)*S,this._z=(u-a)*S}else if(n>h&&n>y){const S=2*Math.sqrt(1+n-h-y);this._w=(v-d)/S,this._x=.25*S,this._y=(a+u)/S,this._z=(o+m)/S}else if(h>y){const S=2*Math.sqrt(1+h-n-y);this._w=(o-m)/S,this._x=(a+u)/S,this._y=.25*S,this._z=(d+v)/S}else{const S=2*Math.sqrt(1+y-n-h);this._w=(u-a)/S,this._x=(o+m)/S,this._y=(d+v)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Je(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const a=Math.min(1,e/n);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,a=t._y,o=t._z,u=t._w,h=e._x,d=e._y,m=e._z,v=e._w;return this._x=n*v+u*h+a*m-o*d,this._y=a*v+u*d+o*h-n*m,this._z=o*v+u*m+n*d-a*h,this._w=u*v-n*h-a*d-o*m,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,a=this._y,o=this._z,u=this._w;let h=u*t._w+n*t._x+a*t._y+o*t._z;if(h<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=u,this._x=n,this._y=a,this._z=o,this;const d=1-h*h;if(d<=Number.EPSILON){const S=1-e;return this._w=S*u+e*this._w,this._x=S*n+e*this._x,this._y=S*a+e*this._y,this._z=S*o+e*this._z,this.normalize(),this}const m=Math.sqrt(d),v=Math.atan2(m,h),y=Math.sin((1-e)*v)/m,A=Math.sin(e*v)/m;return this._w=u*y+this._w*A,this._x=n*y+this._x*A,this._y=a*y+this._y*A,this._z=o*y+this._z*A,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(a*Math.sin(t),a*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(t=0,e=0,n=0){q.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(jS.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(jS.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,a=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*a,this.y=o[1]*e+o[4]*n+o[7]*a,this.z=o[2]*e+o[5]*n+o[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,a=this.z,o=t.elements,u=1/(o[3]*e+o[7]*n+o[11]*a+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*a+o[12])*u,this.y=(o[1]*e+o[5]*n+o[9]*a+o[13])*u,this.z=(o[2]*e+o[6]*n+o[10]*a+o[14])*u,this}applyQuaternion(t){const e=this.x,n=this.y,a=this.z,o=t.x,u=t.y,h=t.z,d=t.w,m=2*(u*a-h*n),v=2*(h*e-o*a),y=2*(o*n-u*e);return this.x=e+d*m+u*y-h*v,this.y=n+d*v+h*m-o*y,this.z=a+d*y+o*v-u*m,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,a=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*a,this.y=o[1]*e+o[5]*n+o[9]*a,this.z=o[2]*e+o[6]*n+o[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Je(this.x,t.x,e.x),this.y=Je(this.y,t.y,e.y),this.z=Je(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Je(this.x,t,e),this.y=Je(this.y,t,e),this.z=Je(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Je(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,a=t.y,o=t.z,u=e.x,h=e.y,d=e.z;return this.x=a*d-o*h,this.y=o*u-n*d,this.z=n*h-a*u,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return x_.copy(this).projectOnVector(t),this.sub(x_)}reflect(t){return this.sub(x_.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Je(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,a=this.z-t.z;return e*e+n*n+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const a=Math.sin(e)*t;return this.x=a*Math.sin(n),this.y=Math.cos(e)*t,this.z=a*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=a,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const x_=new q,jS=new ui;class Ze{constructor(t,e,n,a,o,u,h,d,m){Ze.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,a,o,u,h,d,m)}set(t,e,n,a,o,u,h,d,m){const v=this.elements;return v[0]=t,v[1]=a,v[2]=h,v[3]=e,v[4]=o,v[5]=d,v[6]=n,v[7]=u,v[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,a=e.elements,o=this.elements,u=n[0],h=n[3],d=n[6],m=n[1],v=n[4],y=n[7],A=n[2],S=n[5],E=n[8],R=a[0],C=a[3],M=a[6],w=a[1],U=a[4],D=a[7],P=a[2],I=a[5],F=a[8];return o[0]=u*R+h*w+d*P,o[3]=u*C+h*U+d*I,o[6]=u*M+h*D+d*F,o[1]=m*R+v*w+y*P,o[4]=m*C+v*U+y*I,o[7]=m*M+v*D+y*F,o[2]=A*R+S*w+E*P,o[5]=A*C+S*U+E*I,o[8]=A*M+S*D+E*F,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],u=t[4],h=t[5],d=t[6],m=t[7],v=t[8];return e*u*v-e*h*m-n*o*v+n*h*d+a*o*m-a*u*d}invert(){const t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],u=t[4],h=t[5],d=t[6],m=t[7],v=t[8],y=v*u-h*m,A=h*d-v*o,S=m*o-u*d,E=e*y+n*A+a*S;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/E;return t[0]=y*R,t[1]=(a*m-v*n)*R,t[2]=(h*n-a*u)*R,t[3]=A*R,t[4]=(v*e-a*d)*R,t[5]=(a*o-h*e)*R,t[6]=S*R,t[7]=(n*d-m*e)*R,t[8]=(u*e-n*o)*R,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,a,o,u,h){const d=Math.cos(o),m=Math.sin(o);return this.set(n*d,n*m,-n*(d*u+m*h)+u+t,-a*m,a*d,-a*(-m*u+d*h)+h+e,0,0,1),this}scale(t,e){return this.premultiply(S_.makeScale(t,e)),this}rotate(t){return this.premultiply(S_.makeRotation(-t)),this}translate(t,e){return this.premultiply(S_.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let a=0;a<9;a++)if(e[a]!==n[a])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const S_=new Ze;function QE(r){for(let t=r.length-1;t>=0;--t)if(r[t]>=65535)return!0;return!1}const vR={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function qh(r,t){return new vR[r](t)}function dm(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function ZE(){const r=dm("canvas");return r.style.display="block",r}const WS={};function jh(r){r in WS||(WS[r]=!0,console.warn(r))}function yR(r,t,e){return new Promise(function(n,a){function o(){switch(r.clientWaitSync(t,r.SYNC_FLUSH_COMMANDS_BIT,0)){case r.WAIT_FAILED:a();break;case r.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:n()}}setTimeout(o,e)})}function _R(r){const t=r.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function AR(r){const t=r.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const QS=new Ze().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ZS=new Ze().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function xR(){const r={enabled:!0,workingColorSpace:Ic,spaces:{},convert:function(a,o,u){return this.enabled===!1||o===u||!o||!u||(this.spaces[o].transfer===zn&&(a.r=bl(a.r),a.g=bl(a.g),a.b=bl(a.b)),this.spaces[o].primaries!==this.spaces[u].primaries&&(a.applyMatrix3(this.spaces[o].toXYZ),a.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===zn&&(a.r=Wh(a.r),a.g=Wh(a.g),a.b=Wh(a.b))),a},workingToColorSpace:function(a,o){return this.convert(a,this.workingColorSpace,o)},colorSpaceToWorking:function(a,o){return this.convert(a,o,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Al?um:this.spaces[a].transfer},getLuminanceCoefficients:function(a,o=this.workingColorSpace){return a.fromArray(this.spaces[o].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,o,u){return a.copy(this.spaces[o].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,o){return jh("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),r.workingToColorSpace(a,o)},toWorkingColorSpace:function(a,o){return jh("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),r.colorSpaceToWorking(a,o)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return r.define({[Ic]:{primaries:t,whitePoint:n,transfer:um,toXYZ:QS,fromXYZ:ZS,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Pi},outputColorSpaceConfig:{drawingBufferColorSpace:Pi}},[Pi]:{primaries:t,whitePoint:n,transfer:zn,toXYZ:QS,fromXYZ:ZS,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Pi}}}),r}const gn=xR();function bl(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function Wh(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Mh;class $E{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Mh===void 0&&(Mh=dm("canvas")),Mh.width=t.width,Mh.height=t.height;const a=Mh.getContext("2d");t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height),n=Mh}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=dm("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const a=n.getImageData(0,0,t.width,t.height),o=a.data;for(let u=0;u<o.length;u++)o[u]=bl(o[u]/255)*255;return n.putImageData(a,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(bl(e[n]/255)*255):e[n]=bl(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let SR=0;class Uc{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:SR++}),this.uuid=Fs(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let o;if(Array.isArray(a)){o=[];for(let u=0,h=a.length;u<h;u++)a[u].isDataTexture?o.push(M_(a[u].image)):o.push(M_(a[u]))}else o=M_(a);n.url=o}return e||(t.images[this.uuid]=n),n}}function M_(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?$E.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let MR=0;const b_=new q;class ai extends Go{constructor(t=ai.DEFAULT_IMAGE,e=ai.DEFAULT_MAPPING,n=zs,a=zs,o=hi,u=fr,h=Ua,d=dr,m=ai.DEFAULT_ANISOTROPY,v=Al){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:MR++}),this.uuid=Fs(),this.name="",this.source=new Uc(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=o,this.minFilter=u,this.anisotropy=m,this.format=h,this.internalFormat=null,this.type=d,this.offset=new Ot(0,0),this.repeat=new Ot(1,1),this.center=new Ot(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ze,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(b_).x}get height(){return this.source.getSize(b_).y}get depth(){return this.source.getSize(b_).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Zv)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Jr:t.x=t.x-Math.floor(t.x);break;case zs:t.x=t.x<0?0:1;break;case Zh:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Jr:t.y=t.y-Math.floor(t.y);break;case zs:t.y=t.y<0?0:1;break;case Zh:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}ai.DEFAULT_IMAGE=null;ai.DEFAULT_MAPPING=Zv;ai.DEFAULT_ANISOTROPY=1;class Mn{constructor(t=0,e=0,n=0,a=1){Mn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,a){return this.x=t,this.y=e,this.z=n,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,a=this.z,o=this.w,u=t.elements;return this.x=u[0]*e+u[4]*n+u[8]*a+u[12]*o,this.y=u[1]*e+u[5]*n+u[9]*a+u[13]*o,this.z=u[2]*e+u[6]*n+u[10]*a+u[14]*o,this.w=u[3]*e+u[7]*n+u[11]*a+u[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,a,o;const d=t.elements,m=d[0],v=d[4],y=d[8],A=d[1],S=d[5],E=d[9],R=d[2],C=d[6],M=d[10];if(Math.abs(v-A)<.01&&Math.abs(y-R)<.01&&Math.abs(E-C)<.01){if(Math.abs(v+A)<.1&&Math.abs(y+R)<.1&&Math.abs(E+C)<.1&&Math.abs(m+S+M-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const U=(m+1)/2,D=(S+1)/2,P=(M+1)/2,I=(v+A)/4,F=(y+R)/4,k=(E+C)/4;return U>D&&U>P?U<.01?(n=0,a=.707106781,o=.707106781):(n=Math.sqrt(U),a=I/n,o=F/n):D>P?D<.01?(n=.707106781,a=0,o=.707106781):(a=Math.sqrt(D),n=I/a,o=k/a):P<.01?(n=.707106781,a=.707106781,o=0):(o=Math.sqrt(P),n=F/o,a=k/o),this.set(n,a,o,e),this}let w=Math.sqrt((C-E)*(C-E)+(y-R)*(y-R)+(A-v)*(A-v));return Math.abs(w)<.001&&(w=1),this.x=(C-E)/w,this.y=(y-R)/w,this.z=(A-v)/w,this.w=Math.acos((m+S+M-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Je(this.x,t.x,e.x),this.y=Je(this.y,t.y,e.y),this.z=Je(this.z,t.z,e.z),this.w=Je(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Je(this.x,t,e),this.y=Je(this.y,t,e),this.z=Je(this.z,t,e),this.w=Je(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Je(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class vx extends Go{constructor(t=1,e=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:hi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth,this.scissor=new Mn(0,0,t,e),this.scissorTest=!1,this.viewport=new Mn(0,0,t,e);const a={width:t,height:e,depth:n.depth},o=new ai(a);this.textures=[];const u=n.count;for(let h=0;h<u;h++)this.textures[h]=o.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(t={}){const e={minFilter:hi,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let a=0,o=this.textures.length;a<o;a++)this.textures[a].image.width=t,this.textures[a].image.height=e,this.textures[a].image.depth=n,this.textures[a].isArrayTexture=this.textures[a].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const a=Object.assign({},t.textures[e].image);this.textures[e].source=new Uc(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fo extends vx{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class oy extends ai{constructor(t=null,e=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:a},this.magFilter=aa,this.minFilter=aa,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class bR extends Fo{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new oy(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class ly extends ai{constructor(t=null,e=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:a},this.magFilter=aa,this.minFilter=aa,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ER extends Fo{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new ly(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class ya{constructor(t=new q(1/0,1/0,1/0),e=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Gr.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Gr.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Gr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const o=n.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let u=0,h=o.count;u<h;u++)t.isMesh===!0?t.getVertexPosition(u,Gr):Gr.fromBufferAttribute(o,u),Gr.applyMatrix4(t.matrixWorld),this.expandByPoint(Gr);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),a0.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),a0.copy(n.boundingBox)),a0.applyMatrix4(t.matrixWorld),this.union(a0)}const a=t.children;for(let o=0,u=a.length;o<u;o++)this.expandByObject(a[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Gr),Gr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Op),s0.subVectors(this.max,Op),bh.subVectors(t.a,Op),Eh.subVectors(t.b,Op),Th.subVectors(t.c,Op),Sc.subVectors(Eh,bh),Mc.subVectors(Th,Eh),Nu.subVectors(bh,Th);let e=[0,-Sc.z,Sc.y,0,-Mc.z,Mc.y,0,-Nu.z,Nu.y,Sc.z,0,-Sc.x,Mc.z,0,-Mc.x,Nu.z,0,-Nu.x,-Sc.y,Sc.x,0,-Mc.y,Mc.x,0,-Nu.y,Nu.x,0];return!E_(e,bh,Eh,Th,s0)||(e=[1,0,0,0,1,0,0,0,1],!E_(e,bh,Eh,Th,s0))?!1:(r0.crossVectors(Sc,Mc),e=[r0.x,r0.y,r0.z],E_(e,bh,Eh,Th,s0))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Gr).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Gr).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(fl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),fl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),fl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),fl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),fl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),fl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),fl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),fl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(fl),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const fl=[new q,new q,new q,new q,new q,new q,new q,new q],Gr=new q,a0=new ya,bh=new q,Eh=new q,Th=new q,Sc=new q,Mc=new q,Nu=new q,Op=new q,s0=new q,r0=new q,Ou=new q;function E_(r,t,e,n,a){for(let o=0,u=r.length-3;o<=u;o+=3){Ou.fromArray(r,o);const h=a.x*Math.abs(Ou.x)+a.y*Math.abs(Ou.y)+a.z*Math.abs(Ou.z),d=t.dot(Ou),m=e.dot(Ou),v=n.dot(Ou);if(Math.max(-Math.max(d,m,v),Math.min(d,m,v))>h)return!1}return!0}const TR=new ya,Lp=new q,T_=new q;class sa{constructor(t=new q,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):TR.setFromPoints(t).getCenter(n);let a=0;for(let o=0,u=t.length;o<u;o++)a=Math.max(a,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Lp.subVectors(t,this.center);const e=Lp.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),a=(n-this.radius)*.5;this.center.addScaledVector(Lp,a/n),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(T_.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Lp.copy(t.center).add(T_)),this.expandByPoint(Lp.copy(t.center).sub(T_))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const hl=new q,C_=new q,o0=new q,bc=new q,R_=new q,l0=new q,B_=new q;class vf{constructor(t=new q,e=new q(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,hl)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=hl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(hl.copy(this.origin).addScaledVector(this.direction,e),hl.distanceToSquared(t))}distanceSqToSegment(t,e,n,a){C_.copy(t).add(e).multiplyScalar(.5),o0.copy(e).sub(t).normalize(),bc.copy(this.origin).sub(C_);const o=t.distanceTo(e)*.5,u=-this.direction.dot(o0),h=bc.dot(this.direction),d=-bc.dot(o0),m=bc.lengthSq(),v=Math.abs(1-u*u);let y,A,S,E;if(v>0)if(y=u*d-h,A=u*h-d,E=o*v,y>=0)if(A>=-E)if(A<=E){const R=1/v;y*=R,A*=R,S=y*(y+u*A+2*h)+A*(u*y+A+2*d)+m}else A=o,y=Math.max(0,-(u*A+h)),S=-y*y+A*(A+2*d)+m;else A=-o,y=Math.max(0,-(u*A+h)),S=-y*y+A*(A+2*d)+m;else A<=-E?(y=Math.max(0,-(-u*o+h)),A=y>0?-o:Math.min(Math.max(-o,-d),o),S=-y*y+A*(A+2*d)+m):A<=E?(y=0,A=Math.min(Math.max(-o,-d),o),S=A*(A+2*d)+m):(y=Math.max(0,-(u*o+h)),A=y>0?o:Math.min(Math.max(-o,-d),o),S=-y*y+A*(A+2*d)+m);else A=u>0?-o:o,y=Math.max(0,-(u*A+h)),S=-y*y+A*(A+2*d)+m;return n&&n.copy(this.origin).addScaledVector(this.direction,y),a&&a.copy(C_).addScaledVector(o0,A),S}intersectSphere(t,e){hl.subVectors(t.center,this.origin);const n=hl.dot(this.direction),a=hl.dot(hl)-n*n,o=t.radius*t.radius;if(a>o)return null;const u=Math.sqrt(o-a),h=n-u,d=n+u;return d<0?null:h<0?this.at(d,e):this.at(h,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,a,o,u,h,d;const m=1/this.direction.x,v=1/this.direction.y,y=1/this.direction.z,A=this.origin;return m>=0?(n=(t.min.x-A.x)*m,a=(t.max.x-A.x)*m):(n=(t.max.x-A.x)*m,a=(t.min.x-A.x)*m),v>=0?(o=(t.min.y-A.y)*v,u=(t.max.y-A.y)*v):(o=(t.max.y-A.y)*v,u=(t.min.y-A.y)*v),n>u||o>a||((o>n||isNaN(n))&&(n=o),(u<a||isNaN(a))&&(a=u),y>=0?(h=(t.min.z-A.z)*y,d=(t.max.z-A.z)*y):(h=(t.max.z-A.z)*y,d=(t.min.z-A.z)*y),n>d||h>a)||((h>n||n!==n)&&(n=h),(d<a||a!==a)&&(a=d),a<0)?null:this.at(n>=0?n:a,e)}intersectsBox(t){return this.intersectBox(t,hl)!==null}intersectTriangle(t,e,n,a,o){R_.subVectors(e,t),l0.subVectors(n,t),B_.crossVectors(R_,l0);let u=this.direction.dot(B_),h;if(u>0){if(a)return null;h=1}else if(u<0)h=-1,u=-u;else return null;bc.subVectors(this.origin,t);const d=h*this.direction.dot(l0.crossVectors(bc,l0));if(d<0)return null;const m=h*this.direction.dot(R_.cross(bc));if(m<0||d+m>u)return null;const v=-h*bc.dot(B_);return v<0?null:this.at(v/u,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ne{constructor(t,e,n,a,o,u,h,d,m,v,y,A,S,E,R,C){Ne.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,a,o,u,h,d,m,v,y,A,S,E,R,C)}set(t,e,n,a,o,u,h,d,m,v,y,A,S,E,R,C){const M=this.elements;return M[0]=t,M[4]=e,M[8]=n,M[12]=a,M[1]=o,M[5]=u,M[9]=h,M[13]=d,M[2]=m,M[6]=v,M[10]=y,M[14]=A,M[3]=S,M[7]=E,M[11]=R,M[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ne().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,a=1/Ch.setFromMatrixColumn(t,0).length(),o=1/Ch.setFromMatrixColumn(t,1).length(),u=1/Ch.setFromMatrixColumn(t,2).length();return e[0]=n[0]*a,e[1]=n[1]*a,e[2]=n[2]*a,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*u,e[9]=n[9]*u,e[10]=n[10]*u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,a=t.y,o=t.z,u=Math.cos(n),h=Math.sin(n),d=Math.cos(a),m=Math.sin(a),v=Math.cos(o),y=Math.sin(o);if(t.order==="XYZ"){const A=u*v,S=u*y,E=h*v,R=h*y;e[0]=d*v,e[4]=-d*y,e[8]=m,e[1]=S+E*m,e[5]=A-R*m,e[9]=-h*d,e[2]=R-A*m,e[6]=E+S*m,e[10]=u*d}else if(t.order==="YXZ"){const A=d*v,S=d*y,E=m*v,R=m*y;e[0]=A+R*h,e[4]=E*h-S,e[8]=u*m,e[1]=u*y,e[5]=u*v,e[9]=-h,e[2]=S*h-E,e[6]=R+A*h,e[10]=u*d}else if(t.order==="ZXY"){const A=d*v,S=d*y,E=m*v,R=m*y;e[0]=A-R*h,e[4]=-u*y,e[8]=E+S*h,e[1]=S+E*h,e[5]=u*v,e[9]=R-A*h,e[2]=-u*m,e[6]=h,e[10]=u*d}else if(t.order==="ZYX"){const A=u*v,S=u*y,E=h*v,R=h*y;e[0]=d*v,e[4]=E*m-S,e[8]=A*m+R,e[1]=d*y,e[5]=R*m+A,e[9]=S*m-E,e[2]=-m,e[6]=h*d,e[10]=u*d}else if(t.order==="YZX"){const A=u*d,S=u*m,E=h*d,R=h*m;e[0]=d*v,e[4]=R-A*y,e[8]=E*y+S,e[1]=y,e[5]=u*v,e[9]=-h*v,e[2]=-m*v,e[6]=S*y+E,e[10]=A-R*y}else if(t.order==="XZY"){const A=u*d,S=u*m,E=h*d,R=h*m;e[0]=d*v,e[4]=-y,e[8]=m*v,e[1]=A*y+R,e[5]=u*v,e[9]=S*y-E,e[2]=E*y-S,e[6]=h*v,e[10]=R*y+A}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(CR,t,RR)}lookAt(t,e,n){const a=this.elements;return Is.subVectors(t,e),Is.lengthSq()===0&&(Is.z=1),Is.normalize(),Ec.crossVectors(n,Is),Ec.lengthSq()===0&&(Math.abs(n.z)===1?Is.x+=1e-4:Is.z+=1e-4,Is.normalize(),Ec.crossVectors(n,Is)),Ec.normalize(),c0.crossVectors(Is,Ec),a[0]=Ec.x,a[4]=c0.x,a[8]=Is.x,a[1]=Ec.y,a[5]=c0.y,a[9]=Is.y,a[2]=Ec.z,a[6]=c0.z,a[10]=Is.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,a=e.elements,o=this.elements,u=n[0],h=n[4],d=n[8],m=n[12],v=n[1],y=n[5],A=n[9],S=n[13],E=n[2],R=n[6],C=n[10],M=n[14],w=n[3],U=n[7],D=n[11],P=n[15],I=a[0],F=a[4],k=a[8],L=a[12],N=a[1],J=a[5],ct=a[9],at=a[13],pt=a[2],ut=a[6],H=a[10],W=a[14],j=a[3],lt=a[7],X=a[11],nt=a[15];return o[0]=u*I+h*N+d*pt+m*j,o[4]=u*F+h*J+d*ut+m*lt,o[8]=u*k+h*ct+d*H+m*X,o[12]=u*L+h*at+d*W+m*nt,o[1]=v*I+y*N+A*pt+S*j,o[5]=v*F+y*J+A*ut+S*lt,o[9]=v*k+y*ct+A*H+S*X,o[13]=v*L+y*at+A*W+S*nt,o[2]=E*I+R*N+C*pt+M*j,o[6]=E*F+R*J+C*ut+M*lt,o[10]=E*k+R*ct+C*H+M*X,o[14]=E*L+R*at+C*W+M*nt,o[3]=w*I+U*N+D*pt+P*j,o[7]=w*F+U*J+D*ut+P*lt,o[11]=w*k+U*ct+D*H+P*X,o[15]=w*L+U*at+D*W+P*nt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],a=t[8],o=t[12],u=t[1],h=t[5],d=t[9],m=t[13],v=t[2],y=t[6],A=t[10],S=t[14],E=t[3],R=t[7],C=t[11],M=t[15];return E*(+o*d*y-a*m*y-o*h*A+n*m*A+a*h*S-n*d*S)+R*(+e*d*S-e*m*A+o*u*A-a*u*S+a*m*v-o*d*v)+C*(+e*m*y-e*h*S-o*u*y+n*u*S+o*h*v-n*m*v)+M*(-a*h*v-e*d*y+e*h*A+a*u*y-n*u*A+n*d*v)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=e,a[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],u=t[4],h=t[5],d=t[6],m=t[7],v=t[8],y=t[9],A=t[10],S=t[11],E=t[12],R=t[13],C=t[14],M=t[15],w=y*C*m-R*A*m+R*d*S-h*C*S-y*d*M+h*A*M,U=E*A*m-v*C*m-E*d*S+u*C*S+v*d*M-u*A*M,D=v*R*m-E*y*m+E*h*S-u*R*S-v*h*M+u*y*M,P=E*y*d-v*R*d-E*h*A+u*R*A+v*h*C-u*y*C,I=e*w+n*U+a*D+o*P;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/I;return t[0]=w*F,t[1]=(R*A*o-y*C*o-R*a*S+n*C*S+y*a*M-n*A*M)*F,t[2]=(h*C*o-R*d*o+R*a*m-n*C*m-h*a*M+n*d*M)*F,t[3]=(y*d*o-h*A*o-y*a*m+n*A*m+h*a*S-n*d*S)*F,t[4]=U*F,t[5]=(v*C*o-E*A*o+E*a*S-e*C*S-v*a*M+e*A*M)*F,t[6]=(E*d*o-u*C*o-E*a*m+e*C*m+u*a*M-e*d*M)*F,t[7]=(u*A*o-v*d*o+v*a*m-e*A*m-u*a*S+e*d*S)*F,t[8]=D*F,t[9]=(E*y*o-v*R*o-E*n*S+e*R*S+v*n*M-e*y*M)*F,t[10]=(u*R*o-E*h*o+E*n*m-e*R*m-u*n*M+e*h*M)*F,t[11]=(v*h*o-u*y*o-v*n*m+e*y*m+u*n*S-e*h*S)*F,t[12]=P*F,t[13]=(v*R*a-E*y*a+E*n*A-e*R*A-v*n*C+e*y*C)*F,t[14]=(E*h*a-u*R*a-E*n*d+e*R*d+u*n*C-e*h*C)*F,t[15]=(u*y*a-v*h*a+v*n*d-e*y*d-u*n*A+e*h*A)*F,this}scale(t){const e=this.elements,n=t.x,a=t.y,o=t.z;return e[0]*=n,e[4]*=a,e[8]*=o,e[1]*=n,e[5]*=a,e[9]*=o,e[2]*=n,e[6]*=a,e[10]*=o,e[3]*=n,e[7]*=a,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,a))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),a=Math.sin(e),o=1-n,u=t.x,h=t.y,d=t.z,m=o*u,v=o*h;return this.set(m*u+n,m*h-a*d,m*d+a*h,0,m*h+a*d,v*h+n,v*d-a*u,0,m*d-a*h,v*d+a*u,o*d*d+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,a,o,u){return this.set(1,n,o,0,t,1,u,0,e,a,1,0,0,0,0,1),this}compose(t,e,n){const a=this.elements,o=e._x,u=e._y,h=e._z,d=e._w,m=o+o,v=u+u,y=h+h,A=o*m,S=o*v,E=o*y,R=u*v,C=u*y,M=h*y,w=d*m,U=d*v,D=d*y,P=n.x,I=n.y,F=n.z;return a[0]=(1-(R+M))*P,a[1]=(S+D)*P,a[2]=(E-U)*P,a[3]=0,a[4]=(S-D)*I,a[5]=(1-(A+M))*I,a[6]=(C+w)*I,a[7]=0,a[8]=(E+U)*F,a[9]=(C-w)*F,a[10]=(1-(A+R))*F,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,e,n){const a=this.elements;let o=Ch.set(a[0],a[1],a[2]).length();const u=Ch.set(a[4],a[5],a[6]).length(),h=Ch.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),t.x=a[12],t.y=a[13],t.z=a[14],Vr.copy(this);const m=1/o,v=1/u,y=1/h;return Vr.elements[0]*=m,Vr.elements[1]*=m,Vr.elements[2]*=m,Vr.elements[4]*=v,Vr.elements[5]*=v,Vr.elements[6]*=v,Vr.elements[8]*=y,Vr.elements[9]*=y,Vr.elements[10]*=y,e.setFromRotationMatrix(Vr),n.x=o,n.y=u,n.z=h,this}makePerspective(t,e,n,a,o,u,h=hr){const d=this.elements,m=2*o/(e-t),v=2*o/(n-a),y=(e+t)/(e-t),A=(n+a)/(n-a);let S,E;if(h===hr)S=-(u+o)/(u-o),E=-2*u*o/(u-o);else if(h===hm)S=-u/(u-o),E=-u*o/(u-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return d[0]=m,d[4]=0,d[8]=y,d[12]=0,d[1]=0,d[5]=v,d[9]=A,d[13]=0,d[2]=0,d[6]=0,d[10]=S,d[14]=E,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(t,e,n,a,o,u,h=hr){const d=this.elements,m=1/(e-t),v=1/(n-a),y=1/(u-o),A=(e+t)*m,S=(n+a)*v;let E,R;if(h===hr)E=(u+o)*y,R=-2*y;else if(h===hm)E=o*y,R=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return d[0]=2*m,d[4]=0,d[8]=0,d[12]=-A,d[1]=0,d[5]=2*v,d[9]=0,d[13]=-S,d[2]=0,d[6]=0,d[10]=R,d[14]=-E,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let a=0;a<16;a++)if(e[a]!==n[a])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Ch=new q,Vr=new Ne,CR=new q(0,0,0),RR=new q(1,1,1),Ec=new q,c0=new q,Is=new q,$S=new Ne,tM=new ui;class ia{constructor(t=0,e=0,n=0,a=ia.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,a=this._order){return this._x=t,this._y=e,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const a=t.elements,o=a[0],u=a[4],h=a[8],d=a[1],m=a[5],v=a[9],y=a[2],A=a[6],S=a[10];switch(e){case"XYZ":this._y=Math.asin(Je(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-v,S),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(A,m),this._z=0);break;case"YXZ":this._x=Math.asin(-Je(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(h,S),this._z=Math.atan2(d,m)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(Je(A,-1,1)),Math.abs(A)<.9999999?(this._y=Math.atan2(-y,S),this._z=Math.atan2(-u,m)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-Je(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(A,S),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-u,m));break;case"YZX":this._z=Math.asin(Je(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-v,m),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(h,S));break;case"XZY":this._z=Math.asin(-Je(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(A,m),this._y=Math.atan2(h,o)):(this._x=Math.atan2(-v,S),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return $S.makeRotationFromQuaternion(t),this.setFromRotationMatrix($S,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return tM.setFromEuler(this),this.setFromQuaternion(tM,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ia.DEFAULT_ORDER="XYZ";class rd{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let BR=0;const eM=new q,Rh=new ui,dl=new Ne,u0=new q,Ip=new q,wR=new q,DR=new ui,nM=new q(1,0,0),iM=new q(0,1,0),aM=new q(0,0,1),sM={type:"added"},UR={type:"removed"},Bh={type:"childadded",child:null},w_={type:"childremoved",child:null};class vn extends Go{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:BR++}),this.uuid=Fs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vn.DEFAULT_UP.clone();const t=new q,e=new ia,n=new ui,a=new q(1,1,1);function o(){n.setFromEuler(e,!1)}function u(){e.setFromQuaternion(n,void 0,!1)}e._onChange(o),n._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Ne},normalMatrix:{value:new Ze}}),this.matrix=new Ne,this.matrixWorld=new Ne,this.matrixAutoUpdate=vn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Rh.setFromAxisAngle(t,e),this.quaternion.multiply(Rh),this}rotateOnWorldAxis(t,e){return Rh.setFromAxisAngle(t,e),this.quaternion.premultiply(Rh),this}rotateX(t){return this.rotateOnAxis(nM,t)}rotateY(t){return this.rotateOnAxis(iM,t)}rotateZ(t){return this.rotateOnAxis(aM,t)}translateOnAxis(t,e){return eM.copy(t).applyQuaternion(this.quaternion),this.position.add(eM.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(nM,t)}translateY(t){return this.translateOnAxis(iM,t)}translateZ(t){return this.translateOnAxis(aM,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(dl.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?u0.copy(t):u0.set(t,e,n);const a=this.parent;this.updateWorldMatrix(!0,!1),Ip.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?dl.lookAt(Ip,u0,this.up):dl.lookAt(u0,Ip,this.up),this.quaternion.setFromRotationMatrix(dl),a&&(dl.extractRotation(a.matrixWorld),Rh.setFromRotationMatrix(dl),this.quaternion.premultiply(Rh.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(sM),Bh.child=t,this.dispatchEvent(Bh),Bh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(UR),w_.child=t,this.dispatchEvent(w_),w_.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),dl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),dl.multiply(t.parent.matrixWorld)),t.applyMatrix4(dl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(sM),Bh.child=t,this.dispatchEvent(Bh),Bh.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,a=this.children.length;n<a;n++){const u=this.children[n].getObjectByProperty(t,e);if(u!==void 0)return u}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const a=this.children;for(let o=0,u=a.length;o<u;o++)a[o].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ip,t,wR),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ip,DR,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const a=this.children;for(let o=0,u=a.length;o<u;o++)a[o].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(h=>({...h})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(t),a.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function o(h,d){return h[d.uuid]===void 0&&(h[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=o(t.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const d=h.shapes;if(Array.isArray(d))for(let m=0,v=d.length;m<v;m++){const y=d[m];o(t.shapes,y)}else o(t.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let d=0,m=this.material.length;d<m;d++)h.push(o(t.materials,this.material[d]));a.material=h}else a.material=o(t.materials,this.material);if(this.children.length>0){a.children=[];for(let h=0;h<this.children.length;h++)a.children.push(this.children[h].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let h=0;h<this.animations.length;h++){const d=this.animations[h];a.animations.push(o(t.animations,d))}}if(e){const h=u(t.geometries),d=u(t.materials),m=u(t.textures),v=u(t.images),y=u(t.shapes),A=u(t.skeletons),S=u(t.animations),E=u(t.nodes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),m.length>0&&(n.textures=m),v.length>0&&(n.images=v),y.length>0&&(n.shapes=y),A.length>0&&(n.skeletons=A),S.length>0&&(n.animations=S),E.length>0&&(n.nodes=E)}return n.object=a,n;function u(h){const d=[];for(const m in h){const v=h[m];delete v.metadata,d.push(v)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const a=t.children[n];this.add(a.clone())}return this}}vn.DEFAULT_UP=new q(0,1,0);vn.DEFAULT_MATRIX_AUTO_UPDATE=!0;vn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xr=new q,pl=new q,D_=new q,ml=new q,wh=new q,Dh=new q,rM=new q,U_=new q,N_=new q,O_=new q,L_=new Mn,I_=new Mn,P_=new Mn;class vs{constructor(t=new q,e=new q,n=new q){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,a){a.subVectors(n,e),Xr.subVectors(t,e),a.cross(Xr);const o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}static getBarycoord(t,e,n,a,o){Xr.subVectors(a,e),pl.subVectors(n,e),D_.subVectors(t,e);const u=Xr.dot(Xr),h=Xr.dot(pl),d=Xr.dot(D_),m=pl.dot(pl),v=pl.dot(D_),y=u*m-h*h;if(y===0)return o.set(0,0,0),null;const A=1/y,S=(m*d-h*v)*A,E=(u*v-h*d)*A;return o.set(1-S-E,E,S)}static containsPoint(t,e,n,a){return this.getBarycoord(t,e,n,a,ml)===null?!1:ml.x>=0&&ml.y>=0&&ml.x+ml.y<=1}static getInterpolation(t,e,n,a,o,u,h,d){return this.getBarycoord(t,e,n,a,ml)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(o,ml.x),d.addScaledVector(u,ml.y),d.addScaledVector(h,ml.z),d)}static getInterpolatedAttribute(t,e,n,a,o,u){return L_.setScalar(0),I_.setScalar(0),P_.setScalar(0),L_.fromBufferAttribute(t,e),I_.fromBufferAttribute(t,n),P_.fromBufferAttribute(t,a),u.setScalar(0),u.addScaledVector(L_,o.x),u.addScaledVector(I_,o.y),u.addScaledVector(P_,o.z),u}static isFrontFacing(t,e,n,a){return Xr.subVectors(n,e),pl.subVectors(t,e),Xr.cross(pl).dot(a)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,a){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,e,n,a){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Xr.subVectors(this.c,this.b),pl.subVectors(this.a,this.b),Xr.cross(pl).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return vs.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return vs.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,a,o){return vs.getInterpolation(t,this.a,this.b,this.c,e,n,a,o)}containsPoint(t){return vs.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return vs.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,a=this.b,o=this.c;let u,h;wh.subVectors(a,n),Dh.subVectors(o,n),U_.subVectors(t,n);const d=wh.dot(U_),m=Dh.dot(U_);if(d<=0&&m<=0)return e.copy(n);N_.subVectors(t,a);const v=wh.dot(N_),y=Dh.dot(N_);if(v>=0&&y<=v)return e.copy(a);const A=d*y-v*m;if(A<=0&&d>=0&&v<=0)return u=d/(d-v),e.copy(n).addScaledVector(wh,u);O_.subVectors(t,o);const S=wh.dot(O_),E=Dh.dot(O_);if(E>=0&&S<=E)return e.copy(o);const R=S*m-d*E;if(R<=0&&m>=0&&E<=0)return h=m/(m-E),e.copy(n).addScaledVector(Dh,h);const C=v*E-S*y;if(C<=0&&y-v>=0&&S-E>=0)return rM.subVectors(o,a),h=(y-v)/(y-v+(S-E)),e.copy(a).addScaledVector(rM,h);const M=1/(C+R+A);return u=R*M,h=A*M,e.copy(n).addScaledVector(wh,u).addScaledVector(Dh,h)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const t1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Tc={h:0,s:0,l:0},f0={h:0,s:0,l:0};function H_(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*6*(2/3-e):r}class oe{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const a=t;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Pi){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,gn.colorSpaceToWorking(this,e),this}setRGB(t,e,n,a=gn.workingColorSpace){return this.r=t,this.g=e,this.b=n,gn.colorSpaceToWorking(this,a),this}setHSL(t,e,n,a=gn.workingColorSpace){if(t=gx(t,1),e=Je(e,0,1),n=Je(n,0,1),e===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+e):n+e-n*e,u=2*n-o;this.r=H_(u,o,t+1/3),this.g=H_(u,o,t),this.b=H_(u,o,t-1/3)}return gn.colorSpaceToWorking(this,a),this}setStyle(t,e=Pi){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const u=a[1],h=a[2];switch(u){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=a[1],u=o.length;if(u===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(u===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Pi){const n=t1[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=bl(t.r),this.g=bl(t.g),this.b=bl(t.b),this}copyLinearToSRGB(t){return this.r=Wh(t.r),this.g=Wh(t.g),this.b=Wh(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Pi){return gn.workingToColorSpace(wa.copy(this),t),Math.round(Je(wa.r*255,0,255))*65536+Math.round(Je(wa.g*255,0,255))*256+Math.round(Je(wa.b*255,0,255))}getHexString(t=Pi){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=gn.workingColorSpace){gn.workingToColorSpace(wa.copy(this),e);const n=wa.r,a=wa.g,o=wa.b,u=Math.max(n,a,o),h=Math.min(n,a,o);let d,m;const v=(h+u)/2;if(h===u)d=0,m=0;else{const y=u-h;switch(m=v<=.5?y/(u+h):y/(2-u-h),u){case n:d=(a-o)/y+(a<o?6:0);break;case a:d=(o-n)/y+2;break;case o:d=(n-a)/y+4;break}d/=6}return t.h=d,t.s=m,t.l=v,t}getRGB(t,e=gn.workingColorSpace){return gn.workingToColorSpace(wa.copy(this),e),t.r=wa.r,t.g=wa.g,t.b=wa.b,t}getStyle(t=Pi){gn.workingToColorSpace(wa.copy(this),t);const e=wa.r,n=wa.g,a=wa.b;return t!==Pi?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(t,e,n){return this.getHSL(Tc),this.setHSL(Tc.h+t,Tc.s+e,Tc.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Tc),t.getHSL(f0);const n=nm(Tc.h,f0.h,e),a=nm(Tc.s,f0.s,e),o=nm(Tc.l,f0.l,e);return this.setHSL(n,a,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,a=this.b,o=t.elements;return this.r=o[0]*e+o[3]*n+o[6]*a,this.g=o[1]*e+o[4]*n+o[7]*a,this.b=o[2]*e+o[5]*n+o[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const wa=new oe;oe.NAMES=t1;let NR=0;class Ji extends Go{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:NR++}),this.uuid=Fs(),this.name="",this.type="Material",this.blending=rf,this.side=zo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=sv,this.blendDst=rv,this.blendEquation=wc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new oe(0,0,0),this.blendAlpha=0,this.depthFunc=cf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=HA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Wu,this.stencilZFail=Wu,this.stencilZPass=Wu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==rf&&(n.blending=this.blending),this.side!==zo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==sv&&(n.blendSrc=this.blendSrc),this.blendDst!==rv&&(n.blendDst=this.blendDst),this.blendEquation!==wc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==cf&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==HA&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Wu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Wu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Wu&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(o){const u=[];for(const h in o){const d=o[h];delete d.metadata,u.push(d)}return u}if(e){const o=a(t.textures),u=a(t.images);o.length>0&&(n.textures=o),u.length>0&&(n.images=u)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const a=e.length;n=new Array(a);for(let o=0;o!==a;++o)n[o]=e[o].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class es extends Ji{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ia,this.combine=Am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const xl=OR();function OR(){const r=new ArrayBuffer(4),t=new Float32Array(r),e=new Uint32Array(r),n=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const m=d-127;m<-27?(n[d]=0,n[d|256]=32768,a[d]=24,a[d|256]=24):m<-14?(n[d]=1024>>-m-14,n[d|256]=1024>>-m-14|32768,a[d]=-m-1,a[d|256]=-m-1):m<=15?(n[d]=m+15<<10,n[d|256]=m+15<<10|32768,a[d]=13,a[d|256]=13):m<128?(n[d]=31744,n[d|256]=64512,a[d]=24,a[d|256]=24):(n[d]=31744,n[d|256]=64512,a[d]=13,a[d|256]=13)}const o=new Uint32Array(2048),u=new Uint32Array(64),h=new Uint32Array(64);for(let d=1;d<1024;++d){let m=d<<13,v=0;for(;(m&8388608)===0;)m<<=1,v-=8388608;m&=-8388609,v+=947912704,o[d]=m|v}for(let d=1024;d<2048;++d)o[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)u[d]=d<<23;u[31]=1199570944,u[32]=2147483648;for(let d=33;d<63;++d)u[d]=2147483648+(d-32<<23);u[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(h[d]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:a,mantissaTable:o,exponentTable:u,offsetTable:h}}function gs(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Je(r,-65504,65504),xl.floatView[0]=r;const t=xl.uint32View[0],e=t>>23&511;return xl.baseTable[e]+((t&8388607)>>xl.shiftTable[e])}function Jp(r){const t=r>>10;return xl.uint32View[0]=xl.mantissaTable[xl.offsetTable[t]+(r&1023)]+xl.exponentTable[t],xl.floatView[0]}class LR{static toHalfFloat(t){return gs(t)}static fromHalfFloat(t){return Jp(t)}}const Ii=new q,h0=new Ot;let IR=0;class bn{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:IR++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=fm,this.updateRanges=[],this.gpuType=ys,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let a=0,o=this.itemSize;a<o;a++)this.array[t+a]=e.array[n+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)h0.fromBufferAttribute(this,e),h0.applyMatrix3(t),this.setXY(e,h0.x,h0.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Ii.fromBufferAttribute(this,e),Ii.applyMatrix3(t),this.setXYZ(e,Ii.x,Ii.y,Ii.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ii.fromBufferAttribute(this,e),Ii.applyMatrix4(t),this.setXYZ(e,Ii.x,Ii.y,Ii.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ii.fromBufferAttribute(this,e),Ii.applyNormalMatrix(t),this.setXYZ(e,Ii.x,Ii.y,Ii.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ii.fromBufferAttribute(this,e),Ii.transformDirection(t),this.setXYZ(e,Ii.x,Ii.y,Ii.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=ts(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=en(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ts(e,this.array)),e}setX(t,e){return this.normalized&&(e=en(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ts(e,this.array)),e}setY(t,e){return this.normalized&&(e=en(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ts(e,this.array)),e}setZ(t,e){return this.normalized&&(e=en(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ts(e,this.array)),e}setW(t,e){return this.normalized&&(e=en(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=en(e,this.array),n=en(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,a){return t*=this.itemSize,this.normalized&&(e=en(e,this.array),n=en(n,this.array),a=en(a,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=a,this}setXYZW(t,e,n,a,o){return t*=this.itemSize,this.normalized&&(e=en(e,this.array),n=en(n,this.array),a=en(a,this.array),o=en(o,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=a,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==fm&&(t.usage=this.usage),t}}class PR extends bn{constructor(t,e,n){super(new Int8Array(t),e,n)}}class HR extends bn{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class zR extends bn{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class FR extends bn{constructor(t,e,n){super(new Int16Array(t),e,n)}}class yx extends bn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class GR extends bn{constructor(t,e,n){super(new Int32Array(t),e,n)}}class _x extends bn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class VR extends bn{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=Jp(this.array[t*this.itemSize]);return this.normalized&&(e=ts(e,this.array)),e}setX(t,e){return this.normalized&&(e=en(e,this.array)),this.array[t*this.itemSize]=gs(e),this}getY(t){let e=Jp(this.array[t*this.itemSize+1]);return this.normalized&&(e=ts(e,this.array)),e}setY(t,e){return this.normalized&&(e=en(e,this.array)),this.array[t*this.itemSize+1]=gs(e),this}getZ(t){let e=Jp(this.array[t*this.itemSize+2]);return this.normalized&&(e=ts(e,this.array)),e}setZ(t,e){return this.normalized&&(e=en(e,this.array)),this.array[t*this.itemSize+2]=gs(e),this}getW(t){let e=Jp(this.array[t*this.itemSize+3]);return this.normalized&&(e=ts(e,this.array)),e}setW(t,e){return this.normalized&&(e=en(e,this.array)),this.array[t*this.itemSize+3]=gs(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=en(e,this.array),n=en(n,this.array)),this.array[t+0]=gs(e),this.array[t+1]=gs(n),this}setXYZ(t,e,n,a){return t*=this.itemSize,this.normalized&&(e=en(e,this.array),n=en(n,this.array),a=en(a,this.array)),this.array[t+0]=gs(e),this.array[t+1]=gs(n),this.array[t+2]=gs(a),this}setXYZW(t,e,n,a,o){return t*=this.itemSize,this.normalized&&(e=en(e,this.array),n=en(n,this.array),a=en(a,this.array),o=en(o,this.array)),this.array[t+0]=gs(e),this.array[t+1]=gs(n),this.array[t+2]=gs(a),this.array[t+3]=gs(o),this}}class Se extends bn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let XR=0;const cr=new Ne,z_=new vn,Uh=new q,Ps=new ya,Pp=new ya,na=new q;class Ke extends Go{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:XR++}),this.uuid=Fs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(QE(t)?_x:yx)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new Ze().getNormalMatrix(t);n.applyNormalMatrix(o),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return cr.makeRotationFromQuaternion(t),this.applyMatrix4(cr),this}rotateX(t){return cr.makeRotationX(t),this.applyMatrix4(cr),this}rotateY(t){return cr.makeRotationY(t),this.applyMatrix4(cr),this}rotateZ(t){return cr.makeRotationZ(t),this.applyMatrix4(cr),this}translate(t,e,n){return cr.makeTranslation(t,e,n),this.applyMatrix4(cr),this}scale(t,e,n){return cr.makeScale(t,e,n),this.applyMatrix4(cr),this}lookAt(t){return z_.lookAt(t),z_.updateMatrix(),this.applyMatrix4(z_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Uh).negate(),this.translate(Uh.x,Uh.y,Uh.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let a=0,o=t.length;a<o;a++){const u=t[a];n.push(u.x,u.y,u.z||0)}this.setAttribute("position",new Se(n,3))}else{const n=Math.min(t.length,e.count);for(let a=0;a<n;a++){const o=t[a];e.setXYZ(a,o.x,o.y,o.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ya);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,a=e.length;n<a;n++){const o=e[n];Ps.setFromBufferAttribute(o),this.morphTargetsRelative?(na.addVectors(this.boundingBox.min,Ps.min),this.boundingBox.expandByPoint(na),na.addVectors(this.boundingBox.max,Ps.max),this.boundingBox.expandByPoint(na)):(this.boundingBox.expandByPoint(Ps.min),this.boundingBox.expandByPoint(Ps.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new sa);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new q,1/0);return}if(t){const n=this.boundingSphere.center;if(Ps.setFromBufferAttribute(t),e)for(let o=0,u=e.length;o<u;o++){const h=e[o];Pp.setFromBufferAttribute(h),this.morphTargetsRelative?(na.addVectors(Ps.min,Pp.min),Ps.expandByPoint(na),na.addVectors(Ps.max,Pp.max),Ps.expandByPoint(na)):(Ps.expandByPoint(Pp.min),Ps.expandByPoint(Pp.max))}Ps.getCenter(n);let a=0;for(let o=0,u=t.count;o<u;o++)na.fromBufferAttribute(t,o),a=Math.max(a,n.distanceToSquared(na));if(e)for(let o=0,u=e.length;o<u;o++){const h=e[o],d=this.morphTargetsRelative;for(let m=0,v=h.count;m<v;m++)na.fromBufferAttribute(h,m),d&&(Uh.fromBufferAttribute(t,m),na.add(Uh)),a=Math.max(a,n.distanceToSquared(na))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,a=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new bn(new Float32Array(4*n.count),4));const u=this.getAttribute("tangent"),h=[],d=[];for(let k=0;k<n.count;k++)h[k]=new q,d[k]=new q;const m=new q,v=new q,y=new q,A=new Ot,S=new Ot,E=new Ot,R=new q,C=new q;function M(k,L,N){m.fromBufferAttribute(n,k),v.fromBufferAttribute(n,L),y.fromBufferAttribute(n,N),A.fromBufferAttribute(o,k),S.fromBufferAttribute(o,L),E.fromBufferAttribute(o,N),v.sub(m),y.sub(m),S.sub(A),E.sub(A);const J=1/(S.x*E.y-E.x*S.y);isFinite(J)&&(R.copy(v).multiplyScalar(E.y).addScaledVector(y,-S.y).multiplyScalar(J),C.copy(y).multiplyScalar(S.x).addScaledVector(v,-E.x).multiplyScalar(J),h[k].add(R),h[L].add(R),h[N].add(R),d[k].add(C),d[L].add(C),d[N].add(C))}let w=this.groups;w.length===0&&(w=[{start:0,count:t.count}]);for(let k=0,L=w.length;k<L;++k){const N=w[k],J=N.start,ct=N.count;for(let at=J,pt=J+ct;at<pt;at+=3)M(t.getX(at+0),t.getX(at+1),t.getX(at+2))}const U=new q,D=new q,P=new q,I=new q;function F(k){P.fromBufferAttribute(a,k),I.copy(P);const L=h[k];U.copy(L),U.sub(P.multiplyScalar(P.dot(L))).normalize(),D.crossVectors(I,L);const J=D.dot(d[k])<0?-1:1;u.setXYZW(k,U.x,U.y,U.z,J)}for(let k=0,L=w.length;k<L;++k){const N=w[k],J=N.start,ct=N.count;for(let at=J,pt=J+ct;at<pt;at+=3)F(t.getX(at+0)),F(t.getX(at+1)),F(t.getX(at+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new bn(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let A=0,S=n.count;A<S;A++)n.setXYZ(A,0,0,0);const a=new q,o=new q,u=new q,h=new q,d=new q,m=new q,v=new q,y=new q;if(t)for(let A=0,S=t.count;A<S;A+=3){const E=t.getX(A+0),R=t.getX(A+1),C=t.getX(A+2);a.fromBufferAttribute(e,E),o.fromBufferAttribute(e,R),u.fromBufferAttribute(e,C),v.subVectors(u,o),y.subVectors(a,o),v.cross(y),h.fromBufferAttribute(n,E),d.fromBufferAttribute(n,R),m.fromBufferAttribute(n,C),h.add(v),d.add(v),m.add(v),n.setXYZ(E,h.x,h.y,h.z),n.setXYZ(R,d.x,d.y,d.z),n.setXYZ(C,m.x,m.y,m.z)}else for(let A=0,S=e.count;A<S;A+=3)a.fromBufferAttribute(e,A+0),o.fromBufferAttribute(e,A+1),u.fromBufferAttribute(e,A+2),v.subVectors(u,o),y.subVectors(a,o),v.cross(y),n.setXYZ(A+0,v.x,v.y,v.z),n.setXYZ(A+1,v.x,v.y,v.z),n.setXYZ(A+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)na.fromBufferAttribute(t,e),na.normalize(),t.setXYZ(e,na.x,na.y,na.z)}toNonIndexed(){function t(h,d){const m=h.array,v=h.itemSize,y=h.normalized,A=new m.constructor(d.length*v);let S=0,E=0;for(let R=0,C=d.length;R<C;R++){h.isInterleavedBufferAttribute?S=d[R]*h.data.stride+h.offset:S=d[R]*v;for(let M=0;M<v;M++)A[E++]=m[S++]}return new bn(A,v,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ke,n=this.index.array,a=this.attributes;for(const h in a){const d=a[h],m=t(d,n);e.setAttribute(h,m)}const o=this.morphAttributes;for(const h in o){const d=[],m=o[h];for(let v=0,y=m.length;v<y;v++){const A=m[v],S=t(A,n);d.push(S)}e.morphAttributes[h]=d}e.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,d=u.length;h<d;h++){const m=u[h];e.addGroup(m.start,m.count,m.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const m in d)d[m]!==void 0&&(t[m]=d[m]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const d in n){const m=n[d];t.data.attributes[d]=m.toJSON(t.data)}const a={};let o=!1;for(const d in this.morphAttributes){const m=this.morphAttributes[d],v=[];for(let y=0,A=m.length;y<A;y++){const S=m[y];v.push(S.toJSON(t.data))}v.length>0&&(a[d]=v,o=!0)}o&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(t.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return h!==null&&(t.data.boundingSphere=h.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const a=t.attributes;for(const m in a){const v=a[m];this.setAttribute(m,v.clone(e))}const o=t.morphAttributes;for(const m in o){const v=[],y=o[m];for(let A=0,S=y.length;A<S;A++)v.push(y[A].clone(e));this.morphAttributes[m]=v}this.morphTargetsRelative=t.morphTargetsRelative;const u=t.groups;for(let m=0,v=u.length;m<v;m++){const y=u[m];this.addGroup(y.start,y.count,y.materialIndex)}const h=t.boundingBox;h!==null&&(this.boundingBox=h.clone());const d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const oM=new Ne,Lu=new vf,d0=new sa,lM=new q,p0=new q,m0=new q,g0=new q,F_=new q,v0=new q,cM=new q,y0=new q;class Ri extends vn{constructor(t=new Ke,e=new es){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}getVertexPosition(t,e){const n=this.geometry,a=n.attributes.position,o=n.morphAttributes.position,u=n.morphTargetsRelative;e.fromBufferAttribute(a,t);const h=this.morphTargetInfluences;if(o&&h){v0.set(0,0,0);for(let d=0,m=o.length;d<m;d++){const v=h[d],y=o[d];v!==0&&(F_.fromBufferAttribute(y,t),u?v0.addScaledVector(F_,v):v0.addScaledVector(F_.sub(e),v))}e.add(v0)}return e}raycast(t,e){const n=this.geometry,a=this.material,o=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),d0.copy(n.boundingSphere),d0.applyMatrix4(o),Lu.copy(t.ray).recast(t.near),!(d0.containsPoint(Lu.origin)===!1&&(Lu.intersectSphere(d0,lM)===null||Lu.origin.distanceToSquared(lM)>(t.far-t.near)**2))&&(oM.copy(o).invert(),Lu.copy(t.ray).applyMatrix4(oM),!(n.boundingBox!==null&&Lu.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,Lu)))}_computeIntersections(t,e,n){let a;const o=this.geometry,u=this.material,h=o.index,d=o.attributes.position,m=o.attributes.uv,v=o.attributes.uv1,y=o.attributes.normal,A=o.groups,S=o.drawRange;if(h!==null)if(Array.isArray(u))for(let E=0,R=A.length;E<R;E++){const C=A[E],M=u[C.materialIndex],w=Math.max(C.start,S.start),U=Math.min(h.count,Math.min(C.start+C.count,S.start+S.count));for(let D=w,P=U;D<P;D+=3){const I=h.getX(D),F=h.getX(D+1),k=h.getX(D+2);a=_0(this,M,t,n,m,v,y,I,F,k),a&&(a.faceIndex=Math.floor(D/3),a.face.materialIndex=C.materialIndex,e.push(a))}}else{const E=Math.max(0,S.start),R=Math.min(h.count,S.start+S.count);for(let C=E,M=R;C<M;C+=3){const w=h.getX(C),U=h.getX(C+1),D=h.getX(C+2);a=_0(this,u,t,n,m,v,y,w,U,D),a&&(a.faceIndex=Math.floor(C/3),e.push(a))}}else if(d!==void 0)if(Array.isArray(u))for(let E=0,R=A.length;E<R;E++){const C=A[E],M=u[C.materialIndex],w=Math.max(C.start,S.start),U=Math.min(d.count,Math.min(C.start+C.count,S.start+S.count));for(let D=w,P=U;D<P;D+=3){const I=D,F=D+1,k=D+2;a=_0(this,M,t,n,m,v,y,I,F,k),a&&(a.faceIndex=Math.floor(D/3),a.face.materialIndex=C.materialIndex,e.push(a))}}else{const E=Math.max(0,S.start),R=Math.min(d.count,S.start+S.count);for(let C=E,M=R;C<M;C+=3){const w=C,U=C+1,D=C+2;a=_0(this,u,t,n,m,v,y,w,U,D),a&&(a.faceIndex=Math.floor(C/3),e.push(a))}}}}function YR(r,t,e,n,a,o,u,h){let d;if(t.side===Na?d=n.intersectTriangle(u,o,a,!0,h):d=n.intersectTriangle(a,o,u,t.side===zo,h),d===null)return null;y0.copy(h),y0.applyMatrix4(r.matrixWorld);const m=e.ray.origin.distanceTo(y0);return m<e.near||m>e.far?null:{distance:m,point:y0.clone(),object:r}}function _0(r,t,e,n,a,o,u,h,d,m){r.getVertexPosition(h,p0),r.getVertexPosition(d,m0),r.getVertexPosition(m,g0);const v=YR(r,t,e,n,p0,m0,g0,cM);if(v){const y=new q;vs.getBarycoord(cM,p0,m0,g0,y),a&&(v.uv=vs.getInterpolatedAttribute(a,h,d,m,y,new Ot)),o&&(v.uv1=vs.getInterpolatedAttribute(o,h,d,m,y,new Ot)),u&&(v.normal=vs.getInterpolatedAttribute(u,h,d,m,y,new q),v.normal.dot(n.direction)>0&&v.normal.multiplyScalar(-1));const A={a:h,b:d,c:m,normal:new q,materialIndex:0};vs.getNormal(p0,m0,g0,A.normal),v.face=A,v.barycoord=y}return v}class yf extends Ke{constructor(t=1,e=1,n=1,a=1,o=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:a,heightSegments:o,depthSegments:u};const h=this;a=Math.floor(a),o=Math.floor(o),u=Math.floor(u);const d=[],m=[],v=[],y=[];let A=0,S=0;E("z","y","x",-1,-1,n,e,t,u,o,0),E("z","y","x",1,-1,n,e,-t,u,o,1),E("x","z","y",1,1,t,n,e,a,u,2),E("x","z","y",1,-1,t,n,-e,a,u,3),E("x","y","z",1,-1,t,e,n,a,o,4),E("x","y","z",-1,-1,t,e,-n,a,o,5),this.setIndex(d),this.setAttribute("position",new Se(m,3)),this.setAttribute("normal",new Se(v,3)),this.setAttribute("uv",new Se(y,2));function E(R,C,M,w,U,D,P,I,F,k,L){const N=D/F,J=P/k,ct=D/2,at=P/2,pt=I/2,ut=F+1,H=k+1;let W=0,j=0;const lt=new q;for(let X=0;X<H;X++){const nt=X*J-at;for(let _t=0;_t<ut;_t++){const Tt=_t*N-ct;lt[R]=Tt*w,lt[C]=nt*U,lt[M]=pt,m.push(lt.x,lt.y,lt.z),lt[R]=0,lt[C]=0,lt[M]=I>0?1:-1,v.push(lt.x,lt.y,lt.z),y.push(_t/F),y.push(1-X/k),W+=1}}for(let X=0;X<k;X++)for(let nt=0;nt<F;nt++){const _t=A+nt+ut*X,Tt=A+nt+ut*(X+1),it=A+(nt+1)+ut*(X+1),Ct=A+(nt+1)+ut*X;d.push(_t,Tt,Ct),d.push(Tt,it,Ct),j+=6}h.addGroup(S,j,L),S+=j,A+=W}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new yf(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function od(r){const t={};for(const e in r){t[e]={};for(const n in r[e]){const a=r[e][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=a.clone():Array.isArray(a)?t[e][n]=a.slice():t[e][n]=a}}return t}function Za(r){const t={};for(let e=0;e<r.length;e++){const n=od(r[e]);for(const a in n)t[a]=n[a]}return t}function kR(r){const t=[];for(let e=0;e<r.length;e++)t.push(r[e].clone());return t}function e1(r){const t=r.getRenderTarget();return t===null?r.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:gn.workingColorSpace}const n1={clone:od,merge:Za};var qR=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,JR=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jr extends Ji{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=qR,this.fragmentShader=JR,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=od(t.uniforms),this.uniformsGroups=kR(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const a in this.uniforms){const u=this.uniforms[a].value;u&&u.isTexture?e.uniforms[a]={type:"t",value:u.toJSON(t).uuid}:u&&u.isColor?e.uniforms[a]={type:"c",value:u.getHex()}:u&&u.isVector2?e.uniforms[a]={type:"v2",value:u.toArray()}:u&&u.isVector3?e.uniforms[a]={type:"v3",value:u.toArray()}:u&&u.isVector4?e.uniforms[a]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?e.uniforms[a]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?e.uniforms[a]={type:"m4",value:u.toArray()}:e.uniforms[a]={value:u}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class cy extends vn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ne,this.projectionMatrix=new Ne,this.projectionMatrixInverse=new Ne,this.coordinateSystem=hr}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Cc=new q,uM=new Ot,fM=new Ot;class ii extends cy{constructor(t=50,e=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=sd*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(of*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return sd*2*Math.atan(Math.tan(of*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Cc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Cc.x,Cc.y).multiplyScalar(-t/Cc.z),Cc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Cc.x,Cc.y).multiplyScalar(-t/Cc.z)}getViewSize(t,e){return this.getViewBounds(t,uM,fM),e.subVectors(fM,uM)}setViewOffset(t,e,n,a,o,u){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=a,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(of*.5*this.fov)/this.zoom,n=2*e,a=this.aspect*n,o=-.5*a;const u=this.view;if(this.view!==null&&this.view.enabled){const d=u.fullWidth,m=u.fullHeight;o+=u.offsetX*a/d,e-=u.offsetY*n/m,a*=u.width/d,n*=u.height/m}const h=this.filmOffset;h!==0&&(o+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Nh=-90,Oh=1;class i1 extends vn{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new ii(Nh,Oh,t,e);a.layers=this.layers,this.add(a);const o=new ii(Nh,Oh,t,e);o.layers=this.layers,this.add(o);const u=new ii(Nh,Oh,t,e);u.layers=this.layers,this.add(u);const h=new ii(Nh,Oh,t,e);h.layers=this.layers,this.add(h);const d=new ii(Nh,Oh,t,e);d.layers=this.layers,this.add(d);const m=new ii(Nh,Oh,t,e);m.layers=this.layers,this.add(m)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,a,o,u,h,d]=e;for(const m of e)this.remove(m);if(t===hr)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(t===hm)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const m of e)this.add(m),m.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,u,h,d,m,v]=this.children,y=t.getRenderTarget(),A=t.getActiveCubeFace(),S=t.getActiveMipmapLevel(),E=t.xr.enabled;t.xr.enabled=!1;const R=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,a),t.render(e,o),t.setRenderTarget(n,1,a),t.render(e,u),t.setRenderTarget(n,2,a),t.render(e,h),t.setRenderTarget(n,3,a),t.render(e,d),t.setRenderTarget(n,4,a),t.render(e,m),n.texture.generateMipmaps=R,t.setRenderTarget(n,5,a),t.render(e,v),t.setRenderTarget(y,A,S),t.xr.enabled=E,n.texture.needsPMREMUpdate=!0}}class Sm extends ai{constructor(t=[],e=Tl,n,a,o,u,h,d,m,v){super(t,e,n,a,o,u,h,d,m,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class a1 extends Fo{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},a=[n,n,n,n,n,n];this.texture=new Sm(a),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new yf(5,5,5),o=new jr({name:"CubemapFromEquirect",uniforms:od(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Na,blending:Ml});o.uniforms.tEquirect.value=e;const u=new Ri(a,o),h=e.minFilter;return e.minFilter===fr&&(e.minFilter=hi),new i1(1,10,this).update(t,u),e.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(t,e=!0,n=!0,a=!0){const o=t.getRenderTarget();for(let u=0;u<6;u++)t.setRenderTarget(this,u),t.clear(e,n,a);t.setRenderTarget(o)}}class Sl extends vn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const KR={type:"move"};class ev{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Sl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Sl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Sl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let a=null,o=null,u=null;const h=this._targetRay,d=this._grip,m=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(m&&t.hand){u=!0;for(const R of t.hand.values()){const C=e.getJointPose(R,n),M=this._getHandJoint(m,R);C!==null&&(M.matrix.fromArray(C.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=C.radius),M.visible=C!==null}const v=m.joints["index-finger-tip"],y=m.joints["thumb-tip"],A=v.position.distanceTo(y.position),S=.02,E=.005;m.inputState.pinching&&A>S+E?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!m.inputState.pinching&&A<=S-E&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else d!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,n),o!==null&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1));h!==null&&(a=e.getPose(t.targetRaySpace,n),a===null&&o!==null&&(a=o),a!==null&&(h.matrix.fromArray(a.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,a.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(a.linearVelocity)):h.hasLinearVelocity=!1,a.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(a.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(KR)))}return h!==null&&(h.visible=a!==null),d!==null&&(d.visible=o!==null),m!==null&&(m.visible=u!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new Sl;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class uy{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new oe(t),this.density=e}clone(){return new uy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class fy{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new oe(t),this.near=e,this.far=n}clone(){return new fy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Ax=class extends vn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ia,this.environmentIntensity=1,this.environmentRotation=new ia,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};class Mm{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=fm,this.updateRanges=[],this.version=0,this.uuid=Fs()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let a=0,o=this.stride;a<o;a++)this.array[t+a]=e.array[n+a];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fs()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fs()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Qa=new q;class Pc{constructor(t,e,n,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Qa.fromBufferAttribute(this,e),Qa.applyMatrix4(t),this.setXYZ(e,Qa.x,Qa.y,Qa.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Qa.fromBufferAttribute(this,e),Qa.applyNormalMatrix(t),this.setXYZ(e,Qa.x,Qa.y,Qa.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Qa.fromBufferAttribute(this,e),Qa.transformDirection(t),this.setXYZ(e,Qa.x,Qa.y,Qa.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=ts(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=en(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=en(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=en(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=en(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=en(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=ts(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=ts(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=ts(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=ts(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=en(e,this.array),n=en(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,a){return t=t*this.data.stride+this.offset,this.normalized&&(e=en(e,this.array),n=en(n,this.array),a=en(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=a,this}setXYZW(t,e,n,a,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=en(e,this.array),n=en(n,this.array),a=en(a,this.array),o=en(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=a,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[a+o])}return new bn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Pc(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[a+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class xx extends Ji{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new oe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Lh;const Hp=new q,Ih=new q,Ph=new q,Hh=new Ot,zp=new Ot,s1=new Ne,A0=new q,Fp=new q,x0=new q,hM=new Ot,G_=new Ot,dM=new Ot;class r1 extends vn{constructor(t=new xx){if(super(),this.isSprite=!0,this.type="Sprite",Lh===void 0){Lh=new Ke;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Mm(e,5);Lh.setIndex([0,1,2,0,2,3]),Lh.setAttribute("position",new Pc(n,3,0,!1)),Lh.setAttribute("uv",new Pc(n,2,3,!1))}this.geometry=Lh,this.material=t,this.center=new Ot(.5,.5),this.count=1}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ih.setFromMatrixScale(this.matrixWorld),s1.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ph.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ih.multiplyScalar(-Ph.z);const n=this.material.rotation;let a,o;n!==0&&(o=Math.cos(n),a=Math.sin(n));const u=this.center;S0(A0.set(-.5,-.5,0),Ph,u,Ih,a,o),S0(Fp.set(.5,-.5,0),Ph,u,Ih,a,o),S0(x0.set(.5,.5,0),Ph,u,Ih,a,o),hM.set(0,0),G_.set(1,0),dM.set(1,1);let h=t.ray.intersectTriangle(A0,Fp,x0,!1,Hp);if(h===null&&(S0(Fp.set(-.5,.5,0),Ph,u,Ih,a,o),G_.set(0,1),h=t.ray.intersectTriangle(A0,x0,Fp,!1,Hp),h===null))return;const d=t.ray.origin.distanceTo(Hp);d<t.near||d>t.far||e.push({distance:d,point:Hp.clone(),uv:vs.getInterpolation(Hp,A0,Fp,x0,hM,G_,dM,new Ot),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function S0(r,t,e,n,a,o){Hh.subVectors(r,e).addScalar(.5).multiply(n),a!==void 0?(zp.x=o*Hh.x-a*Hh.y,zp.y=a*Hh.x+o*Hh.y):zp.copy(Hh),r.copy(t),r.x+=zp.x,r.y+=zp.y,r.applyMatrix4(s1)}const M0=new q,pM=new q;class o1 extends vn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,a=e.length;n<a;n++){const o=e[n];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const a=this.levels;let o;for(o=0;o<a.length&&!(e<a[o].distance);o++);return a.splice(o,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const a=e.splice(n,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,a;for(n=1,a=e.length;n<a;n++){let o=e[n].distance;if(e[n].object.visible&&(o-=o*e[n].hysteresis),t<o)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){M0.setFromMatrixPosition(this.matrixWorld);const a=t.ray.origin.distanceTo(M0);this.getObjectForDistance(a).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){M0.setFromMatrixPosition(t.matrixWorld),pM.setFromMatrixPosition(this.matrixWorld);const n=M0.distanceTo(pM)/t.zoom;e[0].object.visible=!0;let a,o;for(a=1,o=e.length;a<o;a++){let u=e[a].distance;if(e[a].object.visible&&(u-=u*e[a].hysteresis),n>=u)e[a-1].object.visible=!1,e[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<o;a++)e[a].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let a=0,o=n.length;a<o;a++){const u=n[a];e.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return e}}const mM=new q,gM=new Mn,vM=new Mn,jR=new q,yM=new Ne,b0=new q,V_=new sa,_M=new Ne,X_=new vf;class Sx extends Ri{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=PA,this.bindMatrix=new Ne,this.bindMatrixInverse=new Ne,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new ya),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,b0),this.boundingBox.expandByPoint(b0)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new sa),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,b0),this.boundingSphere.expandByPoint(b0)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,a=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),V_.copy(this.boundingSphere),V_.applyMatrix4(a),t.ray.intersectsSphere(V_)!==!1&&(_M.copy(a).invert(),X_.copy(t.ray).applyMatrix4(_M),!(this.boundingBox!==null&&X_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,X_)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Mn,e=this.geometry.attributes.skinWeight;for(let n=0,a=e.count;n<a;n++){t.fromBufferAttribute(e,n);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===PA?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===OE?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,a=this.geometry;gM.fromBufferAttribute(a.attributes.skinIndex,t),vM.fromBufferAttribute(a.attributes.skinWeight,t),mM.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){const u=vM.getComponent(o);if(u!==0){const h=gM.getComponent(o);yM.multiplyMatrices(n.bones[h].matrixWorld,n.boneInverses[h]),e.addScaledVector(jR.copy(mM).applyMatrix4(yM),u)}}return e.applyMatrix4(this.bindMatrixInverse)}}class hy extends vn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ho extends ai{constructor(t=null,e=1,n=1,a,o,u,h,d,m=aa,v=aa,y,A){super(null,u,h,d,m,v,a,o,y,A),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const AM=new Ne,WR=new Ne;class bm{constructor(t=[],e=[]){this.uuid=Fs(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new Ne)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new Ne;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,a=this.boneTexture;for(let o=0,u=t.length;o<u;o++){const h=t[o]?t[o].matrixWorld:WR;AM.multiplyMatrices(h,e[o]),AM.toArray(n,o*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new bm(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Ho(e,t,t,Ua,ys);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const a=this.bones[e];if(a.name===t)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,a=t.bones.length;n<a;n++){const o=t.bones[n];let u=e[o];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),u=new hy),this.bones.push(u),this.boneInverses.push(new Ne().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let a=0,o=e.length;a<o;a++){const u=e[a];t.bones.push(u.uuid);const h=n[a];t.boneInverses.push(h.toArray())}return t}}class uf extends bn{constructor(t,e,n,a=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const zh=new Ne,xM=new Ne,E0=[],SM=new ya,QR=new Ne,Gp=new Ri,Vp=new sa;class Mx extends Ri{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new uf(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<n;a++)this.setMatrixAt(a,QR)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new ya),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,zh),SM.copy(t.boundingBox).applyMatrix4(zh),this.boundingBox.union(SM)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new sa),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,zh),Vp.copy(t.boundingSphere).applyMatrix4(zh),this.boundingSphere.union(Vp)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,a=this.morphTexture.source.data.data,o=n.length+1,u=t*o+1;for(let h=0;h<n.length;h++)n[h]=a[u+h]}raycast(t,e){const n=this.matrixWorld,a=this.count;if(Gp.geometry=this.geometry,Gp.material=this.material,Gp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Vp.copy(this.boundingSphere),Vp.applyMatrix4(n),t.ray.intersectsSphere(Vp)!==!1))for(let o=0;o<a;o++){this.getMatrixAt(o,zh),xM.multiplyMatrices(n,zh),Gp.matrixWorld=xM,Gp.raycast(t,E0);for(let u=0,h=E0.length;u<h;u++){const d=E0[u];d.instanceId=o,d.object=this,e.push(d)}E0.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new uf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,a=n.length+1;this.morphTexture===null&&(this.morphTexture=new Ho(new Float32Array(a*this.count),a,this.count,iy,ys));const o=this.morphTexture.source.data.data;let u=0;for(let m=0;m<n.length;m++)u+=n[m];const h=this.geometry.morphTargetsRelative?1:1-u,d=a*t;o[d]=h,o.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Y_=new q,ZR=new q,$R=new Ze;class _l{constructor(t=new q(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,a){return this.normal.set(t,e,n),this.constant=a,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const a=Y_.subVectors(n,e).cross(ZR.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(Y_),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/a;return o<0||o>1?null:e.copy(t.start).addScaledVector(n,o)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||$R.getNormalMatrix(t),a=this.coplanarPoint(Y_).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Iu=new sa,t2=new Ot(.5,.5),T0=new q;class pd{constructor(t=new _l,e=new _l,n=new _l,a=new _l,o=new _l,u=new _l){this.planes=[t,e,n,a,o,u]}set(t,e,n,a,o,u){const h=this.planes;return h[0].copy(t),h[1].copy(e),h[2].copy(n),h[3].copy(a),h[4].copy(o),h[5].copy(u),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=hr){const n=this.planes,a=t.elements,o=a[0],u=a[1],h=a[2],d=a[3],m=a[4],v=a[5],y=a[6],A=a[7],S=a[8],E=a[9],R=a[10],C=a[11],M=a[12],w=a[13],U=a[14],D=a[15];if(n[0].setComponents(d-o,A-m,C-S,D-M).normalize(),n[1].setComponents(d+o,A+m,C+S,D+M).normalize(),n[2].setComponents(d+u,A+v,C+E,D+w).normalize(),n[3].setComponents(d-u,A-v,C-E,D-w).normalize(),n[4].setComponents(d-h,A-y,C-R,D-U).normalize(),e===hr)n[5].setComponents(d+h,A+y,C+R,D+U).normalize();else if(e===hm)n[5].setComponents(h,y,R,U).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Iu.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Iu.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Iu)}intersectsSprite(t){Iu.center.set(0,0,0);const e=t2.distanceTo(t.center);return Iu.radius=.7071067811865476+e,Iu.applyMatrix4(t.matrixWorld),this.intersectsSphere(Iu)}intersectsSphere(t){const e=this.planes,n=t.center,a=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(n)<a)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const a=e[n];if(T0.x=a.normal.x>0?t.max.x:t.min.x,T0.y=a.normal.y>0?t.max.y:t.min.y,T0.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(T0)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Oo=new Ne,Lo=new pd;class dy{constructor(){this.coordinateSystem=hr}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Oo.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lo.setFromProjectionMatrix(Oo,this.coordinateSystem),Lo.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Oo.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lo.setFromProjectionMatrix(Oo,this.coordinateSystem),Lo.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Oo.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lo.setFromProjectionMatrix(Oo,this.coordinateSystem),Lo.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Oo.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lo.setFromProjectionMatrix(Oo,this.coordinateSystem),Lo.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Oo.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Lo.setFromProjectionMatrix(Oo,this.coordinateSystem),Lo.containsPoint(t))return!0}return!1}clone(){return new dy}}function k_(r,t){return r-t}function e2(r,t){return r.z-t.z}function n2(r,t){return t.z-r.z}class i2{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,a){const o=this.pool,u=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});const h=o[this.index];u.push(h),this.index++,h.start=t,h.count=e,h.z=n,h.index=a}reset(){this.list.length=0,this.index=0}}const ms=new Ne,a2=new oe(1,1,1),MM=new pd,s2=new dy,C0=new ya,Pu=new sa,Xp=new q,bM=new q,r2=new q,q_=new i2,Da=new Ri,R0=[];function o2(r,t,e=0){const n=t.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==t.array.constructor){const a=r.count;for(let o=0;o<a;o++)for(let u=0;u<n;u++)t.setComponent(o+e,u,r.getComponent(o,u))}else t.array.set(r.array,e*n);t.needsUpdate=!0}function Hu(r,t){if(r.constructor!==t.constructor){const e=Math.min(r.length,t.length);for(let n=0;n<e;n++)t[n]=r[n]}else{const e=Math.min(r.length,t.length);t.set(new r.constructor(r.buffer,0,e))}}class l1 extends Ri{constructor(t,e,n=e*2,a){super(new Ke,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Ho(e,t,t,Ua,ys);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Ho(e,t,t,xm,Cl);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Ho(e,t,t,Ua,ys);n.colorSpace=gn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in t.attributes){const u=t.getAttribute(o),{array:h,itemSize:d,normalized:m}=u,v=new h.constructor(n*d),y=new bn(v,d,m);e.setAttribute(o,y)}if(t.getIndex()!==null){const o=n>65535?new Uint32Array(a):new Uint16Array(a);e.setIndex(new bn(o,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const a=t.getAttribute(n),o=e.getAttribute(n);if(a.itemSize!==o.itemSize||a.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ya);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,a=e.length;n<a;n++){if(e[n].active===!1)continue;const o=e[n].geometryIndex;this.getMatrixAt(n,ms),this.getBoundingBoxAt(o,C0).applyMatrix4(ms),t.union(C0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new sa);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,a=e.length;n<a;n++){if(e[n].active===!1)continue;const o=e[n].geometryIndex;this.getMatrixAt(n,ms),this.getBoundingSphereAt(o,Pu).applyMatrix4(ms),t.union(Pu)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(k_),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=n):(a=this._instanceInfo.length,this._instanceInfo.push(n));const o=this._matricesTexture;ms.identity().toArray(o.image.data,a*16),o.needsUpdate=!0;const u=this._colorsTexture;return u&&(a2.toArray(u.image.data,a*4),u.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const u=t.getIndex();if(u!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=n===-1?u.count:n),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(k_),d=this._availableGeometryIds.shift(),o[d]=a):(d=this._geometryCount,this._geometryCount++,o.push(a)),this.setGeometryAt(d,t),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,a=n.getIndex()!==null,o=n.getIndex(),u=e.getIndex(),h=this._geometryInfo[t];if(a&&u.count>h.reservedIndexCount||e.attributes.position.count>h.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=h.vertexStart,m=h.reservedVertexCount;h.vertexCount=e.getAttribute("position").count;for(const v in n.attributes){const y=e.getAttribute(v),A=n.getAttribute(v);o2(y,A,d);const S=y.itemSize;for(let E=y.count,R=m;E<R;E++){const C=d+E;for(let M=0;M<S;M++)A.setComponent(C,M,0)}A.needsUpdate=!0,A.addUpdateRange(d*S,m*S)}if(a){const v=h.indexStart,y=h.reservedIndexCount;h.indexCount=e.getIndex().count;for(let A=0;A<u.count;A++)o.setX(v+A,d+u.getX(A));for(let A=u.count,S=y;A<S;A++)o.setX(v+A,d);o.needsUpdate=!0,o.addUpdateRange(v,h.reservedIndexCount)}return h.start=a?h.indexStart:h.vertexStart,h.count=a?h.indexCount:h.vertexCount,h.boundingBox=null,e.boundingBox!==null&&(h.boundingBox=e.boundingBox.clone()),h.boundingSphere=null,e.boundingSphere!==null&&(h.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let a=0,o=n.length;a<o;a++)n[a].active&&n[a].geometryIndex===t&&this.deleteInstance(a);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,a=n.map((u,h)=>h).sort((u,h)=>n[u].vertexStart-n[h].vertexStart),o=this.geometry;for(let u=0,h=n.length;u<h;u++){const d=a[u],m=n[d];if(m.active!==!1){if(o.index!==null){if(m.indexStart!==e){const{indexStart:v,vertexStart:y,reservedIndexCount:A}=m,S=o.index,E=S.array,R=t-y;for(let C=v;C<v+A;C++)E[C]=E[C]+R;S.array.copyWithin(e,v,v+A),S.addUpdateRange(e,A),m.indexStart=e}e+=m.reservedIndexCount}if(m.vertexStart!==t){const{vertexStart:v,reservedVertexCount:y}=m,A=o.attributes;for(const S in A){const E=A[S],{array:R,itemSize:C}=E;R.copyWithin(t*C,v*C,(v+y)*C),E.addUpdateRange(t*C,y*C)}m.vertexStart=t}t+=m.reservedVertexCount,m.start=o.index?m.indexStart:m.vertexStart,this._nextIndexStart=o.index?m.indexStart+m.reservedIndexCount:0,this._nextVertexStart=m.vertexStart+m.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[t];if(a.boundingBox===null){const o=new ya,u=n.index,h=n.attributes.position;for(let d=a.start,m=a.start+a.count;d<m;d++){let v=d;u&&(v=u.getX(v)),o.expandByPoint(Xp.fromBufferAttribute(h,v))}a.boundingBox=o}return e.copy(a.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[t];if(a.boundingSphere===null){const o=new sa;this.getBoundingBoxAt(t,C0),C0.getCenter(o.center);const u=n.index,h=n.attributes.position;let d=0;for(let m=a.start,v=a.start+a.count;m<v;m++){let y=m;u&&(y=u.getX(y)),Xp.fromBufferAttribute(h,y),d=Math.max(d,o.center.distanceToSquared(Xp))}o.radius=Math.sqrt(d),a.boundingSphere=o}return e.copy(a.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,a=this._matricesTexture.image.data;return e.toArray(a,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(k_);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const a=new Int32Array(t),o=new Int32Array(t);Hu(this._multiDrawCounts,a),Hu(this._multiDrawStarts,o),this._multiDrawCounts=a,this._multiDrawStarts=o,this._maxInstanceCount=t;const u=this._indirectTexture,h=this._matricesTexture,d=this._colorsTexture;u.dispose(),this._initIndirectTexture(),Hu(u.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),Hu(h.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Hu(d.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(h=>h.active);if(Math.max(...n.map(h=>h.vertexStart+h.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const o=this.geometry;o.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Ke,this._initializeGeometry(o));const u=this.geometry;o.index&&Hu(o.index.array,u.index.array);for(const h in o.attributes)Hu(o.attributes[h].array,u.attributes[h].array)}raycast(t,e){const n=this._instanceInfo,a=this._geometryInfo,o=this.matrixWorld,u=this.geometry;Da.material=this.material,Da.geometry.index=u.index,Da.geometry.attributes=u.attributes,Da.geometry.boundingBox===null&&(Da.geometry.boundingBox=new ya),Da.geometry.boundingSphere===null&&(Da.geometry.boundingSphere=new sa);for(let h=0,d=n.length;h<d;h++){if(!n[h].visible||!n[h].active)continue;const m=n[h].geometryIndex,v=a[m];Da.geometry.setDrawRange(v.start,v.count),this.getMatrixAt(h,Da.matrixWorld).premultiply(o),this.getBoundingBoxAt(m,Da.geometry.boundingBox),this.getBoundingSphereAt(m,Da.geometry.boundingSphere),Da.raycast(t,R0);for(let y=0,A=R0.length;y<A;y++){const S=R0[y];S.object=this,S.batchId=h,e.push(S)}R0.length=0}Da.material=null,Da.geometry.index=null,Da.geometry.attributes={},Da.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,a,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=a.getIndex(),h=u===null?1:u.array.BYTES_PER_ELEMENT,d=this._instanceInfo,m=this._multiDrawStarts,v=this._multiDrawCounts,y=this._geometryInfo,A=this.perObjectFrustumCulled,S=this._indirectTexture,E=S.image.data,R=n.isArrayCamera?s2:MM;A&&!n.isArrayCamera&&(ms.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),MM.setFromProjectionMatrix(ms,t.coordinateSystem));let C=0;if(this.sortObjects){ms.copy(this.matrixWorld).invert(),Xp.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ms),bM.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ms);for(let U=0,D=d.length;U<D;U++)if(d[U].visible&&d[U].active){const P=d[U].geometryIndex;this.getMatrixAt(U,ms),this.getBoundingSphereAt(P,Pu).applyMatrix4(ms);let I=!1;if(A&&(I=!R.intersectsSphere(Pu,n)),!I){const F=y[P],k=r2.subVectors(Pu.center,Xp).dot(bM);q_.push(F.start,F.count,k,U)}}const M=q_.list,w=this.customSort;w===null?M.sort(o.transparent?n2:e2):w.call(this,M,n);for(let U=0,D=M.length;U<D;U++){const P=M[U];m[C]=P.start*h,v[C]=P.count,E[C]=P.index,C++}q_.reset()}else for(let M=0,w=d.length;M<w;M++)if(d[M].visible&&d[M].active){const U=d[M].geometryIndex;let D=!1;if(A&&(this.getMatrixAt(M,ms),this.getBoundingSphereAt(U,Pu).applyMatrix4(ms),D=!R.intersectsSphere(Pu,n)),!D){const P=y[U];m[C]=P.start*h,v[C]=P.count,E[C]=M,C++}}S.needsUpdate=!0,this._multiDrawCount=C,this._visibilityChanged=!1}onBeforeShadow(t,e,n,a,o,u){this.onBeforeRender(t,null,a,o,u)}}class Oa extends Ji{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new oe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Gv=new q,Vv=new q,EM=new Ne,Yp=new vf,B0=new sa,J_=new q,TM=new q;class Rl extends vn{constructor(t=new Ke,e=new Oa){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let a=1,o=e.count;a<o;a++)Gv.fromBufferAttribute(e,a-1),Vv.fromBufferAttribute(e,a),n[a]=n[a-1],n[a]+=Gv.distanceTo(Vv);t.setAttribute("lineDistance",new Se(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,a=this.matrixWorld,o=t.params.Line.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),B0.copy(n.boundingSphere),B0.applyMatrix4(a),B0.radius+=o,t.ray.intersectsSphere(B0)===!1)return;EM.copy(a).invert(),Yp.copy(t.ray).applyMatrix4(EM);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,m=this.isLineSegments?2:1,v=n.index,A=n.attributes.position;if(v!==null){const S=Math.max(0,u.start),E=Math.min(v.count,u.start+u.count);for(let R=S,C=E-1;R<C;R+=m){const M=v.getX(R),w=v.getX(R+1),U=w0(this,t,Yp,d,M,w,R);U&&e.push(U)}if(this.isLineLoop){const R=v.getX(E-1),C=v.getX(S),M=w0(this,t,Yp,d,R,C,E-1);M&&e.push(M)}}else{const S=Math.max(0,u.start),E=Math.min(A.count,u.start+u.count);for(let R=S,C=E-1;R<C;R+=m){const M=w0(this,t,Yp,d,R,R+1,R);M&&e.push(M)}if(this.isLineLoop){const R=w0(this,t,Yp,d,E-1,S,E-1);R&&e.push(R)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function w0(r,t,e,n,a,o,u){const h=r.geometry.attributes.position;if(Gv.fromBufferAttribute(h,a),Vv.fromBufferAttribute(h,o),e.distanceSqToSegment(Gv,Vv,J_,TM)>n)return;J_.applyMatrix4(r.matrixWorld);const m=t.ray.origin.distanceTo(J_);if(!(m<t.near||m>t.far))return{distance:m,point:TM.clone().applyMatrix4(r.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:r}}const CM=new q,RM=new q;class Wr extends Rl{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let a=0,o=e.count;a<o;a+=2)CM.fromBufferAttribute(e,a),RM.fromBufferAttribute(e,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+CM.distanceTo(RM);t.setAttribute("lineDistance",new Se(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class bx extends Rl{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class py extends Ji{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new oe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const BM=new Ne,FA=new vf,D0=new sa,U0=new q;class Ex extends vn{constructor(t=new Ke,e=new py){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,a=this.matrixWorld,o=t.params.Points.threshold,u=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),D0.copy(n.boundingSphere),D0.applyMatrix4(a),D0.radius+=o,t.ray.intersectsSphere(D0)===!1)return;BM.copy(a).invert(),FA.copy(t.ray).applyMatrix4(BM);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,m=n.index,y=n.attributes.position;if(m!==null){const A=Math.max(0,u.start),S=Math.min(m.count,u.start+u.count);for(let E=A,R=S;E<R;E++){const C=m.getX(E);U0.fromBufferAttribute(y,C),wM(U0,C,d,a,t,e,this)}}else{const A=Math.max(0,u.start),S=Math.min(y.count,u.start+u.count);for(let E=A,R=S;E<R;E++)U0.fromBufferAttribute(y,E),wM(U0,E,d,a,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=a.length;o<u;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function wM(r,t,e,n,a,o,u){const h=FA.distanceSqToPoint(r);if(h<e){const d=new q;FA.closestPointToPoint(r,d),d.applyMatrix4(n);const m=a.ray.origin.distanceTo(d);if(m<a.near||m>a.far)return;o.push({distance:m,distanceToRay:Math.sqrt(h),point:d,index:t,face:null,faceIndex:null,barycoord:null,object:u})}}class c1 extends ai{constructor(t,e,n,a,o=hi,u=hi,h,d,m){super(t,e,n,a,o,u,h,d,m),this.isVideoTexture=!0,this.generateMipmaps=!1;const v=this;function y(){v.needsUpdate=!0,t.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(y)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class l2 extends c1{constructor(t,e,n,a,o,u,h,d){super({},t,e,n,a,o,u,h,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class c2 extends ai{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=aa,this.minFilter=aa,this.generateMipmaps=!1,this.needsUpdate=!0}}class my extends ai{constructor(t,e,n,a,o,u,h,d,m,v,y,A){super(null,u,h,d,m,v,a,o,y,A),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class u2 extends my{constructor(t,e,n,a,o,u){super(t,e,n,o,u),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=zs,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class f2 extends my{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,Tl),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class h2 extends ai{constructor(t,e,n,a,o,u,h,d,m){super(t,e,n,a,o,u,h,d,m),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Tx extends ai{constructor(t,e,n=Cl,a,o,u,h=aa,d=aa,m,v=ed,y=1){if(v!==ed&&v!==nd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const A={width:t,height:e,depth:y};super(A,a,o,u,h,d,v,n,m),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Uc(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class gy extends Ke{constructor(t=1,e=1,n=4,a=8,o=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:a,heightSegments:o},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),a=Math.max(3,Math.floor(a)),o=Math.max(1,Math.floor(o));const u=[],h=[],d=[],m=[],v=e/2,y=Math.PI/2*t,A=e,S=2*y+A,E=n*2+o,R=a+1,C=new q,M=new q;for(let w=0;w<=E;w++){let U=0,D=0,P=0,I=0;if(w<=n){const L=w/n,N=L*Math.PI/2;D=-v-t*Math.cos(N),P=t*Math.sin(N),I=-t*Math.cos(N),U=L*y}else if(w<=n+o){const L=(w-n)/o;D=-v+L*e,P=t,I=0,U=y+L*A}else{const L=(w-n-o)/n,N=L*Math.PI/2;D=v+t*Math.sin(N),P=t*Math.cos(N),I=t*Math.sin(N),U=y+A+L*y}const F=Math.max(0,Math.min(1,U/S));let k=0;w===0?k=.5/a:w===E&&(k=-.5/a);for(let L=0;L<=a;L++){const N=L/a,J=N*Math.PI*2,ct=Math.sin(J),at=Math.cos(J);M.x=-P*at,M.y=D,M.z=P*ct,h.push(M.x,M.y,M.z),C.set(-P*at,I,P*ct),C.normalize(),d.push(C.x,C.y,C.z),m.push(N+k,F)}if(w>0){const L=(w-1)*R;for(let N=0;N<a;N++){const J=L+N,ct=L+N+1,at=w*R+N,pt=w*R+N+1;u.push(J,ct,at),u.push(ct,pt,at)}}}this.setIndex(u),this.setAttribute("position",new Se(h,3)),this.setAttribute("normal",new Se(d,3)),this.setAttribute("uv",new Se(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new gy(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class vy extends Ke{constructor(t=1,e=32,n=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:a},e=Math.max(3,e);const o=[],u=[],h=[],d=[],m=new q,v=new Ot;u.push(0,0,0),h.push(0,0,1),d.push(.5,.5);for(let y=0,A=3;y<=e;y++,A+=3){const S=n+y/e*a;m.x=t*Math.cos(S),m.y=t*Math.sin(S),u.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(u[A]/t+1)/2,v.y=(u[A+1]/t+1)/2,d.push(v.x,v.y)}for(let y=1;y<=e;y++)o.push(y,y+1,0);this.setIndex(o),this.setAttribute("position",new Se(u,3)),this.setAttribute("normal",new Se(h,3)),this.setAttribute("uv",new Se(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new vy(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Em extends Ke{constructor(t=1,e=1,n=1,a=32,o=1,u=!1,h=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:a,heightSegments:o,openEnded:u,thetaStart:h,thetaLength:d};const m=this;a=Math.floor(a),o=Math.floor(o);const v=[],y=[],A=[],S=[];let E=0;const R=[],C=n/2;let M=0;w(),u===!1&&(t>0&&U(!0),e>0&&U(!1)),this.setIndex(v),this.setAttribute("position",new Se(y,3)),this.setAttribute("normal",new Se(A,3)),this.setAttribute("uv",new Se(S,2));function w(){const D=new q,P=new q;let I=0;const F=(e-t)/n;for(let k=0;k<=o;k++){const L=[],N=k/o,J=N*(e-t)+t;for(let ct=0;ct<=a;ct++){const at=ct/a,pt=at*d+h,ut=Math.sin(pt),H=Math.cos(pt);P.x=J*ut,P.y=-N*n+C,P.z=J*H,y.push(P.x,P.y,P.z),D.set(ut,F,H).normalize(),A.push(D.x,D.y,D.z),S.push(at,1-N),L.push(E++)}R.push(L)}for(let k=0;k<a;k++)for(let L=0;L<o;L++){const N=R[L][k],J=R[L+1][k],ct=R[L+1][k+1],at=R[L][k+1];(t>0||L!==0)&&(v.push(N,J,at),I+=3),(e>0||L!==o-1)&&(v.push(J,ct,at),I+=3)}m.addGroup(M,I,0),M+=I}function U(D){const P=E,I=new Ot,F=new q;let k=0;const L=D===!0?t:e,N=D===!0?1:-1;for(let ct=1;ct<=a;ct++)y.push(0,C*N,0),A.push(0,N,0),S.push(.5,.5),E++;const J=E;for(let ct=0;ct<=a;ct++){const pt=ct/a*d+h,ut=Math.cos(pt),H=Math.sin(pt);F.x=L*H,F.y=C*N,F.z=L*ut,y.push(F.x,F.y,F.z),A.push(0,N,0),I.x=ut*.5+.5,I.y=H*.5*N+.5,S.push(I.x,I.y),E++}for(let ct=0;ct<a;ct++){const at=P+ct,pt=J+ct;D===!0?v.push(pt,pt+1,at):v.push(pt+1,pt,at),k+=3}m.addGroup(M,k,D===!0?1:2),M+=k}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Em(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Tm extends Em{constructor(t=1,e=1,n=32,a=1,o=!1,u=0,h=Math.PI*2){super(0,t,e,n,a,o,u,h),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:u,thetaLength:h}}static fromJSON(t){return new Tm(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class zc extends Ke{constructor(t=[],e=[],n=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:a};const o=[],u=[];h(a),m(n),v(),this.setAttribute("position",new Se(o,3)),this.setAttribute("normal",new Se(o.slice(),3)),this.setAttribute("uv",new Se(u,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function h(w){const U=new q,D=new q,P=new q;for(let I=0;I<e.length;I+=3)S(e[I+0],U),S(e[I+1],D),S(e[I+2],P),d(U,D,P,w)}function d(w,U,D,P){const I=P+1,F=[];for(let k=0;k<=I;k++){F[k]=[];const L=w.clone().lerp(D,k/I),N=U.clone().lerp(D,k/I),J=I-k;for(let ct=0;ct<=J;ct++)ct===0&&k===I?F[k][ct]=L:F[k][ct]=L.clone().lerp(N,ct/J)}for(let k=0;k<I;k++)for(let L=0;L<2*(I-k)-1;L++){const N=Math.floor(L/2);L%2===0?(A(F[k][N+1]),A(F[k+1][N]),A(F[k][N])):(A(F[k][N+1]),A(F[k+1][N+1]),A(F[k+1][N]))}}function m(w){const U=new q;for(let D=0;D<o.length;D+=3)U.x=o[D+0],U.y=o[D+1],U.z=o[D+2],U.normalize().multiplyScalar(w),o[D+0]=U.x,o[D+1]=U.y,o[D+2]=U.z}function v(){const w=new q;for(let U=0;U<o.length;U+=3){w.x=o[U+0],w.y=o[U+1],w.z=o[U+2];const D=C(w)/2/Math.PI+.5,P=M(w)/Math.PI+.5;u.push(D,1-P)}E(),y()}function y(){for(let w=0;w<u.length;w+=6){const U=u[w+0],D=u[w+2],P=u[w+4],I=Math.max(U,D,P),F=Math.min(U,D,P);I>.9&&F<.1&&(U<.2&&(u[w+0]+=1),D<.2&&(u[w+2]+=1),P<.2&&(u[w+4]+=1))}}function A(w){o.push(w.x,w.y,w.z)}function S(w,U){const D=w*3;U.x=t[D+0],U.y=t[D+1],U.z=t[D+2]}function E(){const w=new q,U=new q,D=new q,P=new q,I=new Ot,F=new Ot,k=new Ot;for(let L=0,N=0;L<o.length;L+=9,N+=6){w.set(o[L+0],o[L+1],o[L+2]),U.set(o[L+3],o[L+4],o[L+5]),D.set(o[L+6],o[L+7],o[L+8]),I.set(u[N+0],u[N+1]),F.set(u[N+2],u[N+3]),k.set(u[N+4],u[N+5]),P.copy(w).add(U).add(D).divideScalar(3);const J=C(P);R(I,N+0,w,J),R(F,N+2,U,J),R(k,N+4,D,J)}}function R(w,U,D,P){P<0&&w.x===1&&(u[U]=w.x-1),D.x===0&&D.z===0&&(u[U]=P/2/Math.PI+.5)}function C(w){return Math.atan2(w.z,-w.x)}function M(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new zc(t.vertices,t.indices,t.radius,t.details)}}class yy extends zc{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,a=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-n,0,-a,n,0,a,-n,0,a,n,-a,-n,0,-a,n,0,a,-n,0,a,n,0,-n,0,-a,n,0,-a,-n,0,a,n,0,a],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,u,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new yy(t.radius,t.detail)}}const N0=new q,O0=new q,K_=new q,L0=new vs;class u1 extends Ke{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const a=Math.pow(10,4),o=Math.cos(of*e),u=t.getIndex(),h=t.getAttribute("position"),d=u?u.count:h.count,m=[0,0,0],v=["a","b","c"],y=new Array(3),A={},S=[];for(let E=0;E<d;E+=3){u?(m[0]=u.getX(E),m[1]=u.getX(E+1),m[2]=u.getX(E+2)):(m[0]=E,m[1]=E+1,m[2]=E+2);const{a:R,b:C,c:M}=L0;if(R.fromBufferAttribute(h,m[0]),C.fromBufferAttribute(h,m[1]),M.fromBufferAttribute(h,m[2]),L0.getNormal(K_),y[0]=`${Math.round(R.x*a)},${Math.round(R.y*a)},${Math.round(R.z*a)}`,y[1]=`${Math.round(C.x*a)},${Math.round(C.y*a)},${Math.round(C.z*a)}`,y[2]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let w=0;w<3;w++){const U=(w+1)%3,D=y[w],P=y[U],I=L0[v[w]],F=L0[v[U]],k=`${D}_${P}`,L=`${P}_${D}`;L in A&&A[L]?(K_.dot(A[L].normal)<=o&&(S.push(I.x,I.y,I.z),S.push(F.x,F.y,F.z)),A[L]=null):k in A||(A[k]={index0:m[w],index1:m[U],normal:K_.clone()})}}for(const E in A)if(A[E]){const{index0:R,index1:C}=A[E];N0.fromBufferAttribute(h,R),O0.fromBufferAttribute(h,C),S.push(N0.x,N0.y,N0.z),S.push(O0.x,O0.y,O0.z)}this.setAttribute("position",new Se(S,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Qr{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,a=this.getPoint(0),o=0;e.push(0);for(let u=1;u<=t;u++)n=this.getPoint(u/t),o+=n.distanceTo(a),e.push(o),a=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let a=0;const o=n.length;let u;e?u=e:u=t*n[o-1];let h=0,d=o-1,m;for(;h<=d;)if(a=Math.floor(h+(d-h)/2),m=n[a]-u,m<0)h=a+1;else if(m>0)d=a-1;else{d=a;break}if(a=d,n[a]===u)return a/(o-1);const v=n[a],A=n[a+1]-v,S=(u-v)/A;return(a+S)/(o-1)}getTangent(t,e){let a=t-1e-4,o=t+1e-4;a<0&&(a=0),o>1&&(o=1);const u=this.getPoint(a),h=this.getPoint(o),d=e||(u.isVector2?new Ot:new q);return d.copy(h).sub(u).normalize(),d}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new q,a=[],o=[],u=[],h=new q,d=new Ne;for(let S=0;S<=t;S++){const E=S/t;a[S]=this.getTangentAt(E,new q)}o[0]=new q,u[0]=new q;let m=Number.MAX_VALUE;const v=Math.abs(a[0].x),y=Math.abs(a[0].y),A=Math.abs(a[0].z);v<=m&&(m=v,n.set(1,0,0)),y<=m&&(m=y,n.set(0,1,0)),A<=m&&n.set(0,0,1),h.crossVectors(a[0],n).normalize(),o[0].crossVectors(a[0],h),u[0].crossVectors(a[0],o[0]);for(let S=1;S<=t;S++){if(o[S]=o[S-1].clone(),u[S]=u[S-1].clone(),h.crossVectors(a[S-1],a[S]),h.length()>Number.EPSILON){h.normalize();const E=Math.acos(Je(a[S-1].dot(a[S]),-1,1));o[S].applyMatrix4(d.makeRotationAxis(h,E))}u[S].crossVectors(a[S],o[S])}if(e===!0){let S=Math.acos(Je(o[0].dot(o[t]),-1,1));S/=t,a[0].dot(h.crossVectors(o[0],o[t]))>0&&(S=-S);for(let E=1;E<=t;E++)o[E].applyMatrix4(d.makeRotationAxis(a[E],S*E)),u[E].crossVectors(a[E],o[E])}return{tangents:a,normals:o,binormals:u}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class _y extends Qr{constructor(t=0,e=0,n=1,a=1,o=0,u=Math.PI*2,h=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=a,this.aStartAngle=o,this.aEndAngle=u,this.aClockwise=h,this.aRotation=d}getPoint(t,e=new Ot){const n=e,a=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const u=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=a;for(;o>a;)o-=a;o<Number.EPSILON&&(u?o=0:o=a),this.aClockwise===!0&&!u&&(o===a?o=-a:o=o-a);const h=this.aStartAngle+t*o;let d=this.aX+this.xRadius*Math.cos(h),m=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const v=Math.cos(this.aRotation),y=Math.sin(this.aRotation),A=d-this.aX,S=m-this.aY;d=A*v-S*y+this.aX,m=A*y+S*v+this.aY}return n.set(d,m)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class f1 extends _y{constructor(t,e,n,a,o,u){super(t,e,n,n,a,o,u),this.isArcCurve=!0,this.type="ArcCurve"}}function Cx(){let r=0,t=0,e=0,n=0;function a(o,u,h,d){r=o,t=h,e=-3*o+3*u-2*h-d,n=2*o-2*u+h+d}return{initCatmullRom:function(o,u,h,d,m){a(u,h,m*(h-o),m*(d-u))},initNonuniformCatmullRom:function(o,u,h,d,m,v,y){let A=(u-o)/m-(h-o)/(m+v)+(h-u)/v,S=(h-u)/v-(d-u)/(v+y)+(d-h)/y;A*=v,S*=v,a(u,h,A,S)},calc:function(o){const u=o*o,h=u*o;return r+t*o+e*u+n*h}}}const I0=new q,j_=new Cx,W_=new Cx,Q_=new Cx;class h1 extends Qr{constructor(t=[],e=!1,n="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=a}getPoint(t,e=new q){const n=e,a=this.points,o=a.length,u=(o-(this.closed?0:1))*t;let h=Math.floor(u),d=u-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/o)+1)*o:d===0&&h===o-1&&(h=o-2,d=1);let m,v;this.closed||h>0?m=a[(h-1)%o]:(I0.subVectors(a[0],a[1]).add(a[0]),m=I0);const y=a[h%o],A=a[(h+1)%o];if(this.closed||h+2<o?v=a[(h+2)%o]:(I0.subVectors(a[o-1],a[o-2]).add(a[o-1]),v=I0),this.curveType==="centripetal"||this.curveType==="chordal"){const S=this.curveType==="chordal"?.5:.25;let E=Math.pow(m.distanceToSquared(y),S),R=Math.pow(y.distanceToSquared(A),S),C=Math.pow(A.distanceToSquared(v),S);R<1e-4&&(R=1),E<1e-4&&(E=R),C<1e-4&&(C=R),j_.initNonuniformCatmullRom(m.x,y.x,A.x,v.x,E,R,C),W_.initNonuniformCatmullRom(m.y,y.y,A.y,v.y,E,R,C),Q_.initNonuniformCatmullRom(m.z,y.z,A.z,v.z,E,R,C)}else this.curveType==="catmullrom"&&(j_.initCatmullRom(m.x,y.x,A.x,v.x,this.tension),W_.initCatmullRom(m.y,y.y,A.y,v.y,this.tension),Q_.initCatmullRom(m.z,y.z,A.z,v.z,this.tension));return n.set(j_.calc(d),W_.calc(d),Q_.calc(d)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(a.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const a=this.points[e];t.points.push(a.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(new q().fromArray(a))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function DM(r,t,e,n,a){const o=(n-t)*.5,u=(a-e)*.5,h=r*r,d=r*h;return(2*e-2*n+o+u)*d+(-3*e+3*n-2*o-u)*h+o*r+e}function d2(r,t){const e=1-r;return e*e*t}function p2(r,t){return 2*(1-r)*r*t}function m2(r,t){return r*r*t}function im(r,t,e,n){return d2(r,t)+p2(r,e)+m2(r,n)}function g2(r,t){const e=1-r;return e*e*e*t}function v2(r,t){const e=1-r;return 3*e*e*r*t}function y2(r,t){return 3*(1-r)*r*r*t}function _2(r,t){return r*r*r*t}function am(r,t,e,n,a){return g2(r,t)+v2(r,e)+y2(r,n)+_2(r,a)}class Rx extends Qr{constructor(t=new Ot,e=new Ot,n=new Ot,a=new Ot){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=a}getPoint(t,e=new Ot){const n=e,a=this.v0,o=this.v1,u=this.v2,h=this.v3;return n.set(am(t,a.x,o.x,u.x,h.x),am(t,a.y,o.y,u.y,h.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class d1 extends Qr{constructor(t=new q,e=new q,n=new q,a=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=a}getPoint(t,e=new q){const n=e,a=this.v0,o=this.v1,u=this.v2,h=this.v3;return n.set(am(t,a.x,o.x,u.x,h.x),am(t,a.y,o.y,u.y,h.y),am(t,a.z,o.z,u.z,h.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Bx extends Qr{constructor(t=new Ot,e=new Ot){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Ot){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Ot){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class p1 extends Qr{constructor(t=new q,e=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new q){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new q){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class wx extends Qr{constructor(t=new Ot,e=new Ot,n=new Ot){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Ot){const n=e,a=this.v0,o=this.v1,u=this.v2;return n.set(im(t,a.x,o.x,u.x),im(t,a.y,o.y,u.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Dx extends Qr{constructor(t=new q,e=new q,n=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new q){const n=e,a=this.v0,o=this.v1,u=this.v2;return n.set(im(t,a.x,o.x,u.x),im(t,a.y,o.y,u.y),im(t,a.z,o.z,u.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ux extends Qr{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Ot){const n=e,a=this.points,o=(a.length-1)*t,u=Math.floor(o),h=o-u,d=a[u===0?u:u-1],m=a[u],v=a[u>a.length-2?a.length-1:u+1],y=a[u>a.length-3?a.length-1:u+2];return n.set(DM(h,d.x,m.x,v.x,y.x),DM(h,d.y,m.y,v.y,y.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const a=this.points[e];t.points.push(a.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(new Ot().fromArray(a))}return this}}var Xv=Object.freeze({__proto__:null,ArcCurve:f1,CatmullRomCurve3:h1,CubicBezierCurve:Rx,CubicBezierCurve3:d1,EllipseCurve:_y,LineCurve:Bx,LineCurve3:p1,QuadraticBezierCurve:wx,QuadraticBezierCurve3:Dx,SplineCurve:Ux});class m1 extends Qr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Xv[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),a=this.getCurveLengths();let o=0;for(;o<a.length;){if(a[o]>=n){const u=a[o]-n,h=this.curves[o],d=h.getLength(),m=d===0?0:1-u/d;return h.getPointAt(m,e)}o++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,a=this.curves.length;n<a;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let a=0,o=this.curves;a<o.length;a++){const u=o[a],h=u.isEllipseCurve?t*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?t*u.points.length:t,d=u.getPoints(h);for(let m=0;m<d.length;m++){const v=d[m];n&&n.equals(v)||(e.push(v),n=v)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const a=t.curves[e];this.curves.push(a.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const a=this.curves[e];t.curves.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const a=t.curves[e];this.curves.push(new Xv[a.type]().fromJSON(a))}return this}}class Yv extends m1{constructor(t){super(),this.type="Path",this.currentPoint=new Ot,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Bx(this.currentPoint.clone(),new Ot(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,a){const o=new wx(this.currentPoint.clone(),new Ot(t,e),new Ot(n,a));return this.curves.push(o),this.currentPoint.set(n,a),this}bezierCurveTo(t,e,n,a,o,u){const h=new Rx(this.currentPoint.clone(),new Ot(t,e),new Ot(n,a),new Ot(o,u));return this.curves.push(h),this.currentPoint.set(o,u),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Ux(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,a,o,u){const h=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(t+h,e+d,n,a,o,u),this}absarc(t,e,n,a,o,u){return this.absellipse(t,e,n,n,a,o,u),this}ellipse(t,e,n,a,o,u,h,d){const m=this.currentPoint.x,v=this.currentPoint.y;return this.absellipse(t+m,e+v,n,a,o,u,h,d),this}absellipse(t,e,n,a,o,u,h,d){const m=new _y(t,e,n,a,o,u,h,d);if(this.curves.length>0){const y=m.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(m);const v=m.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class lf extends Yv{constructor(t){super(t),this.uuid=Fs(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,a=this.holes.length;n<a;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const a=t.holes[e];this.holes.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const a=this.holes[e];t.holes.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const a=t.holes[e];this.holes.push(new Yv().fromJSON(a))}return this}}function A2(r,t,e=2){const n=t&&t.length,a=n?t[0]*e:r.length;let o=g1(r,0,a,e,!0);const u=[];if(!o||o.next===o.prev)return u;let h,d,m;if(n&&(o=E2(r,t,o,e)),r.length>80*e){h=1/0,d=1/0;let v=-1/0,y=-1/0;for(let A=e;A<a;A+=e){const S=r[A],E=r[A+1];S<h&&(h=S),E<d&&(d=E),S>v&&(v=S),E>y&&(y=E)}m=Math.max(v-h,y-d),m=m!==0?32767/m:0}return pm(o,u,e,h,d,m,0),u}function g1(r,t,e,n,a){let o;if(a===I2(r,t,e,n)>0)for(let u=t;u<e;u+=n)o=UM(u/n|0,r[u],r[u+1],o);else for(let u=e-n;u>=t;u-=n)o=UM(u/n|0,r[u],r[u+1],o);return o&&ld(o,o.next)&&(gm(o),o=o.next),o}function ff(r,t){if(!r)return r;t||(t=r);let e=r,n;do if(n=!1,!e.steiner&&(ld(e,e.next)||fi(e.prev,e,e.next)===0)){if(gm(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function pm(r,t,e,n,a,o,u){if(!r)return;!u&&o&&w2(r,n,a,o);let h=r;for(;r.prev!==r.next;){const d=r.prev,m=r.next;if(o?S2(r,n,a,o):x2(r)){t.push(d.i,r.i,m.i),gm(r),r=m.next,h=m.next;continue}if(r=m,r===h){u?u===1?(r=M2(ff(r),t),pm(r,t,e,n,a,o,2)):u===2&&b2(r,t,e,n,a,o):pm(ff(r),t,e,n,a,o,1);break}}}function x2(r){const t=r.prev,e=r,n=r.next;if(fi(t,e,n)>=0)return!1;const a=t.x,o=e.x,u=n.x,h=t.y,d=e.y,m=n.y,v=Math.min(a,o,u),y=Math.min(h,d,m),A=Math.max(a,o,u),S=Math.max(h,d,m);let E=n.next;for(;E!==t;){if(E.x>=v&&E.x<=A&&E.y>=y&&E.y<=S&&Kp(a,h,o,d,u,m,E.x,E.y)&&fi(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function S2(r,t,e,n){const a=r.prev,o=r,u=r.next;if(fi(a,o,u)>=0)return!1;const h=a.x,d=o.x,m=u.x,v=a.y,y=o.y,A=u.y,S=Math.min(h,d,m),E=Math.min(v,y,A),R=Math.max(h,d,m),C=Math.max(v,y,A),M=GA(S,E,t,e,n),w=GA(R,C,t,e,n);let U=r.prevZ,D=r.nextZ;for(;U&&U.z>=M&&D&&D.z<=w;){if(U.x>=S&&U.x<=R&&U.y>=E&&U.y<=C&&U!==a&&U!==u&&Kp(h,v,d,y,m,A,U.x,U.y)&&fi(U.prev,U,U.next)>=0||(U=U.prevZ,D.x>=S&&D.x<=R&&D.y>=E&&D.y<=C&&D!==a&&D!==u&&Kp(h,v,d,y,m,A,D.x,D.y)&&fi(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;U&&U.z>=M;){if(U.x>=S&&U.x<=R&&U.y>=E&&U.y<=C&&U!==a&&U!==u&&Kp(h,v,d,y,m,A,U.x,U.y)&&fi(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;D&&D.z<=w;){if(D.x>=S&&D.x<=R&&D.y>=E&&D.y<=C&&D!==a&&D!==u&&Kp(h,v,d,y,m,A,D.x,D.y)&&fi(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function M2(r,t){let e=r;do{const n=e.prev,a=e.next.next;!ld(n,a)&&y1(n,e,e.next,a)&&mm(n,a)&&mm(a,n)&&(t.push(n.i,e.i,a.i),gm(e),gm(e.next),e=r=a),e=e.next}while(e!==r);return ff(e)}function b2(r,t,e,n,a,o){let u=r;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&N2(u,h)){let d=_1(u,h);u=ff(u,u.next),d=ff(d,d.next),pm(u,t,e,n,a,o,0),pm(d,t,e,n,a,o,0);return}h=h.next}u=u.next}while(u!==r)}function E2(r,t,e,n){const a=[];for(let o=0,u=t.length;o<u;o++){const h=t[o]*n,d=o<u-1?t[o+1]*n:r.length,m=g1(r,h,d,n,!1);m===m.next&&(m.steiner=!0),a.push(U2(m))}a.sort(T2);for(let o=0;o<a.length;o++)e=C2(a[o],e);return e}function T2(r,t){let e=r.x-t.x;if(e===0&&(e=r.y-t.y,e===0)){const n=(r.next.y-r.y)/(r.next.x-r.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=n-a}return e}function C2(r,t){const e=R2(r,t);if(!e)return t;const n=_1(e,r);return ff(n,n.next),ff(e,e.next)}function R2(r,t){let e=t;const n=r.x,a=r.y;let o=-1/0,u;if(ld(r,e))return e;do{if(ld(r,e.next))return e.next;if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const y=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(y<=n&&y>o&&(o=y,u=e.x<e.next.x?e:e.next,y===n))return u}e=e.next}while(e!==t);if(!u)return null;const h=u,d=u.x,m=u.y;let v=1/0;e=u;do{if(n>=e.x&&e.x>=d&&n!==e.x&&v1(a<m?n:o,a,d,m,a<m?o:n,a,e.x,e.y)){const y=Math.abs(a-e.y)/(n-e.x);mm(e,r)&&(y<v||y===v&&(e.x>u.x||e.x===u.x&&B2(u,e)))&&(u=e,v=y)}e=e.next}while(e!==h);return u}function B2(r,t){return fi(r.prev,r,t.prev)<0&&fi(t.next,r,r.next)<0}function w2(r,t,e,n){let a=r;do a.z===0&&(a.z=GA(a.x,a.y,t,e,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==r);a.prevZ.nextZ=null,a.prevZ=null,D2(a)}function D2(r){let t,e=1;do{let n=r,a;r=null;let o=null;for(t=0;n;){t++;let u=n,h=0;for(let m=0;m<e&&(h++,u=u.nextZ,!!u);m++);let d=e;for(;h>0||d>0&&u;)h!==0&&(d===0||!u||n.z<=u.z)?(a=n,n=n.nextZ,h--):(a=u,u=u.nextZ,d--),o?o.nextZ=a:r=a,a.prevZ=o,o=a;n=u}o.nextZ=null,e*=2}while(t>1);return r}function GA(r,t,e,n,a){return r=(r-e)*a|0,t=(t-n)*a|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function U2(r){let t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function v1(r,t,e,n,a,o,u,h){return(a-u)*(t-h)>=(r-u)*(o-h)&&(r-u)*(n-h)>=(e-u)*(t-h)&&(e-u)*(o-h)>=(a-u)*(n-h)}function Kp(r,t,e,n,a,o,u,h){return!(r===u&&t===h)&&v1(r,t,e,n,a,o,u,h)}function N2(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!O2(r,t)&&(mm(r,t)&&mm(t,r)&&L2(r,t)&&(fi(r.prev,r,t.prev)||fi(r,t.prev,t))||ld(r,t)&&fi(r.prev,r,r.next)>0&&fi(t.prev,t,t.next)>0)}function fi(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function ld(r,t){return r.x===t.x&&r.y===t.y}function y1(r,t,e,n){const a=H0(fi(r,t,e)),o=H0(fi(r,t,n)),u=H0(fi(e,n,r)),h=H0(fi(e,n,t));return!!(a!==o&&u!==h||a===0&&P0(r,e,t)||o===0&&P0(r,n,t)||u===0&&P0(e,r,n)||h===0&&P0(e,t,n))}function P0(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function H0(r){return r>0?1:r<0?-1:0}function O2(r,t){let e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&y1(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function mm(r,t){return fi(r.prev,r,r.next)<0?fi(r,t,r.next)>=0&&fi(r,r.prev,t)>=0:fi(r,t,r.prev)<0||fi(r,r.next,t)<0}function L2(r,t){let e=r,n=!1;const a=(r.x+t.x)/2,o=(r.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&a<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==r);return n}function _1(r,t){const e=VA(r.i,r.x,r.y),n=VA(t.i,t.x,t.y),a=r.next,o=t.prev;return r.next=t,t.prev=r,e.next=a,a.prev=e,n.next=e,e.prev=n,o.next=n,n.prev=o,n}function UM(r,t,e,n){const a=VA(r,t,e);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function gm(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function VA(r,t,e){return{i:r,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function I2(r,t,e,n){let a=0;for(let o=t,u=e-n;o<e;o+=n)a+=(r[u]-r[o])*(r[o+1]+r[u+1]),u=o;return a}class P2{static triangulate(t,e,n=2){return A2(t,e,n)}}class qr{static area(t){const e=t.length;let n=0;for(let a=e-1,o=0;o<e;a=o++)n+=t[a].x*t[o].y-t[o].x*t[a].y;return n*.5}static isClockWise(t){return qr.area(t)<0}static triangulateShape(t,e){const n=[],a=[],o=[];NM(t),OM(n,t);let u=t.length;e.forEach(NM);for(let d=0;d<e.length;d++)a.push(u),u+=e[d].length,OM(n,e[d]);const h=P2.triangulate(n,a);for(let d=0;d<h.length;d+=3)o.push(h.slice(d,d+3));return o}}function NM(r){const t=r.length;t>2&&r[t-1].equals(r[0])&&r.pop()}function OM(r,t){for(let e=0;e<t.length;e++)r.push(t[e].x),r.push(t[e].y)}class Ay extends Ke{constructor(t=new lf([new Ot(.5,.5),new Ot(-.5,.5),new Ot(-.5,-.5),new Ot(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,a=[],o=[];for(let h=0,d=t.length;h<d;h++){const m=t[h];u(m)}this.setAttribute("position",new Se(a,3)),this.setAttribute("uv",new Se(o,2)),this.computeVertexNormals();function u(h){const d=[],m=e.curveSegments!==void 0?e.curveSegments:12,v=e.steps!==void 0?e.steps:1,y=e.depth!==void 0?e.depth:1;let A=e.bevelEnabled!==void 0?e.bevelEnabled:!0,S=e.bevelThickness!==void 0?e.bevelThickness:.2,E=e.bevelSize!==void 0?e.bevelSize:S-.1,R=e.bevelOffset!==void 0?e.bevelOffset:0,C=e.bevelSegments!==void 0?e.bevelSegments:3;const M=e.extrudePath,w=e.UVGenerator!==void 0?e.UVGenerator:H2;let U,D=!1,P,I,F,k;M&&(U=M.getSpacedPoints(v),D=!0,A=!1,P=M.computeFrenetFrames(v,!1),I=new q,F=new q,k=new q),A||(C=0,S=0,E=0,R=0);const L=h.extractPoints(m);let N=L.shape;const J=L.holes;if(!qr.isClockWise(N)){N=N.reverse();for(let K=0,Wt=J.length;K<Wt;K++){const Xt=J[K];qr.isClockWise(Xt)&&(J[K]=Xt.reverse())}}function at(K){const Xt=10000000000000001e-36;let Gt=K[0];for(let Dt=1;Dt<=K.length;Dt++){const se=Dt%K.length,Vt=K[se],ie=Vt.x-Gt.x,Oe=Vt.y-Gt.y,Q=ie*ie+Oe*Oe,z=Math.max(Math.abs(Vt.x),Math.abs(Vt.y),Math.abs(Gt.x),Math.abs(Gt.y)),mt=Xt*z*z;if(Q<=mt){K.splice(se,1),Dt--;continue}Gt=Vt}}at(N),J.forEach(at);const pt=J.length,ut=N;for(let K=0;K<pt;K++){const Wt=J[K];N=N.concat(Wt)}function H(K,Wt,Xt){return Wt||console.error("THREE.ExtrudeGeometry: vec does not exist"),K.clone().addScaledVector(Wt,Xt)}const W=N.length;function j(K,Wt,Xt){let Gt,Dt,se;const Vt=K.x-Wt.x,ie=K.y-Wt.y,Oe=Xt.x-K.x,Q=Xt.y-K.y,z=Vt*Vt+ie*ie,mt=Vt*Q-ie*Oe;if(Math.abs(mt)>Number.EPSILON){const Rt=Math.sqrt(z),wt=Math.sqrt(Oe*Oe+Q*Q),Bt=Wt.x-ie/Rt,re=Wt.y+Vt/Rt,te=Xt.x-Q/wt,ge=Xt.y+Oe/wt,ve=((te-Bt)*Q-(ge-re)*Oe)/(Vt*Q-ie*Oe);Gt=Bt+Vt*ve-K.x,Dt=re+ie*ve-K.y;const Lt=Gt*Gt+Dt*Dt;if(Lt<=2)return new Ot(Gt,Dt);se=Math.sqrt(Lt/2)}else{let Rt=!1;Vt>Number.EPSILON?Oe>Number.EPSILON&&(Rt=!0):Vt<-Number.EPSILON?Oe<-Number.EPSILON&&(Rt=!0):Math.sign(ie)===Math.sign(Q)&&(Rt=!0),Rt?(Gt=-ie,Dt=Vt,se=Math.sqrt(z)):(Gt=Vt,Dt=ie,se=Math.sqrt(z/2))}return new Ot(Gt/se,Dt/se)}const lt=[];for(let K=0,Wt=ut.length,Xt=Wt-1,Gt=K+1;K<Wt;K++,Xt++,Gt++)Xt===Wt&&(Xt=0),Gt===Wt&&(Gt=0),lt[K]=j(ut[K],ut[Xt],ut[Gt]);const X=[];let nt,_t=lt.concat();for(let K=0,Wt=pt;K<Wt;K++){const Xt=J[K];nt=[];for(let Gt=0,Dt=Xt.length,se=Dt-1,Vt=Gt+1;Gt<Dt;Gt++,se++,Vt++)se===Dt&&(se=0),Vt===Dt&&(Vt=0),nt[Gt]=j(Xt[Gt],Xt[se],Xt[Vt]);X.push(nt),_t=_t.concat(nt)}let Tt;if(C===0)Tt=qr.triangulateShape(ut,J);else{const K=[],Wt=[];for(let Xt=0;Xt<C;Xt++){const Gt=Xt/C,Dt=S*Math.cos(Gt*Math.PI/2),se=E*Math.sin(Gt*Math.PI/2)+R;for(let Vt=0,ie=ut.length;Vt<ie;Vt++){const Oe=H(ut[Vt],lt[Vt],se);Ee(Oe.x,Oe.y,-Dt),Gt===0&&K.push(Oe)}for(let Vt=0,ie=pt;Vt<ie;Vt++){const Oe=J[Vt];nt=X[Vt];const Q=[];for(let z=0,mt=Oe.length;z<mt;z++){const Rt=H(Oe[z],nt[z],se);Ee(Rt.x,Rt.y,-Dt),Gt===0&&Q.push(Rt)}Gt===0&&Wt.push(Q)}}Tt=qr.triangulateShape(K,Wt)}const it=Tt.length,Ct=E+R;for(let K=0;K<W;K++){const Wt=A?H(N[K],_t[K],Ct):N[K];D?(F.copy(P.normals[0]).multiplyScalar(Wt.x),I.copy(P.binormals[0]).multiplyScalar(Wt.y),k.copy(U[0]).add(F).add(I),Ee(k.x,k.y,k.z)):Ee(Wt.x,Wt.y,0)}for(let K=1;K<=v;K++)for(let Wt=0;Wt<W;Wt++){const Xt=A?H(N[Wt],_t[Wt],Ct):N[Wt];D?(F.copy(P.normals[K]).multiplyScalar(Xt.x),I.copy(P.binormals[K]).multiplyScalar(Xt.y),k.copy(U[K]).add(F).add(I),Ee(k.x,k.y,k.z)):Ee(Xt.x,Xt.y,y/v*K)}for(let K=C-1;K>=0;K--){const Wt=K/C,Xt=S*Math.cos(Wt*Math.PI/2),Gt=E*Math.sin(Wt*Math.PI/2)+R;for(let Dt=0,se=ut.length;Dt<se;Dt++){const Vt=H(ut[Dt],lt[Dt],Gt);Ee(Vt.x,Vt.y,y+Xt)}for(let Dt=0,se=J.length;Dt<se;Dt++){const Vt=J[Dt];nt=X[Dt];for(let ie=0,Oe=Vt.length;ie<Oe;ie++){const Q=H(Vt[ie],nt[ie],Gt);D?Ee(Q.x,Q.y+U[v-1].y,U[v-1].x+Xt):Ee(Q.x,Q.y,y+Xt)}}}Ht(),Qt();function Ht(){const K=a.length/3;if(A){let Wt=0,Xt=W*Wt;for(let Gt=0;Gt<it;Gt++){const Dt=Tt[Gt];fe(Dt[2]+Xt,Dt[1]+Xt,Dt[0]+Xt)}Wt=v+C*2,Xt=W*Wt;for(let Gt=0;Gt<it;Gt++){const Dt=Tt[Gt];fe(Dt[0]+Xt,Dt[1]+Xt,Dt[2]+Xt)}}else{for(let Wt=0;Wt<it;Wt++){const Xt=Tt[Wt];fe(Xt[2],Xt[1],Xt[0])}for(let Wt=0;Wt<it;Wt++){const Xt=Tt[Wt];fe(Xt[0]+W*v,Xt[1]+W*v,Xt[2]+W*v)}}n.addGroup(K,a.length/3-K,0)}function Qt(){const K=a.length/3;let Wt=0;qt(ut,Wt),Wt+=ut.length;for(let Xt=0,Gt=J.length;Xt<Gt;Xt++){const Dt=J[Xt];qt(Dt,Wt),Wt+=Dt.length}n.addGroup(K,a.length/3-K,1)}function qt(K,Wt){let Xt=K.length;for(;--Xt>=0;){const Gt=Xt;let Dt=Xt-1;Dt<0&&(Dt=K.length-1);for(let se=0,Vt=v+C*2;se<Vt;se++){const ie=W*se,Oe=W*(se+1),Q=Wt+Gt+ie,z=Wt+Dt+ie,mt=Wt+Dt+Oe,Rt=Wt+Gt+Oe;_e(Q,z,mt,Rt)}}}function Ee(K,Wt,Xt){d.push(K),d.push(Wt),d.push(Xt)}function fe(K,Wt,Xt){De(K),De(Wt),De(Xt);const Gt=a.length/3,Dt=w.generateTopUV(n,a,Gt-3,Gt-2,Gt-1);Ae(Dt[0]),Ae(Dt[1]),Ae(Dt[2])}function _e(K,Wt,Xt,Gt){De(K),De(Wt),De(Gt),De(Wt),De(Xt),De(Gt);const Dt=a.length/3,se=w.generateSideWallUV(n,a,Dt-6,Dt-3,Dt-2,Dt-1);Ae(se[0]),Ae(se[1]),Ae(se[3]),Ae(se[1]),Ae(se[2]),Ae(se[3])}function De(K){a.push(d[K*3+0]),a.push(d[K*3+1]),a.push(d[K*3+2])}function Ae(K){o.push(K.x),o.push(K.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return z2(e,n,t)}static fromJSON(t,e){const n=[];for(let o=0,u=t.shapes.length;o<u;o++){const h=e[t.shapes[o]];n.push(h)}const a=t.options.extrudePath;return a!==void 0&&(t.options.extrudePath=new Xv[a.type]().fromJSON(a)),new Ay(n,t.options)}}const H2={generateTopUV:function(r,t,e,n,a){const o=t[e*3],u=t[e*3+1],h=t[n*3],d=t[n*3+1],m=t[a*3],v=t[a*3+1];return[new Ot(o,u),new Ot(h,d),new Ot(m,v)]},generateSideWallUV:function(r,t,e,n,a,o){const u=t[e*3],h=t[e*3+1],d=t[e*3+2],m=t[n*3],v=t[n*3+1],y=t[n*3+2],A=t[a*3],S=t[a*3+1],E=t[a*3+2],R=t[o*3],C=t[o*3+1],M=t[o*3+2];return Math.abs(h-v)<Math.abs(u-m)?[new Ot(u,1-d),new Ot(m,1-y),new Ot(A,1-E),new Ot(R,1-M)]:[new Ot(h,1-d),new Ot(v,1-y),new Ot(S,1-E),new Ot(C,1-M)]}};function z2(r,t,e){if(e.shapes=[],Array.isArray(r))for(let n=0,a=r.length;n<a;n++){const o=r[n];e.shapes.push(o.uuid)}else e.shapes.push(r.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class xy extends zc{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,a=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,o,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new xy(t.radius,t.detail)}}class Sy extends Ke{constructor(t=[new Ot(0,-.5),new Ot(.5,0),new Ot(0,.5)],e=12,n=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:a},e=Math.floor(e),a=Je(a,0,Math.PI*2);const o=[],u=[],h=[],d=[],m=[],v=1/e,y=new q,A=new Ot,S=new q,E=new q,R=new q;let C=0,M=0;for(let w=0;w<=t.length-1;w++)switch(w){case 0:C=t[w+1].x-t[w].x,M=t[w+1].y-t[w].y,S.x=M*1,S.y=-C,S.z=M*0,R.copy(S),S.normalize(),d.push(S.x,S.y,S.z);break;case t.length-1:d.push(R.x,R.y,R.z);break;default:C=t[w+1].x-t[w].x,M=t[w+1].y-t[w].y,S.x=M*1,S.y=-C,S.z=M*0,E.copy(S),S.x+=R.x,S.y+=R.y,S.z+=R.z,S.normalize(),d.push(S.x,S.y,S.z),R.copy(E)}for(let w=0;w<=e;w++){const U=n+w*v*a,D=Math.sin(U),P=Math.cos(U);for(let I=0;I<=t.length-1;I++){y.x=t[I].x*D,y.y=t[I].y,y.z=t[I].x*P,u.push(y.x,y.y,y.z),A.x=w/e,A.y=I/(t.length-1),h.push(A.x,A.y);const F=d[3*I+0]*D,k=d[3*I+1],L=d[3*I+0]*P;m.push(F,k,L)}}for(let w=0;w<e;w++)for(let U=0;U<t.length-1;U++){const D=U+w*t.length,P=D,I=D+t.length,F=D+t.length+1,k=D+1;o.push(P,I,k),o.push(F,k,I)}this.setIndex(o),this.setAttribute("position",new Se(u,3)),this.setAttribute("uv",new Se(h,2)),this.setAttribute("normal",new Se(m,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Sy(t.points,t.segments,t.phiStart,t.phiLength)}}class Cm extends zc{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,a,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Cm(t.radius,t.detail)}}class md extends Ke{constructor(t=1,e=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:a};const o=t/2,u=e/2,h=Math.floor(n),d=Math.floor(a),m=h+1,v=d+1,y=t/h,A=e/d,S=[],E=[],R=[],C=[];for(let M=0;M<v;M++){const w=M*A-u;for(let U=0;U<m;U++){const D=U*y-o;E.push(D,-w,0),R.push(0,0,1),C.push(U/h),C.push(1-M/d)}}for(let M=0;M<d;M++)for(let w=0;w<h;w++){const U=w+m*M,D=w+m*(M+1),P=w+1+m*(M+1),I=w+1+m*M;S.push(U,D,I),S.push(D,P,I)}this.setIndex(S),this.setAttribute("position",new Se(E,3)),this.setAttribute("normal",new Se(R,3)),this.setAttribute("uv",new Se(C,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new md(t.width,t.height,t.widthSegments,t.heightSegments)}}class My extends Ke{constructor(t=.5,e=1,n=32,a=1,o=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:u},n=Math.max(3,n),a=Math.max(1,a);const h=[],d=[],m=[],v=[];let y=t;const A=(e-t)/a,S=new q,E=new Ot;for(let R=0;R<=a;R++){for(let C=0;C<=n;C++){const M=o+C/n*u;S.x=y*Math.cos(M),S.y=y*Math.sin(M),d.push(S.x,S.y,S.z),m.push(0,0,1),E.x=(S.x/e+1)/2,E.y=(S.y/e+1)/2,v.push(E.x,E.y)}y+=A}for(let R=0;R<a;R++){const C=R*(n+1);for(let M=0;M<n;M++){const w=M+C,U=w,D=w+n+1,P=w+n+2,I=w+1;h.push(U,D,I),h.push(D,P,I)}}this.setIndex(h),this.setAttribute("position",new Se(d,3)),this.setAttribute("normal",new Se(m,3)),this.setAttribute("uv",new Se(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new My(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class by extends Ke{constructor(t=new lf([new Ot(0,.5),new Ot(-.5,-.5),new Ot(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],a=[],o=[],u=[];let h=0,d=0;if(Array.isArray(t)===!1)m(t);else for(let v=0;v<t.length;v++)m(t[v]),this.addGroup(h,d,v),h+=d,d=0;this.setIndex(n),this.setAttribute("position",new Se(a,3)),this.setAttribute("normal",new Se(o,3)),this.setAttribute("uv",new Se(u,2));function m(v){const y=a.length/3,A=v.extractPoints(e);let S=A.shape;const E=A.holes;qr.isClockWise(S)===!1&&(S=S.reverse());for(let C=0,M=E.length;C<M;C++){const w=E[C];qr.isClockWise(w)===!0&&(E[C]=w.reverse())}const R=qr.triangulateShape(S,E);for(let C=0,M=E.length;C<M;C++){const w=E[C];S=S.concat(w)}for(let C=0,M=S.length;C<M;C++){const w=S[C];a.push(w.x,w.y,0),o.push(0,0,1),u.push(w.x,w.y)}for(let C=0,M=R.length;C<M;C++){const w=R[C],U=w[0]+y,D=w[1]+y,P=w[2]+y;n.push(U,D,P),d+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return F2(e,t)}static fromJSON(t,e){const n=[];for(let a=0,o=t.shapes.length;a<o;a++){const u=e[t.shapes[a]];n.push(u)}return new by(n,t.curveSegments)}}function F2(r,t){if(t.shapes=[],Array.isArray(r))for(let e=0,n=r.length;e<n;e++){const a=r[e];t.shapes.push(a.uuid)}else t.shapes.push(r.uuid);return t}class Rm extends Ke{constructor(t=1,e=32,n=16,a=0,o=Math.PI*2,u=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:a,phiLength:o,thetaStart:u,thetaLength:h},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const d=Math.min(u+h,Math.PI);let m=0;const v=[],y=new q,A=new q,S=[],E=[],R=[],C=[];for(let M=0;M<=n;M++){const w=[],U=M/n;let D=0;M===0&&u===0?D=.5/e:M===n&&d===Math.PI&&(D=-.5/e);for(let P=0;P<=e;P++){const I=P/e;y.x=-t*Math.cos(a+I*o)*Math.sin(u+U*h),y.y=t*Math.cos(u+U*h),y.z=t*Math.sin(a+I*o)*Math.sin(u+U*h),E.push(y.x,y.y,y.z),A.copy(y).normalize(),R.push(A.x,A.y,A.z),C.push(I+D,1-U),w.push(m++)}v.push(w)}for(let M=0;M<n;M++)for(let w=0;w<e;w++){const U=v[M][w+1],D=v[M][w],P=v[M+1][w],I=v[M+1][w+1];(M!==0||u>0)&&S.push(U,D,I),(M!==n-1||d<Math.PI)&&S.push(D,P,I)}this.setIndex(S),this.setAttribute("position",new Se(E,3)),this.setAttribute("normal",new Se(R,3)),this.setAttribute("uv",new Se(C,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Rm(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Ey extends zc{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,a,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Ey(t.radius,t.detail)}}class Ty extends Ke{constructor(t=1,e=.4,n=12,a=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:a,arc:o},n=Math.floor(n),a=Math.floor(a);const u=[],h=[],d=[],m=[],v=new q,y=new q,A=new q;for(let S=0;S<=n;S++)for(let E=0;E<=a;E++){const R=E/a*o,C=S/n*Math.PI*2;y.x=(t+e*Math.cos(C))*Math.cos(R),y.y=(t+e*Math.cos(C))*Math.sin(R),y.z=e*Math.sin(C),h.push(y.x,y.y,y.z),v.x=t*Math.cos(R),v.y=t*Math.sin(R),A.subVectors(y,v).normalize(),d.push(A.x,A.y,A.z),m.push(E/a),m.push(S/n)}for(let S=1;S<=n;S++)for(let E=1;E<=a;E++){const R=(a+1)*S+E-1,C=(a+1)*(S-1)+E-1,M=(a+1)*(S-1)+E,w=(a+1)*S+E;u.push(R,C,w),u.push(C,M,w)}this.setIndex(u),this.setAttribute("position",new Se(h,3)),this.setAttribute("normal",new Se(d,3)),this.setAttribute("uv",new Se(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ty(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class Cy extends Ke{constructor(t=1,e=.4,n=64,a=8,o=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:a,p:o,q:u},n=Math.floor(n),a=Math.floor(a);const h=[],d=[],m=[],v=[],y=new q,A=new q,S=new q,E=new q,R=new q,C=new q,M=new q;for(let U=0;U<=n;++U){const D=U/n*o*Math.PI*2;w(D,o,u,t,S),w(D+.01,o,u,t,E),C.subVectors(E,S),M.addVectors(E,S),R.crossVectors(C,M),M.crossVectors(R,C),R.normalize(),M.normalize();for(let P=0;P<=a;++P){const I=P/a*Math.PI*2,F=-e*Math.cos(I),k=e*Math.sin(I);y.x=S.x+(F*M.x+k*R.x),y.y=S.y+(F*M.y+k*R.y),y.z=S.z+(F*M.z+k*R.z),d.push(y.x,y.y,y.z),A.subVectors(y,S).normalize(),m.push(A.x,A.y,A.z),v.push(U/n),v.push(P/a)}}for(let U=1;U<=n;U++)for(let D=1;D<=a;D++){const P=(a+1)*(U-1)+(D-1),I=(a+1)*U+(D-1),F=(a+1)*U+D,k=(a+1)*(U-1)+D;h.push(P,I,k),h.push(I,F,k)}this.setIndex(h),this.setAttribute("position",new Se(d,3)),this.setAttribute("normal",new Se(m,3)),this.setAttribute("uv",new Se(v,2));function w(U,D,P,I,F){const k=Math.cos(U),L=Math.sin(U),N=P/D*U,J=Math.cos(N);F.x=I*(2+J)*.5*k,F.y=I*(2+J)*L*.5,F.z=I*Math.sin(N)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Cy(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Ry extends Ke{constructor(t=new Dx(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),e=64,n=1,a=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:a,closed:o};const u=t.computeFrenetFrames(e,o);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const h=new q,d=new q,m=new Ot;let v=new q;const y=[],A=[],S=[],E=[];R(),this.setIndex(E),this.setAttribute("position",new Se(y,3)),this.setAttribute("normal",new Se(A,3)),this.setAttribute("uv",new Se(S,2));function R(){for(let U=0;U<e;U++)C(U);C(o===!1?e:0),w(),M()}function C(U){v=t.getPointAt(U/e,v);const D=u.normals[U],P=u.binormals[U];for(let I=0;I<=a;I++){const F=I/a*Math.PI*2,k=Math.sin(F),L=-Math.cos(F);d.x=L*D.x+k*P.x,d.y=L*D.y+k*P.y,d.z=L*D.z+k*P.z,d.normalize(),A.push(d.x,d.y,d.z),h.x=v.x+n*d.x,h.y=v.y+n*d.y,h.z=v.z+n*d.z,y.push(h.x,h.y,h.z)}}function M(){for(let U=1;U<=e;U++)for(let D=1;D<=a;D++){const P=(a+1)*(U-1)+(D-1),I=(a+1)*U+(D-1),F=(a+1)*U+D,k=(a+1)*(U-1)+D;E.push(P,I,k),E.push(I,F,k)}}function w(){for(let U=0;U<=e;U++)for(let D=0;D<=a;D++)m.x=U/e,m.y=D/a,S.push(m.x,m.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Ry(new Xv[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class A1 extends Ke{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,a=new q,o=new q;if(t.index!==null){const u=t.attributes.position,h=t.index;let d=t.groups;d.length===0&&(d=[{start:0,count:h.count,materialIndex:0}]);for(let m=0,v=d.length;m<v;++m){const y=d[m],A=y.start,S=y.count;for(let E=A,R=A+S;E<R;E+=3)for(let C=0;C<3;C++){const M=h.getX(E+C),w=h.getX(E+(C+1)%3);a.fromBufferAttribute(u,M),o.fromBufferAttribute(u,w),LM(a,o,n)===!0&&(e.push(a.x,a.y,a.z),e.push(o.x,o.y,o.z))}}}else{const u=t.attributes.position;for(let h=0,d=u.count/3;h<d;h++)for(let m=0;m<3;m++){const v=3*h+m,y=3*h+(m+1)%3;a.fromBufferAttribute(u,v),o.fromBufferAttribute(u,y),LM(a,o,n)===!0&&(e.push(a.x,a.y,a.z),e.push(o.x,o.y,o.z))}}this.setAttribute("position",new Se(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function LM(r,t,e){const n=`${r.x},${r.y},${r.z}-${t.x},${t.y},${t.z}`,a=`${t.x},${t.y},${t.z}-${r.x},${r.y},${r.z}`;return e.has(n)===!0||e.has(a)===!0?!1:(e.add(n),e.add(a),!0)}var IM=Object.freeze({__proto__:null,BoxGeometry:yf,CapsuleGeometry:gy,CircleGeometry:vy,ConeGeometry:Tm,CylinderGeometry:Em,DodecahedronGeometry:yy,EdgesGeometry:u1,ExtrudeGeometry:Ay,IcosahedronGeometry:xy,LatheGeometry:Sy,OctahedronGeometry:Cm,PlaneGeometry:md,PolyhedronGeometry:zc,RingGeometry:My,ShapeGeometry:by,SphereGeometry:Rm,TetrahedronGeometry:Ey,TorusGeometry:Ty,TorusKnotGeometry:Cy,TubeGeometry:Ry,WireframeGeometry:A1});class x1 extends Ji{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new oe(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class S1 extends jr{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class hf extends Ji{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new oe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ia,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class pr extends hf{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ot(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Je(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new oe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new oe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new oe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class M1 extends Ji{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new oe(16777215),this.specular=new oe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ia,this.combine=Am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class b1 extends Ji{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new oe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class E1 extends Ji{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class T1 extends Ji{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new oe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new oe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ia,this.combine=Am,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Nx extends Ji{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=GE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Ox extends Ji{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class C1 extends Ji{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new oe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new Ot(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class R1 extends Oa{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function nf(r,t){return!r||r.constructor===t?r:typeof t.BYTES_PER_ELEMENT=="number"?new t(r):Array.prototype.slice.call(r)}function B1(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function w1(r){function t(a,o){return r[a]-r[o]}const e=r.length,n=new Array(e);for(let a=0;a!==e;++a)n[a]=a;return n.sort(t),n}function XA(r,t,e){const n=r.length,a=new r.constructor(n);for(let o=0,u=0;u!==n;++o){const h=e[o]*t;for(let d=0;d!==t;++d)a[u++]=r[h+d]}return a}function Lx(r,t,e,n){let a=1,o=r[0];for(;o!==void 0&&o[n]===void 0;)o=r[a++];if(o===void 0)return;let u=o[n];if(u!==void 0)if(Array.isArray(u))do u=o[n],u!==void 0&&(t.push(o.time),e.push(...u)),o=r[a++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[n],u!==void 0&&(t.push(o.time),u.toArray(e,e.length)),o=r[a++];while(o!==void 0);else do u=o[n],u!==void 0&&(t.push(o.time),e.push(u)),o=r[a++];while(o!==void 0)}function G2(r,t,e,n,a=30){const o=r.clone();o.name=t;const u=[];for(let d=0;d<o.tracks.length;++d){const m=o.tracks[d],v=m.getValueSize(),y=[],A=[];for(let S=0;S<m.times.length;++S){const E=m.times[S]*a;if(!(E<e||E>=n)){y.push(m.times[S]);for(let R=0;R<v;++R)A.push(m.values[S*v+R])}}y.length!==0&&(m.times=nf(y,m.times.constructor),m.values=nf(A,m.values.constructor),u.push(m))}o.tracks=u;let h=1/0;for(let d=0;d<o.tracks.length;++d)h>o.tracks[d].times[0]&&(h=o.tracks[d].times[0]);for(let d=0;d<o.tracks.length;++d)o.tracks[d].shift(-1*h);return o.resetDuration(),o}function V2(r,t=0,e=r,n=30){n<=0&&(n=30);const a=e.tracks.length,o=t/n;for(let u=0;u<a;++u){const h=e.tracks[u],d=h.ValueTypeName;if(d==="bool"||d==="string")continue;const m=r.tracks.find(function(M){return M.name===h.name&&M.ValueTypeName===d});if(m===void 0)continue;let v=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);let A=0;const S=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(A=S/3);const E=h.times.length-1;let R;if(o<=h.times[0]){const M=v,w=y-v;R=h.values.slice(M,w)}else if(o>=h.times[E]){const M=E*y+v,w=M+y-v;R=h.values.slice(M,w)}else{const M=h.createInterpolant(),w=v,U=y-v;M.evaluate(o),R=M.resultBuffer.slice(w,U)}d==="quaternion"&&new ui().fromArray(R).normalize().conjugate().toArray(R);const C=m.times.length;for(let M=0;M<C;++M){const w=M*S+A;if(d==="quaternion")ui.multiplyQuaternionsFlat(m.values,w,R,0,m.values,w);else{const U=S-A*2;for(let D=0;D<U;++D)m.values[w+D]-=R[D]}}}return r.blendMode=dx,r}class X2{static convertArray(t,e){return nf(t,e)}static isTypedArray(t){return B1(t)}static getKeyframeOrder(t){return w1(t)}static sortedArray(t,e,n){return XA(t,e,n)}static flattenJSON(t,e,n,a){Lx(t,e,n,a)}static subclip(t,e,n,a,o=30){return G2(t,e,n,a,o)}static makeClipAdditive(t,e=0,n=t,a=30){return V2(t,e,n,a)}}class gd{constructor(t,e,n,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,a=e[n],o=e[n-1];t:{e:{let u;n:{i:if(!(t<a)){for(let h=n+2;;){if(a===void 0){if(t<o)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===h)break;if(o=a,a=e[++n],t<a)break e}u=e.length;break n}if(!(t>=o)){const h=e[1];t<h&&(n=2,o=h);for(let d=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(a=o,o=e[--n-1],t>=o)break e}u=n,n=0;break n}break t}for(;n<u;){const h=n+u>>>1;t<e[h]?u=h:n=h+1}if(a=e[n],o=e[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,a)}return this.interpolate_(n,o,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=t*a;for(let u=0;u!==a;++u)e[u]=n[o+u];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class D1 extends gd{constructor(t,e,n,a){super(t,e,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:tf,endingEnd:tf}}intervalChanged_(t,e,n){const a=this.parameterPositions;let o=t-2,u=t+1,h=a[o],d=a[u];if(h===void 0)switch(this.getSettings_().endingStart){case ef:o=t,h=2*e-n;break;case cm:o=a.length-2,h=e+a[o]-a[o+1];break;default:o=t,h=n}if(d===void 0)switch(this.getSettings_().endingEnd){case ef:u=t,d=2*n-e;break;case cm:u=1,d=n+a[1]-a[0];break;default:u=t-1,d=e}const m=(n-e)*.5,v=this.valueSize;this._weightPrev=m/(e-h),this._weightNext=m/(d-n),this._offsetPrev=o*v,this._offsetNext=u*v}interpolate_(t,e,n,a){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,d=t*h,m=d-h,v=this._offsetPrev,y=this._offsetNext,A=this._weightPrev,S=this._weightNext,E=(n-e)/(a-e),R=E*E,C=R*E,M=-A*C+2*A*R-A*E,w=(1+A)*C+(-1.5-2*A)*R+(-.5+A)*E+1,U=(-1-S)*C+(1.5+S)*R+.5*E,D=S*C-S*R;for(let P=0;P!==h;++P)o[P]=M*u[v+P]+w*u[m+P]+U*u[d+P]+D*u[y+P];return o}}class Ix extends gd{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t,e,n,a){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,d=t*h,m=d-h,v=(n-e)/(a-e),y=1-v;for(let A=0;A!==h;++A)o[A]=u[m+A]*y+u[d+A]*v;return o}}class U1 extends gd{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class mr{constructor(t,e,n,a){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=nf(e,this.TimeBufferType),this.values=nf(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:nf(t.times,Array),values:nf(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(n.interpolation=a)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new U1(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new Ix(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new D1(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case id:e=this.InterpolantFactoryMethodDiscrete;break;case ad:e=this.InterpolantFactoryMethodLinear;break;case tv:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return id;case this.InterpolantFactoryMethodLinear:return ad;case this.InterpolantFactoryMethodSmooth:return tv}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,a=e.length;n!==a;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,a=e.length;n!==a;++n)e[n]*=t}return this}trim(t,e){const n=this.times,a=n.length;let o=0,u=a-1;for(;o!==a&&n[o]<t;)++o;for(;u!==-1&&n[u]>e;)--u;if(++u,o!==0||u!==a){o>=u&&(u=Math.max(u,1),o=u-1);const h=this.getValueSize();this.times=n.slice(o,u),this.values=this.values.slice(o*h,u*h)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,a=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let u=null;for(let h=0;h!==o;h++){const d=n[h];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,d),t=!1;break}if(u!==null&&u>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,d,u),t=!1;break}u=d}if(a!==void 0&&B1(a))for(let h=0,d=a.length;h!==d;++h){const m=a[h];if(isNaN(m)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,m),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),a=this.getInterpolation()===tv,o=t.length-1;let u=1;for(let h=1;h<o;++h){let d=!1;const m=t[h],v=t[h+1];if(m!==v&&(h!==1||m!==t[0]))if(a)d=!0;else{const y=h*n,A=y-n,S=y+n;for(let E=0;E!==n;++E){const R=e[y+E];if(R!==e[A+E]||R!==e[S+E]){d=!0;break}}}if(d){if(h!==u){t[u]=t[h];const y=h*n,A=u*n;for(let S=0;S!==n;++S)e[A+S]=e[y+S]}++u}}if(o>0){t[u]=t[o];for(let h=o*n,d=u*n,m=0;m!==n;++m)e[d+m]=e[h+m];++u}return u!==t.length?(this.times=t.slice(0,u),this.values=e.slice(0,u*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,a=new n(this.name,t,e);return a.createInterpolant=this.createInterpolant,a}}mr.prototype.ValueTypeName="";mr.prototype.TimeBufferType=Float32Array;mr.prototype.ValueBufferType=Float32Array;mr.prototype.DefaultInterpolation=ad;class _f extends mr{constructor(t,e,n){super(t,e,n)}}_f.prototype.ValueTypeName="bool";_f.prototype.ValueBufferType=Array;_f.prototype.DefaultInterpolation=id;_f.prototype.InterpolantFactoryMethodLinear=void 0;_f.prototype.InterpolantFactoryMethodSmooth=void 0;class Px extends mr{constructor(t,e,n,a){super(t,e,n,a)}}Px.prototype.ValueTypeName="color";class df extends mr{constructor(t,e,n,a){super(t,e,n,a)}}df.prototype.ValueTypeName="number";class N1 extends gd{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t,e,n,a){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,d=(n-e)/(a-e);let m=t*h;for(let v=m+h;m!==v;m+=4)ui.slerpFlat(o,0,u,m-h,u,m,d);return o}}class pf extends mr{constructor(t,e,n,a){super(t,e,n,a)}InterpolantFactoryMethodLinear(t){return new N1(this.times,this.values,this.getValueSize(),t)}}pf.prototype.ValueTypeName="quaternion";pf.prototype.InterpolantFactoryMethodSmooth=void 0;class Af extends mr{constructor(t,e,n){super(t,e,n)}}Af.prototype.ValueTypeName="string";Af.prototype.ValueBufferType=Array;Af.prototype.DefaultInterpolation=id;Af.prototype.InterpolantFactoryMethodLinear=void 0;Af.prototype.InterpolantFactoryMethodSmooth=void 0;class mf extends mr{constructor(t,e,n,a){super(t,e,n,a)}}mf.prototype.ValueTypeName="vector";class cd{constructor(t="",e=-1,n=[],a=ry){this.name=t,this.tracks=n,this.duration=e,this.blendMode=a,this.uuid=Fs(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,a=1/(t.fps||1);for(let u=0,h=n.length;u!==h;++u)e.push(k2(n[u]).scale(a));const o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const e=[],n=t.tracks,a={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,u=n.length;o!==u;++o)e.push(mr.toJSON(n[o]));return a}static CreateFromMorphTargetSequence(t,e,n,a){const o=e.length,u=[];for(let h=0;h<o;h++){let d=[],m=[];d.push((h+o-1)%o,h,(h+1)%o),m.push(0,1,0);const v=w1(d);d=XA(d,1,v),m=XA(m,1,v),!a&&d[0]===0&&(d.push(o),m.push(m[0])),u.push(new df(".morphTargetInfluences["+e[h].name+"]",d,m).scale(1/n))}return new this(t,-1,u)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const a=t;n=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<n.length;a++)if(n[a].name===e)return n[a];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const a={},o=/^([\w-]*?)([\d]+)$/;for(let h=0,d=t.length;h<d;h++){const m=t[h],v=m.name.match(o);if(v&&v.length>1){const y=v[1];let A=a[y];A||(a[y]=A=[]),A.push(m)}}const u=[];for(const h in a)u.push(this.CreateFromMorphTargetSequence(h,a[h],e,n));return u}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(y,A,S,E,R){if(S.length!==0){const C=[],M=[];Lx(S,C,M,E),C.length!==0&&R.push(new y(A,C,M))}},a=[],o=t.name||"default",u=t.fps||30,h=t.blendMode;let d=t.length||-1;const m=t.hierarchy||[];for(let y=0;y<m.length;y++){const A=m[y].keys;if(!(!A||A.length===0))if(A[0].morphTargets){const S={};let E;for(E=0;E<A.length;E++)if(A[E].morphTargets)for(let R=0;R<A[E].morphTargets.length;R++)S[A[E].morphTargets[R]]=-1;for(const R in S){const C=[],M=[];for(let w=0;w!==A[E].morphTargets.length;++w){const U=A[E];C.push(U.time),M.push(U.morphTarget===R?1:0)}a.push(new df(".morphTargetInfluence["+R+"]",C,M))}d=S.length*u}else{const S=".bones["+e[y].name+"]";n(mf,S+".position",A,"pos",a),n(pf,S+".quaternion",A,"rot",a),n(mf,S+".scale",A,"scl",a)}}return a.length===0?null:new this(o,d,a,h)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,a=t.length;n!==a;++n){const o=this.tracks[n];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Y2(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return df;case"vector":case"vector2":case"vector3":case"vector4":return mf;case"color":return Px;case"quaternion":return pf;case"bool":case"boolean":return _f;case"string":return Af}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function k2(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Y2(r.type);if(r.times===void 0){const e=[],n=[];Lx(r.keys,e,n,"value"),r.times=e,r.values=n}return t.parse!==void 0?t.parse(r):new t(r.name,r.times,r.values,r.interpolation)}const Io={enabled:!1,files:{},add:function(r,t){this.enabled!==!1&&(this.files[r]=t)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class Hx{constructor(t,e,n){const a=this;let o=!1,u=0,h=0,d;const m=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(v){h++,o===!1&&a.onStart!==void 0&&a.onStart(v,u,h),o=!0},this.itemEnd=function(v){u++,a.onProgress!==void 0&&a.onProgress(v,u,h),u===h&&(o=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(v){a.onError!==void 0&&a.onError(v)},this.resolveURL=function(v){return d?d(v):v},this.setURLModifier=function(v){return d=v,this},this.addHandler=function(v,y){return m.push(v,y),this},this.removeHandler=function(v){const y=m.indexOf(v);return y!==-1&&m.splice(y,2),this},this.getHandler=function(v){for(let y=0,A=m.length;y<A;y+=2){const S=m[y],E=m[y+1];if(S.global&&(S.lastIndex=0),S.test(v))return E}return null}}}const O1=new Hx;class La{constructor(t){this.manager=t!==void 0?t:O1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(a,o){n.load(t,a,e,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}La.DEFAULT_MATERIAL_NAME="__DEFAULT";const gl={};class q2 extends Error{constructor(t,e){super(t),this.response=e}}class Gs extends La{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,n,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Io.get(`file:${t}`);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(gl[t]!==void 0){gl[t].push({onLoad:e,onProgress:n,onError:a});return}gl[t]=[],gl[t].push({onLoad:e,onProgress:n,onError:a});const u=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,d=this.responseType;fetch(u).then(m=>{if(m.status===200||m.status===0){if(m.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||m.body===void 0||m.body.getReader===void 0)return m;const v=gl[t],y=m.body.getReader(),A=m.headers.get("X-File-Size")||m.headers.get("Content-Length"),S=A?parseInt(A):0,E=S!==0;let R=0;const C=new ReadableStream({start(M){w();function w(){y.read().then(({done:U,value:D})=>{if(U)M.close();else{R+=D.byteLength;const P=new ProgressEvent("progress",{lengthComputable:E,loaded:R,total:S});for(let I=0,F=v.length;I<F;I++){const k=v[I];k.onProgress&&k.onProgress(P)}M.enqueue(D),w()}},U=>{M.error(U)})}}});return new Response(C)}else throw new q2(`fetch for "${m.url}" responded with ${m.status}: ${m.statusText}`,m)}).then(m=>{switch(d){case"arraybuffer":return m.arrayBuffer();case"blob":return m.blob();case"document":return m.text().then(v=>new DOMParser().parseFromString(v,h));case"json":return m.json();default:if(h==="")return m.text();{const y=/charset="?([^;"\s]*)"?/i.exec(h),A=y&&y[1]?y[1].toLowerCase():void 0,S=new TextDecoder(A);return m.arrayBuffer().then(E=>S.decode(E))}}}).then(m=>{Io.add(`file:${t}`,m);const v=gl[t];delete gl[t];for(let y=0,A=v.length;y<A;y++){const S=v[y];S.onLoad&&S.onLoad(m)}}).catch(m=>{const v=gl[t];if(v===void 0)throw this.manager.itemError(t),m;delete gl[t];for(let y=0,A=v.length;y<A;y++){const S=v[y];S.onError&&S.onError(m)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class J2 extends La{constructor(t){super(t)}load(t,e,n,a){const o=this,u=new Gs(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},n,a)}parse(t){const e=[];for(let n=0;n<t.length;n++){const a=cd.parse(t[n]);e.push(a)}return e}}class K2 extends La{constructor(t){super(t)}load(t,e,n,a){const o=this,u=[],h=new my,d=new Gs(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(o.withCredentials);let m=0;function v(y){d.load(t[y],function(A){const S=o.parse(A,!0);u[y]={width:S.width,height:S.height,format:S.format,mipmaps:S.mipmaps},m+=1,m===6&&(S.mipmapCount===1&&(h.minFilter=hi),h.image=u,h.format=S.format,h.needsUpdate=!0,e&&e(h))},n,a)}if(Array.isArray(t))for(let y=0,A=t.length;y<A;++y)v(y);else d.load(t,function(y){const A=o.parse(y,!0);if(A.isCubemap){const S=A.mipmaps.length/A.mipmapCount;for(let E=0;E<S;E++){u[E]={mipmaps:[]};for(let R=0;R<A.mipmapCount;R++)u[E].mipmaps.push(A.mipmaps[E*A.mipmapCount+R]),u[E].format=A.format,u[E].width=A.width,u[E].height=A.height}h.image=u}else h.image.width=A.width,h.image.height=A.height,h.mipmaps=A.mipmaps;A.mipmapCount===1&&(h.minFilter=hi),h.format=A.format,h.needsUpdate=!0,e&&e(h)},n,a);return h}}const Fh=new WeakMap;class vm extends La{constructor(t){super(t)}load(t,e,n,a){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,u=Io.get(`image:${t}`);if(u!==void 0){if(u.complete===!0)o.manager.itemStart(t),setTimeout(function(){e&&e(u),o.manager.itemEnd(t)},0);else{let y=Fh.get(u);y===void 0&&(y=[],Fh.set(u,y)),y.push({onLoad:e,onError:a})}return u}const h=dm("img");function d(){v(),e&&e(this);const y=Fh.get(this)||[];for(let A=0;A<y.length;A++){const S=y[A];S.onLoad&&S.onLoad(this)}Fh.delete(this),o.manager.itemEnd(t)}function m(y){v(),a&&a(y),Io.remove(`image:${t}`);const A=Fh.get(this)||[];for(let S=0;S<A.length;S++){const E=A[S];E.onError&&E.onError(y)}Fh.delete(this),o.manager.itemError(t),o.manager.itemEnd(t)}function v(){h.removeEventListener("load",d,!1),h.removeEventListener("error",m,!1)}return h.addEventListener("load",d,!1),h.addEventListener("error",m,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),Io.add(`image:${t}`,h),o.manager.itemStart(t),h.src=t,h}}class j2 extends La{constructor(t){super(t)}load(t,e,n,a){const o=new Sm;o.colorSpace=Pi;const u=new vm(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let h=0;function d(m){u.load(t[m],function(v){o.images[m]=v,h++,h===6&&(o.needsUpdate=!0,e&&e(o))},void 0,a)}for(let m=0;m<t.length;++m)d(m);return o}}class W2 extends La{constructor(t){super(t)}load(t,e,n,a){const o=this,u=new Ho,h=new Gs(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(o.withCredentials),h.load(t,function(d){let m;try{m=o.parse(d)}catch(v){if(a!==void 0)a(v);else{console.error(v);return}}m.image!==void 0?u.image=m.image:m.data!==void 0&&(u.image.width=m.width,u.image.height=m.height,u.image.data=m.data),u.wrapS=m.wrapS!==void 0?m.wrapS:zs,u.wrapT=m.wrapT!==void 0?m.wrapT:zs,u.magFilter=m.magFilter!==void 0?m.magFilter:hi,u.minFilter=m.minFilter!==void 0?m.minFilter:hi,u.anisotropy=m.anisotropy!==void 0?m.anisotropy:1,m.colorSpace!==void 0&&(u.colorSpace=m.colorSpace),m.flipY!==void 0&&(u.flipY=m.flipY),m.format!==void 0&&(u.format=m.format),m.type!==void 0&&(u.type=m.type),m.mipmaps!==void 0&&(u.mipmaps=m.mipmaps,u.minFilter=fr),m.mipmapCount===1&&(u.minFilter=hi),m.generateMipmaps!==void 0&&(u.generateMipmaps=m.generateMipmaps),u.needsUpdate=!0,e&&e(u,m)},n,a),u}}class sm extends La{constructor(t){super(t)}load(t,e,n,a){const o=new ai,u=new vm(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(t,function(h){o.image=h,o.needsUpdate=!0,e!==void 0&&e(o)},n,a),o}}class Fc extends vn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new oe(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class L1 extends Fc{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new oe(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const Z_=new Ne,PM=new q,HM=new q;class zx{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ot(512,512),this.mapType=dr,this.map=null,this.mapPass=null,this.matrix=new Ne,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new pd,this._frameExtents=new Ot(1,1),this._viewportCount=1,this._viewports=[new Mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;PM.setFromMatrixPosition(t.matrixWorld),e.position.copy(PM),HM.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(HM),e.updateMatrixWorld(),Z_.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z_),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Z_)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Q2 extends zx{constructor(){super(new ii(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const e=this.camera,n=sd*2*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,o=t.distance||e.far;(n!==e.fov||a!==e.aspect||o!==e.far)&&(e.fov=n,e.aspect=a,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Fx extends Fc{constructor(t,e,n=0,a=Math.PI/3,o=0,u=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.target=new vn,this.distance=n,this.angle=a,this.penumbra=o,this.decay=u,this.map=null,this.shadow=new Q2}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const zM=new Ne,kp=new q,$_=new q;class Z2 extends zx{constructor(){super(new ii(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ot(4,2),this._viewportCount=6,this._viewports=[new Mn(2,1,1,1),new Mn(0,1,1,1),new Mn(3,1,1,1),new Mn(1,1,1,1),new Mn(3,0,1,1),new Mn(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,a=this.matrix,o=t.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),kp.setFromMatrixPosition(t.matrixWorld),n.position.copy(kp),$_.copy(n.position),$_.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt($_),n.updateMatrixWorld(),a.makeTranslation(-kp.x,-kp.y,-kp.z),zM.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zM)}}class Gx extends Fc{constructor(t,e,n=0,a=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=a,this.shadow=new Z2}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Kr extends cy{constructor(t=-1,e=1,n=1,a=-1,o=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=a,this.near=o,this.far=u,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,a,o,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=a,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let o=n-t,u=n+t,h=a+e,d=a-e;if(this.view!==null&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=m*this.view.offsetX,u=o+m*this.view.width,h-=v*this.view.offsetY,d=h-v*this.view.height}this.projectionMatrix.makeOrthographic(o,u,h,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class $2 extends zx{constructor(){super(new Kr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Vx extends Fc{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(vn.DEFAULT_UP),this.updateMatrix(),this.target=new vn,this.shadow=new $2}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class I1 extends Fc{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class P1 extends Fc{constructor(t,e,n=10,a=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class H1{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new q)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,a=t.y,o=t.z,u=this.coefficients;return e.copy(u[0]).multiplyScalar(.282095),e.addScaledVector(u[1],.488603*a),e.addScaledVector(u[2],.488603*o),e.addScaledVector(u[3],.488603*n),e.addScaledVector(u[4],1.092548*(n*a)),e.addScaledVector(u[5],1.092548*(a*o)),e.addScaledVector(u[6],.315392*(3*o*o-1)),e.addScaledVector(u[7],1.092548*(n*o)),e.addScaledVector(u[8],.546274*(n*n-a*a)),e}getIrradianceAt(t,e){const n=t.x,a=t.y,o=t.z,u=this.coefficients;return e.copy(u[0]).multiplyScalar(.886227),e.addScaledVector(u[1],2*.511664*a),e.addScaledVector(u[2],2*.511664*o),e.addScaledVector(u[3],2*.511664*n),e.addScaledVector(u[4],2*.429043*n*a),e.addScaledVector(u[5],2*.429043*a*o),e.addScaledVector(u[6],.743125*o*o-.247708),e.addScaledVector(u[7],2*.429043*n*o),e.addScaledVector(u[8],.429043*(n*n-a*a)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].fromArray(t,e+a*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].toArray(t,e+a*3);return t}static getBasisAt(t,e){const n=t.x,a=t.y,o=t.z;e[0]=.282095,e[1]=.488603*a,e[2]=.488603*o,e[3]=.488603*n,e[4]=1.092548*n*a,e[5]=1.092548*a*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*n*o,e[8]=.546274*(n*n-a*a)}}class z1 extends Fc{constructor(t=new H1,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class By extends La{constructor(t){super(t),this.textures={}}load(t,e,n,a){const o=this,u=new Gs(o.manager);u.setPath(o.path),u.setRequestHeader(o.requestHeader),u.setWithCredentials(o.withCredentials),u.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},n,a)}parse(t){const e=this.textures;function n(o){return e[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),e[o]}const a=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(a.uuid=t.uuid),t.name!==void 0&&(a.name=t.name),t.color!==void 0&&a.color!==void 0&&a.color.setHex(t.color),t.roughness!==void 0&&(a.roughness=t.roughness),t.metalness!==void 0&&(a.metalness=t.metalness),t.sheen!==void 0&&(a.sheen=t.sheen),t.sheenColor!==void 0&&(a.sheenColor=new oe().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(a.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(t.emissive),t.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(t.specular),t.specularIntensity!==void 0&&(a.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(a.shininess=t.shininess),t.clearcoat!==void 0&&(a.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(a.dispersion=t.dispersion),t.iridescence!==void 0&&(a.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(a.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(a.transmission=t.transmission),t.thickness!==void 0&&(a.thickness=t.thickness),t.attenuationDistance!==void 0&&(a.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(a.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(a.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(a.fog=t.fog),t.flatShading!==void 0&&(a.flatShading=t.flatShading),t.blending!==void 0&&(a.blending=t.blending),t.combine!==void 0&&(a.combine=t.combine),t.side!==void 0&&(a.side=t.side),t.shadowSide!==void 0&&(a.shadowSide=t.shadowSide),t.opacity!==void 0&&(a.opacity=t.opacity),t.transparent!==void 0&&(a.transparent=t.transparent),t.alphaTest!==void 0&&(a.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(a.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(a.depthFunc=t.depthFunc),t.depthTest!==void 0&&(a.depthTest=t.depthTest),t.depthWrite!==void 0&&(a.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(a.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(a.blendSrc=t.blendSrc),t.blendDst!==void 0&&(a.blendDst=t.blendDst),t.blendEquation!==void 0&&(a.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(a.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(a.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(a.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(a.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(a.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(a.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(a.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(a.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(a.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(a.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(a.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(a.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(a.rotation=t.rotation),t.linewidth!==void 0&&(a.linewidth=t.linewidth),t.dashSize!==void 0&&(a.dashSize=t.dashSize),t.gapSize!==void 0&&(a.gapSize=t.gapSize),t.scale!==void 0&&(a.scale=t.scale),t.polygonOffset!==void 0&&(a.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(a.dithering=t.dithering),t.alphaToCoverage!==void 0&&(a.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(a.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(a.visible=t.visible),t.toneMapped!==void 0&&(a.toneMapped=t.toneMapped),t.userData!==void 0&&(a.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?a.vertexColors=t.vertexColors>0:a.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const o in t.uniforms){const u=t.uniforms[o];switch(a.uniforms[o]={},u.type){case"t":a.uniforms[o].value=n(u.value);break;case"c":a.uniforms[o].value=new oe().setHex(u.value);break;case"v2":a.uniforms[o].value=new Ot().fromArray(u.value);break;case"v3":a.uniforms[o].value=new q().fromArray(u.value);break;case"v4":a.uniforms[o].value=new Mn().fromArray(u.value);break;case"m3":a.uniforms[o].value=new Ze().fromArray(u.value);break;case"m4":a.uniforms[o].value=new Ne().fromArray(u.value);break;default:a.uniforms[o].value=u.value}}if(t.defines!==void 0&&(a.defines=t.defines),t.vertexShader!==void 0&&(a.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(a.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(a.glslVersion=t.glslVersion),t.extensions!==void 0)for(const o in t.extensions)a.extensions[o]=t.extensions[o];if(t.lights!==void 0&&(a.lights=t.lights),t.clipping!==void 0&&(a.clipping=t.clipping),t.size!==void 0&&(a.size=t.size),t.sizeAttenuation!==void 0&&(a.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(a.map=n(t.map)),t.matcap!==void 0&&(a.matcap=n(t.matcap)),t.alphaMap!==void 0&&(a.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(a.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(a.bumpScale=t.bumpScale),t.normalMap!==void 0&&(a.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(a.normalMapType=t.normalMapType),t.normalScale!==void 0){let o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),a.normalScale=new Ot().fromArray(o)}return t.displacementMap!==void 0&&(a.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(a.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(a.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(a.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(a.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(a.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(a.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(a.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(a.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(a.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(a.envMap=n(t.envMap)),t.envMapRotation!==void 0&&a.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(a.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(a.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(a.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(a.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(a.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(a.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(a.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(a.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(a.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new Ot().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(a.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(a.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(a.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(a.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(a.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=n(t.sheenRoughnessMap)),a}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return By.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:x1,SpriteMaterial:xx,RawShaderMaterial:S1,ShaderMaterial:jr,PointsMaterial:py,MeshPhysicalMaterial:pr,MeshStandardMaterial:hf,MeshPhongMaterial:M1,MeshToonMaterial:b1,MeshNormalMaterial:E1,MeshLambertMaterial:T1,MeshDepthMaterial:Nx,MeshDistanceMaterial:Ox,MeshBasicMaterial:es,MeshMatcapMaterial:C1,LineDashedMaterial:R1,LineBasicMaterial:Oa,Material:Ji};return new e[t]}}class Nc{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class F1 extends Ke{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class G1 extends La{constructor(t){super(t)}load(t,e,n,a){const o=this,u=new Gs(o.manager);u.setPath(o.path),u.setRequestHeader(o.requestHeader),u.setWithCredentials(o.withCredentials),u.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},n,a)}parse(t){const e={},n={};function a(S,E){if(e[E]!==void 0)return e[E];const C=S.interleavedBuffers[E],M=o(S,C.buffer),w=qh(C.type,M),U=new Mm(w,C.stride);return U.uuid=C.uuid,e[E]=U,U}function o(S,E){if(n[E]!==void 0)return n[E];const C=S.arrayBuffers[E],M=new Uint32Array(C).buffer;return n[E]=M,M}const u=t.isInstancedBufferGeometry?new F1:new Ke,h=t.data.index;if(h!==void 0){const S=qh(h.type,h.array);u.setIndex(new bn(S,1))}const d=t.data.attributes;for(const S in d){const E=d[S];let R;if(E.isInterleavedBufferAttribute){const C=a(t.data,E.data);R=new Pc(C,E.itemSize,E.offset,E.normalized)}else{const C=qh(E.type,E.array),M=E.isInstancedBufferAttribute?uf:bn;R=new M(C,E.itemSize,E.normalized)}E.name!==void 0&&(R.name=E.name),E.usage!==void 0&&R.setUsage(E.usage),u.setAttribute(S,R)}const m=t.data.morphAttributes;if(m)for(const S in m){const E=m[S],R=[];for(let C=0,M=E.length;C<M;C++){const w=E[C];let U;if(w.isInterleavedBufferAttribute){const D=a(t.data,w.data);U=new Pc(D,w.itemSize,w.offset,w.normalized)}else{const D=qh(w.type,w.array);U=new bn(D,w.itemSize,w.normalized)}w.name!==void 0&&(U.name=w.name),R.push(U)}u.morphAttributes[S]=R}t.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const y=t.data.groups||t.data.drawcalls||t.data.offsets;if(y!==void 0)for(let S=0,E=y.length;S!==E;++S){const R=y[S];u.addGroup(R.start,R.count,R.materialIndex)}const A=t.data.boundingSphere;return A!==void 0&&(u.boundingSphere=new sa().fromJSON(A)),t.name&&(u.name=t.name),t.userData&&(u.userData=t.userData),u}}class tB extends La{constructor(t){super(t)}load(t,e,n,a){const o=this,u=this.path===""?Nc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||u;const h=new Gs(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,function(d){let m=null;try{m=JSON.parse(d)}catch(y){a!==void 0&&a(y),console.error("THREE:ObjectLoader: Can't parse "+t+".",y.message);return}const v=m.metadata;if(v===void 0||v.type===void 0||v.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}o.parse(m,e)},n,a)}async loadAsync(t,e){const n=this,a=this.path===""?Nc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const o=new Gs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const u=await o.loadAsync(t,e),h=JSON.parse(u),d=h.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(h)}parse(t,e){const n=this.parseAnimations(t.animations),a=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,a),u=this.parseImages(t.images,function(){e!==void 0&&e(m)}),h=this.parseTextures(t.textures,u),d=this.parseMaterials(t.materials,h),m=this.parseObject(t.object,o,d,h,n),v=this.parseSkeletons(t.skeletons,m);if(this.bindSkeletons(m,v),this.bindLightTargets(m),e!==void 0){let y=!1;for(const A in u)if(u[A].data instanceof HTMLImageElement){y=!0;break}y===!1&&e(m)}return m}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,n),o=await this.parseImagesAsync(t.images),u=this.parseTextures(t.textures,o),h=this.parseMaterials(t.materials,u),d=this.parseObject(t.object,a,h,u,e),m=this.parseSkeletons(t.skeletons,d);return this.bindSkeletons(d,m),this.bindLightTargets(d),d}parseShapes(t){const e={};if(t!==void 0)for(let n=0,a=t.length;n<a;n++){const o=new lf().fromJSON(t[n]);e[o.uuid]=o}return e}parseSkeletons(t,e){const n={},a={};if(e.traverse(function(o){o.isBone&&(a[o.uuid]=o)}),t!==void 0)for(let o=0,u=t.length;o<u;o++){const h=new bm().fromJSON(t[o],a);n[h.uuid]=h}return n}parseGeometries(t,e){const n={};if(t!==void 0){const a=new G1;for(let o=0,u=t.length;o<u;o++){let h;const d=t[o];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":h=a.parse(d);break;default:d.type in IM?h=IM[d.type].fromJSON(d,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}h.uuid=d.uuid,d.name!==void 0&&(h.name=d.name),d.userData!==void 0&&(h.userData=d.userData),n[d.uuid]=h}}return n}parseMaterials(t,e){const n={},a={};if(t!==void 0){const o=new By;o.setTextures(e);for(let u=0,h=t.length;u<h;u++){const d=t[u];n[d.uuid]===void 0&&(n[d.uuid]=o.parse(d)),a[d.uuid]=n[d.uuid]}}return a}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const a=t[n],o=cd.parse(a);e[o.uuid]=o}return e}parseImages(t,e){const n=this,a={};let o;function u(d){return n.manager.itemStart(d),o.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function h(d){if(typeof d=="string"){const m=d,v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m)?m:n.resourcePath+m;return u(v)}else return d.data?{data:qh(d.type,d.data),width:d.width,height:d.height}:null}if(t!==void 0&&t.length>0){const d=new Hx(e);o=new vm(d),o.setCrossOrigin(this.crossOrigin);for(let m=0,v=t.length;m<v;m++){const y=t[m],A=y.url;if(Array.isArray(A)){const S=[];for(let E=0,R=A.length;E<R;E++){const C=A[E],M=h(C);M!==null&&(M instanceof HTMLImageElement?S.push(M):S.push(new Ho(M.data,M.width,M.height)))}a[y.uuid]=new Uc(S)}else{const S=h(y.url);a[y.uuid]=new Uc(S)}}}return a}async parseImagesAsync(t){const e=this,n={};let a;async function o(u){if(typeof u=="string"){const h=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:e.resourcePath+h;return await a.loadAsync(d)}else return u.data?{data:qh(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){a=new vm(this.manager),a.setCrossOrigin(this.crossOrigin);for(let u=0,h=t.length;u<h;u++){const d=t[u],m=d.url;if(Array.isArray(m)){const v=[];for(let y=0,A=m.length;y<A;y++){const S=m[y],E=await o(S);E!==null&&(E instanceof HTMLImageElement?v.push(E):v.push(new Ho(E.data,E.width,E.height)))}n[d.uuid]=new Uc(v)}else{const v=await o(d.url);n[d.uuid]=new Uc(v)}}}return n}parseTextures(t,e){function n(o,u){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),u[o])}const a={};if(t!==void 0)for(let o=0,u=t.length;o<u;o++){const h=t[o];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),e[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);const d=e[h.image],m=d.data;let v;Array.isArray(m)?(v=new Sm,m.length===6&&(v.needsUpdate=!0)):(m&&m.data?v=new Ho:v=new ai,m&&(v.needsUpdate=!0)),v.source=d,v.uuid=h.uuid,h.name!==void 0&&(v.name=h.name),h.mapping!==void 0&&(v.mapping=n(h.mapping,eB)),h.channel!==void 0&&(v.channel=h.channel),h.offset!==void 0&&v.offset.fromArray(h.offset),h.repeat!==void 0&&v.repeat.fromArray(h.repeat),h.center!==void 0&&v.center.fromArray(h.center),h.rotation!==void 0&&(v.rotation=h.rotation),h.wrap!==void 0&&(v.wrapS=n(h.wrap[0],FM),v.wrapT=n(h.wrap[1],FM)),h.format!==void 0&&(v.format=h.format),h.internalFormat!==void 0&&(v.internalFormat=h.internalFormat),h.type!==void 0&&(v.type=h.type),h.colorSpace!==void 0&&(v.colorSpace=h.colorSpace),h.minFilter!==void 0&&(v.minFilter=n(h.minFilter,GM)),h.magFilter!==void 0&&(v.magFilter=n(h.magFilter,GM)),h.anisotropy!==void 0&&(v.anisotropy=h.anisotropy),h.flipY!==void 0&&(v.flipY=h.flipY),h.generateMipmaps!==void 0&&(v.generateMipmaps=h.generateMipmaps),h.premultiplyAlpha!==void 0&&(v.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(v.unpackAlignment=h.unpackAlignment),h.compareFunction!==void 0&&(v.compareFunction=h.compareFunction),h.userData!==void 0&&(v.userData=h.userData),a[h.uuid]=v}return a}parseObject(t,e,n,a,o){let u;function h(A){return e[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",A),e[A]}function d(A){if(A!==void 0){if(Array.isArray(A)){const S=[];for(let E=0,R=A.length;E<R;E++){const C=A[E];n[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",C),S.push(n[C])}return S}return n[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",A),n[A]}}function m(A){return a[A]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",A),a[A]}let v,y;switch(t.type){case"Scene":u=new Ax,t.background!==void 0&&(Number.isInteger(t.background)?u.background=new oe(t.background):u.background=m(t.background)),t.environment!==void 0&&(u.environment=m(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?u.fog=new fy(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(u.fog=new uy(t.fog.color,t.fog.density)),t.fog.name!==""&&(u.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(u.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(u.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&u.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":u=new ii(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(u.focus=t.focus),t.zoom!==void 0&&(u.zoom=t.zoom),t.filmGauge!==void 0&&(u.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(u.filmOffset=t.filmOffset),t.view!==void 0&&(u.view=Object.assign({},t.view));break;case"OrthographicCamera":u=new Kr(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(u.zoom=t.zoom),t.view!==void 0&&(u.view=Object.assign({},t.view));break;case"AmbientLight":u=new I1(t.color,t.intensity);break;case"DirectionalLight":u=new Vx(t.color,t.intensity),u.target=t.target||"";break;case"PointLight":u=new Gx(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":u=new P1(t.color,t.intensity,t.width,t.height);break;case"SpotLight":u=new Fx(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),u.target=t.target||"";break;case"HemisphereLight":u=new L1(t.color,t.groundColor,t.intensity);break;case"LightProbe":u=new z1().fromJSON(t);break;case"SkinnedMesh":v=h(t.geometry),y=d(t.material),u=new Sx(v,y),t.bindMode!==void 0&&(u.bindMode=t.bindMode),t.bindMatrix!==void 0&&u.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(u.skeleton=t.skeleton);break;case"Mesh":v=h(t.geometry),y=d(t.material),u=new Ri(v,y);break;case"InstancedMesh":v=h(t.geometry),y=d(t.material);const A=t.count,S=t.instanceMatrix,E=t.instanceColor;u=new Mx(v,y,A),u.instanceMatrix=new uf(new Float32Array(S.array),16),E!==void 0&&(u.instanceColor=new uf(new Float32Array(E.array),E.itemSize));break;case"BatchedMesh":v=h(t.geometry),y=d(t.material),u=new l1(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,y),u.geometry=v,u.perObjectFrustumCulled=t.perObjectFrustumCulled,u.sortObjects=t.sortObjects,u._drawRanges=t.drawRanges,u._reservedRanges=t.reservedRanges,u._geometryInfo=t.geometryInfo.map(R=>{let C=null,M=null;return R.boundingBox!==void 0&&(C=new ya().fromJSON(R.boundingBox)),R.boundingSphere!==void 0&&(M=new sa().fromJSON(R.boundingSphere)),{...R,boundingBox:C,boundingSphere:M}}),u._instanceInfo=t.instanceInfo,u._availableInstanceIds=t._availableInstanceIds,u._availableGeometryIds=t._availableGeometryIds,u._nextIndexStart=t.nextIndexStart,u._nextVertexStart=t.nextVertexStart,u._geometryCount=t.geometryCount,u._maxInstanceCount=t.maxInstanceCount,u._maxVertexCount=t.maxVertexCount,u._maxIndexCount=t.maxIndexCount,u._geometryInitialized=t.geometryInitialized,u._matricesTexture=m(t.matricesTexture.uuid),u._indirectTexture=m(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(u._colorsTexture=m(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(u.boundingSphere=new sa().fromJSON(t.boundingSphere)),t.boundingBox!==void 0&&(u.boundingBox=new ya().fromJSON(t.boundingBox));break;case"LOD":u=new o1;break;case"Line":u=new Rl(h(t.geometry),d(t.material));break;case"LineLoop":u=new bx(h(t.geometry),d(t.material));break;case"LineSegments":u=new Wr(h(t.geometry),d(t.material));break;case"PointCloud":case"Points":u=new Ex(h(t.geometry),d(t.material));break;case"Sprite":u=new r1(d(t.material));break;case"Group":u=new Sl;break;case"Bone":u=new hy;break;default:u=new vn}if(u.uuid=t.uuid,t.name!==void 0&&(u.name=t.name),t.matrix!==void 0?(u.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=t.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(t.position!==void 0&&u.position.fromArray(t.position),t.rotation!==void 0&&u.rotation.fromArray(t.rotation),t.quaternion!==void 0&&u.quaternion.fromArray(t.quaternion),t.scale!==void 0&&u.scale.fromArray(t.scale)),t.up!==void 0&&u.up.fromArray(t.up),t.castShadow!==void 0&&(u.castShadow=t.castShadow),t.receiveShadow!==void 0&&(u.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(u.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(u.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(u.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(u.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(u.visible=t.visible),t.frustumCulled!==void 0&&(u.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(u.renderOrder=t.renderOrder),t.userData!==void 0&&(u.userData=t.userData),t.layers!==void 0&&(u.layers.mask=t.layers),t.children!==void 0){const A=t.children;for(let S=0;S<A.length;S++)u.add(this.parseObject(A[S],e,n,a,o))}if(t.animations!==void 0){const A=t.animations;for(let S=0;S<A.length;S++){const E=A[S];u.animations.push(o[E])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(u.autoUpdate=t.autoUpdate);const A=t.levels;for(let S=0;S<A.length;S++){const E=A[S],R=u.getObjectByProperty("uuid",E.object);R!==void 0&&u.addLevel(R,E.distance,E.hysteresis)}}return u}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const a=e[n.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(a,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,a=t.getObjectByProperty("uuid",n);a!==void 0?e.target=a:e.target=new vn}})}}const eB={UVMapping:Zv,CubeReflectionMapping:Tl,CubeRefractionMapping:Lc,EquirectangularReflectionMapping:om,EquirectangularRefractionMapping:lm,CubeUVReflectionMapping:hd},FM={RepeatWrapping:Jr,ClampToEdgeWrapping:zs,MirroredRepeatWrapping:Zh},GM={NearestFilter:aa,NearestMipmapNearestFilter:$v,NearestMipmapLinearFilter:$u,LinearFilter:hi,LinearMipmapNearestFilter:Kh,LinearMipmapLinearFilter:fr},tA=new WeakMap;class V1 extends La{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,u=Io.get(`image-bitmap:${t}`);if(u!==void 0){if(o.manager.itemStart(t),u.then){u.then(m=>{if(tA.has(u)===!0)a&&a(tA.get(u)),o.manager.itemError(t),o.manager.itemEnd(t);else return e&&e(m),o.manager.itemEnd(t),m});return}return setTimeout(function(){e&&e(u),o.manager.itemEnd(t)},0),u}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader;const d=fetch(t,h).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(m){return Io.add(`image-bitmap:${t}`,m),e&&e(m),o.manager.itemEnd(t),m}).catch(function(m){a&&a(m),tA.set(d,m),Io.remove(`image-bitmap:${t}`),o.manager.itemError(t),o.manager.itemEnd(t)});Io.add(`image-bitmap:${t}`,d),o.manager.itemStart(t)}}let z0;class Xx{static getContext(){return z0===void 0&&(z0=new(window.AudioContext||window.webkitAudioContext)),z0}static setContext(t){z0=t}}class nB extends La{constructor(t){super(t)}load(t,e,n,a){const o=this,u=new Gs(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(d){try{const m=d.slice(0);Xx.getContext().decodeAudioData(m,function(y){e(y)}).catch(h)}catch(m){h(m)}},n,a);function h(d){a?a(d):console.error(d),o.manager.itemError(t)}}}const VM=new Ne,XM=new Ne,zu=new Ne;class iB{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ii,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ii,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,zu.copy(t.projectionMatrix);const a=e.eyeSep/2,o=a*e.near/e.focus,u=e.near*Math.tan(of*e.fov*.5)/e.zoom;let h,d;XM.elements[12]=-a,VM.elements[12]=a,h=-u*e.aspect+o,d=u*e.aspect+o,zu.elements[0]=2*e.near/(d-h),zu.elements[8]=(d+h)/(d-h),this.cameraL.projectionMatrix.copy(zu),h=-u*e.aspect-o,d=u*e.aspect-o,zu.elements[0]=2*e.near/(d-h),zu.elements[8]=(d+h)/(d-h),this.cameraR.projectionMatrix.copy(zu)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(XM),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(VM)}}class X1 extends ii{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}class Yx{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const Fu=new q,eA=new ui,aB=new q,Gu=new q,Vu=new q;class sB extends vn{constructor(){super(),this.type="AudioListener",this.context=Xx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Yx}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fu,eA,aB),Gu.set(0,0,-1).applyQuaternion(eA),Vu.set(0,1,0).applyQuaternion(eA),e.positionX){const n=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Fu.x,n),e.positionY.linearRampToValueAtTime(Fu.y,n),e.positionZ.linearRampToValueAtTime(Fu.z,n),e.forwardX.linearRampToValueAtTime(Gu.x,n),e.forwardY.linearRampToValueAtTime(Gu.y,n),e.forwardZ.linearRampToValueAtTime(Gu.z,n),e.upX.linearRampToValueAtTime(Vu.x,n),e.upY.linearRampToValueAtTime(Vu.y,n),e.upZ.linearRampToValueAtTime(Vu.z,n)}else e.setPosition(Fu.x,Fu.y,Fu.z),e.setOrientation(Gu.x,Gu.y,Gu.z,Vu.x,Vu.y,Vu.z)}}class Y1 extends vn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const Xu=new q,YM=new ui,rB=new q,Yu=new q;class oB extends Y1{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Xu,YM,rB),Yu.set(0,0,1).applyQuaternion(YM);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Xu.x,n),e.positionY.linearRampToValueAtTime(Xu.y,n),e.positionZ.linearRampToValueAtTime(Xu.z,n),e.orientationX.linearRampToValueAtTime(Yu.x,n),e.orientationY.linearRampToValueAtTime(Yu.y,n),e.orientationZ.linearRampToValueAtTime(Yu.z,n)}else e.setPosition(Xu.x,Xu.y,Xu.z),e.setOrientation(Yu.x,Yu.y,Yu.z)}}class lB{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class k1{constructor(t,e,n){this.binding=t,this.valueSize=n;let a,o,u;switch(e){case"quaternion":a=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:a=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,a=this.valueSize,o=t*a+a;let u=this.cumulativeWeight;if(u===0){for(let h=0;h!==a;++h)n[o+h]=n[h];u=e}else{u+=e;const h=e/u;this._mixBufferRegion(n,o,0,h,a)}this.cumulativeWeight=u}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,a=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,a,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,a=t*e+e,o=this.cumulativeWeight,u=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const d=e*this._origIndex;this._mixBufferRegion(n,a,d,1-o,e)}u>0&&this._mixBufferRegionAdditive(n,a,this._addIndex*e,1,e);for(let d=e,m=e+e;d!==m;++d)if(n[d]!==n[d+e]){h.setValue(n,a);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,a=n*this._origIndex;t.getValue(e,a);for(let o=n,u=a;o!==u;++o)e[o]=e[a+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,a,o){if(a>=.5)for(let u=0;u!==o;++u)t[e+u]=t[n+u]}_slerp(t,e,n,a){ui.slerpFlat(t,e,t,e,t,n,a)}_slerpAdditive(t,e,n,a,o){const u=this._workIndex*o;ui.multiplyQuaternionsFlat(t,u,t,e,t,n),ui.slerpFlat(t,e,t,e,t,u,a)}_lerp(t,e,n,a,o){const u=1-a;for(let h=0;h!==o;++h){const d=e+h;t[d]=t[d]*u+t[n+h]*a}}_lerpAdditive(t,e,n,a,o){for(let u=0;u!==o;++u){const h=e+u;t[h]=t[h]+t[n+u]*a}}}const kx="\\[\\]\\.:\\/",cB=new RegExp("["+kx+"]","g"),qx="[^"+kx+"]",uB="[^"+kx.replace("\\.","")+"]",fB=/((?:WC+[\/:])*)/.source.replace("WC",qx),hB=/(WCOD+)?/.source.replace("WCOD",uB),dB=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qx),pB=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qx),mB=new RegExp("^"+fB+hB+dB+pB+"$"),gB=["material","materials","bones","map"];class vB{constructor(t,e,n){const a=n||An.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,a)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let a=this._targetGroup.nCachedObjects_,o=n.length;a!==o;++a)n[a].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class An{constructor(t,e,n){this.path=e,this.parsedPath=n||An.parseTrackName(e),this.node=An.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new An.Composite(t,e,n):new An(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(cB,"")}static parseTrackName(t){const e=mB.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const o=n.nodeName.substring(a+1);gB.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(o){for(let u=0;u<o.length;u++){const h=o[u];if(h.name===e||h.uuid===e)return h;const d=n(h.children);if(d)return d}return null},a=n(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)t[e++]=n[a]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,a=e.propertyName;let o=e.propertyIndex;if(t||(t=An.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let m=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let v=0;v<t.length;v++)if(t[v].name===m){m=v;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(m!==void 0){if(t[m]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[m]}}const u=t[a];if(u===void 0){const m=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+m+"."+a+" but it wasn't found.",t);return}let h=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?h=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else u.fromArray!==void 0&&u.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(d=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}An.Composite=vB;An.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};An.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};An.prototype.GetterByBindingType=[An.prototype._getValue_direct,An.prototype._getValue_array,An.prototype._getValue_arrayElement,An.prototype._getValue_toArray];An.prototype.SetterByBindingTypeAndVersioning=[[An.prototype._setValue_direct,An.prototype._setValue_direct_setNeedsUpdate,An.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[An.prototype._setValue_array,An.prototype._setValue_array_setNeedsUpdate,An.prototype._setValue_array_setMatrixWorldNeedsUpdate],[An.prototype._setValue_arrayElement,An.prototype._setValue_arrayElement_setNeedsUpdate,An.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[An.prototype._setValue_fromArray,An.prototype._setValue_fromArray_setNeedsUpdate,An.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class yB{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Fs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,a=arguments.length;n!==a;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,a=this._parsedPaths,o=this._bindings,u=o.length;let h,d=t.length,m=this.nCachedObjects_;for(let v=0,y=arguments.length;v!==y;++v){const A=arguments[v],S=A.uuid;let E=e[S];if(E===void 0){E=d++,e[S]=E,t.push(A);for(let R=0,C=u;R!==C;++R)o[R].push(new An(A,n[R],a[R]))}else if(E<m){h=t[E];const R=--m,C=t[R];e[C.uuid]=E,t[E]=C,e[S]=R,t[R]=A;for(let M=0,w=u;M!==w;++M){const U=o[M],D=U[R];let P=U[E];U[E]=D,P===void 0&&(P=new An(A,n[M],a[M])),U[R]=P}}else t[E]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=m}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,a=n.length;let o=this.nCachedObjects_;for(let u=0,h=arguments.length;u!==h;++u){const d=arguments[u],m=d.uuid,v=e[m];if(v!==void 0&&v>=o){const y=o++,A=t[y];e[A.uuid]=v,t[v]=A,e[m]=y,t[y]=d;for(let S=0,E=a;S!==E;++S){const R=n[S],C=R[y],M=R[v];R[v]=C,R[y]=M}}}this.nCachedObjects_=o}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,a=n.length;let o=this.nCachedObjects_,u=t.length;for(let h=0,d=arguments.length;h!==d;++h){const m=arguments[h],v=m.uuid,y=e[v];if(y!==void 0)if(delete e[v],y<o){const A=--o,S=t[A],E=--u,R=t[E];e[S.uuid]=y,t[y]=S,e[R.uuid]=A,t[A]=R,t.pop();for(let C=0,M=a;C!==M;++C){const w=n[C],U=w[A],D=w[E];w[y]=U,w[A]=D,w.pop()}}else{const A=--u,S=t[A];A>0&&(e[S.uuid]=y),t[y]=S,t.pop();for(let E=0,R=a;E!==R;++E){const C=n[E];C[y]=C[A],C.pop()}}}this.nCachedObjects_=o}subscribe_(t,e){const n=this._bindingsIndicesByPath;let a=n[t];const o=this._bindings;if(a!==void 0)return o[a];const u=this._paths,h=this._parsedPaths,d=this._objects,m=d.length,v=this.nCachedObjects_,y=new Array(m);a=o.length,n[t]=a,u.push(t),h.push(e),o.push(y);for(let A=v,S=d.length;A!==S;++A){const E=d[A];y[A]=new An(E,t,e)}return y}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const a=this._paths,o=this._parsedPaths,u=this._bindings,h=u.length-1,d=u[h],m=t[h];e[m]=n,u[n]=d,u.pop(),o[n]=o[h],o.pop(),a[n]=a[h],a.pop()}}}class q1{constructor(t,e,n=null,a=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=a;const o=e.tracks,u=o.length,h=new Array(u),d={endingStart:tf,endingEnd:tf};for(let m=0;m!==u;++m){const v=o[m].createInterpolant(null);h[m]=v,v.settings=d}this._interpolantSettings=d,this._interpolants=h,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=HE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const a=this._clip.duration,o=t._clip.duration,u=o/a,h=a/o;t.warp(1,u,e),this.warp(h,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const a=this._mixer,o=a.time,u=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=a._lendControlInterpolant(),this._timeScaleInterpolant=h);const d=h.parameterPositions,m=h.sampleValues;return d[0]=o,d[1]=o+n,m[0]=t/u,m[1]=e/u,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,a){if(!this.enabled){this._updateWeight(t);return}const o=this._startTime;if(o!==null){const d=(t-o)*n;d<0||n===0?e=0:(this._startTime=null,e=n*d)}e*=this._updateTimeScale(t);const u=this._updateTime(e),h=this._updateWeight(t);if(h>0){const d=this._interpolants,m=this._propertyBindings;switch(this.blendMode){case dx:for(let v=0,y=d.length;v!==y;++v)d[v].evaluate(u),m[v].accumulateAdditive(h);break;case ry:default:for(let v=0,y=d.length;v!==y;++v)d[v].evaluate(u),m[v].accumulate(a,h)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const a=n.evaluate(t)[0];e*=a,t>n.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const a=n.evaluate(t)[0];e*=a,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let a=this.time+t,o=this._loopCount;const u=n===zE;if(t===0)return o===-1?a:u&&(o&1)===1?e-a:a;if(n===PE){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(a>=e)a=e;else if(a<0)a=0;else{this.time=a;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),a>=e||a<0){const h=Math.floor(a/e);a-=e*h,o+=Math.abs(h);const d=this.repetitions-o;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?e:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(d===1){const m=t<0;this._setEndings(m,!m,u)}else this._setEndings(!1,!1,u);this._loopCount=o,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=a;if(u&&(o&1)===1)return e-a}return a}_setEndings(t,e,n){const a=this._interpolantSettings;n?(a.endingStart=ef,a.endingEnd=ef):(t?a.endingStart=this.zeroSlopeAtStart?ef:tf:a.endingStart=cm,e?a.endingEnd=this.zeroSlopeAtEnd?ef:tf:a.endingEnd=cm)}_scheduleFading(t,e,n){const a=this._mixer,o=a.time;let u=this._weightInterpolant;u===null&&(u=a._lendControlInterpolant(),this._weightInterpolant=u);const h=u.parameterPositions,d=u.sampleValues;return h[0]=o,d[0]=e,h[1]=o+t,d[1]=n,this}}const _B=new Float32Array(1);class AB extends Go{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,a=t._clip.tracks,o=a.length,u=t._propertyBindings,h=t._interpolants,d=n.uuid,m=this._bindingsByRootAndName;let v=m[d];v===void 0&&(v={},m[d]=v);for(let y=0;y!==o;++y){const A=a[y],S=A.name;let E=v[S];if(E!==void 0)++E.referenceCount,u[y]=E;else{if(E=u[y],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,d,S));continue}const R=e&&e._propertyBindings[y].binding.parsedPath;E=new k1(An.create(n,S,R),A.ValueTypeName,A.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,d,S),u[y]=E}h[y].resultBuffer=E.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,a=t._clip.uuid,o=this._actionsByClip[a];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,a,n)}const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const o=e[n];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const o=e[n];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const a=this._actions,o=this._actionsByClip;let u=o[e];if(u===void 0)u={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=u;else{const h=u.knownActions;t._byClipCacheIndex=h.length,h.push(t)}t._cacheIndex=a.length,a.push(t),u.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],a=t._cacheIndex;n._cacheIndex=a,e[a]=n,e.pop(),t._cacheIndex=null;const o=t._clip.uuid,u=this._actionsByClip,h=u[o],d=h.knownActions,m=d[d.length-1],v=t._byClipCacheIndex;m._byClipCacheIndex=v,d[v]=m,d.pop(),t._byClipCacheIndex=null;const y=h.actionByRoot,A=(t._localRoot||this._root).uuid;delete y[A],d.length===0&&delete u[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const o=e[n];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,a=this._nActiveActions++,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=n,e[n]=o}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,a=--this._nActiveActions,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=n,e[n]=o}_addInactiveBinding(t,e,n){const a=this._bindingsByRootAndName,o=this._bindings;let u=a[e];u===void 0&&(u={},a[e]=u),u[n]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,a=n.rootNode.uuid,o=n.path,u=this._bindingsByRootAndName,h=u[a],d=e[e.length-1],m=t._cacheIndex;d._cacheIndex=m,e[m]=d,e.pop(),delete h[o],Object.keys(h).length===0&&delete u[a]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,a=this._nActiveBindings++,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=n,e[n]=o}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,a=--this._nActiveBindings,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=n,e[n]=o}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new Ix(new Float32Array(2),new Float32Array(2),1,_B),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,a=--this._nActiveControlInterpolants,o=e[a];t.__cacheIndex=a,e[a]=t,o.__cacheIndex=n,e[n]=o}clipAction(t,e,n){const a=e||this._root,o=a.uuid;let u=typeof t=="string"?cd.findByName(a,t):t;const h=u!==null?u.uuid:t,d=this._actionsByClip[h];let m=null;if(n===void 0&&(u!==null?n=u.blendMode:n=ry),d!==void 0){const y=d.actionByRoot[o];if(y!==void 0&&y.blendMode===n)return y;m=d.knownActions[0],u===null&&(u=m._clip)}if(u===null)return null;const v=new q1(this,u,e,n);return this._bindAction(v,m),this._addInactiveAction(v,h,o),v}existingAction(t,e){const n=e||this._root,a=n.uuid,o=typeof t=="string"?cd.findByName(n,t):t,u=o?o.uuid:t,h=this._actionsByClip[u];return h!==void 0&&h.actionByRoot[a]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,a=this.time+=t,o=Math.sign(t),u=this._accuIndex^=1;for(let m=0;m!==n;++m)e[m]._update(a,t,o,u);const h=this._bindings,d=this._nActiveBindings;for(let m=0;m!==d;++m)h[m].apply(u);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,a=this._actionsByClip,o=a[n];if(o!==void 0){const u=o.knownActions;for(let h=0,d=u.length;h!==d;++h){const m=u[h];this._deactivateAction(m);const v=m._cacheIndex,y=e[e.length-1];m._cacheIndex=null,m._byClipCacheIndex=null,y._cacheIndex=v,e[v]=y,e.pop(),this._removeInactiveBindingsForAction(m)}delete a[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const u in n){const h=n[u].actionByRoot,d=h[e];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,o=a[e];if(o!==void 0)for(const u in o){const h=o[u];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class xB extends vx{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isRenderTarget3D=!0,this.depth=n,this.texture=new ly(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Jx{constructor(t){this.value=t}clone(){return new Jx(this.value.clone===void 0?this.value:this.value.clone())}}let SB=0;class MB extends Go{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:SB++}),this.name="",this.usage=fm,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,a=e.length;n<a;n++){const o=Array.isArray(e[n])?e[n]:[e[n]];for(let u=0;u<o.length;u++)this.uniforms.push(o[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class bB extends Mm{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class EB{constructor(t,e,n,a,o,u=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=a,this.count=o,this.normalized=u,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const kM=new Ne;class J1{constructor(t,e,n=0,a=1/0){this.ray=new vf(t,e),this.near=n,this.far=a,this.camera=null,this.layers=new rd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return kM.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(kM),this}intersectObject(t,e=!0,n=[]){return YA(t,this,n,e),n.sort(qM),n}intersectObjects(t,e=!0,n=[]){for(let a=0,o=t.length;a<o;a++)YA(t[a],this,n,e);return n.sort(qM),n}}function qM(r,t){return r.distance-t.distance}function YA(r,t,e,n){let a=!0;if(r.layers.test(t.layers)&&r.raycast(t,e)===!1&&(a=!1),a===!0&&n===!0){const o=r.children;for(let u=0,h=o.length;u<h;u++)YA(o[u],t,e,!0)}}class kA{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Je(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Je(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class TB{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class Kx{constructor(t,e,n,a){Kx.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,a)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,a){const o=this.elements;return o[0]=t,o[2]=e,o[1]=n,o[3]=a,this}}const JM=new Ot;class CB{constructor(t=new Ot(1/0,1/0),e=new Ot(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=JM.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,JM).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const KM=new q,F0=new q;class RB{constructor(t=new q,e=new q){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){KM.subVectors(t,this.start),F0.subVectors(this.end,this.start);const n=F0.dot(F0);let o=F0.dot(KM)/n;return e&&(o=Je(o,0,1)),o}closestPointToPoint(t,e,n){const a=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(a).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const jM=new q;class BB extends vn{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new Ke,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,h=1,d=32;u<d;u++,h++){const m=u/d*Math.PI*2,v=h/d*Math.PI*2;a.push(Math.cos(m),Math.sin(m),1,Math.cos(v),Math.sin(v),1)}n.setAttribute("position",new Se(a,3));const o=new Oa({fog:!1,toneMapped:!1});this.cone=new Wr(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),jM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Rc=new q,G0=new Ne,nA=new Ne;class wB extends Wr{constructor(t){const e=K1(t),n=new Ke,a=[],o=[],u=new oe(0,0,1),h=new oe(0,1,0);for(let m=0;m<e.length;m++){const v=e[m];v.parent&&v.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),o.push(u.r,u.g,u.b),o.push(h.r,h.g,h.b))}n.setAttribute("position",new Se(a,3)),n.setAttribute("color",new Se(o,3));const d=new Oa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,a=n.getAttribute("position");nA.copy(this.root.matrixWorld).invert();for(let o=0,u=0;o<e.length;o++){const h=e[o];h.parent&&h.parent.isBone&&(G0.multiplyMatrices(nA,h.matrixWorld),Rc.setFromMatrixPosition(G0),a.setXYZ(u,Rc.x,Rc.y,Rc.z),G0.multiplyMatrices(nA,h.parent.matrixWorld),Rc.setFromMatrixPosition(G0),a.setXYZ(u+1,Rc.x,Rc.y,Rc.z),u+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function K1(r){const t=[];r.isBone===!0&&t.push(r);for(let e=0;e<r.children.length;e++)t.push(...K1(r.children[e]));return t}class DB extends Ri{constructor(t,e,n){const a=new Rm(e,4,2),o=new es({wireframe:!0,fog:!1,toneMapped:!1});super(a,o),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const UB=new q,WM=new oe,QM=new oe;class NB extends vn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const a=new Cm(e);a.rotateY(Math.PI*.5),this.material=new es({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=a.getAttribute("position"),u=new Float32Array(o.count*3);a.setAttribute("color",new bn(u,3)),this.add(new Ri(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");WM.copy(this.light.color),QM.copy(this.light.groundColor);for(let n=0,a=e.count;n<a;n++){const o=n<a/2?WM:QM;e.setXYZ(n,o.r,o.g,o.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(UB.setFromMatrixPosition(this.light.matrixWorld).negate())}}class OB extends Wr{constructor(t=10,e=10,n=4473924,a=8947848){n=new oe(n),a=new oe(a);const o=e/2,u=t/e,h=t/2,d=[],m=[];for(let A=0,S=0,E=-h;A<=e;A++,E+=u){d.push(-h,0,E,h,0,E),d.push(E,0,-h,E,0,h);const R=A===o?n:a;R.toArray(m,S),S+=3,R.toArray(m,S),S+=3,R.toArray(m,S),S+=3,R.toArray(m,S),S+=3}const v=new Ke;v.setAttribute("position",new Se(d,3)),v.setAttribute("color",new Se(m,3));const y=new Oa({vertexColors:!0,toneMapped:!1});super(v,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class LB extends Wr{constructor(t=10,e=16,n=8,a=64,o=4473924,u=8947848){o=new oe(o),u=new oe(u);const h=[],d=[];if(e>1)for(let y=0;y<e;y++){const A=y/e*(Math.PI*2),S=Math.sin(A)*t,E=Math.cos(A)*t;h.push(0,0,0),h.push(S,0,E);const R=y&1?o:u;d.push(R.r,R.g,R.b),d.push(R.r,R.g,R.b)}for(let y=0;y<n;y++){const A=y&1?o:u,S=t-t/n*y;for(let E=0;E<a;E++){let R=E/a*(Math.PI*2),C=Math.sin(R)*S,M=Math.cos(R)*S;h.push(C,0,M),d.push(A.r,A.g,A.b),R=(E+1)/a*(Math.PI*2),C=Math.sin(R)*S,M=Math.cos(R)*S,h.push(C,0,M),d.push(A.r,A.g,A.b)}}const m=new Ke;m.setAttribute("position",new Se(h,3)),m.setAttribute("color",new Se(d,3));const v=new Oa({vertexColors:!0,toneMapped:!1});super(m,v),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const ZM=new q,V0=new q,$M=new q;class IB extends vn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let a=new Ke;a.setAttribute("position",new Se([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const o=new Oa({fog:!1,toneMapped:!1});this.lightPlane=new Rl(a,o),this.add(this.lightPlane),a=new Ke,a.setAttribute("position",new Se([0,0,0,0,0,1],3)),this.targetLine=new Rl(a,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ZM.setFromMatrixPosition(this.light.matrixWorld),V0.setFromMatrixPosition(this.light.target.matrixWorld),$M.subVectors(V0,ZM),this.lightPlane.lookAt(V0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(V0),this.targetLine.scale.z=$M.length()}}const X0=new q,Ai=new cy;class PB extends Wr{constructor(t){const e=new Ke,n=new Oa({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],u={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(E,R){d(E),d(R)}function d(E){a.push(0,0,0),o.push(0,0,0),u[E]===void 0&&(u[E]=[]),u[E].push(a.length/3-1)}e.setAttribute("position",new Se(a,3)),e.setAttribute("color",new Se(o,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const m=new oe(16755200),v=new oe(16711680),y=new oe(43775),A=new oe(16777215),S=new oe(3355443);this.setColors(m,v,y,A,S)}setColors(t,e,n,a,o){const h=this.geometry.getAttribute("color");h.setXYZ(0,t.r,t.g,t.b),h.setXYZ(1,t.r,t.g,t.b),h.setXYZ(2,t.r,t.g,t.b),h.setXYZ(3,t.r,t.g,t.b),h.setXYZ(4,t.r,t.g,t.b),h.setXYZ(5,t.r,t.g,t.b),h.setXYZ(6,t.r,t.g,t.b),h.setXYZ(7,t.r,t.g,t.b),h.setXYZ(8,t.r,t.g,t.b),h.setXYZ(9,t.r,t.g,t.b),h.setXYZ(10,t.r,t.g,t.b),h.setXYZ(11,t.r,t.g,t.b),h.setXYZ(12,t.r,t.g,t.b),h.setXYZ(13,t.r,t.g,t.b),h.setXYZ(14,t.r,t.g,t.b),h.setXYZ(15,t.r,t.g,t.b),h.setXYZ(16,t.r,t.g,t.b),h.setXYZ(17,t.r,t.g,t.b),h.setXYZ(18,t.r,t.g,t.b),h.setXYZ(19,t.r,t.g,t.b),h.setXYZ(20,t.r,t.g,t.b),h.setXYZ(21,t.r,t.g,t.b),h.setXYZ(22,t.r,t.g,t.b),h.setXYZ(23,t.r,t.g,t.b),h.setXYZ(24,e.r,e.g,e.b),h.setXYZ(25,e.r,e.g,e.b),h.setXYZ(26,e.r,e.g,e.b),h.setXYZ(27,e.r,e.g,e.b),h.setXYZ(28,e.r,e.g,e.b),h.setXYZ(29,e.r,e.g,e.b),h.setXYZ(30,e.r,e.g,e.b),h.setXYZ(31,e.r,e.g,e.b),h.setXYZ(32,n.r,n.g,n.b),h.setXYZ(33,n.r,n.g,n.b),h.setXYZ(34,n.r,n.g,n.b),h.setXYZ(35,n.r,n.g,n.b),h.setXYZ(36,n.r,n.g,n.b),h.setXYZ(37,n.r,n.g,n.b),h.setXYZ(38,a.r,a.g,a.b),h.setXYZ(39,a.r,a.g,a.b),h.setXYZ(40,o.r,o.g,o.b),h.setXYZ(41,o.r,o.g,o.b),h.setXYZ(42,o.r,o.g,o.b),h.setXYZ(43,o.r,o.g,o.b),h.setXYZ(44,o.r,o.g,o.b),h.setXYZ(45,o.r,o.g,o.b),h.setXYZ(46,o.r,o.g,o.b),h.setXYZ(47,o.r,o.g,o.b),h.setXYZ(48,o.r,o.g,o.b),h.setXYZ(49,o.r,o.g,o.b),h.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,n=1,a=1;Ai.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const o=this.camera.coordinateSystem===hr?-1:0;Ci("c",e,t,Ai,0,0,o),Ci("t",e,t,Ai,0,0,1),Ci("n1",e,t,Ai,-n,-a,o),Ci("n2",e,t,Ai,n,-a,o),Ci("n3",e,t,Ai,-n,a,o),Ci("n4",e,t,Ai,n,a,o),Ci("f1",e,t,Ai,-n,-a,1),Ci("f2",e,t,Ai,n,-a,1),Ci("f3",e,t,Ai,-n,a,1),Ci("f4",e,t,Ai,n,a,1),Ci("u1",e,t,Ai,n*.7,a*1.1,o),Ci("u2",e,t,Ai,-n*.7,a*1.1,o),Ci("u3",e,t,Ai,0,a*2,o),Ci("cf1",e,t,Ai,-n,0,1),Ci("cf2",e,t,Ai,n,0,1),Ci("cf3",e,t,Ai,0,-a,1),Ci("cf4",e,t,Ai,0,a,1),Ci("cn1",e,t,Ai,-n,0,o),Ci("cn2",e,t,Ai,n,0,o),Ci("cn3",e,t,Ai,0,-a,o),Ci("cn4",e,t,Ai,0,a,o),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ci(r,t,e,n,a,o,u){X0.set(a,o,u).unproject(n);const h=t[r];if(h!==void 0){const d=e.getAttribute("position");for(let m=0,v=h.length;m<v;m++)d.setXYZ(h[m],X0.x,X0.y,X0.z)}}const Y0=new ya;class HB extends Wr{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),o=new Ke;o.setIndex(new bn(n,1)),o.setAttribute("position",new bn(a,3)),super(o,new Oa({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Y0.setFromObject(this.object),Y0.isEmpty())return;const t=Y0.min,e=Y0.max,n=this.geometry.attributes.position,a=n.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=t.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=e.z,a[9]=e.x,a[10]=t.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=t.z,a[15]=t.x,a[16]=e.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=e.x,a[22]=t.y,a[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class zB extends Wr{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Ke;o.setIndex(new bn(n,1)),o.setAttribute("position",new Se(a,3)),super(o,new Oa({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class FB extends Rl{constructor(t,e=1,n=16776960){const a=n,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new Ke;u.setAttribute("position",new Se(o,3)),u.computeBoundingSphere(),super(u,new Oa({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const h=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Ke;d.setAttribute("position",new Se(h,3)),d.computeBoundingSphere(),this.add(new Ri(d,new es({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const tb=new q;let k0,iA;class GB extends vn{constructor(t=new q(0,0,1),e=new q(0,0,0),n=1,a=16776960,o=n*.2,u=o*.2){super(),this.type="ArrowHelper",k0===void 0&&(k0=new Ke,k0.setAttribute("position",new Se([0,0,0,0,1,0],3)),iA=new Tm(.5,1,5,1),iA.translate(0,-.5,0)),this.position.copy(e),this.line=new Rl(k0,new Oa({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ri(iA,new es({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,o,u)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{tb.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(tb,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class VB extends Wr{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Ke;a.setAttribute("position",new Se(e,3)),a.setAttribute("color",new Se(n,3));const o=new Oa({vertexColors:!0,toneMapped:!1});super(a,o),this.type="AxesHelper"}setColors(t,e,n){const a=new oe,o=this.geometry.attributes.color.array;return a.set(t),a.toArray(o,0),a.toArray(o,3),a.set(e),a.toArray(o,6),a.toArray(o,9),a.set(n),a.toArray(o,12),a.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class XB{constructor(){this.type="ShapePath",this.color=new oe,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Yv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,a){return this.currentPath.quadraticCurveTo(t,e,n,a),this}bezierCurveTo(t,e,n,a,o,u){return this.currentPath.bezierCurveTo(t,e,n,a,o,u),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(M){const w=[];for(let U=0,D=M.length;U<D;U++){const P=M[U],I=new lf;I.curves=P.curves,w.push(I)}return w}function n(M,w){const U=w.length;let D=!1;for(let P=U-1,I=0;I<U;P=I++){let F=w[P],k=w[I],L=k.x-F.x,N=k.y-F.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(F=w[I],L=-L,k=w[P],N=-N),M.y<F.y||M.y>k.y)continue;if(M.y===F.y){if(M.x===F.x)return!0}else{const J=N*(M.x-F.x)-L*(M.y-F.y);if(J===0)return!0;if(J<0)continue;D=!D}}else{if(M.y!==F.y)continue;if(k.x<=M.x&&M.x<=F.x||F.x<=M.x&&M.x<=k.x)return!0}}return D}const a=qr.isClockWise,o=this.subPaths;if(o.length===0)return[];let u,h,d;const m=[];if(o.length===1)return h=o[0],d=new lf,d.curves=h.curves,m.push(d),m;let v=!a(o[0].getPoints());v=t?!v:v;const y=[],A=[];let S=[],E=0,R;A[E]=void 0,S[E]=[];for(let M=0,w=o.length;M<w;M++)h=o[M],R=h.getPoints(),u=a(R),u=t?!u:u,u?(!v&&A[E]&&E++,A[E]={s:new lf,p:R},A[E].s.curves=h.curves,v&&E++,S[E]=[]):S[E].push({h,p:R[0]});if(!A[0])return e(o);if(A.length>1){let M=!1,w=0;for(let U=0,D=A.length;U<D;U++)y[U]=[];for(let U=0,D=A.length;U<D;U++){const P=S[U];for(let I=0;I<P.length;I++){const F=P[I];let k=!0;for(let L=0;L<A.length;L++)n(F.p,A[L].p)&&(U!==L&&w++,k?(k=!1,y[L].push(F)):M=!0);k&&y[U].push(F)}}w>0&&M===!1&&(S=y)}let C;for(let M=0,w=A.length;M<w;M++){d=A[M].s,m.push(d),C=S[M];for(let U=0,D=C.length;U<D;U++)d.holes.push(C[U].h)}return m}}class YB extends Go{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function kB(r,t){const e=r.image&&r.image.width?r.image.width/r.image.height:1;return e>t?(r.repeat.x=1,r.repeat.y=e/t,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2):(r.repeat.x=t/e,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0),r}function qB(r,t){const e=r.image&&r.image.width?r.image.width/r.image.height:1;return e>t?(r.repeat.x=t/e,r.repeat.y=1,r.offset.x=(1-r.repeat.x)/2,r.offset.y=0):(r.repeat.x=1,r.repeat.y=e/t,r.offset.x=0,r.offset.y=(1-r.repeat.y)/2),r}function JB(r){return r.repeat.x=1,r.repeat.y=1,r.offset.x=0,r.offset.y=0,r}function qA(r,t,e,n){const a=KB(n);switch(e){case cx:return r*t;case iy:return r*t/a.components*a.byteLength;case xm:return r*t/a.components*a.byteLength;case fx:return r*t*2/a.components*a.byteLength;case ay:return r*t*2/a.components*a.byteLength;case ux:return r*t*3/a.components*a.byteLength;case Ua:return r*t*4/a.components*a.byteLength;case sy:return r*t*4/a.components*a.byteLength;case Qp:case Zp:return Math.floor((r+3)/4)*Math.floor((t+3)/4)*8;case $p:case tm:return Math.floor((r+3)/4)*Math.floor((t+3)/4)*16;case mv:case vv:return Math.max(r,16)*Math.max(t,8)/4;case pv:case gv:return Math.max(r,8)*Math.max(t,8)/2;case yv:case _v:return Math.floor((r+3)/4)*Math.floor((t+3)/4)*8;case Av:return Math.floor((r+3)/4)*Math.floor((t+3)/4)*16;case xv:return Math.floor((r+3)/4)*Math.floor((t+3)/4)*16;case Sv:return Math.floor((r+4)/5)*Math.floor((t+3)/4)*16;case Mv:return Math.floor((r+4)/5)*Math.floor((t+4)/5)*16;case bv:return Math.floor((r+5)/6)*Math.floor((t+4)/5)*16;case Ev:return Math.floor((r+5)/6)*Math.floor((t+5)/6)*16;case Tv:return Math.floor((r+7)/8)*Math.floor((t+4)/5)*16;case Cv:return Math.floor((r+7)/8)*Math.floor((t+5)/6)*16;case Rv:return Math.floor((r+7)/8)*Math.floor((t+7)/8)*16;case Bv:return Math.floor((r+9)/10)*Math.floor((t+4)/5)*16;case wv:return Math.floor((r+9)/10)*Math.floor((t+5)/6)*16;case Dv:return Math.floor((r+9)/10)*Math.floor((t+7)/8)*16;case Uv:return Math.floor((r+9)/10)*Math.floor((t+9)/10)*16;case Nv:return Math.floor((r+11)/12)*Math.floor((t+9)/10)*16;case Ov:return Math.floor((r+11)/12)*Math.floor((t+11)/12)*16;case em:case Lv:case Iv:return Math.ceil(r/4)*Math.ceil(t/4)*16;case hx:case Pv:return Math.ceil(r/4)*Math.ceil(t/4)*8;case Hv:case zv:return Math.ceil(r/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function KB(r){switch(r){case dr:case rx:return{byteLength:1,components:1};case $h:case ox:case dd:return{byteLength:2,components:1};case ey:case ny:return{byteLength:2,components:4};case Cl:case ty:case ys:return{byteLength:4,components:1};case lx:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${r}.`)}class jB{static contain(t,e){return kB(t,e)}static cover(t,e){return qB(t,e)}static fill(t){return JB(t)}static getByteLength(t,e,n,a){return qA(t,e,n,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:_m}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=_m);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function j1(){let r=null,t=!1,e=null,n=null;function a(o,u){e(o,u),n=r.requestAnimationFrame(a)}return{start:function(){t!==!0&&e!==null&&(n=r.requestAnimationFrame(a),t=!0)},stop:function(){r.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){r=o}}}function WB(r){const t=new WeakMap;function e(h,d){const m=h.array,v=h.usage,y=m.byteLength,A=r.createBuffer();r.bindBuffer(d,A),r.bufferData(d,m,v),h.onUploadCallback();let S;if(m instanceof Float32Array)S=r.FLOAT;else if(typeof Float16Array<"u"&&m instanceof Float16Array)S=r.HALF_FLOAT;else if(m instanceof Uint16Array)h.isFloat16BufferAttribute?S=r.HALF_FLOAT:S=r.UNSIGNED_SHORT;else if(m instanceof Int16Array)S=r.SHORT;else if(m instanceof Uint32Array)S=r.UNSIGNED_INT;else if(m instanceof Int32Array)S=r.INT;else if(m instanceof Int8Array)S=r.BYTE;else if(m instanceof Uint8Array)S=r.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)S=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:A,type:S,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version,size:y}}function n(h,d,m){const v=d.array,y=d.updateRanges;if(r.bindBuffer(m,h),y.length===0)r.bufferSubData(m,0,v);else{y.sort((S,E)=>S.start-E.start);let A=0;for(let S=1;S<y.length;S++){const E=y[A],R=y[S];R.start<=E.start+E.count+1?E.count=Math.max(E.count,R.start+R.count-E.start):(++A,y[A]=R)}y.length=A+1;for(let S=0,E=y.length;S<E;S++){const R=y[S];r.bufferSubData(m,R.start*v.BYTES_PER_ELEMENT,v,R.start,R.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),t.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);const d=t.get(h);d&&(r.deleteBuffer(d.buffer),t.delete(h))}function u(h,d){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const v=t.get(h);(!v||v.version<h.version)&&t.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const m=t.get(h);if(m===void 0)t.set(h,e(h,d));else if(m.version<h.version){if(m.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(m.buffer,h,d),m.version=h.version}}return{get:a,remove:o,update:u}}var QB=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,ZB=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,$B=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,tw=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ew=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nw=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iw=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aw=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sw=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,rw=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ow=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lw=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cw=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,uw=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,fw=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,hw=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,dw=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pw=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mw=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gw=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,vw=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yw=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,_w=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Aw=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,xw=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Sw=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Mw=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,bw=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Ew=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Tw=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Cw="gl_FragColor = linearToOutputTexel( gl_FragColor );",Rw=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Bw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ww=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Dw=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Uw=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Nw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ow=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Lw=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Iw=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Pw=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Hw=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,zw=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Fw=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Gw=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Vw=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Xw=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Yw=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,kw=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,qw=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Jw=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Kw=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,jw=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ww=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Qw=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Zw=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,$w=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,tD=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,eD=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nD=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,iD=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,aD=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sD=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,rD=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,oD=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lD=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,cD=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,uD=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,fD=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,hD=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,dD=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pD=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mD=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yD=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_D=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,AD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,xD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,SD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,MD=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,bD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ED=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,TD=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,CD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,RD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,BD=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,wD=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,DD=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,UD=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ND=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,OD=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,LD=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ID=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,PD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,HD=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,zD=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,FD=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,GD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,VD=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,XD=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,YD=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,kD=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,qD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,JD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,KD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,jD=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const WD=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,QD=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$D=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,t3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,e3=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,n3=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,i3=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,a3=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,s3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,r3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,o3=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,l3=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,c3=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,u3=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,f3=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,h3=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,d3=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p3=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,m3=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g3=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,v3=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,y3=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_3=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A3=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,x3=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,S3=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,M3=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,b3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,E3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,T3=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,C3=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,R3=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,B3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sn={alphahash_fragment:QB,alphahash_pars_fragment:ZB,alphamap_fragment:$B,alphamap_pars_fragment:tw,alphatest_fragment:ew,alphatest_pars_fragment:nw,aomap_fragment:iw,aomap_pars_fragment:aw,batching_pars_vertex:sw,batching_vertex:rw,begin_vertex:ow,beginnormal_vertex:lw,bsdfs:cw,iridescence_fragment:uw,bumpmap_pars_fragment:fw,clipping_planes_fragment:hw,clipping_planes_pars_fragment:dw,clipping_planes_pars_vertex:pw,clipping_planes_vertex:mw,color_fragment:gw,color_pars_fragment:vw,color_pars_vertex:yw,color_vertex:_w,common:Aw,cube_uv_reflection_fragment:xw,defaultnormal_vertex:Sw,displacementmap_pars_vertex:Mw,displacementmap_vertex:bw,emissivemap_fragment:Ew,emissivemap_pars_fragment:Tw,colorspace_fragment:Cw,colorspace_pars_fragment:Rw,envmap_fragment:Bw,envmap_common_pars_fragment:ww,envmap_pars_fragment:Dw,envmap_pars_vertex:Uw,envmap_physical_pars_fragment:Xw,envmap_vertex:Nw,fog_vertex:Ow,fog_pars_vertex:Lw,fog_fragment:Iw,fog_pars_fragment:Pw,gradientmap_pars_fragment:Hw,lightmap_pars_fragment:zw,lights_lambert_fragment:Fw,lights_lambert_pars_fragment:Gw,lights_pars_begin:Vw,lights_toon_fragment:Yw,lights_toon_pars_fragment:kw,lights_phong_fragment:qw,lights_phong_pars_fragment:Jw,lights_physical_fragment:Kw,lights_physical_pars_fragment:jw,lights_fragment_begin:Ww,lights_fragment_maps:Qw,lights_fragment_end:Zw,logdepthbuf_fragment:$w,logdepthbuf_pars_fragment:tD,logdepthbuf_pars_vertex:eD,logdepthbuf_vertex:nD,map_fragment:iD,map_pars_fragment:aD,map_particle_fragment:sD,map_particle_pars_fragment:rD,metalnessmap_fragment:oD,metalnessmap_pars_fragment:lD,morphinstance_vertex:cD,morphcolor_vertex:uD,morphnormal_vertex:fD,morphtarget_pars_vertex:hD,morphtarget_vertex:dD,normal_fragment_begin:pD,normal_fragment_maps:mD,normal_pars_fragment:gD,normal_pars_vertex:vD,normal_vertex:yD,normalmap_pars_fragment:_D,clearcoat_normal_fragment_begin:AD,clearcoat_normal_fragment_maps:xD,clearcoat_pars_fragment:SD,iridescence_pars_fragment:MD,opaque_fragment:bD,packing:ED,premultiplied_alpha_fragment:TD,project_vertex:CD,dithering_fragment:RD,dithering_pars_fragment:BD,roughnessmap_fragment:wD,roughnessmap_pars_fragment:DD,shadowmap_pars_fragment:UD,shadowmap_pars_vertex:ND,shadowmap_vertex:OD,shadowmask_pars_fragment:LD,skinbase_vertex:ID,skinning_pars_vertex:PD,skinning_vertex:HD,skinnormal_vertex:zD,specularmap_fragment:FD,specularmap_pars_fragment:GD,tonemapping_fragment:VD,tonemapping_pars_fragment:XD,transmission_fragment:YD,transmission_pars_fragment:kD,uv_pars_fragment:qD,uv_pars_vertex:JD,uv_vertex:KD,worldpos_vertex:jD,background_vert:WD,background_frag:QD,backgroundCube_vert:ZD,backgroundCube_frag:$D,cube_vert:t3,cube_frag:e3,depth_vert:n3,depth_frag:i3,distanceRGBA_vert:a3,distanceRGBA_frag:s3,equirect_vert:r3,equirect_frag:o3,linedashed_vert:l3,linedashed_frag:c3,meshbasic_vert:u3,meshbasic_frag:f3,meshlambert_vert:h3,meshlambert_frag:d3,meshmatcap_vert:p3,meshmatcap_frag:m3,meshnormal_vert:g3,meshnormal_frag:v3,meshphong_vert:y3,meshphong_frag:_3,meshphysical_vert:A3,meshphysical_frag:x3,meshtoon_vert:S3,meshtoon_frag:M3,points_vert:b3,points_frag:E3,shadow_vert:T3,shadow_frag:C3,sprite_vert:R3,sprite_frag:B3},ue={common:{diffuse:{value:new oe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ze},alphaMap:{value:null},alphaMapTransform:{value:new Ze},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ze}},envmap:{envMap:{value:null},envMapRotation:{value:new Ze},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ze}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ze}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ze},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ze},normalScale:{value:new Ot(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ze},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ze}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ze}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ze}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new oe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new oe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ze},alphaTest:{value:0},uvTransform:{value:new Ze}},sprite:{diffuse:{value:new oe(16777215)},opacity:{value:1},center:{value:new Ot(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ze},alphaMap:{value:null},alphaMapTransform:{value:new Ze},alphaTest:{value:0}}},kr={basic:{uniforms:Za([ue.common,ue.specularmap,ue.envmap,ue.aomap,ue.lightmap,ue.fog]),vertexShader:sn.meshbasic_vert,fragmentShader:sn.meshbasic_frag},lambert:{uniforms:Za([ue.common,ue.specularmap,ue.envmap,ue.aomap,ue.lightmap,ue.emissivemap,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.fog,ue.lights,{emissive:{value:new oe(0)}}]),vertexShader:sn.meshlambert_vert,fragmentShader:sn.meshlambert_frag},phong:{uniforms:Za([ue.common,ue.specularmap,ue.envmap,ue.aomap,ue.lightmap,ue.emissivemap,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.fog,ue.lights,{emissive:{value:new oe(0)},specular:{value:new oe(1118481)},shininess:{value:30}}]),vertexShader:sn.meshphong_vert,fragmentShader:sn.meshphong_frag},standard:{uniforms:Za([ue.common,ue.envmap,ue.aomap,ue.lightmap,ue.emissivemap,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.roughnessmap,ue.metalnessmap,ue.fog,ue.lights,{emissive:{value:new oe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sn.meshphysical_vert,fragmentShader:sn.meshphysical_frag},toon:{uniforms:Za([ue.common,ue.aomap,ue.lightmap,ue.emissivemap,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.gradientmap,ue.fog,ue.lights,{emissive:{value:new oe(0)}}]),vertexShader:sn.meshtoon_vert,fragmentShader:sn.meshtoon_frag},matcap:{uniforms:Za([ue.common,ue.bumpmap,ue.normalmap,ue.displacementmap,ue.fog,{matcap:{value:null}}]),vertexShader:sn.meshmatcap_vert,fragmentShader:sn.meshmatcap_frag},points:{uniforms:Za([ue.points,ue.fog]),vertexShader:sn.points_vert,fragmentShader:sn.points_frag},dashed:{uniforms:Za([ue.common,ue.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sn.linedashed_vert,fragmentShader:sn.linedashed_frag},depth:{uniforms:Za([ue.common,ue.displacementmap]),vertexShader:sn.depth_vert,fragmentShader:sn.depth_frag},normal:{uniforms:Za([ue.common,ue.bumpmap,ue.normalmap,ue.displacementmap,{opacity:{value:1}}]),vertexShader:sn.meshnormal_vert,fragmentShader:sn.meshnormal_frag},sprite:{uniforms:Za([ue.sprite,ue.fog]),vertexShader:sn.sprite_vert,fragmentShader:sn.sprite_frag},background:{uniforms:{uvTransform:{value:new Ze},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:sn.background_vert,fragmentShader:sn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ze}},vertexShader:sn.backgroundCube_vert,fragmentShader:sn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:sn.cube_vert,fragmentShader:sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sn.equirect_vert,fragmentShader:sn.equirect_frag},distanceRGBA:{uniforms:Za([ue.common,ue.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sn.distanceRGBA_vert,fragmentShader:sn.distanceRGBA_frag},shadow:{uniforms:Za([ue.lights,ue.fog,{color:{value:new oe(0)},opacity:{value:1}}]),vertexShader:sn.shadow_vert,fragmentShader:sn.shadow_frag}};kr.physical={uniforms:Za([kr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ze},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ze},clearcoatNormalScale:{value:new Ot(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ze},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ze},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ze},sheen:{value:0},sheenColor:{value:new oe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ze},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ze},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ze},transmissionSamplerSize:{value:new Ot},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ze},attenuationDistance:{value:0},attenuationColor:{value:new oe(0)},specularColor:{value:new oe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ze},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ze},anisotropyVector:{value:new Ot},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ze}}]),vertexShader:sn.meshphysical_vert,fragmentShader:sn.meshphysical_frag};const q0={r:0,b:0,g:0},ku=new ia,w3=new Ne;function D3(r,t,e,n,a,o,u){const h=new oe(0);let d=o===!0?0:1,m,v,y=null,A=0,S=null;function E(U){let D=U.isScene===!0?U.background:null;return D&&D.isTexture&&(D=(U.backgroundBlurriness>0?e:t).get(D)),D}function R(U){let D=!1;const P=E(U);P===null?M(h,d):P&&P.isColor&&(M(P,1),D=!0);const I=r.xr.getEnvironmentBlendMode();I==="additive"?n.buffers.color.setClear(0,0,0,1,u):I==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,u),(r.autoClear||D)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil))}function C(U,D){const P=E(D);P&&(P.isCubeTexture||P.mapping===hd)?(v===void 0&&(v=new Ri(new yf(1,1,1),new jr({name:"BackgroundCubeMaterial",uniforms:od(kr.backgroundCube.uniforms),vertexShader:kr.backgroundCube.vertexShader,fragmentShader:kr.backgroundCube.fragmentShader,side:Na,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(I,F,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(v)),ku.copy(D.backgroundRotation),ku.x*=-1,ku.y*=-1,ku.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(ku.y*=-1,ku.z*=-1),v.material.uniforms.envMap.value=P,v.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(w3.makeRotationFromEuler(ku)),v.material.toneMapped=gn.getTransfer(P.colorSpace)!==zn,(y!==P||A!==P.version||S!==r.toneMapping)&&(v.material.needsUpdate=!0,y=P,A=P.version,S=r.toneMapping),v.layers.enableAll(),U.unshift(v,v.geometry,v.material,0,0,null)):P&&P.isTexture&&(m===void 0&&(m=new Ri(new md(2,2),new jr({name:"BackgroundMaterial",uniforms:od(kr.background.uniforms),vertexShader:kr.background.vertexShader,fragmentShader:kr.background.fragmentShader,side:zo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(m)),m.material.uniforms.t2D.value=P,m.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,m.material.toneMapped=gn.getTransfer(P.colorSpace)!==zn,P.matrixAutoUpdate===!0&&P.updateMatrix(),m.material.uniforms.uvTransform.value.copy(P.matrix),(y!==P||A!==P.version||S!==r.toneMapping)&&(m.material.needsUpdate=!0,y=P,A=P.version,S=r.toneMapping),m.layers.enableAll(),U.unshift(m,m.geometry,m.material,0,0,null))}function M(U,D){U.getRGB(q0,e1(r)),n.buffers.color.setClear(q0.r,q0.g,q0.b,D,u)}function w(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0)}return{getClearColor:function(){return h},setClearColor:function(U,D=1){h.set(U),d=D,M(h,d)},getClearAlpha:function(){return d},setClearAlpha:function(U){d=U,M(h,d)},render:R,addToRenderList:C,dispose:w}}function U3(r,t){const e=r.getParameter(r.MAX_VERTEX_ATTRIBS),n={},a=A(null);let o=a,u=!1;function h(N,J,ct,at,pt){let ut=!1;const H=y(at,ct,J);o!==H&&(o=H,m(o.object)),ut=S(N,at,ct,pt),ut&&E(N,at,ct,pt),pt!==null&&t.update(pt,r.ELEMENT_ARRAY_BUFFER),(ut||u)&&(u=!1,D(N,J,ct,at),pt!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(pt).buffer))}function d(){return r.createVertexArray()}function m(N){return r.bindVertexArray(N)}function v(N){return r.deleteVertexArray(N)}function y(N,J,ct){const at=ct.wireframe===!0;let pt=n[N.id];pt===void 0&&(pt={},n[N.id]=pt);let ut=pt[J.id];ut===void 0&&(ut={},pt[J.id]=ut);let H=ut[at];return H===void 0&&(H=A(d()),ut[at]=H),H}function A(N){const J=[],ct=[],at=[];for(let pt=0;pt<e;pt++)J[pt]=0,ct[pt]=0,at[pt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:ct,attributeDivisors:at,object:N,attributes:{},index:null}}function S(N,J,ct,at){const pt=o.attributes,ut=J.attributes;let H=0;const W=ct.getAttributes();for(const j in W)if(W[j].location>=0){const X=pt[j];let nt=ut[j];if(nt===void 0&&(j==="instanceMatrix"&&N.instanceMatrix&&(nt=N.instanceMatrix),j==="instanceColor"&&N.instanceColor&&(nt=N.instanceColor)),X===void 0||X.attribute!==nt||nt&&X.data!==nt.data)return!0;H++}return o.attributesNum!==H||o.index!==at}function E(N,J,ct,at){const pt={},ut=J.attributes;let H=0;const W=ct.getAttributes();for(const j in W)if(W[j].location>=0){let X=ut[j];X===void 0&&(j==="instanceMatrix"&&N.instanceMatrix&&(X=N.instanceMatrix),j==="instanceColor"&&N.instanceColor&&(X=N.instanceColor));const nt={};nt.attribute=X,X&&X.data&&(nt.data=X.data),pt[j]=nt,H++}o.attributes=pt,o.attributesNum=H,o.index=at}function R(){const N=o.newAttributes;for(let J=0,ct=N.length;J<ct;J++)N[J]=0}function C(N){M(N,0)}function M(N,J){const ct=o.newAttributes,at=o.enabledAttributes,pt=o.attributeDivisors;ct[N]=1,at[N]===0&&(r.enableVertexAttribArray(N),at[N]=1),pt[N]!==J&&(r.vertexAttribDivisor(N,J),pt[N]=J)}function w(){const N=o.newAttributes,J=o.enabledAttributes;for(let ct=0,at=J.length;ct<at;ct++)J[ct]!==N[ct]&&(r.disableVertexAttribArray(ct),J[ct]=0)}function U(N,J,ct,at,pt,ut,H){H===!0?r.vertexAttribIPointer(N,J,ct,pt,ut):r.vertexAttribPointer(N,J,ct,at,pt,ut)}function D(N,J,ct,at){R();const pt=at.attributes,ut=ct.getAttributes(),H=J.defaultAttributeValues;for(const W in ut){const j=ut[W];if(j.location>=0){let lt=pt[W];if(lt===void 0&&(W==="instanceMatrix"&&N.instanceMatrix&&(lt=N.instanceMatrix),W==="instanceColor"&&N.instanceColor&&(lt=N.instanceColor)),lt!==void 0){const X=lt.normalized,nt=lt.itemSize,_t=t.get(lt);if(_t===void 0)continue;const Tt=_t.buffer,it=_t.type,Ct=_t.bytesPerElement,Ht=it===r.INT||it===r.UNSIGNED_INT||lt.gpuType===ty;if(lt.isInterleavedBufferAttribute){const Qt=lt.data,qt=Qt.stride,Ee=lt.offset;if(Qt.isInstancedInterleavedBuffer){for(let fe=0;fe<j.locationSize;fe++)M(j.location+fe,Qt.meshPerAttribute);N.isInstancedMesh!==!0&&at._maxInstanceCount===void 0&&(at._maxInstanceCount=Qt.meshPerAttribute*Qt.count)}else for(let fe=0;fe<j.locationSize;fe++)C(j.location+fe);r.bindBuffer(r.ARRAY_BUFFER,Tt);for(let fe=0;fe<j.locationSize;fe++)U(j.location+fe,nt/j.locationSize,it,X,qt*Ct,(Ee+nt/j.locationSize*fe)*Ct,Ht)}else{if(lt.isInstancedBufferAttribute){for(let Qt=0;Qt<j.locationSize;Qt++)M(j.location+Qt,lt.meshPerAttribute);N.isInstancedMesh!==!0&&at._maxInstanceCount===void 0&&(at._maxInstanceCount=lt.meshPerAttribute*lt.count)}else for(let Qt=0;Qt<j.locationSize;Qt++)C(j.location+Qt);r.bindBuffer(r.ARRAY_BUFFER,Tt);for(let Qt=0;Qt<j.locationSize;Qt++)U(j.location+Qt,nt/j.locationSize,it,X,nt*Ct,nt/j.locationSize*Qt*Ct,Ht)}}else if(H!==void 0){const X=H[W];if(X!==void 0)switch(X.length){case 2:r.vertexAttrib2fv(j.location,X);break;case 3:r.vertexAttrib3fv(j.location,X);break;case 4:r.vertexAttrib4fv(j.location,X);break;default:r.vertexAttrib1fv(j.location,X)}}}}w()}function P(){k();for(const N in n){const J=n[N];for(const ct in J){const at=J[ct];for(const pt in at)v(at[pt].object),delete at[pt];delete J[ct]}delete n[N]}}function I(N){if(n[N.id]===void 0)return;const J=n[N.id];for(const ct in J){const at=J[ct];for(const pt in at)v(at[pt].object),delete at[pt];delete J[ct]}delete n[N.id]}function F(N){for(const J in n){const ct=n[J];if(ct[N.id]===void 0)continue;const at=ct[N.id];for(const pt in at)v(at[pt].object),delete at[pt];delete ct[N.id]}}function k(){L(),u=!0,o!==a&&(o=a,m(o.object))}function L(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:h,reset:k,resetDefaultState:L,dispose:P,releaseStatesOfGeometry:I,releaseStatesOfProgram:F,initAttributes:R,enableAttribute:C,disableUnusedAttributes:w}}function N3(r,t,e){let n;function a(m){n=m}function o(m,v){r.drawArrays(n,m,v),e.update(v,n,1)}function u(m,v,y){y!==0&&(r.drawArraysInstanced(n,m,v,y),e.update(v,n,y))}function h(m,v,y){if(y===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,m,0,v,0,y);let S=0;for(let E=0;E<y;E++)S+=v[E];e.update(S,n,1)}function d(m,v,y,A){if(y===0)return;const S=t.get("WEBGL_multi_draw");if(S===null)for(let E=0;E<m.length;E++)u(m[E],v[E],A[E]);else{S.multiDrawArraysInstancedWEBGL(n,m,0,v,0,A,0,y);let E=0;for(let R=0;R<y;R++)E+=v[R]*A[R];e.update(E,n,1)}}this.setMode=a,this.render=o,this.renderInstances=u,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function O3(r,t,e,n){let a;function o(){if(a!==void 0)return a;if(t.has("EXT_texture_filter_anisotropic")===!0){const F=t.get("EXT_texture_filter_anisotropic");a=r.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function u(F){return!(F!==Ua&&n.convert(F)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(F){const k=F===dd&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(F!==dr&&n.convert(F)!==r.getParameter(r.IMPLEMENTATION_COLOR_READ_TYPE)&&F!==ys&&!k)}function d(F){if(F==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let m=e.precision!==void 0?e.precision:"highp";const v=d(m);v!==m&&(console.warn("THREE.WebGLRenderer:",m,"not supported, using",v,"instead."),m=v);const y=e.logarithmicDepthBuffer===!0,A=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),S=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),E=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=r.getParameter(r.MAX_TEXTURE_SIZE),C=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),M=r.getParameter(r.MAX_VERTEX_ATTRIBS),w=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),U=r.getParameter(r.MAX_VARYING_VECTORS),D=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),P=E>0,I=r.getParameter(r.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:d,textureFormatReadable:u,textureTypeReadable:h,precision:m,logarithmicDepthBuffer:y,reverseDepthBuffer:A,maxTextures:S,maxVertexTextures:E,maxTextureSize:R,maxCubemapSize:C,maxAttributes:M,maxVertexUniforms:w,maxVaryings:U,maxFragmentUniforms:D,vertexTextures:P,maxSamples:I}}function L3(r){const t=this;let e=null,n=0,a=!1,o=!1;const u=new _l,h=new Ze,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,A){const S=y.length!==0||A||n!==0||a;return a=A,n=y.length,S},this.beginShadows=function(){o=!0,v(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(y,A){e=v(y,A,0)},this.setState=function(y,A,S){const E=y.clippingPlanes,R=y.clipIntersection,C=y.clipShadows,M=r.get(y);if(!a||E===null||E.length===0||o&&!C)o?v(null):m();else{const w=o?0:n,U=w*4;let D=M.clippingState||null;d.value=D,D=v(E,A,U,S);for(let P=0;P!==U;++P)D[P]=e[P];M.clippingState=D,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=w}};function m(){d.value!==e&&(d.value=e,d.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function v(y,A,S,E){const R=y!==null?y.length:0;let C=null;if(R!==0){if(C=d.value,E!==!0||C===null){const M=S+R*4,w=A.matrixWorldInverse;h.getNormalMatrix(w),(C===null||C.length<M)&&(C=new Float32Array(M));for(let U=0,D=S;U!==R;++U,D+=4)u.copy(y[U]).applyMatrix4(w,h),u.normal.toArray(C,D),C[D+3]=u.constant}d.value=C,d.needsUpdate=!0}return t.numPlanes=R,t.numIntersection=0,C}}function I3(r){let t=new WeakMap;function e(u,h){return h===om?u.mapping=Tl:h===lm&&(u.mapping=Lc),u}function n(u){if(u&&u.isTexture){const h=u.mapping;if(h===om||h===lm)if(t.has(u)){const d=t.get(u).texture;return e(d,u.mapping)}else{const d=u.image;if(d&&d.height>0){const m=new a1(d.height);return m.fromEquirectangularTexture(r,u),t.set(u,m),u.addEventListener("dispose",a),e(m.texture,u.mapping)}else return null}}return u}function a(u){const h=u.target;h.removeEventListener("dispose",a);const d=t.get(h);d!==void 0&&(t.delete(h),d.dispose())}function o(){t=new WeakMap}return{get:n,dispose:o}}const Jh=4,eb=[.125,.215,.35,.446,.526,.582],Zu=20,aA=new Kr,nb=new oe;let sA=null,rA=0,oA=0,lA=!1;const Qu=(1+Math.sqrt(5))/2,Gh=1/Qu,ib=[new q(-Qu,Gh,0),new q(Qu,Gh,0),new q(-Gh,0,Qu),new q(Gh,0,Qu),new q(0,Qu,-Gh),new q(0,Qu,Gh),new q(-1,1,-1),new q(1,1,-1),new q(-1,1,1),new q(1,1,1)],P3=new q;class JA{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,a=100,o={}){const{size:u=256,position:h=P3}=o;sA=this._renderer.getRenderTarget(),rA=this._renderer.getActiveCubeFace(),oA=this._renderer.getActiveMipmapLevel(),lA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,n,a,d,h),e>0&&this._blur(d,0,0,e),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=rb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(sA,rA,oA),this._renderer.xr.enabled=lA,t.scissorTest=!1,J0(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Tl||t.mapping===Lc?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),sA=this._renderer.getRenderTarget(),rA=this._renderer.getActiveCubeFace(),oA=this._renderer.getActiveMipmapLevel(),lA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:hi,minFilter:hi,generateMipmaps:!1,type:dd,format:Ua,colorSpace:Ic,depthBuffer:!1},a=ab(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=ab(t,e,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=H3(o)),this._blurMaterial=z3(o,t,e)}return a}_compileMaterial(t){const e=new Ri(this._lodPlanes[0],t);this._renderer.compile(e,aA)}_sceneToCubeUV(t,e,n,a,o){const d=new ii(90,1,e,n),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],y=this._renderer,A=y.autoClear,S=y.toneMapping;y.getClearColor(nb),y.toneMapping=Po,y.autoClear=!1;const E=new es({name:"PMREM.Background",side:Na,depthWrite:!1,depthTest:!1}),R=new Ri(new yf,E);let C=!1;const M=t.background;M?M.isColor&&(E.color.copy(M),t.background=null,C=!0):(E.color.copy(nb),C=!0);for(let w=0;w<6;w++){const U=w%3;U===0?(d.up.set(0,m[w],0),d.position.set(o.x,o.y,o.z),d.lookAt(o.x+v[w],o.y,o.z)):U===1?(d.up.set(0,0,m[w]),d.position.set(o.x,o.y,o.z),d.lookAt(o.x,o.y+v[w],o.z)):(d.up.set(0,m[w],0),d.position.set(o.x,o.y,o.z),d.lookAt(o.x,o.y,o.z+v[w]));const D=this._cubeSize;J0(a,U*D,w>2?D:0,D,D),y.setRenderTarget(a),C&&y.render(R,d),y.render(t,d)}R.geometry.dispose(),R.material.dispose(),y.toneMapping=S,y.autoClear=A,t.background=M}_textureToCubeUV(t,e){const n=this._renderer,a=t.mapping===Tl||t.mapping===Lc;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=rb()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sb());const o=a?this._cubemapMaterial:this._equirectMaterial,u=new Ri(this._lodPlanes[0],o),h=o.uniforms;h.envMap.value=t;const d=this._cubeSize;J0(e,0,0,3*d,2*d),n.setRenderTarget(e),n.render(u,aA)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const a=this._lodPlanes.length;for(let o=1;o<a;o++){const u=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),h=ib[(a-o-1)%ib.length];this._blur(t,o-1,o,u,h)}e.autoClear=n}_blur(t,e,n,a,o){const u=this._pingPongRenderTarget;this._halfBlur(t,u,e,n,a,"latitudinal",o),this._halfBlur(u,t,n,n,a,"longitudinal",o)}_halfBlur(t,e,n,a,o,u,h){const d=this._renderer,m=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const v=3,y=new Ri(this._lodPlanes[a],m),A=m.uniforms,S=this._sizeLods[n]-1,E=isFinite(o)?Math.PI/(2*S):2*Math.PI/(2*Zu-1),R=o/E,C=isFinite(o)?1+Math.floor(v*R):Zu;C>Zu&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${Zu}`);const M=[];let w=0;for(let F=0;F<Zu;++F){const k=F/R,L=Math.exp(-k*k/2);M.push(L),F===0?w+=L:F<C&&(w+=2*L)}for(let F=0;F<M.length;F++)M[F]=M[F]/w;A.envMap.value=t.texture,A.samples.value=C,A.weights.value=M,A.latitudinal.value=u==="latitudinal",h&&(A.poleAxis.value=h);const{_lodMax:U}=this;A.dTheta.value=E,A.mipInt.value=U-n;const D=this._sizeLods[a],P=3*D*(a>U-Jh?a-U+Jh:0),I=4*(this._cubeSize-D);J0(e,P,I,3*D,2*D),d.setRenderTarget(e),d.render(y,aA)}}function H3(r){const t=[],e=[],n=[];let a=r;const o=r-Jh+1+eb.length;for(let u=0;u<o;u++){const h=Math.pow(2,a);e.push(h);let d=1/h;u>r-Jh?d=eb[u-r+Jh-1]:u===0&&(d=0),n.push(d);const m=1/(h-2),v=-m,y=1+m,A=[v,v,y,v,y,y,v,v,y,y,v,y],S=6,E=6,R=3,C=2,M=1,w=new Float32Array(R*E*S),U=new Float32Array(C*E*S),D=new Float32Array(M*E*S);for(let I=0;I<S;I++){const F=I%3*2/3-1,k=I>2?0:-1,L=[F,k,0,F+2/3,k,0,F+2/3,k+1,0,F,k,0,F+2/3,k+1,0,F,k+1,0];w.set(L,R*E*I),U.set(A,C*E*I);const N=[I,I,I,I,I,I];D.set(N,M*E*I)}const P=new Ke;P.setAttribute("position",new bn(w,R)),P.setAttribute("uv",new bn(U,C)),P.setAttribute("faceIndex",new bn(D,M)),t.push(P),a>Jh&&a--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function ab(r,t,e){const n=new Fo(r,t,e);return n.texture.mapping=hd,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function J0(r,t,e,n,a){r.viewport.set(t,e,n,a),r.scissor.set(t,e,n,a)}function z3(r,t,e){const n=new Float32Array(Zu),a=new q(0,1,0);return new jr({name:"SphericalGaussianBlur",defines:{n:Zu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:jx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function sb(){return new jr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:jx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function rb(){return new jr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:jx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ml,depthTest:!1,depthWrite:!1})}function jx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function F3(r){let t=new WeakMap,e=null;function n(h){if(h&&h.isTexture){const d=h.mapping,m=d===om||d===lm,v=d===Tl||d===Lc;if(m||v){let y=t.get(h);const A=y!==void 0?y.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==A)return e===null&&(e=new JA(r)),y=m?e.fromEquirectangular(h,y):e.fromCubemap(h,y),y.texture.pmremVersion=h.pmremVersion,t.set(h,y),y.texture;if(y!==void 0)return y.texture;{const S=h.image;return m&&S&&S.height>0||v&&S&&a(S)?(e===null&&(e=new JA(r)),y=m?e.fromEquirectangular(h):e.fromCubemap(h),y.texture.pmremVersion=h.pmremVersion,t.set(h,y),h.addEventListener("dispose",o),y.texture):null}}}return h}function a(h){let d=0;const m=6;for(let v=0;v<m;v++)h[v]!==void 0&&d++;return d===m}function o(h){const d=h.target;d.removeEventListener("dispose",o);const m=t.get(d);m!==void 0&&(t.delete(d),m.dispose())}function u(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:u}}function G3(r){const t={};function e(n){if(t[n]!==void 0)return t[n];let a;switch(n){case"WEBGL_depth_texture":a=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=r.getExtension(n)}return t[n]=a,a}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const a=e(n);return a===null&&jh("THREE.WebGLRenderer: "+n+" extension not supported."),a}}}function V3(r,t,e,n){const a={},o=new WeakMap;function u(y){const A=y.target;A.index!==null&&t.remove(A.index);for(const E in A.attributes)t.remove(A.attributes[E]);A.removeEventListener("dispose",u),delete a[A.id];const S=o.get(A);S&&(t.remove(S),o.delete(A)),n.releaseStatesOfGeometry(A),A.isInstancedBufferGeometry===!0&&delete A._maxInstanceCount,e.memory.geometries--}function h(y,A){return a[A.id]===!0||(A.addEventListener("dispose",u),a[A.id]=!0,e.memory.geometries++),A}function d(y){const A=y.attributes;for(const S in A)t.update(A[S],r.ARRAY_BUFFER)}function m(y){const A=[],S=y.index,E=y.attributes.position;let R=0;if(S!==null){const w=S.array;R=S.version;for(let U=0,D=w.length;U<D;U+=3){const P=w[U+0],I=w[U+1],F=w[U+2];A.push(P,I,I,F,F,P)}}else if(E!==void 0){const w=E.array;R=E.version;for(let U=0,D=w.length/3-1;U<D;U+=3){const P=U+0,I=U+1,F=U+2;A.push(P,I,I,F,F,P)}}else return;const C=new(QE(A)?_x:yx)(A,1);C.version=R;const M=o.get(y);M&&t.remove(M),o.set(y,C)}function v(y){const A=o.get(y);if(A){const S=y.index;S!==null&&A.version<S.version&&m(y)}else m(y);return o.get(y)}return{get:h,update:d,getWireframeAttribute:v}}function X3(r,t,e){let n;function a(A){n=A}let o,u;function h(A){o=A.type,u=A.bytesPerElement}function d(A,S){r.drawElements(n,S,o,A*u),e.update(S,n,1)}function m(A,S,E){E!==0&&(r.drawElementsInstanced(n,S,o,A*u,E),e.update(S,n,E))}function v(A,S,E){if(E===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,S,0,o,A,0,E);let C=0;for(let M=0;M<E;M++)C+=S[M];e.update(C,n,1)}function y(A,S,E,R){if(E===0)return;const C=t.get("WEBGL_multi_draw");if(C===null)for(let M=0;M<A.length;M++)m(A[M]/u,S[M],R[M]);else{C.multiDrawElementsInstancedWEBGL(n,S,0,o,A,0,R,0,E);let M=0;for(let w=0;w<E;w++)M+=S[w]*R[w];e.update(M,n,1)}}this.setMode=a,this.setIndex=h,this.render=d,this.renderInstances=m,this.renderMultiDraw=v,this.renderMultiDrawInstances=y}function Y3(r){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,u,h){switch(e.calls++,u){case r.TRIANGLES:e.triangles+=h*(o/3);break;case r.LINES:e.lines+=h*(o/2);break;case r.LINE_STRIP:e.lines+=h*(o-1);break;case r.LINE_LOOP:e.lines+=h*o;break;case r.POINTS:e.points+=h*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function a(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:a,update:n}}function k3(r,t,e){const n=new WeakMap,a=new Mn;function o(u,h,d){const m=u.morphTargetInfluences,v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,y=v!==void 0?v.length:0;let A=n.get(h);if(A===void 0||A.count!==y){let N=function(){k.dispose(),n.delete(h),h.removeEventListener("dispose",N)};var S=N;A!==void 0&&A.texture.dispose();const E=h.morphAttributes.position!==void 0,R=h.morphAttributes.normal!==void 0,C=h.morphAttributes.color!==void 0,M=h.morphAttributes.position||[],w=h.morphAttributes.normal||[],U=h.morphAttributes.color||[];let D=0;E===!0&&(D=1),R===!0&&(D=2),C===!0&&(D=3);let P=h.attributes.position.count*D,I=1;P>t.maxTextureSize&&(I=Math.ceil(P/t.maxTextureSize),P=t.maxTextureSize);const F=new Float32Array(P*I*4*y),k=new oy(F,P,I,y);k.type=ys,k.needsUpdate=!0;const L=D*4;for(let J=0;J<y;J++){const ct=M[J],at=w[J],pt=U[J],ut=P*I*4*J;for(let H=0;H<ct.count;H++){const W=H*L;E===!0&&(a.fromBufferAttribute(ct,H),F[ut+W+0]=a.x,F[ut+W+1]=a.y,F[ut+W+2]=a.z,F[ut+W+3]=0),R===!0&&(a.fromBufferAttribute(at,H),F[ut+W+4]=a.x,F[ut+W+5]=a.y,F[ut+W+6]=a.z,F[ut+W+7]=0),C===!0&&(a.fromBufferAttribute(pt,H),F[ut+W+8]=a.x,F[ut+W+9]=a.y,F[ut+W+10]=a.z,F[ut+W+11]=pt.itemSize===4?a.w:1)}}A={count:y,texture:k,size:new Ot(P,I)},n.set(h,A),h.addEventListener("dispose",N)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)d.getUniforms().setValue(r,"morphTexture",u.morphTexture,e);else{let E=0;for(let C=0;C<m.length;C++)E+=m[C];const R=h.morphTargetsRelative?1:1-E;d.getUniforms().setValue(r,"morphTargetBaseInfluence",R),d.getUniforms().setValue(r,"morphTargetInfluences",m)}d.getUniforms().setValue(r,"morphTargetsTexture",A.texture,e),d.getUniforms().setValue(r,"morphTargetsTextureSize",A.size)}return{update:o}}function q3(r,t,e,n){let a=new WeakMap;function o(d){const m=n.render.frame,v=d.geometry,y=t.get(d,v);if(a.get(y)!==m&&(t.update(y),a.set(y,m)),d.isInstancedMesh&&(d.hasEventListener("dispose",h)===!1&&d.addEventListener("dispose",h),a.get(d)!==m&&(e.update(d.instanceMatrix,r.ARRAY_BUFFER),d.instanceColor!==null&&e.update(d.instanceColor,r.ARRAY_BUFFER),a.set(d,m))),d.isSkinnedMesh){const A=d.skeleton;a.get(A)!==m&&(A.update(),a.set(A,m))}return y}function u(){a=new WeakMap}function h(d){const m=d.target;m.removeEventListener("dispose",h),e.remove(m.instanceMatrix),m.instanceColor!==null&&e.remove(m.instanceColor)}return{update:o,dispose:u}}const W1=new ai,ob=new Tx(1,1),Q1=new oy,Z1=new ly,$1=new Sm,lb=[],cb=[],ub=new Float32Array(16),fb=new Float32Array(9),hb=new Float32Array(4);function vd(r,t,e){const n=r[0];if(n<=0||n>0)return r;const a=t*e;let o=lb[a];if(o===void 0&&(o=new Float32Array(a),lb[a]=o),t!==0){n.toArray(o,0);for(let u=1,h=0;u!==t;++u)h+=e,r[u].toArray(o,h)}return o}function Ki(r,t){if(r.length!==t.length)return!1;for(let e=0,n=r.length;e<n;e++)if(r[e]!==t[e])return!1;return!0}function ji(r,t){for(let e=0,n=t.length;e<n;e++)r[e]=t[e]}function wy(r,t){let e=cb[t];e===void 0&&(e=new Int32Array(t),cb[t]=e);for(let n=0;n!==t;++n)e[n]=r.allocateTextureUnit();return e}function J3(r,t){const e=this.cache;e[0]!==t&&(r.uniform1f(this.addr,t),e[0]=t)}function K3(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ki(e,t))return;r.uniform2fv(this.addr,t),ji(e,t)}}function j3(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(r.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Ki(e,t))return;r.uniform3fv(this.addr,t),ji(e,t)}}function W3(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ki(e,t))return;r.uniform4fv(this.addr,t),ji(e,t)}}function Q3(r,t){const e=this.cache,n=t.elements;if(n===void 0){if(Ki(e,t))return;r.uniformMatrix2fv(this.addr,!1,t),ji(e,t)}else{if(Ki(e,n))return;hb.set(n),r.uniformMatrix2fv(this.addr,!1,hb),ji(e,n)}}function Z3(r,t){const e=this.cache,n=t.elements;if(n===void 0){if(Ki(e,t))return;r.uniformMatrix3fv(this.addr,!1,t),ji(e,t)}else{if(Ki(e,n))return;fb.set(n),r.uniformMatrix3fv(this.addr,!1,fb),ji(e,n)}}function $3(r,t){const e=this.cache,n=t.elements;if(n===void 0){if(Ki(e,t))return;r.uniformMatrix4fv(this.addr,!1,t),ji(e,t)}else{if(Ki(e,n))return;ub.set(n),r.uniformMatrix4fv(this.addr,!1,ub),ji(e,n)}}function tU(r,t){const e=this.cache;e[0]!==t&&(r.uniform1i(this.addr,t),e[0]=t)}function eU(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ki(e,t))return;r.uniform2iv(this.addr,t),ji(e,t)}}function nU(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ki(e,t))return;r.uniform3iv(this.addr,t),ji(e,t)}}function iU(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ki(e,t))return;r.uniform4iv(this.addr,t),ji(e,t)}}function aU(r,t){const e=this.cache;e[0]!==t&&(r.uniform1ui(this.addr,t),e[0]=t)}function sU(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(r.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ki(e,t))return;r.uniform2uiv(this.addr,t),ji(e,t)}}function rU(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(r.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ki(e,t))return;r.uniform3uiv(this.addr,t),ji(e,t)}}function oU(r,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(r.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ki(e,t))return;r.uniform4uiv(this.addr,t),ji(e,t)}}function lU(r,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(r.uniform1i(this.addr,a),n[0]=a);let o;this.type===r.SAMPLER_2D_SHADOW?(ob.compareFunction=mx,o=ob):o=W1,e.setTexture2D(t||o,a)}function cU(r,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(r.uniform1i(this.addr,a),n[0]=a),e.setTexture3D(t||Z1,a)}function uU(r,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(r.uniform1i(this.addr,a),n[0]=a),e.setTextureCube(t||$1,a)}function fU(r,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(r.uniform1i(this.addr,a),n[0]=a),e.setTexture2DArray(t||Q1,a)}function hU(r){switch(r){case 5126:return J3;case 35664:return K3;case 35665:return j3;case 35666:return W3;case 35674:return Q3;case 35675:return Z3;case 35676:return $3;case 5124:case 35670:return tU;case 35667:case 35671:return eU;case 35668:case 35672:return nU;case 35669:case 35673:return iU;case 5125:return aU;case 36294:return sU;case 36295:return rU;case 36296:return oU;case 35678:case 36198:case 36298:case 36306:case 35682:return lU;case 35679:case 36299:case 36307:return cU;case 35680:case 36300:case 36308:case 36293:return uU;case 36289:case 36303:case 36311:case 36292:return fU}}function dU(r,t){r.uniform1fv(this.addr,t)}function pU(r,t){const e=vd(t,this.size,2);r.uniform2fv(this.addr,e)}function mU(r,t){const e=vd(t,this.size,3);r.uniform3fv(this.addr,e)}function gU(r,t){const e=vd(t,this.size,4);r.uniform4fv(this.addr,e)}function vU(r,t){const e=vd(t,this.size,4);r.uniformMatrix2fv(this.addr,!1,e)}function yU(r,t){const e=vd(t,this.size,9);r.uniformMatrix3fv(this.addr,!1,e)}function _U(r,t){const e=vd(t,this.size,16);r.uniformMatrix4fv(this.addr,!1,e)}function AU(r,t){r.uniform1iv(this.addr,t)}function xU(r,t){r.uniform2iv(this.addr,t)}function SU(r,t){r.uniform3iv(this.addr,t)}function MU(r,t){r.uniform4iv(this.addr,t)}function bU(r,t){r.uniform1uiv(this.addr,t)}function EU(r,t){r.uniform2uiv(this.addr,t)}function TU(r,t){r.uniform3uiv(this.addr,t)}function CU(r,t){r.uniform4uiv(this.addr,t)}function RU(r,t,e){const n=this.cache,a=t.length,o=wy(e,a);Ki(n,o)||(r.uniform1iv(this.addr,o),ji(n,o));for(let u=0;u!==a;++u)e.setTexture2D(t[u]||W1,o[u])}function BU(r,t,e){const n=this.cache,a=t.length,o=wy(e,a);Ki(n,o)||(r.uniform1iv(this.addr,o),ji(n,o));for(let u=0;u!==a;++u)e.setTexture3D(t[u]||Z1,o[u])}function wU(r,t,e){const n=this.cache,a=t.length,o=wy(e,a);Ki(n,o)||(r.uniform1iv(this.addr,o),ji(n,o));for(let u=0;u!==a;++u)e.setTextureCube(t[u]||$1,o[u])}function DU(r,t,e){const n=this.cache,a=t.length,o=wy(e,a);Ki(n,o)||(r.uniform1iv(this.addr,o),ji(n,o));for(let u=0;u!==a;++u)e.setTexture2DArray(t[u]||Q1,o[u])}function UU(r){switch(r){case 5126:return dU;case 35664:return pU;case 35665:return mU;case 35666:return gU;case 35674:return vU;case 35675:return yU;case 35676:return _U;case 5124:case 35670:return AU;case 35667:case 35671:return xU;case 35668:case 35672:return SU;case 35669:case 35673:return MU;case 5125:return bU;case 36294:return EU;case 36295:return TU;case 36296:return CU;case 35678:case 36198:case 36298:case 36306:case 35682:return RU;case 35679:case 36299:case 36307:return BU;case 35680:case 36300:case 36308:case 36293:return wU;case 36289:case 36303:case 36311:case 36292:return DU}}class NU{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=hU(e.type)}}class OU{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=UU(e.type)}}class LU{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const a=this.seq;for(let o=0,u=a.length;o!==u;++o){const h=a[o];h.setValue(t,e[h.id],n)}}}const cA=/(\w+)(\])?(\[|\.)?/g;function db(r,t){r.seq.push(t),r.map[t.id]=t}function IU(r,t,e){const n=r.name,a=n.length;for(cA.lastIndex=0;;){const o=cA.exec(n),u=cA.lastIndex;let h=o[1];const d=o[2]==="]",m=o[3];if(d&&(h=h|0),m===void 0||m==="["&&u+2===a){db(e,m===void 0?new NU(h,r,t):new OU(h,r,t));break}else{let y=e.map[h];y===void 0&&(y=new LU(h),db(e,y)),e=y}}}class nv{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<n;++a){const o=t.getActiveUniform(e,a),u=t.getUniformLocation(e,o.name);IU(o,u,this)}}setValue(t,e,n,a){const o=this.map[e];o!==void 0&&o.setValue(t,n,a)}setOptional(t,e,n){const a=e[n];a!==void 0&&this.setValue(t,n,a)}static upload(t,e,n,a){for(let o=0,u=e.length;o!==u;++o){const h=e[o],d=n[h.id];d.needsUpdate!==!1&&h.setValue(t,d.value,a)}}static seqWithValue(t,e){const n=[];for(let a=0,o=t.length;a!==o;++a){const u=t[a];u.id in e&&n.push(u)}return n}}function pb(r,t,e){const n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}const PU=37297;let HU=0;function zU(r,t){const e=r.split(`
`),n=[],a=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let u=a;u<o;u++){const h=u+1;n.push(`${h===t?">":" "} ${h}: ${e[u]}`)}return n.join(`
`)}const mb=new Ze;function FU(r){gn._getMatrix(mb,gn.workingColorSpace,r);const t=`mat3( ${mb.elements.map(e=>e.toFixed(4))} )`;switch(gn.getTransfer(r)){case um:return[t,"LinearTransferOETF"];case zn:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",r),[t,"LinearTransferOETF"]}}function gb(r,t,e){const n=r.getShaderParameter(t,r.COMPILE_STATUS),a=r.getShaderInfoLog(t).trim();if(n&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const u=parseInt(o[1]);return e.toUpperCase()+`

`+a+`

`+zU(r.getShaderSource(t),u)}else return a}function GU(r,t){const e=FU(t);return[`vec4 ${r}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function VU(r,t){let e;switch(t){case RE:e="Linear";break;case BE:e="Reinhard";break;case wE:e="Cineon";break;case sx:e="ACESFilmic";break;case UE:e="AgX";break;case NE:e="Neutral";break;case DE:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+r+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const K0=new q;function XU(){gn.getLuminanceCoefficients(K0);const r=K0.x.toFixed(4),t=K0.y.toFixed(4),e=K0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${r}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function YU(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(jp).join(`
`)}function kU(r){const t=[];for(const e in r){const n=r[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function qU(r,t){const e={},n=r.getProgramParameter(t,r.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const o=r.getActiveAttrib(t,a),u=o.name;let h=1;o.type===r.FLOAT_MAT2&&(h=2),o.type===r.FLOAT_MAT3&&(h=3),o.type===r.FLOAT_MAT4&&(h=4),e[u]={type:o.type,location:r.getAttribLocation(t,u),locationSize:h}}return e}function jp(r){return r!==""}function vb(r,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function yb(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const JU=/^[ \t]*#include +<([\w\d./]+)>/gm;function KA(r){return r.replace(JU,jU)}const KU=new Map;function jU(r,t){let e=sn[t];if(e===void 0){const n=KU.get(t);if(n!==void 0)e=sn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return KA(e)}const WU=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _b(r){return r.replace(WU,QU)}function QU(r,t,e,n){let a="";for(let o=parseInt(t);o<parseInt(e);o++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return a}function Ab(r){let t=`precision ${r.precision} float;
	precision ${r.precision} int;
	precision ${r.precision} sampler2D;
	precision ${r.precision} samplerCube;
	precision ${r.precision} sampler3D;
	precision ${r.precision} sampler2DArray;
	precision ${r.precision} sampler2DShadow;
	precision ${r.precision} samplerCubeShadow;
	precision ${r.precision} sampler2DArrayShadow;
	precision ${r.precision} isampler2D;
	precision ${r.precision} isampler3D;
	precision ${r.precision} isamplerCube;
	precision ${r.precision} isampler2DArray;
	precision ${r.precision} usampler2D;
	precision ${r.precision} usampler3D;
	precision ${r.precision} usamplerCube;
	precision ${r.precision} usampler2DArray;
	`;return r.precision==="highp"?t+=`
#define HIGH_PRECISION`:r.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function ZU(r){let t="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Qv?t="SHADOWMAP_TYPE_PCF":r.shadowMapType===Wp?t="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Yr&&(t="SHADOWMAP_TYPE_VSM"),t}function $U(r){let t="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Tl:case Lc:t="ENVMAP_TYPE_CUBE";break;case hd:t="ENVMAP_TYPE_CUBE_UV";break}return t}function tN(r){let t="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Lc:t="ENVMAP_MODE_REFRACTION";break}return t}function eN(r){let t="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Am:t="ENVMAP_BLENDING_MULTIPLY";break;case TE:t="ENVMAP_BLENDING_MIX";break;case CE:t="ENVMAP_BLENDING_ADD";break}return t}function nN(r){const t=r.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}function iN(r,t,e,n){const a=r.getContext(),o=e.defines;let u=e.vertexShader,h=e.fragmentShader;const d=ZU(e),m=$U(e),v=tN(e),y=eN(e),A=nN(e),S=YU(e),E=kU(o),R=a.createProgram();let C,M,w=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(C=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E].filter(jp).join(`
`),C.length>0&&(C+=`
`),M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E].filter(jp).join(`
`),M.length>0&&(M+=`
`)):(C=[Ab(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(jp).join(`
`),M=[Ab(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.envMap?"#define "+v:"",e.envMap?"#define "+y:"",A?"#define CUBEUV_TEXEL_WIDTH "+A.texelWidth:"",A?"#define CUBEUV_TEXEL_HEIGHT "+A.texelHeight:"",A?"#define CUBEUV_MAX_MIP "+A.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Po?"#define TONE_MAPPING":"",e.toneMapping!==Po?sn.tonemapping_pars_fragment:"",e.toneMapping!==Po?VU("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",sn.colorspace_pars_fragment,GU("linearToOutputTexel",e.outputColorSpace),XU(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(jp).join(`
`)),u=KA(u),u=vb(u,e),u=yb(u,e),h=KA(h),h=vb(h,e),h=yb(h,e),u=_b(u),h=_b(h),e.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,C=[S,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,M=["#define varying in",e.glslVersion===zA?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===zA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const U=w+C+u,D=w+M+h,P=pb(a,a.VERTEX_SHADER,U),I=pb(a,a.FRAGMENT_SHADER,D);a.attachShader(R,P),a.attachShader(R,I),e.index0AttributeName!==void 0?a.bindAttribLocation(R,0,e.index0AttributeName):e.morphTargets===!0&&a.bindAttribLocation(R,0,"position"),a.linkProgram(R);function F(J){if(r.debug.checkShaderErrors){const ct=a.getProgramInfoLog(R).trim(),at=a.getShaderInfoLog(P).trim(),pt=a.getShaderInfoLog(I).trim();let ut=!0,H=!0;if(a.getProgramParameter(R,a.LINK_STATUS)===!1)if(ut=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(a,R,P,I);else{const W=gb(a,P,"vertex"),j=gb(a,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(R,a.VALIDATE_STATUS)+`

Material Name: `+J.name+`
Material Type: `+J.type+`

Program Info Log: `+ct+`
`+W+`
`+j)}else ct!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ct):(at===""||pt==="")&&(H=!1);H&&(J.diagnostics={runnable:ut,programLog:ct,vertexShader:{log:at,prefix:C},fragmentShader:{log:pt,prefix:M}})}a.deleteShader(P),a.deleteShader(I),k=new nv(a,R),L=qU(a,R)}let k;this.getUniforms=function(){return k===void 0&&F(this),k};let L;this.getAttributes=function(){return L===void 0&&F(this),L};let N=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=a.getProgramParameter(R,PU)),N},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(R),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=HU++,this.cacheKey=t,this.usedTimes=1,this.program=R,this.vertexShader=P,this.fragmentShader=I,this}let aN=0;class sN{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,a=this._getShaderStage(e),o=this._getShaderStage(n),u=this._getShaderCacheForMaterial(t);return u.has(a)===!1&&(u.add(a),a.usedTimes++),u.has(o)===!1&&(u.add(o),o.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new rN(t),e.set(t,n)),n}}class rN{constructor(t){this.id=aN++,this.code=t,this.usedTimes=0}}function oN(r,t,e,n,a,o,u){const h=new rd,d=new sN,m=new Set,v=[],y=a.logarithmicDepthBuffer,A=a.vertexTextures;let S=a.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(L){return m.add(L),L===0?"uv":`uv${L}`}function C(L,N,J,ct,at){const pt=ct.fog,ut=at.geometry,H=L.isMeshStandardMaterial?ct.environment:null,W=(L.isMeshStandardMaterial?e:t).get(L.envMap||H),j=W&&W.mapping===hd?W.image.height:null,lt=E[L.type];L.precision!==null&&(S=a.getMaxPrecision(L.precision),S!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",S,"instead."));const X=ut.morphAttributes.position||ut.morphAttributes.normal||ut.morphAttributes.color,nt=X!==void 0?X.length:0;let _t=0;ut.morphAttributes.position!==void 0&&(_t=1),ut.morphAttributes.normal!==void 0&&(_t=2),ut.morphAttributes.color!==void 0&&(_t=3);let Tt,it,Ct,Ht;if(lt){const je=kr[lt];Tt=je.vertexShader,it=je.fragmentShader}else Tt=L.vertexShader,it=L.fragmentShader,d.update(L),Ct=d.getVertexShaderID(L),Ht=d.getFragmentShaderID(L);const Qt=r.getRenderTarget(),qt=r.state.buffers.depth.getReversed(),Ee=at.isInstancedMesh===!0,fe=at.isBatchedMesh===!0,_e=!!L.map,De=!!L.matcap,Ae=!!W,K=!!L.aoMap,Wt=!!L.lightMap,Xt=!!L.bumpMap,Gt=!!L.normalMap,Dt=!!L.displacementMap,se=!!L.emissiveMap,Vt=!!L.metalnessMap,ie=!!L.roughnessMap,Oe=L.anisotropy>0,Q=L.clearcoat>0,z=L.dispersion>0,mt=L.iridescence>0,Rt=L.sheen>0,wt=L.transmission>0,Bt=Oe&&!!L.anisotropyMap,re=Q&&!!L.clearcoatMap,te=Q&&!!L.clearcoatNormalMap,ge=Q&&!!L.clearcoatRoughnessMap,ve=mt&&!!L.iridescenceMap,Lt=mt&&!!L.iridescenceThicknessMap,ee=Rt&&!!L.sheenColorMap,ye=Rt&&!!L.sheenRoughnessMap,et=!!L.specularMap,gt=!!L.specularColorMap,Jt=!!L.specularIntensityMap,$=wt&&!!L.transmissionMap,jt=wt&&!!L.thicknessMap,zt=!!L.gradientMap,ae=!!L.alphaMap,Kt=L.alphaTest>0,It=!!L.alphaHash,le=!!L.extensions;let Me=Po;L.toneMapped&&(Qt===null||Qt.isXRRenderTarget===!0)&&(Me=r.toneMapping);const nn={shaderID:lt,shaderType:L.type,shaderName:L.name,vertexShader:Tt,fragmentShader:it,defines:L.defines,customVertexShaderID:Ct,customFragmentShaderID:Ht,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:S,batching:fe,batchingColor:fe&&at._colorsTexture!==null,instancing:Ee,instancingColor:Ee&&at.instanceColor!==null,instancingMorph:Ee&&at.morphTexture!==null,supportsVertexTextures:A,outputColorSpace:Qt===null?r.outputColorSpace:Qt.isXRRenderTarget===!0?Qt.texture.colorSpace:Ic,alphaToCoverage:!!L.alphaToCoverage,map:_e,matcap:De,envMap:Ae,envMapMode:Ae&&W.mapping,envMapCubeUVHeight:j,aoMap:K,lightMap:Wt,bumpMap:Xt,normalMap:Gt,displacementMap:A&&Dt,emissiveMap:se,normalMapObjectSpace:Gt&&L.normalMapType===XE,normalMapTangentSpace:Gt&&L.normalMapType===Hc,metalnessMap:Vt,roughnessMap:ie,anisotropy:Oe,anisotropyMap:Bt,clearcoat:Q,clearcoatMap:re,clearcoatNormalMap:te,clearcoatRoughnessMap:ge,dispersion:z,iridescence:mt,iridescenceMap:ve,iridescenceThicknessMap:Lt,sheen:Rt,sheenColorMap:ee,sheenRoughnessMap:ye,specularMap:et,specularColorMap:gt,specularIntensityMap:Jt,transmission:wt,transmissionMap:$,thicknessMap:jt,gradientMap:zt,opaque:L.transparent===!1&&L.blending===rf&&L.alphaToCoverage===!1,alphaMap:ae,alphaTest:Kt,alphaHash:It,combine:L.combine,mapUv:_e&&R(L.map.channel),aoMapUv:K&&R(L.aoMap.channel),lightMapUv:Wt&&R(L.lightMap.channel),bumpMapUv:Xt&&R(L.bumpMap.channel),normalMapUv:Gt&&R(L.normalMap.channel),displacementMapUv:Dt&&R(L.displacementMap.channel),emissiveMapUv:se&&R(L.emissiveMap.channel),metalnessMapUv:Vt&&R(L.metalnessMap.channel),roughnessMapUv:ie&&R(L.roughnessMap.channel),anisotropyMapUv:Bt&&R(L.anisotropyMap.channel),clearcoatMapUv:re&&R(L.clearcoatMap.channel),clearcoatNormalMapUv:te&&R(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ge&&R(L.clearcoatRoughnessMap.channel),iridescenceMapUv:ve&&R(L.iridescenceMap.channel),iridescenceThicknessMapUv:Lt&&R(L.iridescenceThicknessMap.channel),sheenColorMapUv:ee&&R(L.sheenColorMap.channel),sheenRoughnessMapUv:ye&&R(L.sheenRoughnessMap.channel),specularMapUv:et&&R(L.specularMap.channel),specularColorMapUv:gt&&R(L.specularColorMap.channel),specularIntensityMapUv:Jt&&R(L.specularIntensityMap.channel),transmissionMapUv:$&&R(L.transmissionMap.channel),thicknessMapUv:jt&&R(L.thicknessMap.channel),alphaMapUv:ae&&R(L.alphaMap.channel),vertexTangents:!!ut.attributes.tangent&&(Gt||Oe),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!ut.attributes.color&&ut.attributes.color.itemSize===4,pointsUvs:at.isPoints===!0&&!!ut.attributes.uv&&(_e||ae),fog:!!pt,useFog:L.fog===!0,fogExp2:!!pt&&pt.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:y,reverseDepthBuffer:qt,skinning:at.isSkinnedMesh===!0,morphTargets:ut.morphAttributes.position!==void 0,morphNormals:ut.morphAttributes.normal!==void 0,morphColors:ut.morphAttributes.color!==void 0,morphTargetsCount:nt,morphTextureStride:_t,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:L.dithering,shadowMapEnabled:r.shadowMap.enabled&&J.length>0,shadowMapType:r.shadowMap.type,toneMapping:Me,decodeVideoTexture:_e&&L.map.isVideoTexture===!0&&gn.getTransfer(L.map.colorSpace)===zn,decodeVideoTextureEmissive:se&&L.emissiveMap.isVideoTexture===!0&&gn.getTransfer(L.emissiveMap.colorSpace)===zn,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===va,flipSided:L.side===Na,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:le&&L.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(le&&L.extensions.multiDraw===!0||fe)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return nn.vertexUv1s=m.has(1),nn.vertexUv2s=m.has(2),nn.vertexUv3s=m.has(3),m.clear(),nn}function M(L){const N=[];if(L.shaderID?N.push(L.shaderID):(N.push(L.customVertexShaderID),N.push(L.customFragmentShaderID)),L.defines!==void 0)for(const J in L.defines)N.push(J),N.push(L.defines[J]);return L.isRawShaderMaterial===!1&&(w(N,L),U(N,L),N.push(r.outputColorSpace)),N.push(L.customProgramCacheKey),N.join()}function w(L,N){L.push(N.precision),L.push(N.outputColorSpace),L.push(N.envMapMode),L.push(N.envMapCubeUVHeight),L.push(N.mapUv),L.push(N.alphaMapUv),L.push(N.lightMapUv),L.push(N.aoMapUv),L.push(N.bumpMapUv),L.push(N.normalMapUv),L.push(N.displacementMapUv),L.push(N.emissiveMapUv),L.push(N.metalnessMapUv),L.push(N.roughnessMapUv),L.push(N.anisotropyMapUv),L.push(N.clearcoatMapUv),L.push(N.clearcoatNormalMapUv),L.push(N.clearcoatRoughnessMapUv),L.push(N.iridescenceMapUv),L.push(N.iridescenceThicknessMapUv),L.push(N.sheenColorMapUv),L.push(N.sheenRoughnessMapUv),L.push(N.specularMapUv),L.push(N.specularColorMapUv),L.push(N.specularIntensityMapUv),L.push(N.transmissionMapUv),L.push(N.thicknessMapUv),L.push(N.combine),L.push(N.fogExp2),L.push(N.sizeAttenuation),L.push(N.morphTargetsCount),L.push(N.morphAttributeCount),L.push(N.numDirLights),L.push(N.numPointLights),L.push(N.numSpotLights),L.push(N.numSpotLightMaps),L.push(N.numHemiLights),L.push(N.numRectAreaLights),L.push(N.numDirLightShadows),L.push(N.numPointLightShadows),L.push(N.numSpotLightShadows),L.push(N.numSpotLightShadowsWithMaps),L.push(N.numLightProbes),L.push(N.shadowMapType),L.push(N.toneMapping),L.push(N.numClippingPlanes),L.push(N.numClipIntersection),L.push(N.depthPacking)}function U(L,N){h.disableAll(),N.supportsVertexTextures&&h.enable(0),N.instancing&&h.enable(1),N.instancingColor&&h.enable(2),N.instancingMorph&&h.enable(3),N.matcap&&h.enable(4),N.envMap&&h.enable(5),N.normalMapObjectSpace&&h.enable(6),N.normalMapTangentSpace&&h.enable(7),N.clearcoat&&h.enable(8),N.iridescence&&h.enable(9),N.alphaTest&&h.enable(10),N.vertexColors&&h.enable(11),N.vertexAlphas&&h.enable(12),N.vertexUv1s&&h.enable(13),N.vertexUv2s&&h.enable(14),N.vertexUv3s&&h.enable(15),N.vertexTangents&&h.enable(16),N.anisotropy&&h.enable(17),N.alphaHash&&h.enable(18),N.batching&&h.enable(19),N.dispersion&&h.enable(20),N.batchingColor&&h.enable(21),N.gradientMap&&h.enable(22),L.push(h.mask),h.disableAll(),N.fog&&h.enable(0),N.useFog&&h.enable(1),N.flatShading&&h.enable(2),N.logarithmicDepthBuffer&&h.enable(3),N.reverseDepthBuffer&&h.enable(4),N.skinning&&h.enable(5),N.morphTargets&&h.enable(6),N.morphNormals&&h.enable(7),N.morphColors&&h.enable(8),N.premultipliedAlpha&&h.enable(9),N.shadowMapEnabled&&h.enable(10),N.doubleSided&&h.enable(11),N.flipSided&&h.enable(12),N.useDepthPacking&&h.enable(13),N.dithering&&h.enable(14),N.transmission&&h.enable(15),N.sheen&&h.enable(16),N.opaque&&h.enable(17),N.pointsUvs&&h.enable(18),N.decodeVideoTexture&&h.enable(19),N.decodeVideoTextureEmissive&&h.enable(20),N.alphaToCoverage&&h.enable(21),L.push(h.mask)}function D(L){const N=E[L.type];let J;if(N){const ct=kr[N];J=n1.clone(ct.uniforms)}else J=L.uniforms;return J}function P(L,N){let J;for(let ct=0,at=v.length;ct<at;ct++){const pt=v[ct];if(pt.cacheKey===N){J=pt,++J.usedTimes;break}}return J===void 0&&(J=new iN(r,N,L,o),v.push(J)),J}function I(L){if(--L.usedTimes===0){const N=v.indexOf(L);v[N]=v[v.length-1],v.pop(),L.destroy()}}function F(L){d.remove(L)}function k(){d.dispose()}return{getParameters:C,getProgramCacheKey:M,getUniforms:D,acquireProgram:P,releaseProgram:I,releaseShaderCache:F,programs:v,dispose:k}}function lN(){let r=new WeakMap;function t(u){return r.has(u)}function e(u){let h=r.get(u);return h===void 0&&(h={},r.set(u,h)),h}function n(u){r.delete(u)}function a(u,h,d){r.get(u)[h]=d}function o(){r=new WeakMap}return{has:t,get:e,remove:n,update:a,dispose:o}}function cN(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.material.id!==t.material.id?r.material.id-t.material.id:r.z!==t.z?r.z-t.z:r.id-t.id}function xb(r,t){return r.groupOrder!==t.groupOrder?r.groupOrder-t.groupOrder:r.renderOrder!==t.renderOrder?r.renderOrder-t.renderOrder:r.z!==t.z?t.z-r.z:r.id-t.id}function Sb(){const r=[];let t=0;const e=[],n=[],a=[];function o(){t=0,e.length=0,n.length=0,a.length=0}function u(y,A,S,E,R,C){let M=r[t];return M===void 0?(M={id:y.id,object:y,geometry:A,material:S,groupOrder:E,renderOrder:y.renderOrder,z:R,group:C},r[t]=M):(M.id=y.id,M.object=y,M.geometry=A,M.material=S,M.groupOrder=E,M.renderOrder=y.renderOrder,M.z=R,M.group=C),t++,M}function h(y,A,S,E,R,C){const M=u(y,A,S,E,R,C);S.transmission>0?n.push(M):S.transparent===!0?a.push(M):e.push(M)}function d(y,A,S,E,R,C){const M=u(y,A,S,E,R,C);S.transmission>0?n.unshift(M):S.transparent===!0?a.unshift(M):e.unshift(M)}function m(y,A){e.length>1&&e.sort(y||cN),n.length>1&&n.sort(A||xb),a.length>1&&a.sort(A||xb)}function v(){for(let y=t,A=r.length;y<A;y++){const S=r[y];if(S.id===null)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}}return{opaque:e,transmissive:n,transparent:a,init:o,push:h,unshift:d,finish:v,sort:m}}function uN(){let r=new WeakMap;function t(n,a){const o=r.get(n);let u;return o===void 0?(u=new Sb,r.set(n,[u])):a>=o.length?(u=new Sb,o.push(u)):u=o[a],u}function e(){r=new WeakMap}return{get:t,dispose:e}}function fN(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new q,color:new oe};break;case"SpotLight":e={position:new q,direction:new q,color:new oe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new q,color:new oe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new q,skyColor:new oe,groundColor:new oe};break;case"RectAreaLight":e={color:new oe,position:new q,halfWidth:new q,halfHeight:new q};break}return r[t.id]=e,e}}}function hN(){const r={};return{get:function(t){if(r[t.id]!==void 0)return r[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ot};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ot};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ot,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[t.id]=e,e}}}let dN=0;function pN(r,t){return(t.castShadow?2:0)-(r.castShadow?2:0)+(t.map?1:0)-(r.map?1:0)}function mN(r){const t=new fN,e=hN(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;m<9;m++)n.probe.push(new q);const a=new q,o=new Ne,u=new Ne;function h(m){let v=0,y=0,A=0;for(let L=0;L<9;L++)n.probe[L].set(0,0,0);let S=0,E=0,R=0,C=0,M=0,w=0,U=0,D=0,P=0,I=0,F=0;m.sort(pN);for(let L=0,N=m.length;L<N;L++){const J=m[L],ct=J.color,at=J.intensity,pt=J.distance,ut=J.shadow&&J.shadow.map?J.shadow.map.texture:null;if(J.isAmbientLight)v+=ct.r*at,y+=ct.g*at,A+=ct.b*at;else if(J.isLightProbe){for(let H=0;H<9;H++)n.probe[H].addScaledVector(J.sh.coefficients[H],at);F++}else if(J.isDirectionalLight){const H=t.get(J);if(H.color.copy(J.color).multiplyScalar(J.intensity),J.castShadow){const W=J.shadow,j=e.get(J);j.shadowIntensity=W.intensity,j.shadowBias=W.bias,j.shadowNormalBias=W.normalBias,j.shadowRadius=W.radius,j.shadowMapSize=W.mapSize,n.directionalShadow[S]=j,n.directionalShadowMap[S]=ut,n.directionalShadowMatrix[S]=J.shadow.matrix,w++}n.directional[S]=H,S++}else if(J.isSpotLight){const H=t.get(J);H.position.setFromMatrixPosition(J.matrixWorld),H.color.copy(ct).multiplyScalar(at),H.distance=pt,H.coneCos=Math.cos(J.angle),H.penumbraCos=Math.cos(J.angle*(1-J.penumbra)),H.decay=J.decay,n.spot[R]=H;const W=J.shadow;if(J.map&&(n.spotLightMap[P]=J.map,P++,W.updateMatrices(J),J.castShadow&&I++),n.spotLightMatrix[R]=W.matrix,J.castShadow){const j=e.get(J);j.shadowIntensity=W.intensity,j.shadowBias=W.bias,j.shadowNormalBias=W.normalBias,j.shadowRadius=W.radius,j.shadowMapSize=W.mapSize,n.spotShadow[R]=j,n.spotShadowMap[R]=ut,D++}R++}else if(J.isRectAreaLight){const H=t.get(J);H.color.copy(ct).multiplyScalar(at),H.halfWidth.set(J.width*.5,0,0),H.halfHeight.set(0,J.height*.5,0),n.rectArea[C]=H,C++}else if(J.isPointLight){const H=t.get(J);if(H.color.copy(J.color).multiplyScalar(J.intensity),H.distance=J.distance,H.decay=J.decay,J.castShadow){const W=J.shadow,j=e.get(J);j.shadowIntensity=W.intensity,j.shadowBias=W.bias,j.shadowNormalBias=W.normalBias,j.shadowRadius=W.radius,j.shadowMapSize=W.mapSize,j.shadowCameraNear=W.camera.near,j.shadowCameraFar=W.camera.far,n.pointShadow[E]=j,n.pointShadowMap[E]=ut,n.pointShadowMatrix[E]=J.shadow.matrix,U++}n.point[E]=H,E++}else if(J.isHemisphereLight){const H=t.get(J);H.skyColor.copy(J.color).multiplyScalar(at),H.groundColor.copy(J.groundColor).multiplyScalar(at),n.hemi[M]=H,M++}}C>0&&(r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ue.LTC_FLOAT_1,n.rectAreaLTC2=ue.LTC_FLOAT_2):(n.rectAreaLTC1=ue.LTC_HALF_1,n.rectAreaLTC2=ue.LTC_HALF_2)),n.ambient[0]=v,n.ambient[1]=y,n.ambient[2]=A;const k=n.hash;(k.directionalLength!==S||k.pointLength!==E||k.spotLength!==R||k.rectAreaLength!==C||k.hemiLength!==M||k.numDirectionalShadows!==w||k.numPointShadows!==U||k.numSpotShadows!==D||k.numSpotMaps!==P||k.numLightProbes!==F)&&(n.directional.length=S,n.spot.length=R,n.rectArea.length=C,n.point.length=E,n.hemi.length=M,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=U,n.pointShadowMap.length=U,n.spotShadow.length=D,n.spotShadowMap.length=D,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=U,n.spotLightMatrix.length=D+P-I,n.spotLightMap.length=P,n.numSpotLightShadowsWithMaps=I,n.numLightProbes=F,k.directionalLength=S,k.pointLength=E,k.spotLength=R,k.rectAreaLength=C,k.hemiLength=M,k.numDirectionalShadows=w,k.numPointShadows=U,k.numSpotShadows=D,k.numSpotMaps=P,k.numLightProbes=F,n.version=dN++)}function d(m,v){let y=0,A=0,S=0,E=0,R=0;const C=v.matrixWorldInverse;for(let M=0,w=m.length;M<w;M++){const U=m[M];if(U.isDirectionalLight){const D=n.directional[y];D.direction.setFromMatrixPosition(U.matrixWorld),a.setFromMatrixPosition(U.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(C),y++}else if(U.isSpotLight){const D=n.spot[S];D.position.setFromMatrixPosition(U.matrixWorld),D.position.applyMatrix4(C),D.direction.setFromMatrixPosition(U.matrixWorld),a.setFromMatrixPosition(U.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(C),S++}else if(U.isRectAreaLight){const D=n.rectArea[E];D.position.setFromMatrixPosition(U.matrixWorld),D.position.applyMatrix4(C),u.identity(),o.copy(U.matrixWorld),o.premultiply(C),u.extractRotation(o),D.halfWidth.set(U.width*.5,0,0),D.halfHeight.set(0,U.height*.5,0),D.halfWidth.applyMatrix4(u),D.halfHeight.applyMatrix4(u),E++}else if(U.isPointLight){const D=n.point[A];D.position.setFromMatrixPosition(U.matrixWorld),D.position.applyMatrix4(C),A++}else if(U.isHemisphereLight){const D=n.hemi[R];D.direction.setFromMatrixPosition(U.matrixWorld),D.direction.transformDirection(C),R++}}}return{setup:h,setupView:d,state:n}}function Mb(r){const t=new mN(r),e=[],n=[];function a(v){m.camera=v,e.length=0,n.length=0}function o(v){e.push(v)}function u(v){n.push(v)}function h(){t.setup(e)}function d(v){t.setupView(e,v)}const m={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:a,state:m,setupLights:h,setupLightsView:d,pushLight:o,pushShadow:u}}function gN(r){let t=new WeakMap;function e(a,o=0){const u=t.get(a);let h;return u===void 0?(h=new Mb(r),t.set(a,[h])):o>=u.length?(h=new Mb(r),u.push(h)):h=u[o],h}function n(){t=new WeakMap}return{get:e,dispose:n}}const vN=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yN=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function _N(r,t,e){let n=new pd;const a=new Ot,o=new Ot,u=new Mn,h=new Nx({depthPacking:VE}),d=new Ox,m={},v=e.maxTextureSize,y={[zo]:Na,[Na]:zo,[va]:va},A=new jr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ot},radius:{value:4}},vertexShader:vN,fragmentShader:yN}),S=A.clone();S.defines.HORIZONTAL_PASS=1;const E=new Ke;E.setAttribute("position",new bn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new Ri(E,A),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qv;let M=this.type;this.render=function(I,F,k){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||I.length===0)return;const L=r.getRenderTarget(),N=r.getActiveCubeFace(),J=r.getActiveMipmapLevel(),ct=r.state;ct.setBlending(Ml),ct.buffers.color.setClear(1,1,1,1),ct.buffers.depth.setTest(!0),ct.setScissorTest(!1);const at=M!==Yr&&this.type===Yr,pt=M===Yr&&this.type!==Yr;for(let ut=0,H=I.length;ut<H;ut++){const W=I[ut],j=W.shadow;if(j===void 0){console.warn("THREE.WebGLShadowMap:",W,"has no shadow.");continue}if(j.autoUpdate===!1&&j.needsUpdate===!1)continue;a.copy(j.mapSize);const lt=j.getFrameExtents();if(a.multiply(lt),o.copy(j.mapSize),(a.x>v||a.y>v)&&(a.x>v&&(o.x=Math.floor(v/lt.x),a.x=o.x*lt.x,j.mapSize.x=o.x),a.y>v&&(o.y=Math.floor(v/lt.y),a.y=o.y*lt.y,j.mapSize.y=o.y)),j.map===null||at===!0||pt===!0){const nt=this.type!==Yr?{minFilter:aa,magFilter:aa}:{};j.map!==null&&j.map.dispose(),j.map=new Fo(a.x,a.y,nt),j.map.texture.name=W.name+".shadowMap",j.camera.updateProjectionMatrix()}r.setRenderTarget(j.map),r.clear();const X=j.getViewportCount();for(let nt=0;nt<X;nt++){const _t=j.getViewport(nt);u.set(o.x*_t.x,o.y*_t.y,o.x*_t.z,o.y*_t.w),ct.viewport(u),j.updateMatrices(W,nt),n=j.getFrustum(),D(F,k,j.camera,W,this.type)}j.isPointLightShadow!==!0&&this.type===Yr&&w(j,k),j.needsUpdate=!1}M=this.type,C.needsUpdate=!1,r.setRenderTarget(L,N,J)};function w(I,F){const k=t.update(R);A.defines.VSM_SAMPLES!==I.blurSamples&&(A.defines.VSM_SAMPLES=I.blurSamples,S.defines.VSM_SAMPLES=I.blurSamples,A.needsUpdate=!0,S.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Fo(a.x,a.y)),A.uniforms.shadow_pass.value=I.map.texture,A.uniforms.resolution.value=I.mapSize,A.uniforms.radius.value=I.radius,r.setRenderTarget(I.mapPass),r.clear(),r.renderBufferDirect(F,null,k,A,R,null),S.uniforms.shadow_pass.value=I.mapPass.texture,S.uniforms.resolution.value=I.mapSize,S.uniforms.radius.value=I.radius,r.setRenderTarget(I.map),r.clear(),r.renderBufferDirect(F,null,k,S,R,null)}function U(I,F,k,L){let N=null;const J=k.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(J!==void 0)N=J;else if(N=k.isPointLight===!0?d:h,r.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0||F.alphaToCoverage===!0){const ct=N.uuid,at=F.uuid;let pt=m[ct];pt===void 0&&(pt={},m[ct]=pt);let ut=pt[at];ut===void 0&&(ut=N.clone(),pt[at]=ut,F.addEventListener("dispose",P)),N=ut}if(N.visible=F.visible,N.wireframe=F.wireframe,L===Yr?N.side=F.shadowSide!==null?F.shadowSide:F.side:N.side=F.shadowSide!==null?F.shadowSide:y[F.side],N.alphaMap=F.alphaMap,N.alphaTest=F.alphaToCoverage===!0?.5:F.alphaTest,N.map=F.map,N.clipShadows=F.clipShadows,N.clippingPlanes=F.clippingPlanes,N.clipIntersection=F.clipIntersection,N.displacementMap=F.displacementMap,N.displacementScale=F.displacementScale,N.displacementBias=F.displacementBias,N.wireframeLinewidth=F.wireframeLinewidth,N.linewidth=F.linewidth,k.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const ct=r.properties.get(N);ct.light=k}return N}function D(I,F,k,L,N){if(I.visible===!1)return;if(I.layers.test(F.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&N===Yr)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(k.matrixWorldInverse,I.matrixWorld);const at=t.update(I),pt=I.material;if(Array.isArray(pt)){const ut=at.groups;for(let H=0,W=ut.length;H<W;H++){const j=ut[H],lt=pt[j.materialIndex];if(lt&&lt.visible){const X=U(I,lt,L,N);I.onBeforeShadow(r,I,F,k,at,X,j),r.renderBufferDirect(k,null,at,X,I,j),I.onAfterShadow(r,I,F,k,at,X,j)}}}else if(pt.visible){const ut=U(I,pt,L,N);I.onBeforeShadow(r,I,F,k,at,ut,null),r.renderBufferDirect(k,null,at,ut,I,null),I.onAfterShadow(r,I,F,k,at,ut,null)}}const ct=I.children;for(let at=0,pt=ct.length;at<pt;at++)D(ct[at],F,k,L,N)}function P(I){I.target.removeEventListener("dispose",P);for(const k in m){const L=m[k],N=I.target.uuid;N in L&&(L[N].dispose(),delete L[N])}}}const AN={[ov]:lv,[cv]:hv,[uv]:dv,[cf]:fv,[lv]:ov,[hv]:cv,[dv]:uv,[fv]:cf};function xN(r,t){function e(){let $=!1;const jt=new Mn;let zt=null;const ae=new Mn(0,0,0,0);return{setMask:function(Kt){zt!==Kt&&!$&&(r.colorMask(Kt,Kt,Kt,Kt),zt=Kt)},setLocked:function(Kt){$=Kt},setClear:function(Kt,It,le,Me,nn){nn===!0&&(Kt*=Me,It*=Me,le*=Me),jt.set(Kt,It,le,Me),ae.equals(jt)===!1&&(r.clearColor(Kt,It,le,Me),ae.copy(jt))},reset:function(){$=!1,zt=null,ae.set(-1,0,0,0)}}}function n(){let $=!1,jt=!1,zt=null,ae=null,Kt=null;return{setReversed:function(It){if(jt!==It){const le=t.get("EXT_clip_control");It?le.clipControlEXT(le.LOWER_LEFT_EXT,le.ZERO_TO_ONE_EXT):le.clipControlEXT(le.LOWER_LEFT_EXT,le.NEGATIVE_ONE_TO_ONE_EXT),jt=It;const Me=Kt;Kt=null,this.setClear(Me)}},getReversed:function(){return jt},setTest:function(It){It?Qt(r.DEPTH_TEST):qt(r.DEPTH_TEST)},setMask:function(It){zt!==It&&!$&&(r.depthMask(It),zt=It)},setFunc:function(It){if(jt&&(It=AN[It]),ae!==It){switch(It){case ov:r.depthFunc(r.NEVER);break;case lv:r.depthFunc(r.ALWAYS);break;case cv:r.depthFunc(r.LESS);break;case cf:r.depthFunc(r.LEQUAL);break;case uv:r.depthFunc(r.EQUAL);break;case fv:r.depthFunc(r.GEQUAL);break;case hv:r.depthFunc(r.GREATER);break;case dv:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}ae=It}},setLocked:function(It){$=It},setClear:function(It){Kt!==It&&(jt&&(It=1-It),r.clearDepth(It),Kt=It)},reset:function(){$=!1,zt=null,ae=null,Kt=null,jt=!1}}}function a(){let $=!1,jt=null,zt=null,ae=null,Kt=null,It=null,le=null,Me=null,nn=null;return{setTest:function(je){$||(je?Qt(r.STENCIL_TEST):qt(r.STENCIL_TEST))},setMask:function(je){jt!==je&&!$&&(r.stencilMask(je),jt=je)},setFunc:function(je,di,Kn){(zt!==je||ae!==di||Kt!==Kn)&&(r.stencilFunc(je,di,Kn),zt=je,ae=di,Kt=Kn)},setOp:function(je,di,Kn){(It!==je||le!==di||Me!==Kn)&&(r.stencilOp(je,di,Kn),It=je,le=di,Me=Kn)},setLocked:function(je){$=je},setClear:function(je){nn!==je&&(r.clearStencil(je),nn=je)},reset:function(){$=!1,jt=null,zt=null,ae=null,Kt=null,It=null,le=null,Me=null,nn=null}}}const o=new e,u=new n,h=new a,d=new WeakMap,m=new WeakMap;let v={},y={},A=new WeakMap,S=[],E=null,R=!1,C=null,M=null,w=null,U=null,D=null,P=null,I=null,F=new oe(0,0,0),k=0,L=!1,N=null,J=null,ct=null,at=null,pt=null;const ut=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let H=!1,W=0;const j=r.getParameter(r.VERSION);j.indexOf("WebGL")!==-1?(W=parseFloat(/^WebGL (\d)/.exec(j)[1]),H=W>=1):j.indexOf("OpenGL ES")!==-1&&(W=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),H=W>=2);let lt=null,X={};const nt=r.getParameter(r.SCISSOR_BOX),_t=r.getParameter(r.VIEWPORT),Tt=new Mn().fromArray(nt),it=new Mn().fromArray(_t);function Ct($,jt,zt,ae){const Kt=new Uint8Array(4),It=r.createTexture();r.bindTexture($,It),r.texParameteri($,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri($,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let le=0;le<zt;le++)$===r.TEXTURE_3D||$===r.TEXTURE_2D_ARRAY?r.texImage3D(jt,0,r.RGBA,1,1,ae,0,r.RGBA,r.UNSIGNED_BYTE,Kt):r.texImage2D(jt+le,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Kt);return It}const Ht={};Ht[r.TEXTURE_2D]=Ct(r.TEXTURE_2D,r.TEXTURE_2D,1),Ht[r.TEXTURE_CUBE_MAP]=Ct(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ht[r.TEXTURE_2D_ARRAY]=Ct(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),Ht[r.TEXTURE_3D]=Ct(r.TEXTURE_3D,r.TEXTURE_3D,1,1),o.setClear(0,0,0,1),u.setClear(1),h.setClear(0),Qt(r.DEPTH_TEST),u.setFunc(cf),Xt(!1),Gt(NA),Qt(r.CULL_FACE),K(Ml);function Qt($){v[$]!==!0&&(r.enable($),v[$]=!0)}function qt($){v[$]!==!1&&(r.disable($),v[$]=!1)}function Ee($,jt){return y[$]!==jt?(r.bindFramebuffer($,jt),y[$]=jt,$===r.DRAW_FRAMEBUFFER&&(y[r.FRAMEBUFFER]=jt),$===r.FRAMEBUFFER&&(y[r.DRAW_FRAMEBUFFER]=jt),!0):!1}function fe($,jt){let zt=S,ae=!1;if($){zt=A.get(jt),zt===void 0&&(zt=[],A.set(jt,zt));const Kt=$.textures;if(zt.length!==Kt.length||zt[0]!==r.COLOR_ATTACHMENT0){for(let It=0,le=Kt.length;It<le;It++)zt[It]=r.COLOR_ATTACHMENT0+It;zt.length=Kt.length,ae=!0}}else zt[0]!==r.BACK&&(zt[0]=r.BACK,ae=!0);ae&&r.drawBuffers(zt)}function _e($){return E!==$?(r.useProgram($),E=$,!0):!1}const De={[wc]:r.FUNC_ADD,[cE]:r.FUNC_SUBTRACT,[uE]:r.FUNC_REVERSE_SUBTRACT};De[fE]=r.MIN,De[hE]=r.MAX;const Ae={[dE]:r.ZERO,[pE]:r.ONE,[mE]:r.SRC_COLOR,[sv]:r.SRC_ALPHA,[xE]:r.SRC_ALPHA_SATURATE,[_E]:r.DST_COLOR,[vE]:r.DST_ALPHA,[gE]:r.ONE_MINUS_SRC_COLOR,[rv]:r.ONE_MINUS_SRC_ALPHA,[AE]:r.ONE_MINUS_DST_COLOR,[yE]:r.ONE_MINUS_DST_ALPHA,[SE]:r.CONSTANT_COLOR,[ME]:r.ONE_MINUS_CONSTANT_COLOR,[bE]:r.CONSTANT_ALPHA,[EE]:r.ONE_MINUS_CONSTANT_ALPHA};function K($,jt,zt,ae,Kt,It,le,Me,nn,je){if($===Ml){R===!0&&(qt(r.BLEND),R=!1);return}if(R===!1&&(Qt(r.BLEND),R=!0),$!==lE){if($!==C||je!==L){if((M!==wc||D!==wc)&&(r.blendEquation(r.FUNC_ADD),M=wc,D=wc),je)switch($){case rf:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case OA:r.blendFunc(r.ONE,r.ONE);break;case LA:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case IA:r.blendFuncSeparate(r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ZERO,r.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case rf:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case OA:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE,r.ONE,r.ONE);break;case LA:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case IA:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}w=null,U=null,P=null,I=null,F.set(0,0,0),k=0,C=$,L=je}return}Kt=Kt||jt,It=It||zt,le=le||ae,(jt!==M||Kt!==D)&&(r.blendEquationSeparate(De[jt],De[Kt]),M=jt,D=Kt),(zt!==w||ae!==U||It!==P||le!==I)&&(r.blendFuncSeparate(Ae[zt],Ae[ae],Ae[It],Ae[le]),w=zt,U=ae,P=It,I=le),(Me.equals(F)===!1||nn!==k)&&(r.blendColor(Me.r,Me.g,Me.b,nn),F.copy(Me),k=nn),C=$,L=!1}function Wt($,jt){$.side===va?qt(r.CULL_FACE):Qt(r.CULL_FACE);let zt=$.side===Na;jt&&(zt=!zt),Xt(zt),$.blending===rf&&$.transparent===!1?K(Ml):K($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),u.setFunc($.depthFunc),u.setTest($.depthTest),u.setMask($.depthWrite),o.setMask($.colorWrite);const ae=$.stencilWrite;h.setTest(ae),ae&&(h.setMask($.stencilWriteMask),h.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),h.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),se($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?Qt(r.SAMPLE_ALPHA_TO_COVERAGE):qt(r.SAMPLE_ALPHA_TO_COVERAGE)}function Xt($){N!==$&&($?r.frontFace(r.CW):r.frontFace(r.CCW),N=$)}function Gt($){$!==sE?(Qt(r.CULL_FACE),$!==J&&($===NA?r.cullFace(r.BACK):$===rE?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):qt(r.CULL_FACE),J=$}function Dt($){$!==ct&&(H&&r.lineWidth($),ct=$)}function se($,jt,zt){$?(Qt(r.POLYGON_OFFSET_FILL),(at!==jt||pt!==zt)&&(r.polygonOffset(jt,zt),at=jt,pt=zt)):qt(r.POLYGON_OFFSET_FILL)}function Vt($){$?Qt(r.SCISSOR_TEST):qt(r.SCISSOR_TEST)}function ie($){$===void 0&&($=r.TEXTURE0+ut-1),lt!==$&&(r.activeTexture($),lt=$)}function Oe($,jt,zt){zt===void 0&&(lt===null?zt=r.TEXTURE0+ut-1:zt=lt);let ae=X[zt];ae===void 0&&(ae={type:void 0,texture:void 0},X[zt]=ae),(ae.type!==$||ae.texture!==jt)&&(lt!==zt&&(r.activeTexture(zt),lt=zt),r.bindTexture($,jt||Ht[$]),ae.type=$,ae.texture=jt)}function Q(){const $=X[lt];$!==void 0&&$.type!==void 0&&(r.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function z(){try{r.compressedTexImage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function mt(){try{r.compressedTexImage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Rt(){try{r.texSubImage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function wt(){try{r.texSubImage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Bt(){try{r.compressedTexSubImage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function re(){try{r.compressedTexSubImage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function te(){try{r.texStorage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ge(){try{r.texStorage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ve(){try{r.texImage2D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Lt(){try{r.texImage3D(...arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ee($){Tt.equals($)===!1&&(r.scissor($.x,$.y,$.z,$.w),Tt.copy($))}function ye($){it.equals($)===!1&&(r.viewport($.x,$.y,$.z,$.w),it.copy($))}function et($,jt){let zt=m.get(jt);zt===void 0&&(zt=new WeakMap,m.set(jt,zt));let ae=zt.get($);ae===void 0&&(ae=r.getUniformBlockIndex(jt,$.name),zt.set($,ae))}function gt($,jt){const ae=m.get(jt).get($);d.get(jt)!==ae&&(r.uniformBlockBinding(jt,ae,$.__bindingPointIndex),d.set(jt,ae))}function Jt(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),u.setReversed(!1),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),v={},lt=null,X={},y={},A=new WeakMap,S=[],E=null,R=!1,C=null,M=null,w=null,U=null,D=null,P=null,I=null,F=new oe(0,0,0),k=0,L=!1,N=null,J=null,ct=null,at=null,pt=null,Tt.set(0,0,r.canvas.width,r.canvas.height),it.set(0,0,r.canvas.width,r.canvas.height),o.reset(),u.reset(),h.reset()}return{buffers:{color:o,depth:u,stencil:h},enable:Qt,disable:qt,bindFramebuffer:Ee,drawBuffers:fe,useProgram:_e,setBlending:K,setMaterial:Wt,setFlipSided:Xt,setCullFace:Gt,setLineWidth:Dt,setPolygonOffset:se,setScissorTest:Vt,activeTexture:ie,bindTexture:Oe,unbindTexture:Q,compressedTexImage2D:z,compressedTexImage3D:mt,texImage2D:ve,texImage3D:Lt,updateUBOMapping:et,uniformBlockBinding:gt,texStorage2D:te,texStorage3D:ge,texSubImage2D:Rt,texSubImage3D:wt,compressedTexSubImage2D:Bt,compressedTexSubImage3D:re,scissor:ee,viewport:ye,reset:Jt}}function SN(r,t,e,n,a,o,u){const h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new Ot,v=new WeakMap;let y;const A=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(Q,z){return S?new OffscreenCanvas(Q,z):dm("canvas")}function R(Q,z,mt){let Rt=1;const wt=Oe(Q);if((wt.width>mt||wt.height>mt)&&(Rt=mt/Math.max(wt.width,wt.height)),Rt<1)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const Bt=Math.floor(Rt*wt.width),re=Math.floor(Rt*wt.height);y===void 0&&(y=E(Bt,re));const te=z?E(Bt,re):y;return te.width=Bt,te.height=re,te.getContext("2d").drawImage(Q,0,0,Bt,re),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+wt.width+"x"+wt.height+") to ("+Bt+"x"+re+")."),te}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+wt.width+"x"+wt.height+")."),Q;return Q}function C(Q){return Q.generateMipmaps}function M(Q){r.generateMipmap(Q)}function w(Q){return Q.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?r.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?r.TEXTURE_2D_ARRAY:r.TEXTURE_2D}function U(Q,z,mt,Rt,wt=!1){if(Q!==null){if(r[Q]!==void 0)return r[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let Bt=z;if(z===r.RED&&(mt===r.FLOAT&&(Bt=r.R32F),mt===r.HALF_FLOAT&&(Bt=r.R16F),mt===r.UNSIGNED_BYTE&&(Bt=r.R8)),z===r.RED_INTEGER&&(mt===r.UNSIGNED_BYTE&&(Bt=r.R8UI),mt===r.UNSIGNED_SHORT&&(Bt=r.R16UI),mt===r.UNSIGNED_INT&&(Bt=r.R32UI),mt===r.BYTE&&(Bt=r.R8I),mt===r.SHORT&&(Bt=r.R16I),mt===r.INT&&(Bt=r.R32I)),z===r.RG&&(mt===r.FLOAT&&(Bt=r.RG32F),mt===r.HALF_FLOAT&&(Bt=r.RG16F),mt===r.UNSIGNED_BYTE&&(Bt=r.RG8)),z===r.RG_INTEGER&&(mt===r.UNSIGNED_BYTE&&(Bt=r.RG8UI),mt===r.UNSIGNED_SHORT&&(Bt=r.RG16UI),mt===r.UNSIGNED_INT&&(Bt=r.RG32UI),mt===r.BYTE&&(Bt=r.RG8I),mt===r.SHORT&&(Bt=r.RG16I),mt===r.INT&&(Bt=r.RG32I)),z===r.RGB_INTEGER&&(mt===r.UNSIGNED_BYTE&&(Bt=r.RGB8UI),mt===r.UNSIGNED_SHORT&&(Bt=r.RGB16UI),mt===r.UNSIGNED_INT&&(Bt=r.RGB32UI),mt===r.BYTE&&(Bt=r.RGB8I),mt===r.SHORT&&(Bt=r.RGB16I),mt===r.INT&&(Bt=r.RGB32I)),z===r.RGBA_INTEGER&&(mt===r.UNSIGNED_BYTE&&(Bt=r.RGBA8UI),mt===r.UNSIGNED_SHORT&&(Bt=r.RGBA16UI),mt===r.UNSIGNED_INT&&(Bt=r.RGBA32UI),mt===r.BYTE&&(Bt=r.RGBA8I),mt===r.SHORT&&(Bt=r.RGBA16I),mt===r.INT&&(Bt=r.RGBA32I)),z===r.RGB&&mt===r.UNSIGNED_INT_5_9_9_9_REV&&(Bt=r.RGB9_E5),z===r.RGBA){const re=wt?um:gn.getTransfer(Rt);mt===r.FLOAT&&(Bt=r.RGBA32F),mt===r.HALF_FLOAT&&(Bt=r.RGBA16F),mt===r.UNSIGNED_BYTE&&(Bt=re===zn?r.SRGB8_ALPHA8:r.RGBA8),mt===r.UNSIGNED_SHORT_4_4_4_4&&(Bt=r.RGBA4),mt===r.UNSIGNED_SHORT_5_5_5_1&&(Bt=r.RGB5_A1)}return(Bt===r.R16F||Bt===r.R32F||Bt===r.RG16F||Bt===r.RG32F||Bt===r.RGBA16F||Bt===r.RGBA32F)&&t.get("EXT_color_buffer_float"),Bt}function D(Q,z){let mt;return Q?z===null||z===Cl||z===td?mt=r.DEPTH24_STENCIL8:z===ys?mt=r.DEPTH32F_STENCIL8:z===$h&&(mt=r.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):z===null||z===Cl||z===td?mt=r.DEPTH_COMPONENT24:z===ys?mt=r.DEPTH_COMPONENT32F:z===$h&&(mt=r.DEPTH_COMPONENT16),mt}function P(Q,z){return C(Q)===!0||Q.isFramebufferTexture&&Q.minFilter!==aa&&Q.minFilter!==hi?Math.log2(Math.max(z.width,z.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?z.mipmaps.length:1}function I(Q){const z=Q.target;z.removeEventListener("dispose",I),k(z),z.isVideoTexture&&v.delete(z)}function F(Q){const z=Q.target;z.removeEventListener("dispose",F),N(z)}function k(Q){const z=n.get(Q);if(z.__webglInit===void 0)return;const mt=Q.source,Rt=A.get(mt);if(Rt){const wt=Rt[z.__cacheKey];wt.usedTimes--,wt.usedTimes===0&&L(Q),Object.keys(Rt).length===0&&A.delete(mt)}n.remove(Q)}function L(Q){const z=n.get(Q);r.deleteTexture(z.__webglTexture);const mt=Q.source,Rt=A.get(mt);delete Rt[z.__cacheKey],u.memory.textures--}function N(Q){const z=n.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),n.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let Rt=0;Rt<6;Rt++){if(Array.isArray(z.__webglFramebuffer[Rt]))for(let wt=0;wt<z.__webglFramebuffer[Rt].length;wt++)r.deleteFramebuffer(z.__webglFramebuffer[Rt][wt]);else r.deleteFramebuffer(z.__webglFramebuffer[Rt]);z.__webglDepthbuffer&&r.deleteRenderbuffer(z.__webglDepthbuffer[Rt])}else{if(Array.isArray(z.__webglFramebuffer))for(let Rt=0;Rt<z.__webglFramebuffer.length;Rt++)r.deleteFramebuffer(z.__webglFramebuffer[Rt]);else r.deleteFramebuffer(z.__webglFramebuffer);if(z.__webglDepthbuffer&&r.deleteRenderbuffer(z.__webglDepthbuffer),z.__webglMultisampledFramebuffer&&r.deleteFramebuffer(z.__webglMultisampledFramebuffer),z.__webglColorRenderbuffer)for(let Rt=0;Rt<z.__webglColorRenderbuffer.length;Rt++)z.__webglColorRenderbuffer[Rt]&&r.deleteRenderbuffer(z.__webglColorRenderbuffer[Rt]);z.__webglDepthRenderbuffer&&r.deleteRenderbuffer(z.__webglDepthRenderbuffer)}const mt=Q.textures;for(let Rt=0,wt=mt.length;Rt<wt;Rt++){const Bt=n.get(mt[Rt]);Bt.__webglTexture&&(r.deleteTexture(Bt.__webglTexture),u.memory.textures--),n.remove(mt[Rt])}n.remove(Q)}let J=0;function ct(){J=0}function at(){const Q=J;return Q>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+a.maxTextures),J+=1,Q}function pt(Q){const z=[];return z.push(Q.wrapS),z.push(Q.wrapT),z.push(Q.wrapR||0),z.push(Q.magFilter),z.push(Q.minFilter),z.push(Q.anisotropy),z.push(Q.internalFormat),z.push(Q.format),z.push(Q.type),z.push(Q.generateMipmaps),z.push(Q.premultiplyAlpha),z.push(Q.flipY),z.push(Q.unpackAlignment),z.push(Q.colorSpace),z.join()}function ut(Q,z){const mt=n.get(Q);if(Q.isVideoTexture&&Vt(Q),Q.isRenderTargetTexture===!1&&Q.version>0&&mt.__version!==Q.version){const Rt=Q.image;if(Rt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Rt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ht(mt,Q,z);return}}e.bindTexture(r.TEXTURE_2D,mt.__webglTexture,r.TEXTURE0+z)}function H(Q,z){const mt=n.get(Q);if(Q.version>0&&mt.__version!==Q.version){Ht(mt,Q,z);return}e.bindTexture(r.TEXTURE_2D_ARRAY,mt.__webglTexture,r.TEXTURE0+z)}function W(Q,z){const mt=n.get(Q);if(Q.version>0&&mt.__version!==Q.version){Ht(mt,Q,z);return}e.bindTexture(r.TEXTURE_3D,mt.__webglTexture,r.TEXTURE0+z)}function j(Q,z){const mt=n.get(Q);if(Q.version>0&&mt.__version!==Q.version){Qt(mt,Q,z);return}e.bindTexture(r.TEXTURE_CUBE_MAP,mt.__webglTexture,r.TEXTURE0+z)}const lt={[Jr]:r.REPEAT,[zs]:r.CLAMP_TO_EDGE,[Zh]:r.MIRRORED_REPEAT},X={[aa]:r.NEAREST,[$v]:r.NEAREST_MIPMAP_NEAREST,[$u]:r.NEAREST_MIPMAP_LINEAR,[hi]:r.LINEAR,[Kh]:r.LINEAR_MIPMAP_NEAREST,[fr]:r.LINEAR_MIPMAP_LINEAR},nt={[YE]:r.NEVER,[WE]:r.ALWAYS,[kE]:r.LESS,[mx]:r.LEQUAL,[qE]:r.EQUAL,[jE]:r.GEQUAL,[JE]:r.GREATER,[KE]:r.NOTEQUAL};function _t(Q,z){if(z.type===ys&&t.has("OES_texture_float_linear")===!1&&(z.magFilter===hi||z.magFilter===Kh||z.magFilter===$u||z.magFilter===fr||z.minFilter===hi||z.minFilter===Kh||z.minFilter===$u||z.minFilter===fr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),r.texParameteri(Q,r.TEXTURE_WRAP_S,lt[z.wrapS]),r.texParameteri(Q,r.TEXTURE_WRAP_T,lt[z.wrapT]),(Q===r.TEXTURE_3D||Q===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Q,r.TEXTURE_WRAP_R,lt[z.wrapR]),r.texParameteri(Q,r.TEXTURE_MAG_FILTER,X[z.magFilter]),r.texParameteri(Q,r.TEXTURE_MIN_FILTER,X[z.minFilter]),z.compareFunction&&(r.texParameteri(Q,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(Q,r.TEXTURE_COMPARE_FUNC,nt[z.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(z.magFilter===aa||z.minFilter!==$u&&z.minFilter!==fr||z.type===ys&&t.has("OES_texture_float_linear")===!1)return;if(z.anisotropy>1||n.get(z).__currentAnisotropy){const mt=t.get("EXT_texture_filter_anisotropic");r.texParameterf(Q,mt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,a.getMaxAnisotropy())),n.get(z).__currentAnisotropy=z.anisotropy}}}function Tt(Q,z){let mt=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,z.addEventListener("dispose",I));const Rt=z.source;let wt=A.get(Rt);wt===void 0&&(wt={},A.set(Rt,wt));const Bt=pt(z);if(Bt!==Q.__cacheKey){wt[Bt]===void 0&&(wt[Bt]={texture:r.createTexture(),usedTimes:0},u.memory.textures++,mt=!0),wt[Bt].usedTimes++;const re=wt[Q.__cacheKey];re!==void 0&&(wt[Q.__cacheKey].usedTimes--,re.usedTimes===0&&L(z)),Q.__cacheKey=Bt,Q.__webglTexture=wt[Bt].texture}return mt}function it(Q,z,mt){return Math.floor(Math.floor(Q/mt)/z)}function Ct(Q,z,mt,Rt){const Bt=Q.updateRanges;if(Bt.length===0)e.texSubImage2D(r.TEXTURE_2D,0,0,0,z.width,z.height,mt,Rt,z.data);else{Bt.sort((Lt,ee)=>Lt.start-ee.start);let re=0;for(let Lt=1;Lt<Bt.length;Lt++){const ee=Bt[re],ye=Bt[Lt],et=ee.start+ee.count,gt=it(ye.start,z.width,4),Jt=it(ee.start,z.width,4);ye.start<=et+1&&gt===Jt&&it(ye.start+ye.count-1,z.width,4)===gt?ee.count=Math.max(ee.count,ye.start+ye.count-ee.start):(++re,Bt[re]=ye)}Bt.length=re+1;const te=r.getParameter(r.UNPACK_ROW_LENGTH),ge=r.getParameter(r.UNPACK_SKIP_PIXELS),ve=r.getParameter(r.UNPACK_SKIP_ROWS);r.pixelStorei(r.UNPACK_ROW_LENGTH,z.width);for(let Lt=0,ee=Bt.length;Lt<ee;Lt++){const ye=Bt[Lt],et=Math.floor(ye.start/4),gt=Math.ceil(ye.count/4),Jt=et%z.width,$=Math.floor(et/z.width),jt=gt,zt=1;r.pixelStorei(r.UNPACK_SKIP_PIXELS,Jt),r.pixelStorei(r.UNPACK_SKIP_ROWS,$),e.texSubImage2D(r.TEXTURE_2D,0,Jt,$,jt,zt,mt,Rt,z.data)}Q.clearUpdateRanges(),r.pixelStorei(r.UNPACK_ROW_LENGTH,te),r.pixelStorei(r.UNPACK_SKIP_PIXELS,ge),r.pixelStorei(r.UNPACK_SKIP_ROWS,ve)}}function Ht(Q,z,mt){let Rt=r.TEXTURE_2D;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(Rt=r.TEXTURE_2D_ARRAY),z.isData3DTexture&&(Rt=r.TEXTURE_3D);const wt=Tt(Q,z),Bt=z.source;e.bindTexture(Rt,Q.__webglTexture,r.TEXTURE0+mt);const re=n.get(Bt);if(Bt.version!==re.__version||wt===!0){e.activeTexture(r.TEXTURE0+mt);const te=gn.getPrimaries(gn.workingColorSpace),ge=z.colorSpace===Al?null:gn.getPrimaries(z.colorSpace),ve=z.colorSpace===Al||te===ge?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,z.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,z.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ve);let Lt=R(z.image,!1,a.maxTextureSize);Lt=ie(z,Lt);const ee=o.convert(z.format,z.colorSpace),ye=o.convert(z.type);let et=U(z.internalFormat,ee,ye,z.colorSpace,z.isVideoTexture);_t(Rt,z);let gt;const Jt=z.mipmaps,$=z.isVideoTexture!==!0,jt=re.__version===void 0||wt===!0,zt=Bt.dataReady,ae=P(z,Lt);if(z.isDepthTexture)et=D(z.format===nd,z.type),jt&&($?e.texStorage2D(r.TEXTURE_2D,1,et,Lt.width,Lt.height):e.texImage2D(r.TEXTURE_2D,0,et,Lt.width,Lt.height,0,ee,ye,null));else if(z.isDataTexture)if(Jt.length>0){$&&jt&&e.texStorage2D(r.TEXTURE_2D,ae,et,Jt[0].width,Jt[0].height);for(let Kt=0,It=Jt.length;Kt<It;Kt++)gt=Jt[Kt],$?zt&&e.texSubImage2D(r.TEXTURE_2D,Kt,0,0,gt.width,gt.height,ee,ye,gt.data):e.texImage2D(r.TEXTURE_2D,Kt,et,gt.width,gt.height,0,ee,ye,gt.data);z.generateMipmaps=!1}else $?(jt&&e.texStorage2D(r.TEXTURE_2D,ae,et,Lt.width,Lt.height),zt&&Ct(z,Lt,ee,ye)):e.texImage2D(r.TEXTURE_2D,0,et,Lt.width,Lt.height,0,ee,ye,Lt.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){$&&jt&&e.texStorage3D(r.TEXTURE_2D_ARRAY,ae,et,Jt[0].width,Jt[0].height,Lt.depth);for(let Kt=0,It=Jt.length;Kt<It;Kt++)if(gt=Jt[Kt],z.format!==Ua)if(ee!==null)if($){if(zt)if(z.layerUpdates.size>0){const le=qA(gt.width,gt.height,z.format,z.type);for(const Me of z.layerUpdates){const nn=gt.data.subarray(Me*le/gt.data.BYTES_PER_ELEMENT,(Me+1)*le/gt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Kt,0,0,Me,gt.width,gt.height,1,ee,nn)}z.clearLayerUpdates()}else e.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Kt,0,0,0,gt.width,gt.height,Lt.depth,ee,gt.data)}else e.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Kt,et,gt.width,gt.height,Lt.depth,0,gt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $?zt&&e.texSubImage3D(r.TEXTURE_2D_ARRAY,Kt,0,0,0,gt.width,gt.height,Lt.depth,ee,ye,gt.data):e.texImage3D(r.TEXTURE_2D_ARRAY,Kt,et,gt.width,gt.height,Lt.depth,0,ee,ye,gt.data)}else{$&&jt&&e.texStorage2D(r.TEXTURE_2D,ae,et,Jt[0].width,Jt[0].height);for(let Kt=0,It=Jt.length;Kt<It;Kt++)gt=Jt[Kt],z.format!==Ua?ee!==null?$?zt&&e.compressedTexSubImage2D(r.TEXTURE_2D,Kt,0,0,gt.width,gt.height,ee,gt.data):e.compressedTexImage2D(r.TEXTURE_2D,Kt,et,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$?zt&&e.texSubImage2D(r.TEXTURE_2D,Kt,0,0,gt.width,gt.height,ee,ye,gt.data):e.texImage2D(r.TEXTURE_2D,Kt,et,gt.width,gt.height,0,ee,ye,gt.data)}else if(z.isDataArrayTexture)if($){if(jt&&e.texStorage3D(r.TEXTURE_2D_ARRAY,ae,et,Lt.width,Lt.height,Lt.depth),zt)if(z.layerUpdates.size>0){const Kt=qA(Lt.width,Lt.height,z.format,z.type);for(const It of z.layerUpdates){const le=Lt.data.subarray(It*Kt/Lt.data.BYTES_PER_ELEMENT,(It+1)*Kt/Lt.data.BYTES_PER_ELEMENT);e.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,It,Lt.width,Lt.height,1,ee,ye,le)}z.clearLayerUpdates()}else e.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Lt.width,Lt.height,Lt.depth,ee,ye,Lt.data)}else e.texImage3D(r.TEXTURE_2D_ARRAY,0,et,Lt.width,Lt.height,Lt.depth,0,ee,ye,Lt.data);else if(z.isData3DTexture)$?(jt&&e.texStorage3D(r.TEXTURE_3D,ae,et,Lt.width,Lt.height,Lt.depth),zt&&e.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Lt.width,Lt.height,Lt.depth,ee,ye,Lt.data)):e.texImage3D(r.TEXTURE_3D,0,et,Lt.width,Lt.height,Lt.depth,0,ee,ye,Lt.data);else if(z.isFramebufferTexture){if(jt)if($)e.texStorage2D(r.TEXTURE_2D,ae,et,Lt.width,Lt.height);else{let Kt=Lt.width,It=Lt.height;for(let le=0;le<ae;le++)e.texImage2D(r.TEXTURE_2D,le,et,Kt,It,0,ee,ye,null),Kt>>=1,It>>=1}}else if(Jt.length>0){if($&&jt){const Kt=Oe(Jt[0]);e.texStorage2D(r.TEXTURE_2D,ae,et,Kt.width,Kt.height)}for(let Kt=0,It=Jt.length;Kt<It;Kt++)gt=Jt[Kt],$?zt&&e.texSubImage2D(r.TEXTURE_2D,Kt,0,0,ee,ye,gt):e.texImage2D(r.TEXTURE_2D,Kt,et,ee,ye,gt);z.generateMipmaps=!1}else if($){if(jt){const Kt=Oe(Lt);e.texStorage2D(r.TEXTURE_2D,ae,et,Kt.width,Kt.height)}zt&&e.texSubImage2D(r.TEXTURE_2D,0,0,0,ee,ye,Lt)}else e.texImage2D(r.TEXTURE_2D,0,et,ee,ye,Lt);C(z)&&M(Rt),re.__version=Bt.version,z.onUpdate&&z.onUpdate(z)}Q.__version=z.version}function Qt(Q,z,mt){if(z.image.length!==6)return;const Rt=Tt(Q,z),wt=z.source;e.bindTexture(r.TEXTURE_CUBE_MAP,Q.__webglTexture,r.TEXTURE0+mt);const Bt=n.get(wt);if(wt.version!==Bt.__version||Rt===!0){e.activeTexture(r.TEXTURE0+mt);const re=gn.getPrimaries(gn.workingColorSpace),te=z.colorSpace===Al?null:gn.getPrimaries(z.colorSpace),ge=z.colorSpace===Al||re===te?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,z.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,z.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ge);const ve=z.isCompressedTexture||z.image[0].isCompressedTexture,Lt=z.image[0]&&z.image[0].isDataTexture,ee=[];for(let It=0;It<6;It++)!ve&&!Lt?ee[It]=R(z.image[It],!0,a.maxCubemapSize):ee[It]=Lt?z.image[It].image:z.image[It],ee[It]=ie(z,ee[It]);const ye=ee[0],et=o.convert(z.format,z.colorSpace),gt=o.convert(z.type),Jt=U(z.internalFormat,et,gt,z.colorSpace),$=z.isVideoTexture!==!0,jt=Bt.__version===void 0||Rt===!0,zt=wt.dataReady;let ae=P(z,ye);_t(r.TEXTURE_CUBE_MAP,z);let Kt;if(ve){$&&jt&&e.texStorage2D(r.TEXTURE_CUBE_MAP,ae,Jt,ye.width,ye.height);for(let It=0;It<6;It++){Kt=ee[It].mipmaps;for(let le=0;le<Kt.length;le++){const Me=Kt[le];z.format!==Ua?et!==null?$?zt&&e.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,le,0,0,Me.width,Me.height,et,Me.data):e.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,le,Jt,Me.width,Me.height,0,Me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$?zt&&e.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,le,0,0,Me.width,Me.height,et,gt,Me.data):e.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,le,Jt,Me.width,Me.height,0,et,gt,Me.data)}}}else{if(Kt=z.mipmaps,$&&jt){Kt.length>0&&ae++;const It=Oe(ee[0]);e.texStorage2D(r.TEXTURE_CUBE_MAP,ae,Jt,It.width,It.height)}for(let It=0;It<6;It++)if(Lt){$?zt&&e.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,0,0,0,ee[It].width,ee[It].height,et,gt,ee[It].data):e.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,0,Jt,ee[It].width,ee[It].height,0,et,gt,ee[It].data);for(let le=0;le<Kt.length;le++){const nn=Kt[le].image[It].image;$?zt&&e.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,le+1,0,0,nn.width,nn.height,et,gt,nn.data):e.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,le+1,Jt,nn.width,nn.height,0,et,gt,nn.data)}}else{$?zt&&e.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,0,0,0,et,gt,ee[It]):e.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,0,Jt,et,gt,ee[It]);for(let le=0;le<Kt.length;le++){const Me=Kt[le];$?zt&&e.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,le+1,0,0,et,gt,Me.image[It]):e.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+It,le+1,Jt,et,gt,Me.image[It])}}}C(z)&&M(r.TEXTURE_CUBE_MAP),Bt.__version=wt.version,z.onUpdate&&z.onUpdate(z)}Q.__version=z.version}function qt(Q,z,mt,Rt,wt,Bt){const re=o.convert(mt.format,mt.colorSpace),te=o.convert(mt.type),ge=U(mt.internalFormat,re,te,mt.colorSpace),ve=n.get(z),Lt=n.get(mt);if(Lt.__renderTarget=z,!ve.__hasExternalTextures){const ee=Math.max(1,z.width>>Bt),ye=Math.max(1,z.height>>Bt);wt===r.TEXTURE_3D||wt===r.TEXTURE_2D_ARRAY?e.texImage3D(wt,Bt,ge,ee,ye,z.depth,0,re,te,null):e.texImage2D(wt,Bt,ge,ee,ye,0,re,te,null)}e.bindFramebuffer(r.FRAMEBUFFER,Q),se(z)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Rt,wt,Lt.__webglTexture,0,Dt(z)):(wt===r.TEXTURE_2D||wt>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&wt<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Rt,wt,Lt.__webglTexture,Bt),e.bindFramebuffer(r.FRAMEBUFFER,null)}function Ee(Q,z,mt){if(r.bindRenderbuffer(r.RENDERBUFFER,Q),z.depthBuffer){const Rt=z.depthTexture,wt=Rt&&Rt.isDepthTexture?Rt.type:null,Bt=D(z.stencilBuffer,wt),re=z.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,te=Dt(z);se(z)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,te,Bt,z.width,z.height):mt?r.renderbufferStorageMultisample(r.RENDERBUFFER,te,Bt,z.width,z.height):r.renderbufferStorage(r.RENDERBUFFER,Bt,z.width,z.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,re,r.RENDERBUFFER,Q)}else{const Rt=z.textures;for(let wt=0;wt<Rt.length;wt++){const Bt=Rt[wt],re=o.convert(Bt.format,Bt.colorSpace),te=o.convert(Bt.type),ge=U(Bt.internalFormat,re,te,Bt.colorSpace),ve=Dt(z);mt&&se(z)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,ve,ge,z.width,z.height):se(z)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,ve,ge,z.width,z.height):r.renderbufferStorage(r.RENDERBUFFER,ge,z.width,z.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function fe(Q,z){if(z&&z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(r.FRAMEBUFFER,Q),!(z.depthTexture&&z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Rt=n.get(z.depthTexture);Rt.__renderTarget=z,(!Rt.__webglTexture||z.depthTexture.image.width!==z.width||z.depthTexture.image.height!==z.height)&&(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0),ut(z.depthTexture,0);const wt=Rt.__webglTexture,Bt=Dt(z);if(z.depthTexture.format===ed)se(z)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,wt,0,Bt):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,wt,0);else if(z.depthTexture.format===nd)se(z)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,wt,0,Bt):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,wt,0);else throw new Error("Unknown depthTexture format")}function _e(Q){const z=n.get(Q),mt=Q.isWebGLCubeRenderTarget===!0;if(z.__boundDepthTexture!==Q.depthTexture){const Rt=Q.depthTexture;if(z.__depthDisposeCallback&&z.__depthDisposeCallback(),Rt){const wt=()=>{delete z.__boundDepthTexture,delete z.__depthDisposeCallback,Rt.removeEventListener("dispose",wt)};Rt.addEventListener("dispose",wt),z.__depthDisposeCallback=wt}z.__boundDepthTexture=Rt}if(Q.depthTexture&&!z.__autoAllocateDepthBuffer){if(mt)throw new Error("target.depthTexture not supported in Cube render targets");const Rt=Q.texture.mipmaps;Rt&&Rt.length>0?fe(z.__webglFramebuffer[0],Q):fe(z.__webglFramebuffer,Q)}else if(mt){z.__webglDepthbuffer=[];for(let Rt=0;Rt<6;Rt++)if(e.bindFramebuffer(r.FRAMEBUFFER,z.__webglFramebuffer[Rt]),z.__webglDepthbuffer[Rt]===void 0)z.__webglDepthbuffer[Rt]=r.createRenderbuffer(),Ee(z.__webglDepthbuffer[Rt],Q,!1);else{const wt=Q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Bt=z.__webglDepthbuffer[Rt];r.bindRenderbuffer(r.RENDERBUFFER,Bt),r.framebufferRenderbuffer(r.FRAMEBUFFER,wt,r.RENDERBUFFER,Bt)}}else{const Rt=Q.texture.mipmaps;if(Rt&&Rt.length>0?e.bindFramebuffer(r.FRAMEBUFFER,z.__webglFramebuffer[0]):e.bindFramebuffer(r.FRAMEBUFFER,z.__webglFramebuffer),z.__webglDepthbuffer===void 0)z.__webglDepthbuffer=r.createRenderbuffer(),Ee(z.__webglDepthbuffer,Q,!1);else{const wt=Q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Bt=z.__webglDepthbuffer;r.bindRenderbuffer(r.RENDERBUFFER,Bt),r.framebufferRenderbuffer(r.FRAMEBUFFER,wt,r.RENDERBUFFER,Bt)}}e.bindFramebuffer(r.FRAMEBUFFER,null)}function De(Q,z,mt){const Rt=n.get(Q);z!==void 0&&qt(Rt.__webglFramebuffer,Q,Q.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),mt!==void 0&&_e(Q)}function Ae(Q){const z=Q.texture,mt=n.get(Q),Rt=n.get(z);Q.addEventListener("dispose",F);const wt=Q.textures,Bt=Q.isWebGLCubeRenderTarget===!0,re=wt.length>1;if(re||(Rt.__webglTexture===void 0&&(Rt.__webglTexture=r.createTexture()),Rt.__version=z.version,u.memory.textures++),Bt){mt.__webglFramebuffer=[];for(let te=0;te<6;te++)if(z.mipmaps&&z.mipmaps.length>0){mt.__webglFramebuffer[te]=[];for(let ge=0;ge<z.mipmaps.length;ge++)mt.__webglFramebuffer[te][ge]=r.createFramebuffer()}else mt.__webglFramebuffer[te]=r.createFramebuffer()}else{if(z.mipmaps&&z.mipmaps.length>0){mt.__webglFramebuffer=[];for(let te=0;te<z.mipmaps.length;te++)mt.__webglFramebuffer[te]=r.createFramebuffer()}else mt.__webglFramebuffer=r.createFramebuffer();if(re)for(let te=0,ge=wt.length;te<ge;te++){const ve=n.get(wt[te]);ve.__webglTexture===void 0&&(ve.__webglTexture=r.createTexture(),u.memory.textures++)}if(Q.samples>0&&se(Q)===!1){mt.__webglMultisampledFramebuffer=r.createFramebuffer(),mt.__webglColorRenderbuffer=[],e.bindFramebuffer(r.FRAMEBUFFER,mt.__webglMultisampledFramebuffer);for(let te=0;te<wt.length;te++){const ge=wt[te];mt.__webglColorRenderbuffer[te]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,mt.__webglColorRenderbuffer[te]);const ve=o.convert(ge.format,ge.colorSpace),Lt=o.convert(ge.type),ee=U(ge.internalFormat,ve,Lt,ge.colorSpace,Q.isXRRenderTarget===!0),ye=Dt(Q);r.renderbufferStorageMultisample(r.RENDERBUFFER,ye,ee,Q.width,Q.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+te,r.RENDERBUFFER,mt.__webglColorRenderbuffer[te])}r.bindRenderbuffer(r.RENDERBUFFER,null),Q.depthBuffer&&(mt.__webglDepthRenderbuffer=r.createRenderbuffer(),Ee(mt.__webglDepthRenderbuffer,Q,!0)),e.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Bt){e.bindTexture(r.TEXTURE_CUBE_MAP,Rt.__webglTexture),_t(r.TEXTURE_CUBE_MAP,z);for(let te=0;te<6;te++)if(z.mipmaps&&z.mipmaps.length>0)for(let ge=0;ge<z.mipmaps.length;ge++)qt(mt.__webglFramebuffer[te][ge],Q,z,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+te,ge);else qt(mt.__webglFramebuffer[te],Q,z,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+te,0);C(z)&&M(r.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(re){for(let te=0,ge=wt.length;te<ge;te++){const ve=wt[te],Lt=n.get(ve);e.bindTexture(r.TEXTURE_2D,Lt.__webglTexture),_t(r.TEXTURE_2D,ve),qt(mt.__webglFramebuffer,Q,ve,r.COLOR_ATTACHMENT0+te,r.TEXTURE_2D,0),C(ve)&&M(r.TEXTURE_2D)}e.unbindTexture()}else{let te=r.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(te=Q.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY),e.bindTexture(te,Rt.__webglTexture),_t(te,z),z.mipmaps&&z.mipmaps.length>0)for(let ge=0;ge<z.mipmaps.length;ge++)qt(mt.__webglFramebuffer[ge],Q,z,r.COLOR_ATTACHMENT0,te,ge);else qt(mt.__webglFramebuffer,Q,z,r.COLOR_ATTACHMENT0,te,0);C(z)&&M(te),e.unbindTexture()}Q.depthBuffer&&_e(Q)}function K(Q){const z=Q.textures;for(let mt=0,Rt=z.length;mt<Rt;mt++){const wt=z[mt];if(C(wt)){const Bt=w(Q),re=n.get(wt).__webglTexture;e.bindTexture(Bt,re),M(Bt),e.unbindTexture()}}}const Wt=[],Xt=[];function Gt(Q){if(Q.samples>0){if(se(Q)===!1){const z=Q.textures,mt=Q.width,Rt=Q.height;let wt=r.COLOR_BUFFER_BIT;const Bt=Q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,re=n.get(Q),te=z.length>1;if(te)for(let ve=0;ve<z.length;ve++)e.bindFramebuffer(r.FRAMEBUFFER,re.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.RENDERBUFFER,null),e.bindFramebuffer(r.FRAMEBUFFER,re.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.TEXTURE_2D,null,0);e.bindFramebuffer(r.READ_FRAMEBUFFER,re.__webglMultisampledFramebuffer);const ge=Q.texture.mipmaps;ge&&ge.length>0?e.bindFramebuffer(r.DRAW_FRAMEBUFFER,re.__webglFramebuffer[0]):e.bindFramebuffer(r.DRAW_FRAMEBUFFER,re.__webglFramebuffer);for(let ve=0;ve<z.length;ve++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(wt|=r.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(wt|=r.STENCIL_BUFFER_BIT)),te){r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,re.__webglColorRenderbuffer[ve]);const Lt=n.get(z[ve]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Lt,0)}r.blitFramebuffer(0,0,mt,Rt,0,0,mt,Rt,wt,r.NEAREST),d===!0&&(Wt.length=0,Xt.length=0,Wt.push(r.COLOR_ATTACHMENT0+ve),Q.depthBuffer&&Q.resolveDepthBuffer===!1&&(Wt.push(Bt),Xt.push(Bt),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,Xt)),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Wt))}if(e.bindFramebuffer(r.READ_FRAMEBUFFER,null),e.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),te)for(let ve=0;ve<z.length;ve++){e.bindFramebuffer(r.FRAMEBUFFER,re.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.RENDERBUFFER,re.__webglColorRenderbuffer[ve]);const Lt=n.get(z[ve]).__webglTexture;e.bindFramebuffer(r.FRAMEBUFFER,re.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.TEXTURE_2D,Lt,0)}e.bindFramebuffer(r.DRAW_FRAMEBUFFER,re.__webglMultisampledFramebuffer)}else if(Q.depthBuffer&&Q.resolveDepthBuffer===!1&&d){const z=Q.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[z])}}}function Dt(Q){return Math.min(a.maxSamples,Q.samples)}function se(Q){const z=n.get(Q);return Q.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function Vt(Q){const z=u.render.frame;v.get(Q)!==z&&(v.set(Q,z),Q.update())}function ie(Q,z){const mt=Q.colorSpace,Rt=Q.format,wt=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||mt!==Ic&&mt!==Al&&(gn.getTransfer(mt)===zn?(Rt!==Ua||wt!==dr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",mt)),z}function Oe(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(m.width=Q.naturalWidth||Q.width,m.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(m.width=Q.displayWidth,m.height=Q.displayHeight):(m.width=Q.width,m.height=Q.height),m}this.allocateTextureUnit=at,this.resetTextureUnits=ct,this.setTexture2D=ut,this.setTexture2DArray=H,this.setTexture3D=W,this.setTextureCube=j,this.rebindTextures=De,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=K,this.updateMultisampleRenderTarget=Gt,this.setupDepthRenderbuffer=_e,this.setupFrameBufferTexture=qt,this.useMultisampledRTT=se}function tT(r,t){function e(n,a=Al){let o;const u=gn.getTransfer(a);if(n===dr)return r.UNSIGNED_BYTE;if(n===ey)return r.UNSIGNED_SHORT_4_4_4_4;if(n===ny)return r.UNSIGNED_SHORT_5_5_5_1;if(n===lx)return r.UNSIGNED_INT_5_9_9_9_REV;if(n===rx)return r.BYTE;if(n===ox)return r.SHORT;if(n===$h)return r.UNSIGNED_SHORT;if(n===ty)return r.INT;if(n===Cl)return r.UNSIGNED_INT;if(n===ys)return r.FLOAT;if(n===dd)return r.HALF_FLOAT;if(n===cx)return r.ALPHA;if(n===ux)return r.RGB;if(n===Ua)return r.RGBA;if(n===ed)return r.DEPTH_COMPONENT;if(n===nd)return r.DEPTH_STENCIL;if(n===iy)return r.RED;if(n===xm)return r.RED_INTEGER;if(n===fx)return r.RG;if(n===ay)return r.RG_INTEGER;if(n===sy)return r.RGBA_INTEGER;if(n===Qp||n===Zp||n===$p||n===tm)if(u===zn)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(n===Qp)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Zp)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===$p)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===tm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(n===Qp)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Zp)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===$p)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===tm)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===pv||n===mv||n===gv||n===vv)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(n===pv)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===mv)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===gv)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===vv)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===yv||n===_v||n===Av)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(n===yv||n===_v)return u===zn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===Av)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===xv||n===Sv||n===Mv||n===bv||n===Ev||n===Tv||n===Cv||n===Rv||n===Bv||n===wv||n===Dv||n===Uv||n===Nv||n===Ov)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(n===xv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Sv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Mv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===bv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Ev)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Tv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Cv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Rv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Bv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===wv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Dv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Uv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Nv)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ov)return u===zn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===em||n===Lv||n===Iv)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(n===em)return u===zn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Lv)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Iv)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===hx||n===Pv||n===Hv||n===zv)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(n===em)return o.COMPRESSED_RED_RGTC1_EXT;if(n===Pv)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Hv)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===zv)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===td?r.UNSIGNED_INT_24_8:r[n]!==void 0?r[n]:null}return{convert:e}}const MN=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,bN=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class EN{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(this.texture===null){const a=new ai,o=t.properties.get(a);o.__webglTexture=e.texture,(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=a}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new jr({vertexShader:MN,fragmentShader:bN,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Ri(new md(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class TN extends Go{constructor(t,e){super();const n=this;let a=null,o=1,u=null,h="local-floor",d=1,m=null,v=null,y=null,A=null,S=null,E=null;const R=new EN,C=e.getContextAttributes();let M=null,w=null;const U=[],D=[],P=new Ot;let I=null;const F=new ii;F.viewport=new Mn;const k=new ii;k.viewport=new Mn;const L=[F,k],N=new X1;let J=null,ct=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(it){let Ct=U[it];return Ct===void 0&&(Ct=new ev,U[it]=Ct),Ct.getTargetRaySpace()},this.getControllerGrip=function(it){let Ct=U[it];return Ct===void 0&&(Ct=new ev,U[it]=Ct),Ct.getGripSpace()},this.getHand=function(it){let Ct=U[it];return Ct===void 0&&(Ct=new ev,U[it]=Ct),Ct.getHandSpace()};function at(it){const Ct=D.indexOf(it.inputSource);if(Ct===-1)return;const Ht=U[Ct];Ht!==void 0&&(Ht.update(it.inputSource,it.frame,m||u),Ht.dispatchEvent({type:it.type,data:it.inputSource}))}function pt(){a.removeEventListener("select",at),a.removeEventListener("selectstart",at),a.removeEventListener("selectend",at),a.removeEventListener("squeeze",at),a.removeEventListener("squeezestart",at),a.removeEventListener("squeezeend",at),a.removeEventListener("end",pt),a.removeEventListener("inputsourceschange",ut);for(let it=0;it<U.length;it++){const Ct=D[it];Ct!==null&&(D[it]=null,U[it].disconnect(Ct))}J=null,ct=null,R.reset(),t.setRenderTarget(M),S=null,A=null,y=null,a=null,w=null,Tt.stop(),n.isPresenting=!1,t.setPixelRatio(I),t.setSize(P.width,P.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(it){o=it,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(it){h=it,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||u},this.setReferenceSpace=function(it){m=it},this.getBaseLayer=function(){return A!==null?A:S},this.getBinding=function(){return y},this.getFrame=function(){return E},this.getSession=function(){return a},this.setSession=async function(it){if(a=it,a!==null){if(M=t.getRenderTarget(),a.addEventListener("select",at),a.addEventListener("selectstart",at),a.addEventListener("selectend",at),a.addEventListener("squeeze",at),a.addEventListener("squeezestart",at),a.addEventListener("squeezeend",at),a.addEventListener("end",pt),a.addEventListener("inputsourceschange",ut),C.xrCompatible!==!0&&await e.makeXRCompatible(),I=t.getPixelRatio(),t.getSize(P),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Ht=null,Qt=null,qt=null;C.depth&&(qt=C.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Ht=C.stencil?nd:ed,Qt=C.stencil?td:Cl);const Ee={colorFormat:e.RGBA8,depthFormat:qt,scaleFactor:o};y=new XRWebGLBinding(a,e),A=y.createProjectionLayer(Ee),a.updateRenderState({layers:[A]}),t.setPixelRatio(1),t.setSize(A.textureWidth,A.textureHeight,!1),w=new Fo(A.textureWidth,A.textureHeight,{format:Ua,type:dr,depthTexture:new Tx(A.textureWidth,A.textureHeight,Qt,void 0,void 0,void 0,void 0,void 0,void 0,Ht),stencilBuffer:C.stencil,colorSpace:t.outputColorSpace,samples:C.antialias?4:0,resolveDepthBuffer:A.ignoreDepthValues===!1,resolveStencilBuffer:A.ignoreDepthValues===!1})}else{const Ht={antialias:C.antialias,alpha:!0,depth:C.depth,stencil:C.stencil,framebufferScaleFactor:o};S=new XRWebGLLayer(a,e,Ht),a.updateRenderState({baseLayer:S}),t.setPixelRatio(1),t.setSize(S.framebufferWidth,S.framebufferHeight,!1),w=new Fo(S.framebufferWidth,S.framebufferHeight,{format:Ua,type:dr,colorSpace:t.outputColorSpace,stencilBuffer:C.stencil,resolveDepthBuffer:S.ignoreDepthValues===!1,resolveStencilBuffer:S.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(d),m=null,u=await a.requestReferenceSpace(h),Tt.setContext(a),Tt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return R.getDepthTexture()};function ut(it){for(let Ct=0;Ct<it.removed.length;Ct++){const Ht=it.removed[Ct],Qt=D.indexOf(Ht);Qt>=0&&(D[Qt]=null,U[Qt].disconnect(Ht))}for(let Ct=0;Ct<it.added.length;Ct++){const Ht=it.added[Ct];let Qt=D.indexOf(Ht);if(Qt===-1){for(let Ee=0;Ee<U.length;Ee++)if(Ee>=D.length){D.push(Ht),Qt=Ee;break}else if(D[Ee]===null){D[Ee]=Ht,Qt=Ee;break}if(Qt===-1)break}const qt=U[Qt];qt&&qt.connect(Ht)}}const H=new q,W=new q;function j(it,Ct,Ht){H.setFromMatrixPosition(Ct.matrixWorld),W.setFromMatrixPosition(Ht.matrixWorld);const Qt=H.distanceTo(W),qt=Ct.projectionMatrix.elements,Ee=Ht.projectionMatrix.elements,fe=qt[14]/(qt[10]-1),_e=qt[14]/(qt[10]+1),De=(qt[9]+1)/qt[5],Ae=(qt[9]-1)/qt[5],K=(qt[8]-1)/qt[0],Wt=(Ee[8]+1)/Ee[0],Xt=fe*K,Gt=fe*Wt,Dt=Qt/(-K+Wt),se=Dt*-K;if(Ct.matrixWorld.decompose(it.position,it.quaternion,it.scale),it.translateX(se),it.translateZ(Dt),it.matrixWorld.compose(it.position,it.quaternion,it.scale),it.matrixWorldInverse.copy(it.matrixWorld).invert(),qt[10]===-1)it.projectionMatrix.copy(Ct.projectionMatrix),it.projectionMatrixInverse.copy(Ct.projectionMatrixInverse);else{const Vt=fe+Dt,ie=_e+Dt,Oe=Xt-se,Q=Gt+(Qt-se),z=De*_e/ie*Vt,mt=Ae*_e/ie*Vt;it.projectionMatrix.makePerspective(Oe,Q,z,mt,Vt,ie),it.projectionMatrixInverse.copy(it.projectionMatrix).invert()}}function lt(it,Ct){Ct===null?it.matrixWorld.copy(it.matrix):it.matrixWorld.multiplyMatrices(Ct.matrixWorld,it.matrix),it.matrixWorldInverse.copy(it.matrixWorld).invert()}this.updateCamera=function(it){if(a===null)return;let Ct=it.near,Ht=it.far;R.texture!==null&&(R.depthNear>0&&(Ct=R.depthNear),R.depthFar>0&&(Ht=R.depthFar)),N.near=k.near=F.near=Ct,N.far=k.far=F.far=Ht,(J!==N.near||ct!==N.far)&&(a.updateRenderState({depthNear:N.near,depthFar:N.far}),J=N.near,ct=N.far),F.layers.mask=it.layers.mask|2,k.layers.mask=it.layers.mask|4,N.layers.mask=F.layers.mask|k.layers.mask;const Qt=it.parent,qt=N.cameras;lt(N,Qt);for(let Ee=0;Ee<qt.length;Ee++)lt(qt[Ee],Qt);qt.length===2?j(N,F,k):N.projectionMatrix.copy(F.projectionMatrix),X(it,N,Qt)};function X(it,Ct,Ht){Ht===null?it.matrix.copy(Ct.matrixWorld):(it.matrix.copy(Ht.matrixWorld),it.matrix.invert(),it.matrix.multiply(Ct.matrixWorld)),it.matrix.decompose(it.position,it.quaternion,it.scale),it.updateMatrixWorld(!0),it.projectionMatrix.copy(Ct.projectionMatrix),it.projectionMatrixInverse.copy(Ct.projectionMatrixInverse),it.isPerspectiveCamera&&(it.fov=sd*2*Math.atan(1/it.projectionMatrix.elements[5]),it.zoom=1)}this.getCamera=function(){return N},this.getFoveation=function(){if(!(A===null&&S===null))return d},this.setFoveation=function(it){d=it,A!==null&&(A.fixedFoveation=it),S!==null&&S.fixedFoveation!==void 0&&(S.fixedFoveation=it)},this.hasDepthSensing=function(){return R.texture!==null},this.getDepthSensingMesh=function(){return R.getMesh(N)};let nt=null;function _t(it,Ct){if(v=Ct.getViewerPose(m||u),E=Ct,v!==null){const Ht=v.views;S!==null&&(t.setRenderTargetFramebuffer(w,S.framebuffer),t.setRenderTarget(w));let Qt=!1;Ht.length!==N.cameras.length&&(N.cameras.length=0,Qt=!0);for(let fe=0;fe<Ht.length;fe++){const _e=Ht[fe];let De=null;if(S!==null)De=S.getViewport(_e);else{const K=y.getViewSubImage(A,_e);De=K.viewport,fe===0&&(t.setRenderTargetTextures(w,K.colorTexture,K.depthStencilTexture),t.setRenderTarget(w))}let Ae=L[fe];Ae===void 0&&(Ae=new ii,Ae.layers.enable(fe),Ae.viewport=new Mn,L[fe]=Ae),Ae.matrix.fromArray(_e.transform.matrix),Ae.matrix.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.projectionMatrix.fromArray(_e.projectionMatrix),Ae.projectionMatrixInverse.copy(Ae.projectionMatrix).invert(),Ae.viewport.set(De.x,De.y,De.width,De.height),fe===0&&(N.matrix.copy(Ae.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),Qt===!0&&N.cameras.push(Ae)}const qt=a.enabledFeatures;if(qt&&qt.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&y){const fe=y.getDepthInformation(Ht[0]);fe&&fe.isValid&&fe.texture&&R.init(t,fe,a.renderState)}}for(let Ht=0;Ht<U.length;Ht++){const Qt=D[Ht],qt=U[Ht];Qt!==null&&qt!==void 0&&qt.update(Qt,Ct,m||u)}nt&&nt(it,Ct),Ct.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ct}),E=null}const Tt=new j1;Tt.setAnimationLoop(_t),this.setAnimationLoop=function(it){nt=it},this.dispose=function(){}}}const qu=new ia,CN=new Ne;function RN(r,t){function e(C,M){C.matrixAutoUpdate===!0&&C.updateMatrix(),M.value.copy(C.matrix)}function n(C,M){M.color.getRGB(C.fogColor.value,e1(r)),M.isFog?(C.fogNear.value=M.near,C.fogFar.value=M.far):M.isFogExp2&&(C.fogDensity.value=M.density)}function a(C,M,w,U,D){M.isMeshBasicMaterial||M.isMeshLambertMaterial?o(C,M):M.isMeshToonMaterial?(o(C,M),y(C,M)):M.isMeshPhongMaterial?(o(C,M),v(C,M)):M.isMeshStandardMaterial?(o(C,M),A(C,M),M.isMeshPhysicalMaterial&&S(C,M,D)):M.isMeshMatcapMaterial?(o(C,M),E(C,M)):M.isMeshDepthMaterial?o(C,M):M.isMeshDistanceMaterial?(o(C,M),R(C,M)):M.isMeshNormalMaterial?o(C,M):M.isLineBasicMaterial?(u(C,M),M.isLineDashedMaterial&&h(C,M)):M.isPointsMaterial?d(C,M,w,U):M.isSpriteMaterial?m(C,M):M.isShadowMaterial?(C.color.value.copy(M.color),C.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function o(C,M){C.opacity.value=M.opacity,M.color&&C.diffuse.value.copy(M.color),M.emissive&&C.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(C.map.value=M.map,e(M.map,C.mapTransform)),M.alphaMap&&(C.alphaMap.value=M.alphaMap,e(M.alphaMap,C.alphaMapTransform)),M.bumpMap&&(C.bumpMap.value=M.bumpMap,e(M.bumpMap,C.bumpMapTransform),C.bumpScale.value=M.bumpScale,M.side===Na&&(C.bumpScale.value*=-1)),M.normalMap&&(C.normalMap.value=M.normalMap,e(M.normalMap,C.normalMapTransform),C.normalScale.value.copy(M.normalScale),M.side===Na&&C.normalScale.value.negate()),M.displacementMap&&(C.displacementMap.value=M.displacementMap,e(M.displacementMap,C.displacementMapTransform),C.displacementScale.value=M.displacementScale,C.displacementBias.value=M.displacementBias),M.emissiveMap&&(C.emissiveMap.value=M.emissiveMap,e(M.emissiveMap,C.emissiveMapTransform)),M.specularMap&&(C.specularMap.value=M.specularMap,e(M.specularMap,C.specularMapTransform)),M.alphaTest>0&&(C.alphaTest.value=M.alphaTest);const w=t.get(M),U=w.envMap,D=w.envMapRotation;U&&(C.envMap.value=U,qu.copy(D),qu.x*=-1,qu.y*=-1,qu.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(qu.y*=-1,qu.z*=-1),C.envMapRotation.value.setFromMatrix4(CN.makeRotationFromEuler(qu)),C.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=M.reflectivity,C.ior.value=M.ior,C.refractionRatio.value=M.refractionRatio),M.lightMap&&(C.lightMap.value=M.lightMap,C.lightMapIntensity.value=M.lightMapIntensity,e(M.lightMap,C.lightMapTransform)),M.aoMap&&(C.aoMap.value=M.aoMap,C.aoMapIntensity.value=M.aoMapIntensity,e(M.aoMap,C.aoMapTransform))}function u(C,M){C.diffuse.value.copy(M.color),C.opacity.value=M.opacity,M.map&&(C.map.value=M.map,e(M.map,C.mapTransform))}function h(C,M){C.dashSize.value=M.dashSize,C.totalSize.value=M.dashSize+M.gapSize,C.scale.value=M.scale}function d(C,M,w,U){C.diffuse.value.copy(M.color),C.opacity.value=M.opacity,C.size.value=M.size*w,C.scale.value=U*.5,M.map&&(C.map.value=M.map,e(M.map,C.uvTransform)),M.alphaMap&&(C.alphaMap.value=M.alphaMap,e(M.alphaMap,C.alphaMapTransform)),M.alphaTest>0&&(C.alphaTest.value=M.alphaTest)}function m(C,M){C.diffuse.value.copy(M.color),C.opacity.value=M.opacity,C.rotation.value=M.rotation,M.map&&(C.map.value=M.map,e(M.map,C.mapTransform)),M.alphaMap&&(C.alphaMap.value=M.alphaMap,e(M.alphaMap,C.alphaMapTransform)),M.alphaTest>0&&(C.alphaTest.value=M.alphaTest)}function v(C,M){C.specular.value.copy(M.specular),C.shininess.value=Math.max(M.shininess,1e-4)}function y(C,M){M.gradientMap&&(C.gradientMap.value=M.gradientMap)}function A(C,M){C.metalness.value=M.metalness,M.metalnessMap&&(C.metalnessMap.value=M.metalnessMap,e(M.metalnessMap,C.metalnessMapTransform)),C.roughness.value=M.roughness,M.roughnessMap&&(C.roughnessMap.value=M.roughnessMap,e(M.roughnessMap,C.roughnessMapTransform)),M.envMap&&(C.envMapIntensity.value=M.envMapIntensity)}function S(C,M,w){C.ior.value=M.ior,M.sheen>0&&(C.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),C.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(C.sheenColorMap.value=M.sheenColorMap,e(M.sheenColorMap,C.sheenColorMapTransform)),M.sheenRoughnessMap&&(C.sheenRoughnessMap.value=M.sheenRoughnessMap,e(M.sheenRoughnessMap,C.sheenRoughnessMapTransform))),M.clearcoat>0&&(C.clearcoat.value=M.clearcoat,C.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(C.clearcoatMap.value=M.clearcoatMap,e(M.clearcoatMap,C.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,e(M.clearcoatRoughnessMap,C.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(C.clearcoatNormalMap.value=M.clearcoatNormalMap,e(M.clearcoatNormalMap,C.clearcoatNormalMapTransform),C.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Na&&C.clearcoatNormalScale.value.negate())),M.dispersion>0&&(C.dispersion.value=M.dispersion),M.iridescence>0&&(C.iridescence.value=M.iridescence,C.iridescenceIOR.value=M.iridescenceIOR,C.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(C.iridescenceMap.value=M.iridescenceMap,e(M.iridescenceMap,C.iridescenceMapTransform)),M.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=M.iridescenceThicknessMap,e(M.iridescenceThicknessMap,C.iridescenceThicknessMapTransform))),M.transmission>0&&(C.transmission.value=M.transmission,C.transmissionSamplerMap.value=w.texture,C.transmissionSamplerSize.value.set(w.width,w.height),M.transmissionMap&&(C.transmissionMap.value=M.transmissionMap,e(M.transmissionMap,C.transmissionMapTransform)),C.thickness.value=M.thickness,M.thicknessMap&&(C.thicknessMap.value=M.thicknessMap,e(M.thicknessMap,C.thicknessMapTransform)),C.attenuationDistance.value=M.attenuationDistance,C.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(C.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(C.anisotropyMap.value=M.anisotropyMap,e(M.anisotropyMap,C.anisotropyMapTransform))),C.specularIntensity.value=M.specularIntensity,C.specularColor.value.copy(M.specularColor),M.specularColorMap&&(C.specularColorMap.value=M.specularColorMap,e(M.specularColorMap,C.specularColorMapTransform)),M.specularIntensityMap&&(C.specularIntensityMap.value=M.specularIntensityMap,e(M.specularIntensityMap,C.specularIntensityMapTransform))}function E(C,M){M.matcap&&(C.matcap.value=M.matcap)}function R(C,M){const w=t.get(M).light;C.referencePosition.value.setFromMatrixPosition(w.matrixWorld),C.nearDistance.value=w.shadow.camera.near,C.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function BN(r,t,e,n){let a={},o={},u=[];const h=r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS);function d(w,U){const D=U.program;n.uniformBlockBinding(w,D)}function m(w,U){let D=a[w.id];D===void 0&&(E(w),D=v(w),a[w.id]=D,w.addEventListener("dispose",C));const P=U.program;n.updateUBOMapping(w,P);const I=t.render.frame;o[w.id]!==I&&(A(w),o[w.id]=I)}function v(w){const U=y();w.__bindingPointIndex=U;const D=r.createBuffer(),P=w.__size,I=w.usage;return r.bindBuffer(r.UNIFORM_BUFFER,D),r.bufferData(r.UNIFORM_BUFFER,P,I),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,U,D),D}function y(){for(let w=0;w<h;w++)if(u.indexOf(w)===-1)return u.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function A(w){const U=a[w.id],D=w.uniforms,P=w.__cache;r.bindBuffer(r.UNIFORM_BUFFER,U);for(let I=0,F=D.length;I<F;I++){const k=Array.isArray(D[I])?D[I]:[D[I]];for(let L=0,N=k.length;L<N;L++){const J=k[L];if(S(J,I,L,P)===!0){const ct=J.__offset,at=Array.isArray(J.value)?J.value:[J.value];let pt=0;for(let ut=0;ut<at.length;ut++){const H=at[ut],W=R(H);typeof H=="number"||typeof H=="boolean"?(J.__data[0]=H,r.bufferSubData(r.UNIFORM_BUFFER,ct+pt,J.__data)):H.isMatrix3?(J.__data[0]=H.elements[0],J.__data[1]=H.elements[1],J.__data[2]=H.elements[2],J.__data[3]=0,J.__data[4]=H.elements[3],J.__data[5]=H.elements[4],J.__data[6]=H.elements[5],J.__data[7]=0,J.__data[8]=H.elements[6],J.__data[9]=H.elements[7],J.__data[10]=H.elements[8],J.__data[11]=0):(H.toArray(J.__data,pt),pt+=W.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,ct,J.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function S(w,U,D,P){const I=w.value,F=U+"_"+D;if(P[F]===void 0)return typeof I=="number"||typeof I=="boolean"?P[F]=I:P[F]=I.clone(),!0;{const k=P[F];if(typeof I=="number"||typeof I=="boolean"){if(k!==I)return P[F]=I,!0}else if(k.equals(I)===!1)return k.copy(I),!0}return!1}function E(w){const U=w.uniforms;let D=0;const P=16;for(let F=0,k=U.length;F<k;F++){const L=Array.isArray(U[F])?U[F]:[U[F]];for(let N=0,J=L.length;N<J;N++){const ct=L[N],at=Array.isArray(ct.value)?ct.value:[ct.value];for(let pt=0,ut=at.length;pt<ut;pt++){const H=at[pt],W=R(H),j=D%P,lt=j%W.boundary,X=j+lt;D+=lt,X!==0&&P-X<W.storage&&(D+=P-X),ct.__data=new Float32Array(W.storage/Float32Array.BYTES_PER_ELEMENT),ct.__offset=D,D+=W.storage}}}const I=D%P;return I>0&&(D+=P-I),w.__size=D,w.__cache={},this}function R(w){const U={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(U.boundary=4,U.storage=4):w.isVector2?(U.boundary=8,U.storage=8):w.isVector3||w.isColor?(U.boundary=16,U.storage=12):w.isVector4?(U.boundary=16,U.storage=16):w.isMatrix3?(U.boundary=48,U.storage=48):w.isMatrix4?(U.boundary=64,U.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),U}function C(w){const U=w.target;U.removeEventListener("dispose",C);const D=u.indexOf(U.__bindingPointIndex);u.splice(D,1),r.deleteBuffer(a[U.id]),delete a[U.id],delete o[U.id]}function M(){for(const w in a)r.deleteBuffer(a[w]);u=[],a={},o={}}return{bind:d,update:m,dispose:M}}class eT{constructor(t={}){const{canvas:e=ZE(),context:n=null,depth:a=!0,stencil:o=!1,alpha:u=!1,antialias:h=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:m=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:y=!1,reverseDepthBuffer:A=!1}=t;this.isWebGLRenderer=!0;let S;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=n.getContextAttributes().alpha}else S=u;const E=new Uint32Array(4),R=new Int32Array(4);let C=null,M=null;const w=[],U=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Po,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const D=this;let P=!1;this._outputColorSpace=Pi;let I=0,F=0,k=null,L=-1,N=null;const J=new Mn,ct=new Mn;let at=null;const pt=new oe(0);let ut=0,H=e.width,W=e.height,j=1,lt=null,X=null;const nt=new Mn(0,0,H,W),_t=new Mn(0,0,H,W);let Tt=!1;const it=new pd;let Ct=!1,Ht=!1;const Qt=new Ne,qt=new Ne,Ee=new q,fe=new Mn,_e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let De=!1;function Ae(){return k===null?j:1}let K=n;function Wt(V,ot){return e.getContext(V,ot)}try{const V={alpha:!0,depth:a,stencil:o,antialias:h,premultipliedAlpha:d,preserveDrawingBuffer:m,powerPreference:v,failIfMajorPerformanceCaveat:y};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${_m}`),e.addEventListener("webglcontextlost",ae,!1),e.addEventListener("webglcontextrestored",Kt,!1),e.addEventListener("webglcontextcreationerror",It,!1),K===null){const ot="webgl2";if(K=Wt(ot,V),K===null)throw Wt(ot)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let Xt,Gt,Dt,se,Vt,ie,Oe,Q,z,mt,Rt,wt,Bt,re,te,ge,ve,Lt,ee,ye,et,gt,Jt,$;function jt(){Xt=new G3(K),Xt.init(),gt=new tT(K,Xt),Gt=new O3(K,Xt,t,gt),Dt=new xN(K,Xt),Gt.reverseDepthBuffer&&A&&Dt.buffers.depth.setReversed(!0),se=new Y3(K),Vt=new lN,ie=new SN(K,Xt,Dt,Vt,Gt,gt,se),Oe=new I3(D),Q=new F3(D),z=new WB(K),Jt=new U3(K,z),mt=new V3(K,z,se,Jt),Rt=new q3(K,mt,z,se),ee=new k3(K,Gt,ie),ge=new L3(Vt),wt=new oN(D,Oe,Q,Xt,Gt,Jt,ge),Bt=new RN(D,Vt),re=new uN,te=new gN(Xt),Lt=new D3(D,Oe,Q,Dt,Rt,S,d),ve=new _N(D,Rt,Gt),$=new BN(K,se,Gt,Dt),ye=new N3(K,Xt,se),et=new X3(K,Xt,se),se.programs=wt.programs,D.capabilities=Gt,D.extensions=Xt,D.properties=Vt,D.renderLists=re,D.shadowMap=ve,D.state=Dt,D.info=se}jt();const zt=new TN(D,K);this.xr=zt,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){const V=Xt.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=Xt.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(V){V!==void 0&&(j=V,this.setSize(H,W,!1))},this.getSize=function(V){return V.set(H,W)},this.setSize=function(V,ot,St=!0){if(zt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}H=V,W=ot,e.width=Math.floor(V*j),e.height=Math.floor(ot*j),St===!0&&(e.style.width=V+"px",e.style.height=ot+"px"),this.setViewport(0,0,V,ot)},this.getDrawingBufferSize=function(V){return V.set(H*j,W*j).floor()},this.setDrawingBufferSize=function(V,ot,St){H=V,W=ot,j=St,e.width=Math.floor(V*St),e.height=Math.floor(ot*St),this.setViewport(0,0,V,ot)},this.getCurrentViewport=function(V){return V.copy(J)},this.getViewport=function(V){return V.copy(nt)},this.setViewport=function(V,ot,St,Mt){V.isVector4?nt.set(V.x,V.y,V.z,V.w):nt.set(V,ot,St,Mt),Dt.viewport(J.copy(nt).multiplyScalar(j).round())},this.getScissor=function(V){return V.copy(_t)},this.setScissor=function(V,ot,St,Mt){V.isVector4?_t.set(V.x,V.y,V.z,V.w):_t.set(V,ot,St,Mt),Dt.scissor(ct.copy(_t).multiplyScalar(j).round())},this.getScissorTest=function(){return Tt},this.setScissorTest=function(V){Dt.setScissorTest(Tt=V)},this.setOpaqueSort=function(V){lt=V},this.setTransparentSort=function(V){X=V},this.getClearColor=function(V){return V.copy(Lt.getClearColor())},this.setClearColor=function(){Lt.setClearColor(...arguments)},this.getClearAlpha=function(){return Lt.getClearAlpha()},this.setClearAlpha=function(){Lt.setClearAlpha(...arguments)},this.clear=function(V=!0,ot=!0,St=!0){let Mt=0;if(V){let ht=!1;if(k!==null){const Yt=k.texture.format;ht=Yt===sy||Yt===ay||Yt===xm}if(ht){const Yt=k.texture.type,ne=Yt===dr||Yt===Cl||Yt===$h||Yt===td||Yt===ey||Yt===ny,he=Lt.getClearColor(),pe=Lt.getClearAlpha(),Le=he.r,Re=he.g,be=he.b;ne?(E[0]=Le,E[1]=Re,E[2]=be,E[3]=pe,K.clearBufferuiv(K.COLOR,0,E)):(R[0]=Le,R[1]=Re,R[2]=be,R[3]=pe,K.clearBufferiv(K.COLOR,0,R))}else Mt|=K.COLOR_BUFFER_BIT}ot&&(Mt|=K.DEPTH_BUFFER_BIT),St&&(Mt|=K.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),K.clear(Mt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ae,!1),e.removeEventListener("webglcontextrestored",Kt,!1),e.removeEventListener("webglcontextcreationerror",It,!1),Lt.dispose(),re.dispose(),te.dispose(),Vt.dispose(),Oe.dispose(),Q.dispose(),Rt.dispose(),Jt.dispose(),$.dispose(),wt.dispose(),zt.dispose(),zt.removeEventListener("sessionstart",pi),zt.removeEventListener("sessionend",xi),Wi.stop()};function ae(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function Kt(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const V=se.autoReset,ot=ve.enabled,St=ve.autoUpdate,Mt=ve.needsUpdate,ht=ve.type;jt(),se.autoReset=V,ve.enabled=ot,ve.autoUpdate=St,ve.needsUpdate=Mt,ve.type=ht}function It(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function le(V){const ot=V.target;ot.removeEventListener("dispose",le),Me(ot)}function Me(V){nn(V),Vt.remove(V)}function nn(V){const ot=Vt.get(V).programs;ot!==void 0&&(ot.forEach(function(St){wt.releaseProgram(St)}),V.isShaderMaterial&&wt.releaseShaderCache(V))}this.renderBufferDirect=function(V,ot,St,Mt,ht,Yt){ot===null&&(ot=_e);const ne=ht.isMesh&&ht.matrixWorld.determinant()<0,he=Zr(V,ot,St,Mt,ht);Dt.setMaterial(Mt,ne);let pe=St.index,Le=1;if(Mt.wireframe===!0){if(pe=mt.getWireframeAttribute(St),pe===void 0)return;Le=2}const Re=St.drawRange,be=St.attributes.position;let We=Re.start*Le,xn=(Re.start+Re.count)*Le;Yt!==null&&(We=Math.max(We,Yt.start*Le),xn=Math.min(xn,(Yt.start+Yt.count)*Le)),pe!==null?(We=Math.max(We,0),xn=Math.min(xn,pe.count)):be!=null&&(We=Math.max(We,0),xn=Math.min(xn,be.count));const Fn=xn-We;if(Fn<0||Fn===1/0)return;Jt.setup(ht,Mt,he,St,pe);let $e,Sn=ye;if(pe!==null&&($e=z.get(pe),Sn=et,Sn.setIndex($e)),ht.isMesh)Mt.wireframe===!0?(Dt.setLineWidth(Mt.wireframeLinewidth*Ae()),Sn.setMode(K.LINES)):Sn.setMode(K.TRIANGLES);else if(ht.isLine){let Be=Mt.linewidth;Be===void 0&&(Be=1),Dt.setLineWidth(Be*Ae()),ht.isLineSegments?Sn.setMode(K.LINES):ht.isLineLoop?Sn.setMode(K.LINE_LOOP):Sn.setMode(K.LINE_STRIP)}else ht.isPoints?Sn.setMode(K.POINTS):ht.isSprite&&Sn.setMode(K.TRIANGLES);if(ht.isBatchedMesh)if(ht._multiDrawInstances!==null)jh("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Sn.renderMultiDrawInstances(ht._multiDrawStarts,ht._multiDrawCounts,ht._multiDrawCount,ht._multiDrawInstances);else if(Xt.get("WEBGL_multi_draw"))Sn.renderMultiDraw(ht._multiDrawStarts,ht._multiDrawCounts,ht._multiDrawCount);else{const Be=ht._multiDrawStarts,Bn=ht._multiDrawCounts,ln=ht._multiDrawCount,Si=pe?z.get(pe).bytesPerElement:1,Vs=Vt.get(Mt).currentProgram.getUniforms();for(let On=0;On<ln;On++)Vs.setValue(K,"_gl_DrawID",On),Sn.render(Be[On]/Si,Bn[On])}else if(ht.isInstancedMesh)Sn.renderInstances(We,Fn,ht.count);else if(St.isInstancedBufferGeometry){const Be=St._maxInstanceCount!==void 0?St._maxInstanceCount:1/0,Bn=Math.min(St.instanceCount,Be);Sn.renderInstances(We,Fn,Bn)}else Sn.render(We,Fn)};function je(V,ot,St){V.transparent===!0&&V.side===va&&V.forceSinglePass===!1?(V.side=Na,V.needsUpdate=!0,Dn(V,ot,St),V.side=zo,V.needsUpdate=!0,Dn(V,ot,St),V.side=va):Dn(V,ot,St)}this.compile=function(V,ot,St=null){St===null&&(St=V),M=te.get(St),M.init(ot),U.push(M),St.traverseVisible(function(ht){ht.isLight&&ht.layers.test(ot.layers)&&(M.pushLight(ht),ht.castShadow&&M.pushShadow(ht))}),V!==St&&V.traverseVisible(function(ht){ht.isLight&&ht.layers.test(ot.layers)&&(M.pushLight(ht),ht.castShadow&&M.pushShadow(ht))}),M.setupLights();const Mt=new Set;return V.traverse(function(ht){if(!(ht.isMesh||ht.isPoints||ht.isLine||ht.isSprite))return;const Yt=ht.material;if(Yt)if(Array.isArray(Yt))for(let ne=0;ne<Yt.length;ne++){const he=Yt[ne];je(he,St,ht),Mt.add(he)}else je(Yt,St,ht),Mt.add(Yt)}),M=U.pop(),Mt},this.compileAsync=function(V,ot,St=null){const Mt=this.compile(V,ot,St);return new Promise(ht=>{function Yt(){if(Mt.forEach(function(ne){Vt.get(ne).currentProgram.isReady()&&Mt.delete(ne)}),Mt.size===0){ht(V);return}setTimeout(Yt,10)}Xt.get("KHR_parallel_shader_compile")!==null?Yt():setTimeout(Yt,10)})};let di=null;function Kn(V){di&&di(V)}function pi(){Wi.stop()}function xi(){Wi.start()}const Wi=new j1;Wi.setAnimationLoop(Kn),typeof self<"u"&&Wi.setContext(self),this.setAnimationLoop=function(V){di=V,zt.setAnimationLoop(V),V===null?Wi.stop():Wi.start()},zt.addEventListener("sessionstart",pi),zt.addEventListener("sessionend",xi),this.render=function(V,ot){if(ot!==void 0&&ot.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),ot.parent===null&&ot.matrixWorldAutoUpdate===!0&&ot.updateMatrixWorld(),zt.enabled===!0&&zt.isPresenting===!0&&(zt.cameraAutoUpdate===!0&&zt.updateCamera(ot),ot=zt.getCamera()),V.isScene===!0&&V.onBeforeRender(D,V,ot,k),M=te.get(V,U.length),M.init(ot),U.push(M),qt.multiplyMatrices(ot.projectionMatrix,ot.matrixWorldInverse),it.setFromProjectionMatrix(qt),Ht=this.localClippingEnabled,Ct=ge.init(this.clippingPlanes,Ht),C=re.get(V,w.length),C.init(),w.push(C),zt.enabled===!0&&zt.isPresenting===!0){const Yt=D.xr.getDepthSensingMesh();Yt!==null&&_a(Yt,ot,-1/0,D.sortObjects)}_a(V,ot,0,D.sortObjects),C.finish(),D.sortObjects===!0&&C.sort(lt,X),De=zt.enabled===!1||zt.isPresenting===!1||zt.hasDepthSensing()===!1,De&&Lt.addToRenderList(C,V),this.info.render.frame++,Ct===!0&&ge.beginShadows();const St=M.state.shadowsArray;ve.render(St,V,ot),Ct===!0&&ge.endShadows(),this.info.autoReset===!0&&this.info.reset();const Mt=C.opaque,ht=C.transmissive;if(M.setupLights(),ot.isArrayCamera){const Yt=ot.cameras;if(ht.length>0)for(let ne=0,he=Yt.length;ne<he;ne++){const pe=Yt[ne];_s(Mt,ht,V,pe)}De&&Lt.render(V);for(let ne=0,he=Yt.length;ne<he;ne++){const pe=Yt[ne];Gc(C,V,pe,pe.viewport)}}else ht.length>0&&_s(Mt,ht,V,ot),De&&Lt.render(V),Gc(C,V,ot);k!==null&&F===0&&(ie.updateMultisampleRenderTarget(k),ie.updateRenderTargetMipmap(k)),V.isScene===!0&&V.onAfterRender(D,V,ot),Jt.resetDefaultState(),L=-1,N=null,U.pop(),U.length>0?(M=U[U.length-1],Ct===!0&&ge.setGlobalState(D.clippingPlanes,M.state.camera)):M=null,w.pop(),w.length>0?C=w[w.length-1]:C=null};function _a(V,ot,St,Mt){if(V.visible===!1)return;if(V.layers.test(ot.layers)){if(V.isGroup)St=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(ot);else if(V.isLight)M.pushLight(V),V.castShadow&&M.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||it.intersectsSprite(V)){Mt&&fe.setFromMatrixPosition(V.matrixWorld).applyMatrix4(qt);const ne=Rt.update(V),he=V.material;he.visible&&C.push(V,ne,he,St,fe.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||it.intersectsObject(V))){const ne=Rt.update(V),he=V.material;if(Mt&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),fe.copy(V.boundingSphere.center)):(ne.boundingSphere===null&&ne.computeBoundingSphere(),fe.copy(ne.boundingSphere.center)),fe.applyMatrix4(V.matrixWorld).applyMatrix4(qt)),Array.isArray(he)){const pe=ne.groups;for(let Le=0,Re=pe.length;Le<Re;Le++){const be=pe[Le],We=he[be.materialIndex];We&&We.visible&&C.push(V,ne,We,St,fe.z,be)}}else he.visible&&C.push(V,ne,he,St,fe.z,null)}}const Yt=V.children;for(let ne=0,he=Yt.length;ne<he;ne++)_a(Yt[ne],ot,St,Mt)}function Gc(V,ot,St,Mt){const ht=V.opaque,Yt=V.transmissive,ne=V.transparent;M.setupLightsView(St),Ct===!0&&ge.setGlobalState(D.clippingPlanes,St),Mt&&Dt.viewport(J.copy(Mt)),ht.length>0&&ra(ht,ot,St),Yt.length>0&&ra(Yt,ot,St),ne.length>0&&ra(ne,ot,St),Dt.buffers.depth.setTest(!0),Dt.buffers.depth.setMask(!0),Dt.buffers.color.setMask(!0),Dt.setPolygonOffset(!1)}function _s(V,ot,St,Mt){if((St.isScene===!0?St.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[Mt.id]===void 0&&(M.state.transmissionRenderTarget[Mt.id]=new Fo(1,1,{generateMipmaps:!0,type:Xt.has("EXT_color_buffer_half_float")||Xt.has("EXT_color_buffer_float")?dd:dr,minFilter:fr,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:gn.workingColorSpace}));const Yt=M.state.transmissionRenderTarget[Mt.id],ne=Mt.viewport||J;Yt.setSize(ne.z*D.transmissionResolutionScale,ne.w*D.transmissionResolutionScale);const he=D.getRenderTarget(),pe=D.getActiveCubeFace(),Le=D.getActiveMipmapLevel();D.setRenderTarget(Yt),D.getClearColor(pt),ut=D.getClearAlpha(),ut<1&&D.setClearColor(16777215,.5),D.clear(),De&&Lt.render(St);const Re=D.toneMapping;D.toneMapping=Po;const be=Mt.viewport;if(Mt.viewport!==void 0&&(Mt.viewport=void 0),M.setupLightsView(Mt),Ct===!0&&ge.setGlobalState(D.clippingPlanes,Mt),ra(V,St,Mt),ie.updateMultisampleRenderTarget(Yt),ie.updateRenderTargetMipmap(Yt),Xt.has("WEBGL_multisampled_render_to_texture")===!1){let We=!1;for(let xn=0,Fn=ot.length;xn<Fn;xn++){const $e=ot[xn],Sn=$e.object,Be=$e.geometry,Bn=$e.material,ln=$e.group;if(Bn.side===va&&Sn.layers.test(Mt.layers)){const Si=Bn.side;Bn.side=Na,Bn.needsUpdate=!0,As(Sn,St,Mt,Be,Bn,ln),Bn.side=Si,Bn.needsUpdate=!0,We=!0}}We===!0&&(ie.updateMultisampleRenderTarget(Yt),ie.updateRenderTargetMipmap(Yt))}D.setRenderTarget(he,pe,Le),D.setClearColor(pt,ut),be!==void 0&&(Mt.viewport=be),D.toneMapping=Re}function ra(V,ot,St){const Mt=ot.isScene===!0?ot.overrideMaterial:null;for(let ht=0,Yt=V.length;ht<Yt;ht++){const ne=V[ht],he=ne.object,pe=ne.geometry,Le=ne.group;let Re=ne.material;Re.allowOverride===!0&&Mt!==null&&(Re=Mt),he.layers.test(St.layers)&&As(he,ot,St,pe,Re,Le)}}function As(V,ot,St,Mt,ht,Yt){V.onBeforeRender(D,ot,St,Mt,ht,Yt),V.modelViewMatrix.multiplyMatrices(St.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),ht.onBeforeRender(D,ot,St,Mt,V,Yt),ht.transparent===!0&&ht.side===va&&ht.forceSinglePass===!1?(ht.side=Na,ht.needsUpdate=!0,D.renderBufferDirect(St,ot,Mt,ht,V,Yt),ht.side=zo,ht.needsUpdate=!0,D.renderBufferDirect(St,ot,Mt,ht,V,Yt),ht.side=va):D.renderBufferDirect(St,ot,Mt,ht,V,Yt),V.onAfterRender(D,ot,St,Mt,ht,Yt)}function Dn(V,ot,St){ot.isScene!==!0&&(ot=_e);const Mt=Vt.get(V),ht=M.state.lights,Yt=M.state.shadowsArray,ne=ht.state.version,he=wt.getParameters(V,ht.state,Yt,ot,St),pe=wt.getProgramCacheKey(he);let Le=Mt.programs;Mt.environment=V.isMeshStandardMaterial?ot.environment:null,Mt.fog=ot.fog,Mt.envMap=(V.isMeshStandardMaterial?Q:Oe).get(V.envMap||Mt.environment),Mt.envMapRotation=Mt.environment!==null&&V.envMap===null?ot.environmentRotation:V.envMapRotation,Le===void 0&&(V.addEventListener("dispose",le),Le=new Map,Mt.programs=Le);let Re=Le.get(pe);if(Re!==void 0){if(Mt.currentProgram===Re&&Mt.lightsStateVersion===ne)return Ss(V,he),Re}else he.uniforms=wt.getUniforms(V),V.onBeforeCompile(he,D),Re=wt.acquireProgram(he,pe),Le.set(pe,Re),Mt.uniforms=he.uniforms;const be=Mt.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(be.clippingPlanes=ge.uniform),Ss(V,he),Mt.needsLights=mi(V),Mt.lightsStateVersion=ne,Mt.needsLights&&(be.ambientLightColor.value=ht.state.ambient,be.lightProbe.value=ht.state.probe,be.directionalLights.value=ht.state.directional,be.directionalLightShadows.value=ht.state.directionalShadow,be.spotLights.value=ht.state.spot,be.spotLightShadows.value=ht.state.spotShadow,be.rectAreaLights.value=ht.state.rectArea,be.ltc_1.value=ht.state.rectAreaLTC1,be.ltc_2.value=ht.state.rectAreaLTC2,be.pointLights.value=ht.state.point,be.pointLightShadows.value=ht.state.pointShadow,be.hemisphereLights.value=ht.state.hemi,be.directionalShadowMap.value=ht.state.directionalShadowMap,be.directionalShadowMatrix.value=ht.state.directionalShadowMatrix,be.spotShadowMap.value=ht.state.spotShadowMap,be.spotLightMatrix.value=ht.state.spotLightMatrix,be.spotLightMap.value=ht.state.spotLightMap,be.pointShadowMap.value=ht.state.pointShadowMap,be.pointShadowMatrix.value=ht.state.pointShadowMatrix),Mt.currentProgram=Re,Mt.uniformsList=null,Re}function xs(V){if(V.uniformsList===null){const ot=V.currentProgram.getUniforms();V.uniformsList=nv.seqWithValue(ot.seq,V.uniforms)}return V.uniformsList}function Ss(V,ot){const St=Vt.get(V);St.outputColorSpace=ot.outputColorSpace,St.batching=ot.batching,St.batchingColor=ot.batchingColor,St.instancing=ot.instancing,St.instancingColor=ot.instancingColor,St.instancingMorph=ot.instancingMorph,St.skinning=ot.skinning,St.morphTargets=ot.morphTargets,St.morphNormals=ot.morphNormals,St.morphColors=ot.morphColors,St.morphTargetsCount=ot.morphTargetsCount,St.numClippingPlanes=ot.numClippingPlanes,St.numIntersection=ot.numClipIntersection,St.vertexAlphas=ot.vertexAlphas,St.vertexTangents=ot.vertexTangents,St.toneMapping=ot.toneMapping}function Zr(V,ot,St,Mt,ht){ot.isScene!==!0&&(ot=_e),ie.resetTextureUnits();const Yt=ot.fog,ne=Mt.isMeshStandardMaterial?ot.environment:null,he=k===null?D.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:Ic,pe=(Mt.isMeshStandardMaterial?Q:Oe).get(Mt.envMap||ne),Le=Mt.vertexColors===!0&&!!St.attributes.color&&St.attributes.color.itemSize===4,Re=!!St.attributes.tangent&&(!!Mt.normalMap||Mt.anisotropy>0),be=!!St.morphAttributes.position,We=!!St.morphAttributes.normal,xn=!!St.morphAttributes.color;let Fn=Po;Mt.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(Fn=D.toneMapping);const $e=St.morphAttributes.position||St.morphAttributes.normal||St.morphAttributes.color,Sn=$e!==void 0?$e.length:0,Be=Vt.get(Mt),Bn=M.state.lights;if(Ct===!0&&(Ht===!0||V!==N)){const Bi=V===N&&Mt.id===L;ge.setState(Mt,V,Bi)}let ln=!1;Mt.version===Be.__version?(Be.needsLights&&Be.lightsStateVersion!==Bn.state.version||Be.outputColorSpace!==he||ht.isBatchedMesh&&Be.batching===!1||!ht.isBatchedMesh&&Be.batching===!0||ht.isBatchedMesh&&Be.batchingColor===!0&&ht.colorTexture===null||ht.isBatchedMesh&&Be.batchingColor===!1&&ht.colorTexture!==null||ht.isInstancedMesh&&Be.instancing===!1||!ht.isInstancedMesh&&Be.instancing===!0||ht.isSkinnedMesh&&Be.skinning===!1||!ht.isSkinnedMesh&&Be.skinning===!0||ht.isInstancedMesh&&Be.instancingColor===!0&&ht.instanceColor===null||ht.isInstancedMesh&&Be.instancingColor===!1&&ht.instanceColor!==null||ht.isInstancedMesh&&Be.instancingMorph===!0&&ht.morphTexture===null||ht.isInstancedMesh&&Be.instancingMorph===!1&&ht.morphTexture!==null||Be.envMap!==pe||Mt.fog===!0&&Be.fog!==Yt||Be.numClippingPlanes!==void 0&&(Be.numClippingPlanes!==ge.numPlanes||Be.numIntersection!==ge.numIntersection)||Be.vertexAlphas!==Le||Be.vertexTangents!==Re||Be.morphTargets!==be||Be.morphNormals!==We||Be.morphColors!==xn||Be.toneMapping!==Fn||Be.morphTargetsCount!==Sn)&&(ln=!0):(ln=!0,Be.__version=Mt.version);let Si=Be.currentProgram;ln===!0&&(Si=Dn(Mt,ot,ht));let Vs=!1,On=!1,Xs=!1;const Un=Si.getUniforms(),Hi=Be.uniforms;if(Dt.useProgram(Si.program)&&(Vs=!0,On=!0,Xs=!0),Mt.id!==L&&(L=Mt.id,On=!0),Vs||N!==V){Dt.buffers.depth.getReversed()?(Qt.copy(V.projectionMatrix),_R(Qt),AR(Qt),Un.setValue(K,"projectionMatrix",Qt)):Un.setValue(K,"projectionMatrix",V.projectionMatrix),Un.setValue(K,"viewMatrix",V.matrixWorldInverse);const wi=Un.map.cameraPosition;wi!==void 0&&wi.setValue(K,Ee.setFromMatrixPosition(V.matrixWorld)),Gt.logarithmicDepthBuffer&&Un.setValue(K,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(Mt.isMeshPhongMaterial||Mt.isMeshToonMaterial||Mt.isMeshLambertMaterial||Mt.isMeshBasicMaterial||Mt.isMeshStandardMaterial||Mt.isShaderMaterial)&&Un.setValue(K,"isOrthographic",V.isOrthographicCamera===!0),N!==V&&(N=V,On=!0,Xs=!0)}if(ht.isSkinnedMesh){Un.setOptional(K,ht,"bindMatrix"),Un.setOptional(K,ht,"bindMatrixInverse");const Bi=ht.skeleton;Bi&&(Bi.boneTexture===null&&Bi.computeBoneTexture(),Un.setValue(K,"boneTexture",Bi.boneTexture,ie))}ht.isBatchedMesh&&(Un.setOptional(K,ht,"batchingTexture"),Un.setValue(K,"batchingTexture",ht._matricesTexture,ie),Un.setOptional(K,ht,"batchingIdTexture"),Un.setValue(K,"batchingIdTexture",ht._indirectTexture,ie),Un.setOptional(K,ht,"batchingColorTexture"),ht._colorsTexture!==null&&Un.setValue(K,"batchingColorTexture",ht._colorsTexture,ie));const gi=St.morphAttributes;if((gi.position!==void 0||gi.normal!==void 0||gi.color!==void 0)&&ee.update(ht,St,Si),(On||Be.receiveShadow!==ht.receiveShadow)&&(Be.receiveShadow=ht.receiveShadow,Un.setValue(K,"receiveShadow",ht.receiveShadow)),Mt.isMeshGouraudMaterial&&Mt.envMap!==null&&(Hi.envMap.value=pe,Hi.flipEnvMap.value=pe.isCubeTexture&&pe.isRenderTargetTexture===!1?-1:1),Mt.isMeshStandardMaterial&&Mt.envMap===null&&ot.environment!==null&&(Hi.envMapIntensity.value=ot.environmentIntensity),On&&(Un.setValue(K,"toneMappingExposure",D.toneMappingExposure),Be.needsLights&&gr(Hi,Xs),Yt&&Mt.fog===!0&&Bt.refreshFogUniforms(Hi,Yt),Bt.refreshMaterialUniforms(Hi,Mt,j,W,M.state.transmissionRenderTarget[V.id]),nv.upload(K,xs(Be),Hi,ie)),Mt.isShaderMaterial&&Mt.uniformsNeedUpdate===!0&&(nv.upload(K,xs(Be),Hi,ie),Mt.uniformsNeedUpdate=!1),Mt.isSpriteMaterial&&Un.setValue(K,"center",ht.center),Un.setValue(K,"modelViewMatrix",ht.modelViewMatrix),Un.setValue(K,"normalMatrix",ht.normalMatrix),Un.setValue(K,"modelMatrix",ht.matrixWorld),Mt.isShaderMaterial||Mt.isRawShaderMaterial){const Bi=Mt.uniformsGroups;for(let wi=0,oa=Bi.length;wi<oa;wi++){const Ys=Bi[wi];$.update(Ys,Si),$.bind(Ys,Si)}}return Si}function gr(V,ot){V.ambientLightColor.needsUpdate=ot,V.lightProbe.needsUpdate=ot,V.directionalLights.needsUpdate=ot,V.directionalLightShadows.needsUpdate=ot,V.pointLights.needsUpdate=ot,V.pointLightShadows.needsUpdate=ot,V.spotLights.needsUpdate=ot,V.spotLightShadows.needsUpdate=ot,V.rectAreaLights.needsUpdate=ot,V.hemisphereLights.needsUpdate=ot}function mi(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return F},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(V,ot,St){const Mt=Vt.get(V);Mt.__autoAllocateDepthBuffer=V.resolveDepthBuffer===!1,Mt.__autoAllocateDepthBuffer===!1&&(Mt.__useRenderToTexture=!1),Vt.get(V.texture).__webglTexture=ot,Vt.get(V.depthTexture).__webglTexture=Mt.__autoAllocateDepthBuffer?void 0:St,Mt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,ot){const St=Vt.get(V);St.__webglFramebuffer=ot,St.__useDefaultFramebuffer=ot===void 0};const Bl=K.createFramebuffer();this.setRenderTarget=function(V,ot=0,St=0){k=V,I=ot,F=St;let Mt=!0,ht=null,Yt=!1,ne=!1;if(V){const pe=Vt.get(V);if(pe.__useDefaultFramebuffer!==void 0)Dt.bindFramebuffer(K.FRAMEBUFFER,null),Mt=!1;else if(pe.__webglFramebuffer===void 0)ie.setupRenderTarget(V);else if(pe.__hasExternalTextures)ie.rebindTextures(V,Vt.get(V.texture).__webglTexture,Vt.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const be=V.depthTexture;if(pe.__boundDepthTexture!==be){if(be!==null&&Vt.has(be)&&(V.width!==be.image.width||V.height!==be.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ie.setupDepthRenderbuffer(V)}}const Le=V.texture;(Le.isData3DTexture||Le.isDataArrayTexture||Le.isCompressedArrayTexture)&&(ne=!0);const Re=Vt.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(Re[ot])?ht=Re[ot][St]:ht=Re[ot],Yt=!0):V.samples>0&&ie.useMultisampledRTT(V)===!1?ht=Vt.get(V).__webglMultisampledFramebuffer:Array.isArray(Re)?ht=Re[St]:ht=Re,J.copy(V.viewport),ct.copy(V.scissor),at=V.scissorTest}else J.copy(nt).multiplyScalar(j).floor(),ct.copy(_t).multiplyScalar(j).floor(),at=Tt;if(St!==0&&(ht=Bl),Dt.bindFramebuffer(K.FRAMEBUFFER,ht)&&Mt&&Dt.drawBuffers(V,ht),Dt.viewport(J),Dt.scissor(ct),Dt.setScissorTest(at),Yt){const pe=Vt.get(V.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+ot,pe.__webglTexture,St)}else if(ne){const pe=Vt.get(V.texture),Le=ot;K.framebufferTextureLayer(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,pe.__webglTexture,St,Le)}else if(V!==null&&St!==0){const pe=Vt.get(V.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,pe.__webglTexture,St)}L=-1},this.readRenderTargetPixels=function(V,ot,St,Mt,ht,Yt,ne,he=0){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let pe=Vt.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ne!==void 0&&(pe=pe[ne]),pe){Dt.bindFramebuffer(K.FRAMEBUFFER,pe);try{const Le=V.textures[he],Re=Le.format,be=Le.type;if(!Gt.textureFormatReadable(Re)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Gt.textureTypeReadable(be)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ot>=0&&ot<=V.width-Mt&&St>=0&&St<=V.height-ht&&(V.textures.length>1&&K.readBuffer(K.COLOR_ATTACHMENT0+he),K.readPixels(ot,St,Mt,ht,gt.convert(Re),gt.convert(be),Yt))}finally{const Le=k!==null?Vt.get(k).__webglFramebuffer:null;Dt.bindFramebuffer(K.FRAMEBUFFER,Le)}}},this.readRenderTargetPixelsAsync=async function(V,ot,St,Mt,ht,Yt,ne,he=0){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let pe=Vt.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&ne!==void 0&&(pe=pe[ne]),pe)if(ot>=0&&ot<=V.width-Mt&&St>=0&&St<=V.height-ht){Dt.bindFramebuffer(K.FRAMEBUFFER,pe);const Le=V.textures[he],Re=Le.format,be=Le.type;if(!Gt.textureFormatReadable(Re))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Gt.textureTypeReadable(be))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const We=K.createBuffer();K.bindBuffer(K.PIXEL_PACK_BUFFER,We),K.bufferData(K.PIXEL_PACK_BUFFER,Yt.byteLength,K.STREAM_READ),V.textures.length>1&&K.readBuffer(K.COLOR_ATTACHMENT0+he),K.readPixels(ot,St,Mt,ht,gt.convert(Re),gt.convert(be),0);const xn=k!==null?Vt.get(k).__webglFramebuffer:null;Dt.bindFramebuffer(K.FRAMEBUFFER,xn);const Fn=K.fenceSync(K.SYNC_GPU_COMMANDS_COMPLETE,0);return K.flush(),await yR(K,Fn,4),K.bindBuffer(K.PIXEL_PACK_BUFFER,We),K.getBufferSubData(K.PIXEL_PACK_BUFFER,0,Yt),K.deleteBuffer(We),K.deleteSync(Fn),Yt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(V,ot=null,St=0){const Mt=Math.pow(2,-St),ht=Math.floor(V.image.width*Mt),Yt=Math.floor(V.image.height*Mt),ne=ot!==null?ot.x:0,he=ot!==null?ot.y:0;ie.setTexture2D(V,0),K.copyTexSubImage2D(K.TEXTURE_2D,St,0,0,ne,he,ht,Yt),Dt.unbindTexture()};const wl=K.createFramebuffer(),Ms=K.createFramebuffer();this.copyTextureToTexture=function(V,ot,St=null,Mt=null,ht=0,Yt=null){Yt===null&&(ht!==0?(jh("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Yt=ht,ht=0):Yt=0);let ne,he,pe,Le,Re,be,We,xn,Fn;const $e=V.isCompressedTexture?V.mipmaps[Yt]:V.image;if(St!==null)ne=St.max.x-St.min.x,he=St.max.y-St.min.y,pe=St.isBox3?St.max.z-St.min.z:1,Le=St.min.x,Re=St.min.y,be=St.isBox3?St.min.z:0;else{const gi=Math.pow(2,-ht);ne=Math.floor($e.width*gi),he=Math.floor($e.height*gi),V.isDataArrayTexture?pe=$e.depth:V.isData3DTexture?pe=Math.floor($e.depth*gi):pe=1,Le=0,Re=0,be=0}Mt!==null?(We=Mt.x,xn=Mt.y,Fn=Mt.z):(We=0,xn=0,Fn=0);const Sn=gt.convert(ot.format),Be=gt.convert(ot.type);let Bn;ot.isData3DTexture?(ie.setTexture3D(ot,0),Bn=K.TEXTURE_3D):ot.isDataArrayTexture||ot.isCompressedArrayTexture?(ie.setTexture2DArray(ot,0),Bn=K.TEXTURE_2D_ARRAY):(ie.setTexture2D(ot,0),Bn=K.TEXTURE_2D),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,ot.flipY),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ot.premultiplyAlpha),K.pixelStorei(K.UNPACK_ALIGNMENT,ot.unpackAlignment);const ln=K.getParameter(K.UNPACK_ROW_LENGTH),Si=K.getParameter(K.UNPACK_IMAGE_HEIGHT),Vs=K.getParameter(K.UNPACK_SKIP_PIXELS),On=K.getParameter(K.UNPACK_SKIP_ROWS),Xs=K.getParameter(K.UNPACK_SKIP_IMAGES);K.pixelStorei(K.UNPACK_ROW_LENGTH,$e.width),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,$e.height),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Le),K.pixelStorei(K.UNPACK_SKIP_ROWS,Re),K.pixelStorei(K.UNPACK_SKIP_IMAGES,be);const Un=V.isDataArrayTexture||V.isData3DTexture,Hi=ot.isDataArrayTexture||ot.isData3DTexture;if(V.isDepthTexture){const gi=Vt.get(V),Bi=Vt.get(ot),wi=Vt.get(gi.__renderTarget),oa=Vt.get(Bi.__renderTarget);Dt.bindFramebuffer(K.READ_FRAMEBUFFER,wi.__webglFramebuffer),Dt.bindFramebuffer(K.DRAW_FRAMEBUFFER,oa.__webglFramebuffer);for(let Ys=0;Ys<pe;Ys++)Un&&(K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Vt.get(V).__webglTexture,ht,be+Ys),K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Vt.get(ot).__webglTexture,Yt,Fn+Ys)),K.blitFramebuffer(Le,Re,ne,he,We,xn,ne,he,K.DEPTH_BUFFER_BIT,K.NEAREST);Dt.bindFramebuffer(K.READ_FRAMEBUFFER,null),Dt.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else if(ht!==0||V.isRenderTargetTexture||Vt.has(V)){const gi=Vt.get(V),Bi=Vt.get(ot);Dt.bindFramebuffer(K.READ_FRAMEBUFFER,wl),Dt.bindFramebuffer(K.DRAW_FRAMEBUFFER,Ms);for(let wi=0;wi<pe;wi++)Un?K.framebufferTextureLayer(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,gi.__webglTexture,ht,be+wi):K.framebufferTexture2D(K.READ_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,gi.__webglTexture,ht),Hi?K.framebufferTextureLayer(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,Bi.__webglTexture,Yt,Fn+wi):K.framebufferTexture2D(K.DRAW_FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,Bi.__webglTexture,Yt),ht!==0?K.blitFramebuffer(Le,Re,ne,he,We,xn,ne,he,K.COLOR_BUFFER_BIT,K.NEAREST):Hi?K.copyTexSubImage3D(Bn,Yt,We,xn,Fn+wi,Le,Re,ne,he):K.copyTexSubImage2D(Bn,Yt,We,xn,Le,Re,ne,he);Dt.bindFramebuffer(K.READ_FRAMEBUFFER,null),Dt.bindFramebuffer(K.DRAW_FRAMEBUFFER,null)}else Hi?V.isDataTexture||V.isData3DTexture?K.texSubImage3D(Bn,Yt,We,xn,Fn,ne,he,pe,Sn,Be,$e.data):ot.isCompressedArrayTexture?K.compressedTexSubImage3D(Bn,Yt,We,xn,Fn,ne,he,pe,Sn,$e.data):K.texSubImage3D(Bn,Yt,We,xn,Fn,ne,he,pe,Sn,Be,$e):V.isDataTexture?K.texSubImage2D(K.TEXTURE_2D,Yt,We,xn,ne,he,Sn,Be,$e.data):V.isCompressedTexture?K.compressedTexSubImage2D(K.TEXTURE_2D,Yt,We,xn,$e.width,$e.height,Sn,$e.data):K.texSubImage2D(K.TEXTURE_2D,Yt,We,xn,ne,he,Sn,Be,$e);K.pixelStorei(K.UNPACK_ROW_LENGTH,ln),K.pixelStorei(K.UNPACK_IMAGE_HEIGHT,Si),K.pixelStorei(K.UNPACK_SKIP_PIXELS,Vs),K.pixelStorei(K.UNPACK_SKIP_ROWS,On),K.pixelStorei(K.UNPACK_SKIP_IMAGES,Xs),Yt===0&&ot.generateMipmaps&&K.generateMipmap(Bn),Dt.unbindTexture()},this.copyTextureToTexture3D=function(V,ot,St=null,Mt=null,ht=0){return jh('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(V,ot,St,Mt,ht)},this.initRenderTarget=function(V){Vt.get(V).__webglFramebuffer===void 0&&ie.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?ie.setTextureCube(V,0):V.isData3DTexture?ie.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?ie.setTexture2DArray(V,0):ie.setTexture2D(V,0),Dt.unbindTexture()},this.resetState=function(){I=0,F=0,k=null,Dt.reset(),Jt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return hr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=gn._getDrawingBufferColorSpace(t),e.unpackColorSpace=gn._getUnpackColorSpace()}}const wN=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:sx,AddEquation:wc,AddOperation:CE,AdditiveAnimationBlendMode:dx,AdditiveBlending:OA,AgXToneMapping:UE,AlphaFormat:cx,AlwaysCompare:WE,AlwaysDepth:lv,AlwaysStencilFunc:HA,AmbientLight:I1,AnimationAction:q1,AnimationClip:cd,AnimationLoader:J2,AnimationMixer:AB,AnimationObjectGroup:yB,AnimationUtils:X2,ArcCurve:f1,ArrayCamera:X1,ArrowHelper:GB,AttachedBindMode:PA,Audio:Y1,AudioAnalyser:lB,AudioContext:Xx,AudioListener:sB,AudioLoader:nB,AxesHelper:VB,BackSide:Na,BasicDepthPacking:GE,BasicShadowMap:oE,BatchedMesh:l1,Bone:hy,BooleanKeyframeTrack:_f,Box2:CB,Box3:ya,Box3Helper:zB,BoxGeometry:yf,BoxHelper:HB,BufferAttribute:bn,BufferGeometry:Ke,BufferGeometryLoader:G1,ByteType:rx,Cache:Io,Camera:cy,CameraHelper:PB,CanvasTexture:h2,CapsuleGeometry:gy,CatmullRomCurve3:h1,CineonToneMapping:wE,CircleGeometry:vy,ClampToEdgeWrapping:zs,Clock:Yx,Color:oe,ColorKeyframeTrack:Px,ColorManagement:gn,CompressedArrayTexture:u2,CompressedCubeTexture:f2,CompressedTexture:my,CompressedTextureLoader:K2,ConeGeometry:Tm,ConstantAlphaFactor:bE,ConstantColorFactor:SE,Controls:YB,CubeCamera:i1,CubeReflectionMapping:Tl,CubeRefractionMapping:Lc,CubeTexture:Sm,CubeTextureLoader:j2,CubeUVReflectionMapping:hd,CubicBezierCurve:Rx,CubicBezierCurve3:d1,CubicInterpolant:D1,CullFaceBack:NA,CullFaceFront:rE,CullFaceFrontBack:MC,CullFaceNone:sE,Curve:Qr,CurvePath:m1,CustomBlending:lE,CustomToneMapping:DE,CylinderGeometry:Em,Cylindrical:TB,Data3DTexture:ly,DataArrayTexture:oy,DataTexture:Ho,DataTextureLoader:W2,DataUtils:LR,DecrementStencilOp:UC,DecrementWrapStencilOp:OC,DefaultLoadingManager:O1,DepthFormat:ed,DepthStencilFormat:nd,DepthTexture:Tx,DetachedBindMode:OE,DirectionalLight:Vx,DirectionalLightHelper:IB,DiscreteInterpolant:U1,DodecahedronGeometry:yy,DoubleSide:va,DstAlphaFactor:vE,DstColorFactor:_E,DynamicCopyUsage:jC,DynamicDrawUsage:XC,DynamicReadUsage:qC,EdgesGeometry:u1,EllipseCurve:_y,EqualCompare:qE,EqualDepth:uv,EqualStencilFunc:HC,EquirectangularReflectionMapping:om,EquirectangularRefractionMapping:lm,Euler:ia,EventDispatcher:Go,ExtrudeGeometry:Ay,FileLoader:Gs,Float16BufferAttribute:VR,Float32BufferAttribute:Se,FloatType:ys,Fog:fy,FogExp2:uy,FramebufferTexture:c2,FrontSide:zo,Frustum:pd,FrustumArray:dy,GLBufferAttribute:EB,GLSL1:QC,GLSL3:zA,GreaterCompare:JE,GreaterDepth:hv,GreaterEqualCompare:jE,GreaterEqualDepth:fv,GreaterEqualStencilFunc:VC,GreaterStencilFunc:FC,GridHelper:OB,Group:Sl,HalfFloatType:dd,HemisphereLight:L1,HemisphereLightHelper:NB,IcosahedronGeometry:xy,ImageBitmapLoader:V1,ImageLoader:vm,ImageUtils:$E,IncrementStencilOp:DC,IncrementWrapStencilOp:NC,InstancedBufferAttribute:uf,InstancedBufferGeometry:F1,InstancedInterleavedBuffer:bB,InstancedMesh:Mx,Int16BufferAttribute:FR,Int32BufferAttribute:GR,Int8BufferAttribute:PR,IntType:ty,InterleavedBuffer:Mm,InterleavedBufferAttribute:Pc,Interpolant:gd,InterpolateDiscrete:id,InterpolateLinear:ad,InterpolateSmooth:tv,InterpolationSamplingMode:tR,InterpolationSamplingType:$C,InvertStencilOp:LC,KeepStencilOp:Wu,KeyframeTrack:mr,LOD:o1,LatheGeometry:Sy,Layers:rd,LessCompare:kE,LessDepth:cv,LessEqualCompare:mx,LessEqualDepth:cf,LessEqualStencilFunc:zC,LessStencilFunc:PC,Light:Fc,LightProbe:z1,Line:Rl,Line3:RB,LineBasicMaterial:Oa,LineCurve:Bx,LineCurve3:p1,LineDashedMaterial:R1,LineLoop:bx,LineSegments:Wr,LinearFilter:hi,LinearInterpolant:Ix,LinearMipMapLinearFilter:IE,LinearMipMapNearestFilter:LE,LinearMipmapLinearFilter:fr,LinearMipmapNearestFilter:Kh,LinearSRGBColorSpace:Ic,LinearToneMapping:RE,LinearTransfer:um,Loader:La,LoaderUtils:Nc,LoadingManager:Hx,LoopOnce:PE,LoopPingPong:zE,LoopRepeat:HE,MOUSE:Ku,Material:Ji,MaterialLoader:By,MathUtils:kh,Matrix2:Kx,Matrix3:Ze,Matrix4:Ne,MaxEquation:hE,Mesh:Ri,MeshBasicMaterial:es,MeshDepthMaterial:Nx,MeshDistanceMaterial:Ox,MeshLambertMaterial:T1,MeshMatcapMaterial:C1,MeshNormalMaterial:E1,MeshPhongMaterial:M1,MeshPhysicalMaterial:pr,MeshStandardMaterial:hf,MeshToonMaterial:b1,MinEquation:fE,MirroredRepeatWrapping:Zh,MixOperation:TE,MultiplyBlending:IA,MultiplyOperation:Am,NearestFilter:aa,NearestMipMapLinearFilter:EC,NearestMipMapNearestFilter:bC,NearestMipmapLinearFilter:$u,NearestMipmapNearestFilter:$v,NeutralToneMapping:NE,NeverCompare:YE,NeverDepth:ov,NeverStencilFunc:IC,NoBlending:Ml,NoColorSpace:Al,NoToneMapping:Po,NormalAnimationBlendMode:ry,NormalBlending:rf,NotEqualCompare:KE,NotEqualDepth:dv,NotEqualStencilFunc:GC,NumberKeyframeTrack:df,Object3D:vn,ObjectLoader:tB,ObjectSpaceNormalMap:XE,OctahedronGeometry:Cm,OneFactor:pE,OneMinusConstantAlphaFactor:EE,OneMinusConstantColorFactor:ME,OneMinusDstAlphaFactor:yE,OneMinusDstColorFactor:AE,OneMinusSrcAlphaFactor:rv,OneMinusSrcColorFactor:gE,OrthographicCamera:Kr,PCFShadowMap:Qv,PCFSoftShadowMap:Wp,PMREMGenerator:JA,Path:Yv,PerspectiveCamera:ii,Plane:_l,PlaneGeometry:md,PlaneHelper:FB,PointLight:Gx,PointLightHelper:DB,Points:Ex,PointsMaterial:py,PolarGridHelper:LB,PolyhedronGeometry:zc,PositionalAudio:oB,PropertyBinding:An,PropertyMixer:k1,QuadraticBezierCurve:wx,QuadraticBezierCurve3:Dx,Quaternion:ui,QuaternionKeyframeTrack:pf,QuaternionLinearInterpolant:N1,RED_GREEN_RGTC2_Format:Hv,RED_RGTC1_Format:hx,REVISION:_m,RGBADepthPacking:VE,RGBAFormat:Ua,RGBAIntegerFormat:sy,RGBA_ASTC_10x10_Format:Uv,RGBA_ASTC_10x5_Format:Bv,RGBA_ASTC_10x6_Format:wv,RGBA_ASTC_10x8_Format:Dv,RGBA_ASTC_12x10_Format:Nv,RGBA_ASTC_12x12_Format:Ov,RGBA_ASTC_4x4_Format:xv,RGBA_ASTC_5x4_Format:Sv,RGBA_ASTC_5x5_Format:Mv,RGBA_ASTC_6x5_Format:bv,RGBA_ASTC_6x6_Format:Ev,RGBA_ASTC_8x5_Format:Tv,RGBA_ASTC_8x6_Format:Cv,RGBA_ASTC_8x8_Format:Rv,RGBA_BPTC_Format:em,RGBA_ETC2_EAC_Format:Av,RGBA_PVRTC_2BPPV1_Format:vv,RGBA_PVRTC_4BPPV1_Format:gv,RGBA_S3TC_DXT1_Format:Zp,RGBA_S3TC_DXT3_Format:$p,RGBA_S3TC_DXT5_Format:tm,RGBDepthPacking:CC,RGBFormat:ux,RGBIntegerFormat:TC,RGB_BPTC_SIGNED_Format:Lv,RGB_BPTC_UNSIGNED_Format:Iv,RGB_ETC1_Format:yv,RGB_ETC2_Format:_v,RGB_PVRTC_2BPPV1_Format:mv,RGB_PVRTC_4BPPV1_Format:pv,RGB_S3TC_DXT1_Format:Qp,RGDepthPacking:RC,RGFormat:fx,RGIntegerFormat:ay,RawShaderMaterial:S1,Ray:vf,Raycaster:J1,RectAreaLight:P1,RedFormat:iy,RedIntegerFormat:xm,ReinhardToneMapping:BE,RenderTarget:vx,RenderTarget3D:xB,RepeatWrapping:Jr,ReplaceStencilOp:wC,ReverseSubtractEquation:uE,RingGeometry:My,SIGNED_RED_GREEN_RGTC2_Format:zv,SIGNED_RED_RGTC1_Format:Pv,SRGBColorSpace:Pi,SRGBTransfer:zn,Scene:Ax,ShaderChunk:sn,ShaderLib:kr,ShaderMaterial:jr,ShadowMaterial:x1,Shape:lf,ShapeGeometry:by,ShapePath:XB,ShapeUtils:qr,ShortType:ox,Skeleton:bm,SkeletonHelper:wB,SkinnedMesh:Sx,Source:Uc,Sphere:sa,SphereGeometry:Rm,Spherical:kA,SphericalHarmonics3:H1,SplineCurve:Ux,SpotLight:Fx,SpotLightHelper:BB,Sprite:r1,SpriteMaterial:xx,SrcAlphaFactor:sv,SrcAlphaSaturateFactor:xE,SrcColorFactor:mE,StaticCopyUsage:KC,StaticDrawUsage:fm,StaticReadUsage:kC,StereoCamera:iB,StreamCopyUsage:WC,StreamDrawUsage:YC,StreamReadUsage:JC,StringKeyframeTrack:Af,SubtractEquation:cE,SubtractiveBlending:LA,TOUCH:ju,TangentSpaceNormalMap:Hc,TetrahedronGeometry:Ey,Texture:ai,TextureLoader:sm,TextureUtils:jB,TimestampQuery:ZC,TorusGeometry:Ty,TorusKnotGeometry:Cy,Triangle:vs,TriangleFanDrawMode:Fv,TriangleStripDrawMode:px,TrianglesDrawMode:FE,TubeGeometry:Ry,UVMapping:Zv,Uint16BufferAttribute:yx,Uint32BufferAttribute:_x,Uint8BufferAttribute:HR,Uint8ClampedBufferAttribute:zR,Uniform:Jx,UniformsGroup:MB,UniformsLib:ue,UniformsUtils:n1,UnsignedByteType:dr,UnsignedInt248Type:td,UnsignedInt5999Type:lx,UnsignedIntType:Cl,UnsignedShort4444Type:ey,UnsignedShort5551Type:ny,UnsignedShortType:$h,VSMShadowMap:Yr,Vector2:Ot,Vector3:q,Vector4:Mn,VectorKeyframeTrack:mf,VideoFrameTexture:l2,VideoTexture:c1,WebGL3DRenderTarget:ER,WebGLArrayRenderTarget:bR,WebGLCoordinateSystem:hr,WebGLCubeRenderTarget:a1,WebGLRenderTarget:Fo,WebGLRenderer:eT,WebGLUtils:tT,WebGPUCoordinateSystem:hm,WebXRController:ev,WireframeGeometry:A1,WrapAroundEnding:cm,ZeroCurvatureEnding:tf,ZeroFactor:dE,ZeroSlopeEnding:ef,ZeroStencilOp:BC,createCanvasElement:ZE},Symbol.toStringTag,{value:"Module"}));var uA={exports:{}},vl={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb;function DN(){return bb||(bb=1,vl.ConcurrentRoot=1,vl.ContinuousEventPriority=8,vl.DefaultEventPriority=32,vl.DiscreteEventPriority=2,vl.IdleEventPriority=268435456,vl.LegacyRoot=0,vl.NoEventPriority=0),vl}var Eb;function UN(){return Eb||(Eb=1,uA.exports=DN()),uA.exports}var iv=UN(),fA={exports:{}},hA={},dA={exports:{}},pA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb;function NN(){if(Tb)return pA;Tb=1;var r=fd();function t(y,A){return y===A&&(y!==0||1/y===1/A)||y!==y&&A!==A}var e=typeof Object.is=="function"?Object.is:t,n=r.useState,a=r.useEffect,o=r.useLayoutEffect,u=r.useDebugValue;function h(y,A){var S=A(),E=n({inst:{value:S,getSnapshot:A}}),R=E[0].inst,C=E[1];return o(function(){R.value=S,R.getSnapshot=A,d(R)&&C({inst:R})},[y,S,A]),a(function(){return d(R)&&C({inst:R}),y(function(){d(R)&&C({inst:R})})},[y]),u(S),S}function d(y){var A=y.getSnapshot;y=y.value;try{var S=A();return!e(y,S)}catch{return!0}}function m(y,A){return A()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return pA.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:v,pA}var Cb;function ON(){return Cb||(Cb=1,dA.exports=NN()),dA.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rb;function LN(){if(Rb)return hA;Rb=1;var r=fd(),t=ON();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,o=r.useRef,u=r.useEffect,h=r.useMemo,d=r.useDebugValue;return hA.useSyncExternalStoreWithSelector=function(m,v,y,A,S){var E=o(null);if(E.current===null){var R={hasValue:!1,value:null};E.current=R}else R=E.current;E=h(function(){function M(I){if(!w){if(w=!0,U=I,I=A(I),S!==void 0&&R.hasValue){var F=R.value;if(S(F,I))return D=F}return D=I}if(F=D,n(U,I))return F;var k=A(I);return S!==void 0&&S(F,k)?(U=I,F):(U=I,D=k)}var w=!1,U,D,P=y===void 0?null:y;return[function(){return M(v())},P===null?void 0:function(){return M(P())}]},[v,y,A,S]);var C=a(m,E[0],E[1]);return u(function(){R.hasValue=!0,R.value=C},[C]),d(C),C},hA}var Bb;function IN(){return Bb||(Bb=1,fA.exports=LN()),fA.exports}var PN=IN();const HN=ax(PN),wb=r=>{let t;const e=new Set,n=(m,v)=>{const y=typeof m=="function"?m(t):m;if(!Object.is(y,t)){const A=t;t=v??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(S=>S(t,A))}},a=()=>t,h={setState:n,getState:a,getInitialState:()=>d,subscribe:m=>(e.add(m),()=>e.delete(m))},d=t=r(n,a,h);return h},zN=r=>r?wb(r):wb,{useSyncExternalStoreWithSelector:FN}=HN,GN=r=>r;function VN(r,t=GN,e){const n=FN(r.subscribe,r.getState,r.getInitialState,t,e);return gC.useDebugValue(n),n}const Db=(r,t)=>{const e=zN(r),n=(a,o=t)=>VN(e,a,o);return Object.assign(n,e),n},XN=(r,t)=>r?Db(r,t):Db;var mA={exports:{}},gA={exports:{}},vA={exports:{}},yA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub;function YN(){return Ub||(Ub=1,function(r){function t(H,W){var j=H.length;H.push(W);t:for(;0<j;){var lt=j-1>>>1,X=H[lt];if(0<a(X,W))H[lt]=W,H[j]=X,j=lt;else break t}}function e(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var W=H[0],j=H.pop();if(j!==W){H[0]=j;t:for(var lt=0,X=H.length,nt=X>>>1;lt<nt;){var _t=2*(lt+1)-1,Tt=H[_t],it=_t+1,Ct=H[it];if(0>a(Tt,j))it<X&&0>a(Ct,Tt)?(H[lt]=Ct,H[it]=j,lt=it):(H[lt]=Tt,H[_t]=j,lt=_t);else if(it<X&&0>a(Ct,j))H[lt]=Ct,H[it]=j,lt=it;else break t}}return W}function a(H,W){var j=H.sortIndex-W.sortIndex;return j!==0?j:H.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],m=[],v=1,y=null,A=3,S=!1,E=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function U(H){for(var W=e(m);W!==null;){if(W.callback===null)n(m);else if(W.startTime<=H)n(m),W.sortIndex=W.expirationTime,t(d,W);else break;W=e(m)}}function D(H){if(R=!1,U(H),!E)if(e(d)!==null)E=!0,pt();else{var W=e(m);W!==null&&ut(D,W.startTime-H)}}var P=!1,I=-1,F=5,k=-1;function L(){return!(r.unstable_now()-k<F)}function N(){if(P){var H=r.unstable_now();k=H;var W=!0;try{t:{E=!1,R&&(R=!1,M(I),I=-1),S=!0;var j=A;try{e:{for(U(H),y=e(d);y!==null&&!(y.expirationTime>H&&L());){var lt=y.callback;if(typeof lt=="function"){y.callback=null,A=y.priorityLevel;var X=lt(y.expirationTime<=H);if(H=r.unstable_now(),typeof X=="function"){y.callback=X,U(H),W=!0;break e}y===e(d)&&n(d),U(H)}else n(d);y=e(d)}if(y!==null)W=!0;else{var nt=e(m);nt!==null&&ut(D,nt.startTime-H),W=!1}}break t}finally{y=null,A=j,S=!1}W=void 0}}finally{W?J():P=!1}}}var J;if(typeof w=="function")J=function(){w(N)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,at=ct.port2;ct.port1.onmessage=N,J=function(){at.postMessage(null)}}else J=function(){C(N,0)};function pt(){P||(P=!0,J())}function ut(H,W){I=C(function(){H(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){E||S||(E=!0,pt())},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return e(d)},r.unstable_next=function(H){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var j=A;A=W;try{return H()}finally{A=j}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=A;A=H;try{return W()}finally{A=j}},r.unstable_scheduleCallback=function(H,W,j){var lt=r.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?lt+j:lt):j=lt,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=j+X,H={id:v++,callback:W,priorityLevel:H,startTime:j,expirationTime:X,sortIndex:-1},j>lt?(H.sortIndex=j,t(m,H),e(d)===null&&H===e(m)&&(R?(M(I),I=-1):R=!0,ut(D,j-lt))):(H.sortIndex=X,t(d,H),E||S||(E=!0,pt())),H},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(H){var W=A;return function(){var j=A;A=W;try{return H.apply(this,arguments)}finally{A=j}}}}(yA)),yA}var Nb;function kN(){return Nb||(Nb=1,vA.exports=YN()),vA.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob;function qN(){return Ob||(Ob=1,function(r){r.exports=function(t){function e(l,c,g,x){return new Jd(l,c,g,x)}function n(){}function a(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){return l===null||typeof l!="object"?null:(l=Br&&l[Br]||l["@@iterator"],typeof l=="function"?l:null)}function u(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Qd?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case mo:return"Fragment";case ss:return"Portal";case kf:return"Profiler";case mu:return"StrictMode";case qf:return"Suspense";case Wl:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Ts:return(l.displayName||"Context")+".Provider";case jd:return(l._context.displayName||"Context")+".Consumer";case vu:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Jf:return c=l.displayName||null,c!==null?c:u(l.type)||"Memo";case rs:c=l._payload,l=l._init;try{return u(l(c))}catch{}}return null}function h(l){if(js===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);js=c&&c[1]||"",wr=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+js+l+wr}function d(l,c){if(!l||qo)return"";qo=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(Ye){var me=Ye}Reflect.construct(l,[],ce)}else{try{ce.call()}catch(Ye){me=Ye}l.call(ce.prototype)}}else{try{throw Error()}catch(Ye){me=Ye}(ce=l())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(Ye){if(Ye&&me&&typeof Ye.stack=="string")return[Ye.stack,me.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=x.DetermineComponentFrameRoot(),Y=B[0],tt=B[1];if(Y&&tt){var dt=Y.split(`
`),Ut=tt.split(`
`);for(T=x=0;x<dt.length&&!dt[x].includes("DetermineComponentFrameRoot");)x++;for(;T<Ut.length&&!Ut[T].includes("DetermineComponentFrameRoot");)T++;if(x===dt.length||T===Ut.length)for(x=dt.length-1,T=Ut.length-1;1<=x&&0<=T&&dt[x]!==Ut[T];)T--;for(;1<=x&&0<=T;x--,T--)if(dt[x]!==Ut[T]){if(x!==1||T!==1)do if(x--,T--,0>T||dt[x]!==Ut[T]){var $t=`
`+dt[x].replace(" at new "," at ");return l.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",l.displayName)),$t}while(1<=x&&0<=T);break}}}finally{qo=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?h(g):""}function m(l){switch(l.tag){case 26:case 27:case 5:return h(l.type);case 16:return h("Lazy");case 13:return h("Suspense");case 19:return h("SuspenseList");case 0:case 15:return l=d(l.type,!1),l;case 11:return l=d(l.type.render,!1),l;case 1:return l=d(l.type,!0),l;default:return""}}function v(l){try{var c="";do c+=m(l),l=l.return;while(l);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function y(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function A(l){if(y(l)!==l)throw Error(a(188))}function S(l){var c=l.alternate;if(!c){if(c=y(l),c===null)throw Error(a(188));return c!==l?null:l}for(var g=l,x=c;;){var T=g.return;if(T===null)break;var B=T.alternate;if(B===null){if(x=T.return,x!==null){g=x;continue}break}if(T.child===B.child){for(B=T.child;B;){if(B===g)return A(T),l;if(B===x)return A(T),c;B=B.sibling}throw Error(a(188))}if(g.return!==x.return)g=T,x=B;else{for(var Y=!1,tt=T.child;tt;){if(tt===g){Y=!0,g=T,x=B;break}if(tt===x){Y=!0,x=T,g=B;break}tt=tt.sibling}if(!Y){for(tt=B.child;tt;){if(tt===g){Y=!0,g=B,x=T;break}if(tt===x){Y=!0,x=B,g=T;break}tt=tt.sibling}if(!Y)throw Error(a(189))}}if(g.alternate!==x)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?l:c}function E(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=E(l),c!==null)return c;l=l.sibling}return null}function R(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(c=R(l),c!==null))return c;l=l.sibling}return null}function C(l){return{current:l}}function M(l){0>Or||(l.current=oi[Or],oi[Or]=null,Or--)}function w(l,c){Or++,oi[Or]=l.current,l.current=c}function U(l){return l>>>=0,l===0?32:31-(Lg(l)/Ig|0)|0}function D(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function P(l,c){var g=l.pendingLanes;if(g===0)return 0;var x=0,T=l.suspendedLanes,B=l.pingedLanes,Y=l.warmLanes;l=l.finishedLanes!==0;var tt=g&134217727;return tt!==0?(g=tt&~T,g!==0?x=D(g):(B&=tt,B!==0?x=D(B):l||(Y=tt&~Y,Y!==0&&(x=D(Y))))):(tt=g&~T,tt!==0?x=D(tt):B!==0?x=D(B):l||(Y=g&~Y,Y!==0&&(x=D(Y)))),x===0?0:c!==0&&c!==x&&(c&T)===0&&(T=x&-x,Y=c&-c,T>=Y||T===32&&(Y&4194176)!==0)?c:x}function I(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function F(l,c){switch(l){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k(){var l=Qs;return Qs<<=1,(Qs&4194176)===0&&(Qs=128),l}function L(){var l=jo;return jo<<=1,(jo&62914560)===0&&(jo=4194304),l}function N(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function J(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ct(l,c,g,x,T,B){var Y=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var tt=l.entanglements,dt=l.expirationTimes,Ut=l.hiddenUpdates;for(g=Y&~g;0<g;){var $t=31-da(g),ce=1<<$t;tt[$t]=0,dt[$t]=-1;var me=Ut[$t];if(me!==null)for(Ut[$t]=null,$t=0;$t<me.length;$t++){var Ye=me[$t];Ye!==null&&(Ye.lane&=-536870913)}g&=~ce}x!==0&&at(l,x,0),B!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=B&~(Y&~c))}function at(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var x=31-da(c);l.entangledLanes|=c,l.entanglements[x]=l.entanglements[x]|1073741824|g&4194218}function pt(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var x=31-da(g),T=1<<x;T&c|l[x]&c&&(l[x]|=c),g&=~T}}function ut(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function H(l){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(li,l,void 0,(l.current.flags&128)===128)}catch{}}function W(l){if(typeof zg=="function"&&Ni(l),Ta&&typeof Ta.setStrictMode=="function")try{Ta.setStrictMode(li,l)}catch{}}function j(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}function lt(l,c){if(typeof l=="object"&&l!==null){var g=gp.get(l);return g!==void 0?g:(c={value:l,source:c,stack:v(c)},gp.set(l,c),c)}return{value:l,source:c,stack:v(c)}}function X(l,c){Wo[Qo++]=sc,Wo[Qo++]=Zo,Zo=l,sc=c}function nt(l,c,g){Fa[Ga++]=Bs,Fa[Ga++]=ws,Fa[Ga++]=So,So=l;var x=Bs;l=ws;var T=32-da(x)-1;x&=~(1<<T),g+=1;var B=32-da(c)+T;if(30<B){var Y=T-T%5;B=(x&(1<<Y)-1).toString(32),x>>=Y,T-=Y,Bs=1<<32-da(c)+T|g<<T|x,ws=B+l}else Bs=1<<B|g<<T|x,ws=l}function _t(l){l.return!==null&&(X(l,1),nt(l,1,0))}function Tt(l){for(;l===Zo;)Zo=Wo[--Qo],Wo[Qo]=null,sc=Wo[--Qo],Wo[Qo]=null;for(;l===So;)So=Fa[--Ga],Fa[Ga]=null,ws=Fa[--Ga],Fa[Ga]=null,Bs=Fa[--Ga],Fa[Ga]=null}function it(l,c){w(Zs,c),w(rc,l),w(bi,null),l=tg(c),M(bi),w(bi,l)}function Ct(){M(bi),M(rc),M(Zs)}function Ht(l){l.memoizedState!==null&&w($o,l);var c=bi.current,g=tc(c,l.type);c!==g&&(w(rc,l),w(bi,g))}function Qt(l){rc.current===l&&(M(bi),M(rc)),$o.current===l&&(M($o),fa?Cs._currentValue=vo:Cs._currentValue2=vo)}function qt(l){var c=Error(a(418,""));throw Ae(lt(c,l)),Tu}function Ee(l,c){if(!Yi)throw Error(a(175));Eg(l.stateNode,l.type,l.memoizedProps,c,l)||qt(l)}function fe(l){for(ki=l.return;ki;)switch(ki.tag){case 3:case 27:Oi=!0;return;case 5:case 13:Oi=!1;return;default:ki=ki.return}}function _e(l){if(!Yi||l!==ki)return!1;if(!dn)return fe(l),dn=!0,!1;var c=!1;if(Ln?l.tag!==3&&l.tag!==27&&(l.tag!==5||nh(l.type)&&!qe(l.type,l.memoizedProps))&&(c=!0):l.tag!==3&&(l.tag!==5||nh(l.type)&&!qe(l.type,l.memoizedProps))&&(c=!0),c&&qi&&qt(l),fe(l),l.tag===13){if(!Yi)throw Error(a(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));qi=Cg(l)}else qi=ki?hp(l.stateNode):null;return!0}function De(){Yi&&(qi=ki=null,dn=!1)}function Ae(l){cs===null?cs=[l]:cs.push(l)}function K(){for(var l=tl,c=Ds=tl=0;c<l;){var g=us[c];us[c++]=null;var x=us[c];us[c++]=null;var T=us[c];us[c++]=null;var B=us[c];if(us[c++]=null,x!==null&&T!==null){var Y=x.pending;Y===null?T.next=T:(T.next=Y.next,Y.next=T),x.pending=T}B!==0&&Dt(g,T,B)}}function Wt(l,c,g,x){us[tl++]=l,us[tl++]=c,us[tl++]=g,us[tl++]=x,Ds|=x,l.lanes|=x,l=l.alternate,l!==null&&(l.lanes|=x)}function Xt(l,c,g,x){return Wt(l,c,g,x),se(l)}function Gt(l,c){return Wt(l,null,null,c),se(l)}function Dt(l,c,g){l.lanes|=g;var x=l.alternate;x!==null&&(x.lanes|=g);for(var T=!1,B=l.return;B!==null;)B.childLanes|=g,x=B.alternate,x!==null&&(x.childLanes|=g),B.tag===22&&(l=B.stateNode,l===null||l._visibility&1||(T=!0)),l=B,B=B.return;T&&c!==null&&l.tag===3&&(B=l.stateNode,T=31-da(g),B=B.hiddenUpdates,l=B[T],l===null?B[T]=[c]:l.push(c),c.lane=g|536870912)}function se(l){if(50<mc)throw mc=0,vh=null,Error(a(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}function Vt(l){l!==Lr&&l.next===null&&(Lr===null?Cu=Lr=l:Lr=Lr.next=l),Gn=!0,el||(el=!0,Rt(Oe))}function ie(l,c){if(!vp&&Gn){vp=!0;do for(var g=!1,x=Cu;x!==null;){if(l!==0){var T=x.pendingLanes;if(T===0)var B=0;else{var Y=x.suspendedLanes,tt=x.pingedLanes;B=(1<<31-da(42|l)+1)-1,B&=T&~(Y&~tt),B=B&201326677?B&201326677|1:B?B|2:0}B!==0&&(g=!0,mt(x,B))}else B=cn,B=P(x,x===Cn?B:0),(B&3)===0||I(x,B)||(g=!0,mt(x,B));x=x.next}while(g);vp=!1}}function Oe(){Gn=el=!1;var l=0;oc!==0&&(ag()&&(l=oc),oc=0);for(var c=ls(),g=null,x=Cu;x!==null;){var T=x.next,B=Q(x,c);B===0?(x.next=null,g===null?Cu=T:g.next=T,T===null&&(Lr=g)):(g=x,(l!==0||(B&3)!==0)&&(Gn=!0)),x=T}ie(l)}function Q(l,c){for(var g=l.suspendedLanes,x=l.pingedLanes,T=l.expirationTimes,B=l.pendingLanes&-62914561;0<B;){var Y=31-da(B),tt=1<<Y,dt=T[Y];dt===-1?((tt&g)===0||(tt&x)!==0)&&(T[Y]=F(tt,c)):dt<=c&&(l.expiredLanes|=tt),B&=~tt}if(c=Cn,g=cn,g=P(l,l===c?g:0),x=l.callbackNode,g===0||l===c&&Nn===2||l.cancelPendingCommit!==null)return x!==null&&x!==null&&rh(x),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||I(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(x!==null&&rh(x),ut(g)){case 2:case 8:g=Hg;break;case 32:g=ch;break;case 268435456:g=Yy;break;default:g=ch}return x=z.bind(null,l),g=Eu(g,x),l.callbackPriority=c,l.callbackNode=g,c}return x!==null&&x!==null&&rh(x),l.callbackPriority=2,l.callbackNode=null,2}function z(l,c){var g=l.callbackNode;if(Es()&&l.callbackNode!==g)return null;var x=cn;return x=P(l,l===Cn?x:0),x===0?null:(co(l,x,c),Q(l,ls()),l.callbackNode!=null&&l.callbackNode===g?z.bind(null,l):null)}function mt(l,c){if(Es())return null;co(l,c,!0)}function Rt(l){np?Nr(function(){(mn&6)!==0?Eu(lh,l):l()}):Eu(lh,l)}function wt(){return oc===0&&(oc=k()),oc}function Bt(l,c){if(lc===null){var g=lc=[];nl=0,Va=wt(),il={status:"pending",value:void 0,then:function(x){g.push(x)}}}return nl++,c.then(re,re),c}function re(){if(--nl===0&&lc!==null){il!==null&&(il.status="fulfilled");var l=lc;lc=null,Va=0,il=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function te(l,c){var g=[],x={status:"pending",value:null,reason:null,then:function(T){g.push(T)}};return l.then(function(){x.status="fulfilled",x.value=c;for(var T=0;T<g.length;T++)(0,g[T])(c)},function(T){for(x.status="rejected",x.reason=T,T=0;T<g.length;T++)(0,g[T])(void 0)}),x}function ge(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ve(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Lt(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ee(l,c,g){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(mn&2)!==0){var T=x.pending;return T===null?c.next=c:(c.next=T.next,T.next=c),x.pending=c,c=se(l),Dt(l,null,g),c}return Wt(l,x,c,g),se(l)}function ye(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194176)!==0)){var x=c.lanes;x&=l.pendingLanes,g|=x,c.lanes=g,pt(l,g)}}function et(l,c){var g=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var T=null,B=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};B===null?T=B=Y:B=B.next=Y,g=g.next}while(g!==null);B===null?T=B=c:B=B.next=c}else T=B=c;g={baseState:x.baseState,firstBaseUpdate:T,lastBaseUpdate:B,shared:x.shared,callbacks:x.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}function gt(){if(al){var l=il;if(l!==null)throw l}}function Jt(l,c,g,x){al=!1;var T=l.updateQueue;Ir=!1;var B=T.firstBaseUpdate,Y=T.lastBaseUpdate,tt=T.shared.pending;if(tt!==null){T.shared.pending=null;var dt=tt,Ut=dt.next;dt.next=null,Y===null?B=Ut:Y.next=Ut,Y=dt;var $t=l.alternate;$t!==null&&($t=$t.updateQueue,tt=$t.lastBaseUpdate,tt!==Y&&(tt===null?$t.firstBaseUpdate=Ut:tt.next=Ut,$t.lastBaseUpdate=dt))}if(B!==null){var ce=T.baseState;Y=0,$t=Ut=dt=null,tt=B;do{var me=tt.lane&-536870913,Ye=me!==tt.lane;if(Ye?(cn&me)===me:(x&me)===me){me!==0&&me===Va&&(al=!0),$t!==null&&($t=$t.next={lane:0,tag:tt.tag,payload:tt.payload,callback:null,next:null});t:{var Wa=l,Do=tt;me=c;var Uo=g;switch(Do.tag){case 1:if(Wa=Do.payload,typeof Wa=="function"){ce=Wa.call(Uo,ce,me);break t}ce=Wa;break t;case 3:Wa.flags=Wa.flags&-65537|128;case 0:if(Wa=Do.payload,me=typeof Wa=="function"?Wa.call(Uo,ce,me):Wa,me==null)break t;ce=Yf({},ce,me);break t;case 2:Ir=!0}}me=tt.callback,me!==null&&(l.flags|=64,Ye&&(l.flags|=8192),Ye=T.callbacks,Ye===null?T.callbacks=[me]:Ye.push(me))}else Ye={lane:me,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null},$t===null?(Ut=$t=Ye,dt=ce):$t=$t.next=Ye,Y|=me;if(tt=tt.next,tt===null){if(tt=T.shared.pending,tt===null)break;Ye=tt,tt=Ye.next,Ye.next=null,T.lastBaseUpdate=Ye,T.shared.pending=null}}while(!0);$t===null&&(dt=ce),T.baseState=dt,T.firstBaseUpdate=Ut,T.lastBaseUpdate=$t,B===null&&(T.shared.lanes=0),Ka|=Y,l.lanes=Y,l.memoizedState=ce}}function $(l,c){if(typeof l!="function")throw Error(a(191,l));l.call(c)}function jt(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)$(g[l],c)}function zt(l,c){if(Ca(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),x=Object.keys(c);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var T=g[x];if(!$s.call(c,T)||!Ca(l[T],c[T]))return!1}return!0}function ae(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Kt(){}function It(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then(Kt,Kt),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l===cc?Error(a(483)):l;default:if(typeof c.status=="string")c.then(Kt,Kt);else{if(l=Cn,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=c,l.status="pending",l.then(function(x){if(c.status==="pending"){var T=c;T.status="fulfilled",T.value=x}},function(x){if(c.status==="pending"){var T=c;T.status="rejected",T.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l===cc?Error(a(483)):l}throw Mo=c,cc}}function le(){if(Mo===null)throw Error(a(459));var l=Mo;return Mo=null,l}function Me(l){var c=Eo;return Eo+=1,bo===null&&(bo=[]),It(bo,l,c)}function nn(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function je(l,c){throw c.$$typeof===Py?Error(a(525)):(l=Object.prototype.toString.call(c),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function di(l){var c=l._init;return c(l._payload)}function Kn(l){function c(At,st){if(l){var Et=At.deletions;Et===null?(At.deletions=[st],At.flags|=16):Et.push(st)}}function g(At,st){if(!l)return null;for(;st!==null;)c(At,st),st=st.sibling;return null}function x(At){for(var st=new Map;At!==null;)At.key!==null?st.set(At.key,At):st.set(At.index,At),At=At.sibling;return st}function T(At,st){return At=as(At,st),At.index=0,At.sibling=null,At}function B(At,st,Et){return At.index=Et,l?(Et=At.alternate,Et!==null?(Et=Et.index,Et<st?(At.flags|=33554434,st):Et):(At.flags|=33554434,st)):(At.flags|=1048576,st)}function Y(At){return l&&At.alternate===null&&(At.flags|=33554434),At}function tt(At,st,Et,Zt){return st===null||st.tag!==6?(st=Vf(Et,At.mode,Zt),st.return=At,st):(st=T(st,Et),st.return=At,st)}function dt(At,st,Et,Zt){var Te=Et.type;return Te===mo?$t(At,st,Et.props.children,Zt,Et.key):st!==null&&(st.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===rs&&di(Te)===st.type)?(st=T(st,Et.props),nn(st,Et),st.return=At,st):(st=Ks(Et.type,Et.key,Et.props,null,At.mode,Zt),nn(st,Et),st.return=At,st)}function Ut(At,st,Et,Zt){return st===null||st.tag!==4||st.stateNode.containerInfo!==Et.containerInfo||st.stateNode.implementation!==Et.implementation?(st=Kd(Et,At.mode,Zt),st.return=At,st):(st=T(st,Et.children||[]),st.return=At,st)}function $t(At,st,Et,Zt,Te){return st===null||st.tag!==7?(st=Zn(Et,At.mode,Zt,Te),st.return=At,st):(st=T(st,Et),st.return=At,st)}function ce(At,st,Et){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=Vf(""+st,At.mode,Et),st.return=At,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case pu:return Et=Ks(st.type,st.key,st.props,null,At.mode,Et),nn(Et,st),Et.return=At,Et;case ss:return st=Kd(st,At.mode,Et),st.return=At,st;case rs:var Zt=st._init;return st=Zt(st._payload),ce(At,st,Et)}if(Ql(st)||o(st))return st=Zn(st,At.mode,Et,null),st.return=At,st;if(typeof st.then=="function")return ce(At,Me(st),Et);if(st.$$typeof===Ts)return ce(At,$c(At,st),Et);je(At,st)}return null}function me(At,st,Et,Zt){var Te=st!==null?st.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return Te!==null?null:tt(At,st,""+Et,Zt);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case pu:return Et.key===Te?dt(At,st,Et,Zt):null;case ss:return Et.key===Te?Ut(At,st,Et,Zt):null;case rs:return Te=Et._init,Et=Te(Et._payload),me(At,st,Et,Zt)}if(Ql(Et)||o(Et))return Te!==null?null:$t(At,st,Et,Zt,null);if(typeof Et.then=="function")return me(At,st,Me(Et),Zt);if(Et.$$typeof===Ts)return me(At,st,$c(At,Et),Zt);je(At,Et)}return null}function Ye(At,st,Et,Zt,Te){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return At=At.get(Et)||null,tt(st,At,""+Zt,Te);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case pu:return At=At.get(Zt.key===null?Et:Zt.key)||null,dt(st,At,Zt,Te);case ss:return At=At.get(Zt.key===null?Et:Zt.key)||null,Ut(st,At,Zt,Te);case rs:var Jn=Zt._init;return Zt=Jn(Zt._payload),Ye(At,st,Et,Zt,Te)}if(Ql(Zt)||o(Zt))return At=At.get(Et)||null,$t(st,At,Zt,Te,null);if(typeof Zt.then=="function")return Ye(At,st,Et,Me(Zt),Te);if(Zt.$$typeof===Ts)return Ye(At,st,Et,$c(st,Zt),Te);je(st,Zt)}return null}function Wa(At,st,Et,Zt){for(var Te=null,Jn=null,Ge=st,_n=st=0,ci=null;Ge!==null&&_n<Et.length;_n++){Ge.index>_n?(ci=Ge,Ge=null):ci=Ge.sibling;var on=me(At,Ge,Et[_n],Zt);if(on===null){Ge===null&&(Ge=ci);break}l&&Ge&&on.alternate===null&&c(At,Ge),st=B(on,st,_n),Jn===null?Te=on:Jn.sibling=on,Jn=on,Ge=ci}if(_n===Et.length)return g(At,Ge),dn&&X(At,_n),Te;if(Ge===null){for(;_n<Et.length;_n++)Ge=ce(At,Et[_n],Zt),Ge!==null&&(st=B(Ge,st,_n),Jn===null?Te=Ge:Jn.sibling=Ge,Jn=Ge);return dn&&X(At,_n),Te}for(Ge=x(Ge);_n<Et.length;_n++)ci=Ye(Ge,At,_n,Et[_n],Zt),ci!==null&&(l&&ci.alternate!==null&&Ge.delete(ci.key===null?_n:ci.key),st=B(ci,st,_n),Jn===null?Te=ci:Jn.sibling=ci,Jn=ci);return l&&Ge.forEach(function(or){return c(At,or)}),dn&&X(At,_n),Te}function Do(At,st,Et,Zt){if(Et==null)throw Error(a(151));for(var Te=null,Jn=null,Ge=st,_n=st=0,ci=null,on=Et.next();Ge!==null&&!on.done;_n++,on=Et.next()){Ge.index>_n?(ci=Ge,Ge=null):ci=Ge.sibling;var or=me(At,Ge,on.value,Zt);if(or===null){Ge===null&&(Ge=ci);break}l&&Ge&&or.alternate===null&&c(At,Ge),st=B(or,st,_n),Jn===null?Te=or:Jn.sibling=or,Jn=or,Ge=ci}if(on.done)return g(At,Ge),dn&&X(At,_n),Te;if(Ge===null){for(;!on.done;_n++,on=Et.next())on=ce(At,on.value,Zt),on!==null&&(st=B(on,st,_n),Jn===null?Te=on:Jn.sibling=on,Jn=on);return dn&&X(At,_n),Te}for(Ge=x(Ge);!on.done;_n++,on=Et.next())on=Ye(Ge,At,_n,on.value,Zt),on!==null&&(l&&on.alternate!==null&&Ge.delete(on.key===null?_n:on.key),st=B(on,st,_n),Jn===null?Te=on:Jn.sibling=on,Jn=on);return l&&Ge.forEach(function(yh){return c(At,yh)}),dn&&X(At,_n),Te}function Uo(At,st,Et,Zt){if(typeof Et=="object"&&Et!==null&&Et.type===mo&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case pu:t:{for(var Te=Et.key;st!==null;){if(st.key===Te){if(Te=Et.type,Te===mo){if(st.tag===7){g(At,st.sibling),Zt=T(st,Et.props.children),Zt.return=At,At=Zt;break t}}else if(st.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===rs&&di(Te)===st.type){g(At,st.sibling),Zt=T(st,Et.props),nn(Zt,Et),Zt.return=At,At=Zt;break t}g(At,st);break}else c(At,st);st=st.sibling}Et.type===mo?(Zt=Zn(Et.props.children,At.mode,Zt,Et.key),Zt.return=At,At=Zt):(Zt=Ks(Et.type,Et.key,Et.props,null,At.mode,Zt),nn(Zt,Et),Zt.return=At,At=Zt)}return Y(At);case ss:t:{for(Te=Et.key;st!==null;){if(st.key===Te)if(st.tag===4&&st.stateNode.containerInfo===Et.containerInfo&&st.stateNode.implementation===Et.implementation){g(At,st.sibling),Zt=T(st,Et.children||[]),Zt.return=At,At=Zt;break t}else{g(At,st);break}else c(At,st);st=st.sibling}Zt=Kd(Et,At.mode,Zt),Zt.return=At,At=Zt}return Y(At);case rs:return Te=Et._init,Et=Te(Et._payload),Uo(At,st,Et,Zt)}if(Ql(Et))return Wa(At,st,Et,Zt);if(o(Et)){if(Te=o(Et),typeof Te!="function")throw Error(a(150));return Et=Te.call(Et),Do(At,st,Et,Zt)}if(typeof Et.then=="function")return Uo(At,st,Me(Et),Zt);if(Et.$$typeof===Ts)return Uo(At,st,$c(At,Et),Zt);je(At,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint"?(Et=""+Et,st!==null&&st.tag===6?(g(At,st.sibling),Zt=T(st,Et),Zt.return=At,At=Zt):(g(At,st),Zt=Vf(Et,At.mode,Zt),Zt.return=At,At=Zt),Y(At)):g(At,st)}return function(At,st,Et,Zt){try{Eo=0;var Te=Uo(At,st,Et,Zt);return bo=null,Te}catch(Ge){if(Ge===cc)throw Ge;var Jn=e(29,Ge,null,At.mode);return Jn.lanes=Zt,Jn.return=At,Jn}finally{}}}function pi(l,c){l=ta,w(uc,l),w(Vn,c),ta=l|c.baseLanes}function xi(){w(uc,ta),w(Vn,Vn.current)}function Wi(){ta=uc.current,M(Vn),M(uc)}function _a(l){var c=l.alternate;w(Ei,Ei.current&1),w(Xa,l),In===null&&(c===null||Vn.current!==null||c.memoizedState!==null)&&(In=l)}function Gc(l){if(l.tag===22){if(w(Ei,Ei.current),w(Xa,l),In===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(In=l)}}else _s()}function _s(){w(Ei,Ei.current),w(Xa,Xa.current)}function ra(l){M(Xa),In===l&&(In=null),M(Ei)}function As(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||$f(g)||th(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Dn(){throw Error(a(321))}function xs(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!Ca(l[g],c[g]))return!1;return!0}function Ss(l,c,g,x,T,B){return Pr=B,tn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Fe.H=l===null||l.memoizedState===null?Ro:pa,Co=!1,B=g(x,T),Co=!1,sl&&(B=gr(c,g,x,T)),Zr(l),B}function Zr(l){Fe.H=$n;var c=Ue!==null&&Ue.next!==null;if(Pr=0,pn=Ue=tn=null,fs=!1,rl=0,Li=null,c)throw Error(a(300));l===null||Pn||(l=l.dependencies,l!==null&&Zc(l)&&(Pn=!0))}function gr(l,c,g,x){tn=l;var T=0;do{if(sl&&(Li=null),rl=0,sl=!1,25<=T)throw Error(a(301));if(T+=1,pn=Ue=null,l.updateQueue!=null){var B=l.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}Fe.H=Ya,B=c(g,x)}while(sl);return B}function mi(){var l=Fe.H,c=l.useState()[0];return c=typeof c.then=="function"?St(c):c,l=l.useState()[0],(Ue!==null?Ue.memoizedState:null)!==l&&(tn.flags|=1024),c}function Bl(){var l=uh!==0;return uh=0,l}function wl(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function Ms(l){if(fs){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}fs=!1}Pr=0,pn=Ue=tn=null,sl=!1,rl=uh=0,Li=null}function V(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?tn.memoizedState=pn=l:pn=pn.next=l,pn}function ot(){if(Ue===null){var l=tn.alternate;l=l!==null?l.memoizedState:null}else l=Ue.next;var c=pn===null?tn.memoizedState:pn.next;if(c!==null)pn=c,Ue=l;else{if(l===null)throw tn.alternate===null?Error(a(467)):Error(a(310));Ue=l,l={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},pn===null?tn.memoizedState=pn=l:pn=pn.next=l}return pn}function St(l){var c=rl;return rl+=1,Li===null&&(Li=[]),l=It(Li,l,c),c=tn,(pn===null?c.memoizedState:pn.next)===null&&(c=c.alternate,Fe.H=c===null||c.memoizedState===null?Ro:pa),l}function Mt(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return St(l);if(l.$$typeof===Ts)return Fi(l)}throw Error(a(438,String(l)))}function ht(l){var c=null,g=tn.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var x=tn.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(T){return T.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=fh(),tn.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),x=0;x<l;x++)g[x]=$m;return c.index++,g}function Yt(l,c){return typeof c=="function"?c(l):c}function ne(l){var c=ot();return he(c,Ue,l)}function he(l,c,g){var x=l.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=g;var T=l.baseQueue,B=x.pending;if(B!==null){if(T!==null){var Y=T.next;T.next=B.next,B.next=Y}c.baseQueue=T=B,x.pending=null}if(B=l.baseState,T===null)l.memoizedState=B;else{c=T.next;var tt=Y=null,dt=null,Ut=c,$t=!1;do{var ce=Ut.lane&-536870913;if(ce!==Ut.lane?(cn&ce)===ce:(Pr&ce)===ce){var me=Ut.revertLane;if(me===0)dt!==null&&(dt=dt.next={lane:0,revertLane:0,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null}),ce===Va&&($t=!0);else if((Pr&me)===me){Ut=Ut.next,me===Va&&($t=!0);continue}else ce={lane:0,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},dt===null?(tt=dt=ce,Y=B):dt=dt.next=ce,tn.lanes|=me,Ka|=me;ce=Ut.action,Co&&g(B,ce),B=Ut.hasEagerState?Ut.eagerState:g(B,ce)}else me={lane:ce,revertLane:Ut.revertLane,action:Ut.action,hasEagerState:Ut.hasEagerState,eagerState:Ut.eagerState,next:null},dt===null?(tt=dt=me,Y=B):dt=dt.next=me,tn.lanes|=ce,Ka|=ce;Ut=Ut.next}while(Ut!==null&&Ut!==c);if(dt===null?Y=B:dt.next=tt,!Ca(B,l.memoizedState)&&(Pn=!0,$t&&(g=il,g!==null)))throw g;l.memoizedState=B,l.baseState=Y,l.baseQueue=dt,x.lastRenderedState=B}return T===null&&(x.lanes=0),[l.memoizedState,x.dispatch]}function pe(l){var c=ot(),g=c.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=l;var x=g.dispatch,T=g.pending,B=c.memoizedState;if(T!==null){g.pending=null;var Y=T=T.next;do B=l(B,Y.action),Y=Y.next;while(Y!==T);Ca(B,c.memoizedState)||(Pn=!0),c.memoizedState=B,c.baseQueue===null&&(c.baseState=B),g.lastRenderedState=B}return[B,x]}function Le(l,c,g){var x=tn,T=ot(),B=dn;if(B){if(g===void 0)throw Error(a(407));g=g()}else g=c();var Y=!Ca((Ue||T).memoizedState,g);if(Y&&(T.memoizedState=g,Pn=!0),T=T.queue,_d(We.bind(null,x,T,l),[l]),T.getSnapshot!==c||Y||pn!==null&&pn.memoizedState.tag&1){if(x.flags|=2048,oa(9,be.bind(null,x,T,g,c),{destroy:void 0},null),Cn===null)throw Error(a(349));B||(Pr&60)!==0||Re(x,c,g)}return g}function Re(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=tn.updateQueue,c===null?(c=fh(),tn.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function be(l,c,g,x){c.value=g,c.getSnapshot=x,xn(c)&&Fn(l)}function We(l,c,g){return g(function(){xn(c)&&Fn(l)})}function xn(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!Ca(l,g)}catch{return!0}}function Fn(l){var c=Gt(l,2);c!==null&&Ui(c,l,2)}function $e(l){var c=V();if(typeof l=="function"){var g=l;if(l=g(),Co){W(!0);try{g()}finally{W(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:l},c}function Sn(l,c,g,x){return l.baseState=g,he(l,Ue,typeof x=="function"?x:Yt)}function Be(l,c,g,x,T){if(Jc(l))throw Error(a(485));if(l=c.action,l!==null){var B={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){B.listeners.push(Y)}};Fe.T!==null?g(!0):B.isTransition=!1,x(B),g=c.pending,g===null?(B.next=c.pending=B,Bn(c,B)):(B.next=g.next,c.pending=g.next=B)}}function Bn(l,c){var g=c.action,x=c.payload,T=l.state;if(c.isTransition){var B=Fe.T,Y={};Fe.T=Y;try{var tt=g(T,x),dt=Fe.S;dt!==null&&dt(Y,tt),ln(l,c,tt)}catch(Ut){Vs(l,c,Ut)}finally{Fe.T=B}}else try{B=g(T,x),ln(l,c,B)}catch(Ut){Vs(l,c,Ut)}}function ln(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(x){Si(l,c,x)},function(x){return Vs(l,c,x)}):Si(l,c,g)}function Si(l,c,g){c.status="fulfilled",c.value=g,On(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,Bn(l,g)))}function Vs(l,c,g){var x=l.pending;if(l.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=g,On(c),c=c.next;while(c!==x)}l.action=null}function On(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function Xs(l,c){return c}function Un(l,c){if(dn){var g=Cn.formState;if(g!==null){t:{var x=tn;if(dn){if(qi){var T=fp(qi,Oi);if(T){qi=hp(T),x=xg(T);break t}}qt(x)}x=!1}x&&(c=g[0])}}g=V(),g.memoizedState=g.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:c},g.queue=x,g=Md.bind(null,tn,x),x.dispatch=g,x=$e(!1);var B=Nl.bind(null,tn,!1,x.queue);return x=V(),T={state:c,dispatch:null,action:l,pending:null},x.queue=T,g=Be.bind(null,tn,T,B,g),T.dispatch=g,x.memoizedState=l,[c,g,!1]}function Hi(l){var c=ot();return gi(c,Ue,l)}function gi(l,c,g){c=he(l,c,Xs)[0],l=ne(Yt)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?St(c):c;var x=ot(),T=x.queue,B=T.dispatch;return g!==x.memoizedState&&(tn.flags|=2048,oa(9,Bi.bind(null,T,g),{destroy:void 0},null)),[c,B,l]}function Bi(l,c){l.action=c}function wi(l){var c=ot(),g=Ue;if(g!==null)return gi(c,g,l);ot(),c=c.memoizedState,g=ot();var x=g.queue.dispatch;return g.memoizedState=l,[c,x,!1]}function oa(l,c,g,x){return l={tag:l,create:c,inst:g,deps:x,next:null},c=tn.updateQueue,c===null&&(c=fh(),tn.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(x=g.next,g.next=l,l.next=x,c.lastEffect=l),l}function Ys(){return ot().memoizedState}function Vc(l,c,g,x){var T=V();tn.flags|=l,T.memoizedState=oa(1|c,g,{destroy:void 0},x===void 0?null:x)}function Xc(l,c,g,x){var T=ot();x=x===void 0?null:x;var B=T.memoizedState.inst;Ue!==null&&x!==null&&xs(x,Ue.memoizedState.deps)?T.memoizedState=oa(c,g,B,x):(tn.flags|=l,T.memoizedState=oa(1|c,g,B,x))}function Sf(l,c){Vc(8390656,8,l,c)}function _d(l,c){Xc(2048,8,l,c)}function Dm(l,c){return Xc(4,2,l,c)}function Yc(l,c){return Xc(4,4,l,c)}function Mf(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function bf(l,c,g){g=g!=null?g.concat([l]):null,Xc(4,4,Mf.bind(null,c,l),g)}function $r(){}function Vo(l,c){var g=ot();c=c===void 0?null:c;var x=g.memoizedState;return c!==null&&xs(c,x[1])?x[0]:(g.memoizedState=[l,c],l)}function Ad(l,c){var g=ot();c=c===void 0?null:c;var x=g.memoizedState;if(c!==null&&xs(c,x[1]))return x[0];if(x=l(),Co){W(!0);try{l()}finally{W(!1)}}return g.memoizedState=[x,c],x}function kc(l,c,g){return g===void 0||(Pr&1073741824)!==0?l.memoizedState=c:(l.memoizedState=g,l=Vd(),tn.lanes|=l,Ka|=l,g)}function xd(l,c,g,x){return Ca(g,c)?g:Vn.current!==null?(l=kc(l,g,x),Ca(l,c)||(Pn=!0),l):(Pr&42)===0?(Pn=!0,l.memoizedState=g):(l=Vd(),tn.lanes|=l,Ka|=l,c)}function Dl(l,c,g,x,T){var B=Ur();Zi(B!==0&&8>B?B:8);var Y=Fe.T,tt={};Fe.T=tt,Nl(l,!1,c,g);try{var dt=T(),Ut=Fe.S;if(Ut!==null&&Ut(tt,dt),dt!==null&&typeof dt=="object"&&typeof dt.then=="function"){var $t=te(dt,x);to(l,c,$t,si(l))}else to(l,c,x,si(l))}catch(ce){to(l,c,{then:function(){},status:"rejected",reason:ce},si())}finally{Zi(B),Fe.T=Y}}function ks(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:vo,baseState:vo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:vo},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yt,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function qc(){return Fi(Cs)}function Ul(){return ot().memoizedState}function vr(){return ot().memoizedState}function Sd(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=si();l=Lt(g);var x=ee(c,l,g);x!==null&&(Ui(x,c,g),ye(x,c,g)),c={cache:ao()},l.payload=c;return}c=c.return}}function Ef(l,c,g){var x=si();g={lane:x,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Jc(l)?la(c,g):(g=Xt(l,c,g,x),g!==null&&(Ui(g,l,x),eo(g,c,x)))}function Md(l,c,g){var x=si();to(l,c,g,x)}function to(l,c,g,x){var T={lane:x,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Jc(l))la(c,T);else{var B=l.alternate;if(l.lanes===0&&(B===null||B.lanes===0)&&(B=c.lastRenderedReducer,B!==null))try{var Y=c.lastRenderedState,tt=B(Y,g);if(T.hasEagerState=!0,T.eagerState=tt,Ca(tt,Y))return Wt(l,c,T,0),Cn===null&&K(),!1}catch{}finally{}if(g=Xt(l,c,T,x),g!==null)return Ui(g,l,x),eo(g,c,x),!0}return!1}function Nl(l,c,g,x){if(x={lane:2,revertLane:wt(),action:x,hasEagerState:!1,eagerState:null,next:null},Jc(l)){if(c)throw Error(a(479))}else c=Xt(l,g,x,2),c!==null&&Ui(c,l,2)}function Jc(l){var c=l.alternate;return l===tn||c!==null&&c===tn}function la(l,c){sl=fs=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function eo(l,c,g){if((g&4194176)!==0){var x=c.lanes;x&=l.pendingLanes,g|=x,c.lanes=g,pt(l,g)}}function Ol(l,c,g,x){c=l.memoizedState,g=g(x,c),g=g==null?c:Yf({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}function Ll(l,c,g,x,T,B,Y){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,B,Y):c.prototype&&c.prototype.isPureReactComponent?!zt(g,x)||!zt(T,B):!0}function Um(l,c,g,x){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,x),c.state!==l&&er.enqueueReplaceState(c,c.state,null)}function yr(l,c){var g=c;if("ref"in c){g={};for(var x in c)x!=="ref"&&(g[x]=c[x])}if(l=l.defaultProps){g===c&&(g=Yf({},g));for(var T in l)g[T]===void 0&&(g[T]=l[T])}return g}function Il(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function Pl(l,c,g){try{var x=l.onCaughtError;x(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Hl(l,c,g){return g=Lt(g),g.tag=3,g.payload={element:null},g.callback=function(){Il(l,c)},g}function bd(l){return l=Lt(l),l.tag=3,l}function Nm(l,c,g,x){var T=g.type.getDerivedStateFromError;if(typeof T=="function"){var B=x.value;l.payload=function(){return T(B)},l.callback=function(){Pl(c,g,x)}}var Y=g.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(l.callback=function(){Pl(c,g,x),typeof T!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var tt=x.stack;this.componentDidCatch(x.value,{componentStack:tt!==null?tt:""})})}function Ny(l,c,g,x,T){if(g.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=g.alternate,c!==null&&Qc(c,g,T,!0),g=Xa.current,g!==null){switch(g.tag){case 13:return In===null?Tr():g.alternate===null&&Hn===0&&(Hn=3),g.flags&=-257,g.flags|=65536,g.lanes=T,x===Bu?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([x]):c.add(x),ko(l,x,T)),!1;case 22:return g.flags|=65536,x===Bu?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([x]):g.add(x)),ko(l,x,T)),!1}throw Error(a(435,g.tag))}return ko(l,x,T),Tr(),!1}if(dn)return c=Xa.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=T,x!==Tu&&(l=Error(a(422),{cause:x}),Ae(lt(l,g)))):(x!==Tu&&(c=Error(a(423),{cause:x}),Ae(lt(c,g))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,x=lt(x,g),T=Hl(l.stateNode,x,T),et(l,T),Hn!==4&&(Hn=2)),!1;var B=Error(a(520),{cause:x});if(B=lt(B,g),ll===null?ll=[B]:ll.push(B),Hn!==4&&(Hn=2),c===null)return!0;x=lt(x,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=T&-T,g.lanes|=l,l=Hl(g.stateNode,x,l),et(g,l),!1;case 1:if(c=g.type,B=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(Bo===null||!Bo.has(B))))return g.flags|=65536,T&=-T,g.lanes|=T,T=bd(T),Nm(T,l,g,x),et(g,T),!1}g=g.return}while(g!==null);return!1}function zi(l,c,g,x){c.child=l===null?tr(c,null,g,x):To(c,l.child,g,x)}function Tf(l,c,g,x,T){g=g.render;var B=c.ref;if("ref"in x){var Y={};for(var tt in x)tt!=="ref"&&(Y[tt]=x[tt])}else Y=x;return io(c),x=Ss(l,c,g,Y,B,T),tt=Bl(),l!==null&&!Pn?(wl(l,c,T),_r(l,c,T)):(dn&&tt&&_t(c),c.flags|=1,zi(l,c,x,T),c.child)}function Om(l,c,g,x,T){if(l===null){var B=g.type;return typeof B=="function"&&!uu(B)&&B.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=B,Lm(l,c,B,x,T)):(l=Ks(g.type,null,x,c,c.mode,T),l.ref=c.ref,l.return=c,c.child=l)}if(B=l.child,!Bd(l,T)){var Y=B.memoizedProps;if(g=g.compare,g=g!==null?g:zt,g(Y,x)&&l.ref===c.ref)return _r(l,c,T)}return c.flags|=1,l=as(B,x),l.ref=c.ref,l.return=c,c.child=l}function Lm(l,c,g,x,T){if(l!==null){var B=l.memoizedProps;if(zt(B,x)&&l.ref===c.ref)if(Pn=!1,c.pendingProps=x=B,Bd(l,T))(l.flags&131072)!==0&&(Pn=!0);else return c.lanes=l.lanes,_r(l,c,T)}return Cf(l,c,g,x,T)}function Im(l,c,g){var x=c.pendingProps,T=x.children,B=(c.stateNode._pendingVisibility&2)!==0,Y=l!==null?l.memoizedState:null;if(Kc(l,c),x.mode==="hidden"||B){if((c.flags&128)!==0){if(x=Y!==null?Y.baseLanes|g:g,l!==null){for(T=c.child=l.child,B=0;T!==null;)B=B|T.lanes|T.childLanes,T=T.sibling;c.childLanes=B&~x}else c.childLanes=0,c.child=null;return Pm(l,c,x,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&Bf(c,Y!==null?Y.cachePool:null),Y!==null?pi(c,Y):xi(),Gc(c);else return c.lanes=c.childLanes=536870912,Pm(l,c,Y!==null?Y.baseLanes|g:g,g)}else Y!==null?(Bf(c,Y.cachePool),pi(c,Y),_s(),c.memoizedState=null):(l!==null&&Bf(c,null),xi(),_s());return zi(l,c,T,g),c.child}function Pm(l,c,g,x){var T=Dd();return T=T===null?null:{parent:fa?Xn._currentValue:Xn._currentValue2,pool:T},c.memoizedState={baseLanes:g,cachePool:T},l!==null&&Bf(c,null),xi(),Gc(c),l!==null&&Qc(l,c,x,!0),null}function Kc(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=2097664);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(l===null||l.ref!==g)&&(c.flags|=2097664)}}function Cf(l,c,g,x,T){return io(c),g=Ss(l,c,g,x,void 0,T),x=Bl(),l!==null&&!Pn?(wl(l,c,T),_r(l,c,T)):(dn&&x&&_t(c),c.flags|=1,zi(l,c,g,T),c.child)}function Hm(l,c,g,x,T,B){return io(c),c.updateQueue=null,g=gr(c,x,g,T),Zr(l),x=Bl(),l!==null&&!Pn?(wl(l,c,B),_r(l,c,B)):(dn&&x&&_t(c),c.flags|=1,zi(l,c,g,B),c.child)}function zm(l,c,g,x,T){if(io(c),c.stateNode===null){var B=xo,Y=g.contextType;typeof Y=="object"&&Y!==null&&(B=Fi(Y)),B=new g(x,B),c.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=er,c.stateNode=B,B._reactInternals=c,B=c.stateNode,B.props=x,B.state=c.memoizedState,B.refs={},ge(c),Y=g.contextType,B.context=typeof Y=="object"&&Y!==null?Fi(Y):xo,B.state=c.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(Ol(c,g,Y,x),B.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(Y=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),Y!==B.state&&er.enqueueReplaceState(B,B.state,null),Jt(c,x,B,T),gt(),B.state=c.memoizedState),typeof B.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(l===null){B=c.stateNode;var tt=c.memoizedProps,dt=yr(g,tt);B.props=dt;var Ut=B.context,$t=g.contextType;Y=xo,typeof $t=="object"&&$t!==null&&(Y=Fi($t));var ce=g.getDerivedStateFromProps;$t=typeof ce=="function"||typeof B.getSnapshotBeforeUpdate=="function",tt=c.pendingProps!==tt,$t||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(tt||Ut!==Y)&&Um(c,B,x,Y),Ir=!1;var me=c.memoizedState;B.state=me,Jt(c,x,B,T),gt(),Ut=c.memoizedState,tt||me!==Ut||Ir?(typeof ce=="function"&&(Ol(c,g,ce,x),Ut=c.memoizedState),(dt=Ir||Ll(c,g,dt,x,me,Ut,Y))?($t||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(c.flags|=4194308)):(typeof B.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=Ut),B.props=x,B.state=Ut,B.context=Y,x=dt):(typeof B.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{B=c.stateNode,ve(l,c),Y=c.memoizedProps,$t=yr(g,Y),B.props=$t,ce=c.pendingProps,me=B.context,Ut=g.contextType,dt=xo,typeof Ut=="object"&&Ut!==null&&(dt=Fi(Ut)),tt=g.getDerivedStateFromProps,(Ut=typeof tt=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Y!==ce||me!==dt)&&Um(c,B,x,dt),Ir=!1,me=c.memoizedState,B.state=me,Jt(c,x,B,T),gt();var Ye=c.memoizedState;Y!==ce||me!==Ye||Ir||l!==null&&l.dependencies!==null&&Zc(l.dependencies)?(typeof tt=="function"&&(Ol(c,g,tt,x),Ye=c.memoizedState),($t=Ir||Ll(c,g,$t,x,me,Ye,dt)||l!==null&&l.dependencies!==null&&Zc(l.dependencies))?(Ut||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(x,Ye,dt),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(x,Ye,dt)),typeof B.componentDidUpdate=="function"&&(c.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof B.componentDidUpdate!="function"||Y===l.memoizedProps&&me===l.memoizedState||(c.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&me===l.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Ye),B.props=x,B.state=Ye,B.context=dt,x=$t):(typeof B.componentDidUpdate!="function"||Y===l.memoizedProps&&me===l.memoizedState||(c.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&me===l.memoizedState||(c.flags|=1024),x=!1)}return B=x,Kc(l,c),x=(c.flags&128)!==0,B||x?(B=c.stateNode,g=x&&typeof g.getDerivedStateFromError!="function"?null:B.render(),c.flags|=1,l!==null&&x?(c.child=To(c,l.child,null,T),c.child=To(c,null,g,T)):zi(l,c,g,T),c.memoizedState=B.state,l=c.child):l=_r(l,c,T),l}function Fm(l,c,g,x){return De(),c.flags|=256,zi(l,c,g,x),c.child}function Ed(l){return{baseLanes:l,cachePool:Ud()}}function jc(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=ja),l}function Gm(l,c,g){var x=c.pendingProps,T=!1,B=(c.flags&128)!==0,Y;if((Y=B)||(Y=l!==null&&l.memoizedState===null?!1:(Ei.current&2)!==0),Y&&(T=!0,c.flags&=-129),Y=(c.flags&32)!==0,c.flags&=-33,l===null){if(dn){if(T?_a(c):_s(),dn){var tt=qi,dt;(dt=tt)&&(tt=bg(tt,Oi),tt!==null?(c.memoizedState={dehydrated:tt,treeContext:So!==null?{id:Bs,overflow:ws}:null,retryLane:536870912},dt=e(18,null,null,0),dt.stateNode=tt,dt.return=c,c.child=dt,ki=c,qi=null,dt=!0):dt=!1),dt||qt(c)}if(tt=c.memoizedState,tt!==null&&(tt=tt.dehydrated,tt!==null))return th(tt)?c.lanes=16:c.lanes=536870912,null;ra(c)}return tt=x.children,x=x.fallback,T?(_s(),T=c.mode,tt=Cd({mode:"hidden",children:tt},T),x=Zn(x,T,g,null),tt.return=c,x.return=c,tt.sibling=x,c.child=tt,T=c.child,T.memoizedState=Ed(g),T.childLanes=jc(l,Y,g),c.memoizedState=ph,x):(_a(c),Td(c,tt))}if(dt=l.memoizedState,dt!==null&&(tt=dt.dehydrated,tt!==null)){if(B)c.flags&256?(_a(c),c.flags&=-257,c=Rf(l,c,g)):c.memoizedState!==null?(_s(),c.child=l.child,c.flags|=128,c=null):(_s(),T=x.fallback,tt=c.mode,x=Cd({mode:"visible",children:x.children},tt),T=Zn(T,tt,g,null),T.flags|=2,x.return=c,T.return=c,x.sibling=T,c.child=x,To(c,l.child,null,g),x=c.child,x.memoizedState=Ed(g),x.childLanes=jc(l,Y,g),c.memoizedState=ph,c=T);else if(_a(c),th(tt))Y=_g(tt).digest,x=Error(a(419)),x.stack="",x.digest=Y,Ae({value:x,source:null,stack:null}),c=Rf(l,c,g);else if(Pn||Qc(l,c,g,!1),Y=(g&l.childLanes)!==0,Pn||Y){if(Y=Cn,Y!==null){if(x=g&-g,(x&42)!==0)x=1;else switch(x){case 2:x=1;break;case 8:x=4;break;case 32:x=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:x=64;break;case 268435456:x=134217728;break;default:x=0}if(x=(x&(Y.suspendedLanes|g))!==0?0:x,x!==0&&x!==dt.retryLane)throw dt.retryLane=x,Gt(l,x),Ui(Y,l,x),dh}$f(tt)||Tr(),c=Rf(l,c,g)}else $f(tt)?(c.flags|=128,c.child=l.child,c=Cr.bind(null,l),Ag(tt,c),c=null):(l=dt.treeContext,Yi&&(qi=Mg(tt),ki=c,dn=!0,cs=null,Oi=!1,l!==null&&(Fa[Ga++]=Bs,Fa[Ga++]=ws,Fa[Ga++]=So,Bs=l.id,ws=l.overflow,So=c)),c=Td(c,x.children),c.flags|=4096);return c}return T?(_s(),T=x.fallback,tt=c.mode,dt=l.child,B=dt.sibling,x=as(dt,{mode:"hidden",children:x.children}),x.subtreeFlags=dt.subtreeFlags&31457280,B!==null?T=as(B,T):(T=Zn(T,tt,g,null),T.flags|=2),T.return=c,x.return=c,x.sibling=T,c.child=x,x=T,T=c.child,tt=l.child.memoizedState,tt===null?tt=Ed(g):(dt=tt.cachePool,dt!==null?(B=fa?Xn._currentValue:Xn._currentValue2,dt=dt.parent!==B?{parent:B,pool:B}:dt):dt=Ud(),tt={baseLanes:tt.baseLanes|g,cachePool:dt}),T.memoizedState=tt,T.childLanes=jc(l,Y,g),c.memoizedState=ph,x):(_a(c),g=l.child,l=g.sibling,g=as(g,{mode:"visible",children:x.children}),g.return=c,g.sibling=null,l!==null&&(Y=c.deletions,Y===null?(c.deletions=[l],c.flags|=16):Y.push(l)),c.child=g,c.memoizedState=null,g)}function Td(l,c){return c=Cd({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function Cd(l,c){return hu(l,c,0,null)}function Rf(l,c,g){return To(c,l.child,null,g),l=Td(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function Vm(l,c,g){l.lanes|=c;var x=l.alternate;x!==null&&(x.lanes|=c),Wc(l.return,c,g)}function Rd(l,c,g,x,T){var B=l.memoizedState;B===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:T}:(B.isBackwards=c,B.rendering=null,B.renderingStartTime=0,B.last=x,B.tail=g,B.tailMode=T)}function Xm(l,c,g){var x=c.pendingProps,T=x.revealOrder,B=x.tail;if(zi(l,c,x.children,g),x=Ei.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Vm(l,g,c);else if(l.tag===19)Vm(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break t;for(;l.sibling===null;){if(l.return===null||l.return===c)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}switch(w(Ei,x),T){case"forwards":for(g=c.child,T=null;g!==null;)l=g.alternate,l!==null&&As(l)===null&&(T=g),g=g.sibling;g=T,g===null?(T=c.child,c.child=null):(T=g.sibling,g.sibling=null),Rd(c,!1,T,g,B);break;case"backwards":for(g=null,T=c.child,c.child=null;T!==null;){if(l=T.alternate,l!==null&&As(l)===null){c.child=T;break}l=T.sibling,T.sibling=g,g=T,T=l}Rd(c,!0,g,null,B);break;case"together":Rd(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function _r(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),Ka|=c.lanes,(g&c.childLanes)===0)if(l!==null){if(Qc(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(a(153));if(c.child!==null){for(l=c.child,g=as(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=as(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function Bd(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&Zc(l)))}function Oy(l,c,g){switch(c.tag){case 3:it(c,c.stateNode.containerInfo),no(c,Xn,l.memoizedState.cache),De();break;case 27:case 5:Ht(c);break;case 4:it(c,c.stateNode.containerInfo);break;case 10:no(c,c.type,c.memoizedProps.value);break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(_a(c),c.flags|=128,null):(g&c.child.childLanes)!==0?Gm(l,c,g):(_a(c),l=_r(l,c,g),l!==null?l.sibling:null);_a(c);break;case 19:var T=(l.flags&128)!==0;if(x=(g&c.childLanes)!==0,x||(Qc(l,c,g,!1),x=(g&c.childLanes)!==0),T){if(x)return Xm(l,c,g);c.flags|=128}if(T=c.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),w(Ei,Ei.current),x)break;return null;case 22:case 23:return c.lanes=0,Im(l,c,g);case 24:no(c,Xn,l.memoizedState.cache)}return _r(l,c,g)}function Ym(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)Pn=!0;else{if(!Bd(l,g)&&(c.flags&128)===0)return Pn=!1,Oy(l,c,g);Pn=(l.flags&131072)!==0}else Pn=!1,dn&&(c.flags&1048576)!==0&&nt(c,sc,c.index);switch(c.lanes=0,c.tag){case 16:t:{l=c.pendingProps;var x=c.elementType,T=x._init;if(x=T(x._payload),c.type=x,typeof x=="function")uu(x)?(l=yr(x,l),c.tag=1,c=zm(null,c,x,l,g)):(c.tag=0,c=Cf(null,c,x,l,g));else{if(x!=null){if(T=x.$$typeof,T===vu){c.tag=11,c=Tf(null,c,x,l,g);break t}else if(T===Jf){c.tag=14,c=Om(null,c,x,l,g);break t}}throw c=u(x)||x,Error(a(306,c,""))}}return c;case 0:return Cf(l,c,c.type,c.pendingProps,g);case 1:return x=c.type,T=yr(x,c.pendingProps),zm(l,c,x,T,g);case 3:t:{if(it(c,c.stateNode.containerInfo),l===null)throw Error(a(387));var B=c.pendingProps;T=c.memoizedState,x=T.element,ve(l,c),Jt(c,B,null,g);var Y=c.memoizedState;if(B=Y.cache,no(c,Xn,B),B!==T.cache&&Xo(c,[Xn],g,!0),gt(),B=Y.element,Yi&&T.isDehydrated)if(T={element:B,isDehydrated:!1,cache:Y.cache},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){c=Fm(l,c,B,g);break t}else if(B!==x){x=lt(Error(a(424)),c),Ae(x),c=Fm(l,c,B,g);break t}else for(Yi&&(qi=Sg(c.stateNode.containerInfo),ki=c,dn=!0,cs=null,Oi=!0),g=tr(c,null,B,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(De(),B===x){c=_r(l,c,g);break t}zi(l,c,B,g)}c=c.child}return c;case 26:if(za)return Kc(l,c),l===null?(g=mp(c.type,null,c.pendingProps,null))?c.memoizedState=g:dn||(c.stateNode=sh(c.type,c.pendingProps,Zs.current,c)):c.memoizedState=mp(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:if(Ln)return Ht(c),l===null&&Ln&&dn&&(x=c.stateNode=Rs(c.type,c.pendingProps,Zs.current,bi.current,!1),ki=c,Oi=!0,qi=eh(x)),x=c.pendingProps.children,l!==null||dn?zi(l,c,x,g):c.child=To(c,null,x,g),Kc(l,c),c.child;case 5:return l===null&&dn&&(ih(c.type,c.pendingProps,bi.current),(T=x=qi)&&(x=Gy(x,c.type,c.pendingProps,Oi),x!==null?(c.stateNode=x,ki=c,qi=eh(x),Oi=!1,T=!0):T=!1),T||qt(c)),Ht(c),T=c.type,B=c.pendingProps,Y=l!==null?l.memoizedProps:null,x=B.children,qe(T,B)?x=null:Y!==null&&qe(T,Y)&&(c.flags|=32),c.memoizedState!==null&&(T=Ss(l,c,mi,null,null,g),fa?Cs._currentValue=T:Cs._currentValue2=T),Kc(l,c),zi(l,c,x,g),c.child;case 6:return l===null&&dn&&(Bg(c.pendingProps,bi.current),(l=g=qi)&&(g=dp(g,c.pendingProps,Oi),g!==null?(c.stateNode=g,ki=c,qi=null,l=!0):l=!1),l||qt(c)),null;case 13:return Gm(l,c,g);case 4:return it(c,c.stateNode.containerInfo),x=c.pendingProps,l===null?c.child=To(c,null,x,g):zi(l,c,x,g),c.child;case 11:return Tf(l,c,c.type,c.pendingProps,g);case 7:return zi(l,c,c.pendingProps,g),c.child;case 8:return zi(l,c,c.pendingProps.children,g),c.child;case 12:return zi(l,c,c.pendingProps.children,g),c.child;case 10:return x=c.pendingProps,no(c,c.type,x.value),zi(l,c,x.children,g),c.child;case 9:return T=c.type._context,x=c.pendingProps.children,io(c),T=Fi(T),x=x(T),c.flags|=1,zi(l,c,x,g),c.child;case 14:return Om(l,c,c.type,c.pendingProps,g);case 15:return Lm(l,c,c.type,c.pendingProps,g);case 19:return Xm(l,c,g);case 22:return Im(l,c,g);case 24:return io(c),x=Fi(Xn),l===null?(T=Dd(),T===null&&(T=Cn,B=ao(),T.pooledCache=B,B.refCount++,B!==null&&(T.pooledCacheLanes|=g),T=B),c.memoizedState={parent:x,cache:T},ge(c),no(c,Xn,T)):((l.lanes&g)!==0&&(ve(l,c),Jt(c,null,null,g),gt()),T=l.memoizedState,B=c.memoizedState,T.parent!==x?(T={parent:x,cache:x},c.memoizedState=T,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=T),no(c,Xn,x)):(x=B.cache,no(c,Xn,x),x!==T.cache&&Xo(c,[Xn],g,!0))),zi(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function no(l,c,g){fa?(w(Hr,c._currentValue),c._currentValue=g):(w(Hr,c._currentValue2),c._currentValue2=g)}function Ar(l){var c=Hr.current;fa?l._currentValue=c:l._currentValue2=c,M(Hr)}function Wc(l,c,g){for(;l!==null;){var x=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),l===g)break;l=l.return}}function Xo(l,c,g,x){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var B=T.dependencies;if(B!==null){var Y=T.child;B=B.firstContext;t:for(;B!==null;){var tt=B;B=T;for(var dt=0;dt<c.length;dt++)if(tt.context===c[dt]){B.lanes|=g,tt=B.alternate,tt!==null&&(tt.lanes|=g),Wc(B.return,g,l),x||(Y=null);break t}B=tt.next}}else if(T.tag===18){if(Y=T.return,Y===null)throw Error(a(341));Y.lanes|=g,B=Y.alternate,B!==null&&(B.lanes|=g),Wc(Y,g,l),Y=null}else Y=T.child;if(Y!==null)Y.return=T;else for(Y=T;Y!==null;){if(Y===l){Y=null;break}if(T=Y.sibling,T!==null){T.return=Y.return,Y=T;break}Y=Y.return}T=Y}}function Qc(l,c,g,x){l=null;for(var T=c,B=!1;T!==null;){if(!B){if((T.flags&524288)!==0)B=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var Y=T.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var tt=T.type;Ca(T.pendingProps.value,Y.value)||(l!==null?l.push(tt):l=[tt])}}else if(T===$o.current){if(Y=T.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Cs):l=[Cs])}T=T.return}l!==null&&Xo(c,l,g,x),c.flags|=262144}function Zc(l){for(l=l.firstContext;l!==null;){var c=l.context;if(!Ca(fa?c._currentValue:c._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function io(l){Ns=l,ka=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Fi(l){return wd(Ns,l)}function $c(l,c){return Ns===null&&io(l),wd(l,c)}function wd(l,c){var g=fa?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:g,next:null},ka===null){if(l===null)throw Error(a(308));ka=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else ka=ka.next=c;return g}function ao(){return{controller:new fc,data:new Map,refCount:0}}function tu(l){l.refCount--,l.refCount===0&&Fg(Gg,function(){l.controller.abort()})}function Dd(){var l=nr.current;return l!==null?l:Cn.pooledCache}function Bf(l,c){c===null?w(nr,nr.current):w(nr,c.pool)}function Ud(){var l=Dd();return l===null?null:{parent:fa?Xn._currentValue:Xn._currentValue2,pool:l}}function Aa(l){l.flags|=4}function zl(l,c){if(l!==null&&l.child===c.child)return!1;if((c.flags&16)!==0)return!0;for(l=c.child;l!==null;){if((l.flags&13878)!==0||(l.subtreeFlags&13878)!==0)return!0;l=l.sibling}return!1}function Yo(l,c,g,x){if(Mi)for(g=c.child;g!==null;){if(g.tag===5||g.tag===6)_u(l,g.stateNode);else if(!(g.tag===4||Ln&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(os)for(var T=c.child;T!==null;){if(T.tag===5){var B=T.stateNode;g&&x&&(B=cp(B,T.type,T.memoizedProps)),_u(l,B)}else if(T.tag===6)B=T.stateNode,g&&x&&(B=up(B,T.memoizedProps)),_u(l,B);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)B=T.child,B!==null&&(B.return=T),Yo(l,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===c)break;for(;T.sibling===null;){if(T.return===null||T.return===c)return;T=T.return}T.sibling.return=T.return,T=T.sibling}}function km(l,c,g,x){if(os)for(var T=c.child;T!==null;){if(T.tag===5){var B=T.stateNode;g&&x&&(B=cp(B,T.type,T.memoizedProps)),lp(l,B)}else if(T.tag===6)B=T.stateNode,g&&x&&(B=up(B,T.memoizedProps)),lp(l,B);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)B=T.child,B!==null&&(B.return=T),km(l,T,!(T.memoizedProps!==null&&T.memoizedProps.mode==="manual"),!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===c)break;for(;T.sibling===null;){if(T.return===null||T.return===c)return;T=T.return}T.sibling.return=T.return,T=T.sibling}}function eu(l,c){if(os&&zl(l,c)){l=c.stateNode;var g=l.containerInfo,x=Au();km(x,c,!1,!1),l.pendingChildren=x,Aa(c),Zf(g,x)}}function wf(l,c,g,x){if(Mi)l.memoizedProps!==x&&Aa(c);else if(os){var T=l.stateNode,B=l.memoizedProps;if((l=zl(l,c))||B!==x){var Y=bi.current;B=nc(T,g,B,x,!l,null),B===T?c.stateNode=T:(Dr(B,g,x,Y)&&Aa(c),c.stateNode=B,l?Yo(B,c,!1,!1):Aa(c))}else c.stateNode=T}}function Df(l,c,g){if(tp(c,g)){if(l.flags|=16777216,!Wf(c,g))if(uo())l.flags|=8192;else throw Mo=Bu,Ru}else l.flags&=-16777217}function Uf(l,c){if(Ug(c)){if(l.flags|=16777216,!Ko(c))if(uo())l.flags|=8192;else throw Mo=Bu,Ru}else l.flags&=-16777217}function Fl(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?L():536870912,l.lanes|=c,sr|=c)}function Gl(l,c){if(!dn)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function jn(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,x=0;if(c)for(var T=l.child;T!==null;)g|=T.lanes|T.childLanes,x|=T.subtreeFlags&31457280,x|=T.flags&31457280,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)g|=T.lanes|T.childLanes,x|=T.subtreeFlags,x|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=x,l.childLanes=g,c}function qm(l,c,g){var x=c.pendingProps;switch(Tt(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(c),null;case 1:return jn(c),null;case 3:return g=c.stateNode,x=null,l!==null&&(x=l.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),Ar(Xn),Ct(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(_e(c)?Aa(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,cs!==null&&(lu(cs),cs=null))),eu(l,c),jn(c),null;case 26:if(za){g=c.type;var T=c.memoizedState;return l===null?(Aa(c),T!==null?(jn(c),Uf(c,T)):(jn(c),Df(c,g,x))):T?T!==l.memoizedState?(Aa(c),jn(c),Uf(c,T)):(jn(c),c.flags&=-16777217):(Mi?l.memoizedProps!==x&&Aa(c):wf(l,c,g,x),jn(c),Df(c,g,x)),null}case 27:if(Ln){if(Qt(c),g=Zs.current,T=c.type,l!==null&&c.stateNode!=null)Mi?l.memoizedProps!==x&&Aa(c):wf(l,c,T,x);else{if(!x){if(c.stateNode===null)throw Error(a(166));return jn(c),null}l=bi.current,_e(c)?Ee(c,l):(l=Rs(T,x,g,l,!0),c.stateNode=l,Aa(c))}return jn(c),null}case 5:if(Qt(c),g=c.type,l!==null&&c.stateNode!=null)wf(l,c,g,x);else{if(!x){if(c.stateNode===null)throw Error(a(166));return jn(c),null}l=bi.current,_e(c)?Ee(c,l):(T=$d(g,x,Zs.current,l,c),Yo(T,c,!1,!1),c.stateNode=T,Dr(T,g,x,l)&&Aa(c))}return jn(c),Df(c,c.type,c.pendingProps),null;case 6:if(l&&c.stateNode!=null)g=l.memoizedProps,Mi?g!==x&&Aa(c):os&&(g!==x?(c.stateNode=wn(x,Zs.current,bi.current,c),Aa(c)):c.stateNode=l.stateNode);else{if(typeof x!="string"&&c.stateNode===null)throw Error(a(166));if(l=Zs.current,g=bi.current,_e(c)){if(!Yi)throw Error(a(176));if(l=c.stateNode,g=c.memoizedProps,x=null,T=ki,T!==null)switch(T.tag){case 27:case 5:x=T.memoizedProps}pp(l,g,c,x)||qt(c)}else c.stateNode=wn(x,l,g,c)}return jn(c),null;case 13:if(x=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=_e(c),x!==null&&x.dehydrated!==null){if(l===null){if(!T)throw Error(a(318));if(!Yi)throw Error(a(344));if(T=c.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(a(317));Tg(T,c)}else De(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;jn(c),T=!1}else cs!==null&&(lu(cs),cs=null),T=!0;if(!T)return c.flags&256?(ra(c),c):(ra(c),null)}if(ra(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=x!==null,l=l!==null&&l.memoizedState!==null,g){x=c.child,T=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(T=x.alternate.memoizedState.cachePool.pool);var B=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(B=x.memoizedState.cachePool.pool),B!==T&&(x.flags|=2048)}return g!==l&&g&&(c.child.flags|=8192),Fl(c,c.updateQueue),jn(c),null;case 4:return Ct(),eu(l,c),l===null&&ri(c.stateNode.containerInfo),jn(c),null;case 10:return Ar(c.type),jn(c),null;case 19:if(M(Ei),T=c.memoizedState,T===null)return jn(c),null;if(x=(c.flags&128)!==0,B=T.rendering,B===null)if(x)Gl(T,!1);else{if(Hn!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(B=As(l),B!==null){for(c.flags|=128,Gl(T,!1),l=B.updateQueue,c.updateQueue=l,Fl(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)fu(g,l),g=g.sibling;return w(Ei,Ei.current&1|2),c.child}l=l.sibling}T.tail!==null&&ls()>pc&&(c.flags|=128,x=!0,Gl(T,!1),c.lanes=4194304)}else{if(!x)if(l=As(B),l!==null){if(c.flags|=128,x=!0,l=l.updateQueue,c.updateQueue=l,Fl(c,l),Gl(T,!0),T.tail===null&&T.tailMode==="hidden"&&!B.alternate&&!dn)return jn(c),null}else 2*ls()-T.renderingStartTime>pc&&g!==536870912&&(c.flags|=128,x=!0,Gl(T,!1),c.lanes=4194304);T.isBackwards?(B.sibling=c.child,c.child=B):(l=T.last,l!==null?l.sibling=B:c.child=B,T.last=B)}return T.tail!==null?(c=T.tail,T.rendering=c,T.tail=c.sibling,T.renderingStartTime=ls(),c.sibling=null,l=Ei.current,w(Ei,x?l&1|2:l&1),c):(jn(c),null);case 22:case 23:return ra(c),Wi(),x=c.memoizedState!==null,l!==null?l.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(g&536870912)!==0&&(c.flags&128)===0&&(jn(c),c.subtreeFlags&6&&(c.flags|=8192)):jn(c),g=c.updateQueue,g!==null&&Fl(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==g&&(c.flags|=2048),l!==null&&M(nr),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),Ar(Xn),jn(c),null;case 25:return null}throw Error(a(156,c.tag))}function Ly(l,c){switch(Tt(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return Ar(Xn),Ct(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return Qt(c),null;case 13:if(ra(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(a(340));De()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return M(Ei),null;case 4:return Ct(),null;case 10:return Ar(c.type),null;case 22:case 23:return ra(c),Wi(),l!==null&&M(nr),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return Ar(Xn),null;case 25:return null;default:return null}}function Jm(l,c){switch(Tt(c),c.tag){case 3:Ar(Xn),Ct();break;case 26:case 27:case 5:Qt(c);break;case 4:Ct();break;case 13:ra(c);break;case 19:M(Ei);break;case 10:Ar(c.type);break;case 22:case 23:ra(c),Wi(),l!==null&&M(nr);break;case 24:Ar(Xn)}}function nu(l,c){try{var g=c.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var T=x.next;g=T;do{if((g.tag&l)===l){x=void 0;var B=g.create,Y=g.inst;x=B(),Y.destroy=x}g=g.next}while(g!==T)}}catch(tt){En(c,c.return,tt)}}function so(l,c,g){try{var x=c.updateQueue,T=x!==null?x.lastEffect:null;if(T!==null){var B=T.next;x=B;do{if((x.tag&l)===l){var Y=x.inst,tt=Y.destroy;if(tt!==void 0){Y.destroy=void 0,T=c;var dt=g;try{tt()}catch(Ut){En(T,dt,Ut)}}}x=x.next}while(x!==B)}}catch(Ut){En(c,c.return,Ut)}}function Km(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{jt(c,g)}catch(x){En(l,l.return,x)}}}function xa(l,c,g){g.props=yr(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(x){En(l,c,x)}}function bs(l,c){try{var g=l.ref;if(g!==null){var x=l.stateNode;switch(l.tag){case 26:case 27:case 5:var T=$l(x);break;default:T=x}typeof g=="function"?l.refCleanup=g(T):g.current=T}}catch(B){En(l,c,B)}}function Sa(l,c){var g=l.ref,x=l.refCleanup;if(g!==null)if(typeof x=="function")try{x()}catch(T){En(l,c,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(T){En(l,c,T)}else g.current=null}function Nd(l){var c=l.type,g=l.memoizedProps,x=l.stateNode;try{zy(x,c,g,l)}catch(T){En(l,l.return,T)}}function Od(l,c,g){try{fg(l.stateNode,l.type,g,c,l)}catch(x){En(l,l.return,x)}}function Ld(l){return l.tag===5||l.tag===3||(za?l.tag===26:!1)||(Ln?l.tag===27:!1)||l.tag===4}function iu(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Ld(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&(!Ln||l.tag!==27)&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Id(l,c,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?dg(g,l,c):sp(g,l);else if(!(x===4||Ln&&x===27)&&(l=l.child,l!==null))for(Id(l,c,g),l=l.sibling;l!==null;)Id(l,c,g),l=l.sibling}function xr(l,c,g){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?hg(g,l,c):cg(g,l);else if(!(x===4||Ln&&x===27)&&(l=l.child,l!==null))for(xr(l,c,g),l=l.sibling;l!==null;)xr(l,c,g),l=l.sibling}function Nf(l,c,g){l=l.containerInfo;try{ic(l,g)}catch(x){En(c,c.return,x)}}function au(l,c){for(Kf(l.containerInfo),Xe=c;Xe!==null;)if(l=Xe,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,Xe=c;else for(;Xe!==null;){l=Xe;var g=l.alternate;switch(c=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&g!==null){c=void 0;var x=l,T=g.memoizedProps;g=g.memoizedState;var B=x.stateNode;try{var Y=yr(x.type,T,x.elementType===x.type);c=B.getSnapshotBeforeUpdate(Y,g),B.__reactInternalSnapshotBeforeUpdate=c}catch(tt){En(x,x.return,tt)}}break;case 3:(c&1024)!==0&&Mi&&yg(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(a(163))}if(c=l.sibling,c!==null){c.return=l.return,Xe=c;break}Xe=l.return}return Y=rn,rn=!1,Y}function Of(l,c,g){var x=g.flags;switch(g.tag){case 0:case 11:case 15:Mr(l,g),x&4&&nu(5,g);break;case 1:if(Mr(l,g),x&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch(tt){En(g,g.return,tt)}else{var T=yr(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(T,c,l.__reactInternalSnapshotBeforeUpdate)}catch(tt){En(g,g.return,tt)}}x&64&&Km(g),x&512&&bs(g,g.return);break;case 3:if(Mr(l,g),x&64&&(x=g.updateQueue,x!==null)){if(l=null,g.child!==null)switch(g.child.tag){case 27:case 5:l=$l(g.child.stateNode);break;case 1:l=g.child.stateNode}try{jt(x,l)}catch(tt){En(g,g.return,tt)}}break;case 26:if(za){Mr(l,g),x&512&&bs(g,g.return);break}case 27:case 5:Mr(l,g),c===null&&x&4&&Nd(g),x&512&&bs(g,g.return);break;case 12:Mr(l,g);break;case 13:Mr(l,g),x&4&&Lf(l,g);break;case 22:if(T=g.memoizedState!==null||ir,!T){c=c!==null&&c.memoizedState!==null||ti;var B=ir,Y=ti;ir=T,(ti=c)&&!Y?br(l,g,(g.subtreeFlags&8772)!==0):Mr(l,g),ir=B,ti=Y}x&512&&(g.memoizedProps.mode==="manual"?bs(g,g.return):Sa(g,g.return));break;default:Mr(l,g)}}function Pd(l){var c=l.alternate;c!==null&&(l.alternate=null,Pd(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&Hy(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Gi(l,c,g){for(g=g.child;g!==null;)ro(l,c,g),g=g.sibling}function ro(l,c,g){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(li,g)}catch{}switch(g.tag){case 26:if(za){ti||Sa(g,c),Gi(l,c,g),g.memoizedState?Jo(g.memoizedState):g.stateNode&&ac(g.stateNode);break}case 27:if(Ln){ti||Sa(g,c);var x=we,T=Qe;we=g.stateNode,Gi(l,c,g),Ao(g.stateNode),we=x,Qe=T;break}case 5:ti||Sa(g,c);case 6:if(Mi){if(x=we,T=Qe,we=null,Gi(l,c,g),we=x,Qe=T,we!==null)if(Qe)try{pg(we,g.stateNode)}catch(B){En(g,c,B)}else try{rp(we,g.stateNode)}catch(B){En(g,c,B)}}else Gi(l,c,g);break;case 18:Mi&&we!==null&&(Qe?xu(we,g.stateNode):Rg(we,g.stateNode));break;case 4:Mi?(x=we,T=Qe,we=g.stateNode.containerInfo,Qe=!0,Gi(l,c,g),we=x,Qe=T):(os&&Nf(g.stateNode,g,Au()),Gi(l,c,g));break;case 0:case 11:case 14:case 15:ti||so(2,g,c),ti||so(4,g,c),Gi(l,c,g);break;case 1:ti||(Sa(g,c),x=g.stateNode,typeof x.componentWillUnmount=="function"&&xa(g,c,x)),Gi(l,c,g);break;case 21:Gi(l,c,g);break;case 22:ti||Sa(g,c),ti=(x=ti)||g.memoizedState!==null,Gi(l,c,g),ti=x;break;default:Gi(l,c,g)}}function Lf(l,c){if(Yi&&c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Xy(l)}catch(g){En(c,c.return,g)}}function jm(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new Tn),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new Tn),c;default:throw Error(a(435,l.tag))}}function Sr(l,c){var g=jm(l);c.forEach(function(x){var T=po.bind(null,l,x);g.has(x)||(g.add(x),x.then(T,T))})}function ca(l,c){var g=c.deletions;if(g!==null)for(var x=0;x<g.length;x++){var T=g[x],B=l,Y=c;if(Mi){var tt=Y;t:for(;tt!==null;){switch(tt.tag){case 27:case 5:we=tt.stateNode,Qe=!1;break t;case 3:we=tt.stateNode.containerInfo,Qe=!0;break t;case 4:we=tt.stateNode.containerInfo,Qe=!0;break t}tt=tt.return}if(we===null)throw Error(a(160));ro(B,Y,T),we=null,Qe=!1}else ro(B,Y,T);B=T.alternate,B!==null&&(B.return=null),T.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)Hd(c,l),c=c.sibling}function Hd(l,c){var g=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ca(c,l),Ma(l),x&4&&(so(3,l,l.return),nu(3,l),so(5,l,l.return));break;case 1:ca(c,l),Ma(l),x&512&&(ti||g===null||Sa(g,g.return)),x&64&&ir&&(l=l.updateQueue,l!==null&&(x=l.callbacks,x!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?x:g.concat(x))));break;case 26:if(za){var T=Qn;ca(c,l),Ma(l),x&512&&(ti||g===null||Sa(g,g.return)),x&4&&(x=g!==null?g.memoizedState:null,c=l.memoizedState,g===null?c===null?l.stateNode===null?l.stateNode=Mu(T,l.type,l.memoizedProps,l):bu(T,l.type,l.stateNode):l.stateNode=wg(T,c,l.memoizedProps):x!==c?(x===null?g.stateNode!==null&&ac(g.stateNode):Jo(x),c===null?bu(T,l.type,l.stateNode):wg(T,c,l.memoizedProps)):c===null&&l.stateNode!==null&&Od(l,l.memoizedProps,g.memoizedProps));break}case 27:if(Ln&&x&4&&l.alternate===null){T=l.stateNode;var B=l.memoizedProps;try{_o(T),Og(l.type,B,T,l)}catch($t){En(l,l.return,$t)}}case 5:if(ca(c,l),Ma(l),x&512&&(ti||g===null||Sa(g,g.return)),Mi){if(l.flags&32){c=l.stateNode;try{op(c)}catch($t){En(l,l.return,$t)}}x&4&&l.stateNode!=null&&(c=l.memoizedProps,Od(l,c,g!==null?g.memoizedProps:c)),x&1024&&(_p=!0)}break;case 6:if(ca(c,l),Ma(l),x&4&&Mi){if(l.stateNode===null)throw Error(a(162));x=l.memoizedProps,g=g!==null?g.memoizedProps:x,c=l.stateNode;try{ug(c,g,x)}catch($t){En(l,l.return,$t)}}break;case 3:if(za?(Dg(),T=Qn,Qn=ah(c.containerInfo),ca(c,l),Qn=T):ca(c,l),Ma(l),x&4){if(Mi&&Yi&&g!==null&&g.memoizedState.isDehydrated)try{Vy(c.containerInfo)}catch($t){En(l,l.return,$t)}if(os){x=c.containerInfo,g=c.pendingChildren;try{ic(x,g)}catch($t){En(l,l.return,$t)}}}_p&&(_p=!1,Wm(l));break;case 4:za?(g=Qn,Qn=ah(l.stateNode.containerInfo),ca(c,l),Ma(l),Qn=g):(ca(c,l),Ma(l)),x&4&&os&&Nf(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:ca(c,l),Ma(l);break;case 13:ca(c,l),Ma(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(ma=ls()),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Sr(l,x)));break;case 22:x&512&&(ti||g===null||Sa(g,g.return)),T=l.memoizedState!==null;var Y=g!==null&&g.memoizedState!==null,tt=ir,dt=ti;if(ir=tt||T,ti=dt||Y,ca(c,l),ti=dt,ir=tt,Ma(l),c=l.stateNode,c._current=l,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,x&8192&&(c._visibility=T?c._visibility&-2:c._visibility|1,T&&(c=ir||ti,g===null||Y||c||Vl(l)),Mi&&(l.memoizedProps===null||l.memoizedProps.mode!=="manual"))){t:if(g=null,Mi)for(c=l;;){if(c.tag===5||za&&c.tag===26||Ln&&c.tag===27){if(g===null){Y=g=c;try{B=Y.stateNode,T?mg(B):vg(Y.stateNode,Y.memoizedProps)}catch($t){En(Y,Y.return,$t)}}}else if(c.tag===6){if(g===null){Y=c;try{var Ut=Y.stateNode;T?gg(Ut):Fy(Ut,Y.memoizedProps)}catch($t){En(Y,Y.return,$t)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break t;for(;c.sibling===null;){if(c.return===null||c.return===l)break t;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}x&4&&(x=l.updateQueue,x!==null&&(g=x.retryQueue,g!==null&&(x.retryQueue=null,Sr(l,g))));break;case 19:ca(c,l),Ma(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Sr(l,x)));break;case 21:break;default:ca(c,l),Ma(l)}}function Ma(l){var c=l.flags;if(c&2){try{if(Mi&&(!Ln||l.tag!==27)){t:{for(var g=l.return;g!==null;){if(Ld(g)){var x=g;break t}g=g.return}throw Error(a(160))}switch(x.tag){case 27:if(Ln){var T=x.stateNode,B=iu(l);xr(l,B,T);break}case 5:var Y=x.stateNode;x.flags&32&&(op(Y),x.flags&=-33);var tt=iu(l);xr(l,tt,Y);break;case 3:case 4:var dt=x.stateNode.containerInfo,Ut=iu(l);Id(l,Ut,dt);break;default:throw Error(a(161))}}}catch($t){En(l,l.return,$t)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function Wm(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;Wm(c),c.tag===5&&c.flags&1024&&Qf(c.stateNode),l=l.sibling}}function Mr(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Of(l,c.alternate,c),c=c.sibling}function Vl(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:so(4,c,c.return),Vl(c);break;case 1:Sa(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&xa(c,c.return,g),Vl(c);break;case 26:case 27:case 5:Sa(c,c.return),Vl(c);break;case 22:Sa(c,c.return),c.memoizedState===null&&Vl(c);break;default:Vl(c)}l=l.sibling}}function br(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,T=l,B=c,Y=B.flags;switch(B.tag){case 0:case 11:case 15:br(T,B,g),nu(4,B);break;case 1:if(br(T,B,g),x=B,T=x.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Ut){En(x,x.return,Ut)}if(x=B,T=x.updateQueue,T!==null){var tt=x.stateNode;try{var dt=T.shared.hiddenCallbacks;if(dt!==null)for(T.shared.hiddenCallbacks=null,T=0;T<dt.length;T++)$(dt[T],tt)}catch(Ut){En(x,x.return,Ut)}}g&&Y&64&&Km(B),bs(B,B.return);break;case 26:case 27:case 5:br(T,B,g),g&&x===null&&Y&4&&Nd(B),bs(B,B.return);break;case 12:br(T,B,g);break;case 13:br(T,B,g),g&&Y&4&&Lf(T,B);break;case 22:B.memoizedState===null&&br(T,B,g),bs(B,B.return);break;default:br(T,B,g)}c=c.sibling}}function If(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&tu(g))}function su(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&tu(l))}function Di(l,c,g,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)zd(l,c,g,x),c=c.sibling}function zd(l,c,g,x){var T=c.flags;switch(c.tag){case 0:case 11:case 15:Di(l,c,g,x),T&2048&&nu(9,c);break;case 3:Di(l,c,g,x),T&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&tu(l)));break;case 12:if(T&2048){Di(l,c,g,x),l=c.stateNode;try{var B=c.memoizedProps,Y=B.id,tt=B.onPostCommit;typeof tt=="function"&&tt(Y,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(dt){En(c,c.return,dt)}}else Di(l,c,g,x);break;case 23:break;case 22:B=c.stateNode,c.memoizedState!==null?B._visibility&4?Di(l,c,g,x):Qi(l,c):B._visibility&4?Di(l,c,g,x):(B._visibility|=4,Vi(l,c,g,x,(c.subtreeFlags&10256)!==0)),T&2048&&If(c.alternate,c);break;case 24:Di(l,c,g,x),T&2048&&su(c.alternate,c);break;default:Di(l,c,g,x)}}function Vi(l,c,g,x,T){for(T=T&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var B=l,Y=c,tt=g,dt=x,Ut=Y.flags;switch(Y.tag){case 0:case 11:case 15:Vi(B,Y,tt,dt,T),nu(8,Y);break;case 23:break;case 22:var $t=Y.stateNode;Y.memoizedState!==null?$t._visibility&4?Vi(B,Y,tt,dt,T):Qi(B,Y):($t._visibility|=4,Vi(B,Y,tt,dt,T)),T&&Ut&2048&&If(Y.alternate,Y);break;case 24:Vi(B,Y,tt,dt,T),T&&Ut&2048&&su(Y.alternate,Y);break;default:Vi(B,Y,tt,dt,T)}c=c.sibling}}function Qi(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,x=c,T=x.flags;switch(x.tag){case 22:Qi(g,x),T&2048&&If(x.alternate,x);break;case 24:Qi(g,x),T&2048&&su(x.alternate,x);break;default:Qi(g,x)}c=c.sibling}}function ns(l){if(l.subtreeFlags&qa)for(l=l.child;l!==null;)Pf(l),l=l.sibling}function Pf(l){switch(l.tag){case 26:ns(l),l.flags&qa&&(l.memoizedState!==null?Ng(Qn,l.memoizedState,l.memoizedProps):ha(l.type,l.memoizedProps));break;case 5:ns(l),l.flags&qa&&ha(l.type,l.memoizedProps);break;case 3:case 4:if(za){var c=Qn;Qn=ah(l.stateNode.containerInfo),ns(l),Qn=c}else ns(l);break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=qa,qa=16777216,ns(l),qa=c):ns(l));break;default:ns(l)}}function ru(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function oo(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var x=c[g];Xe=x,Fd(x,l)}ru(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Hf(l),l=l.sibling}function Hf(l){switch(l.tag){case 0:case 11:case 15:oo(l),l.flags&2048&&so(9,l,l.return);break;case 3:oo(l);break;case 12:oo(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&4&&(l.return===null||l.return.tag!==13)?(c._visibility&=-5,Er(l)):oo(l);break;default:oo(l)}}function Er(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var x=c[g];Xe=x,Fd(x,l)}ru(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:so(8,c,c.return),Er(c);break;case 22:g=c.stateNode,g._visibility&4&&(g._visibility&=-5,Er(c));break;default:Er(c)}l=l.sibling}}function Fd(l,c){for(;Xe!==null;){var g=Xe;switch(g.tag){case 0:case 11:case 15:so(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var x=g.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:tu(g.memoizedState.cache)}if(x=g.child,x!==null)x.return=g,Xe=x;else t:for(g=l;Xe!==null;){x=Xe;var T=x.sibling,B=x.return;if(Pd(x),x===g){Xe=null;break t}if(T!==null){T.return=B,Xe=T;break t}Xe=B}}}function Xl(l){var c=ng(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(l=ip(l),l===null)throw Error(a(362));return l.stateNode.current}function lo(l,c){var g=l.tag;switch(c.$$typeof){case dc:if(l.type===c.value)return!0;break;case hs:t:{for(c=c.value,l=[l,0],g=0;g<l.length;){var x=l[g++],T=x.tag,B=l[g++],Y=c[B];if(T!==5&&T!==26&&T!==27||!ec(x)){for(;Y!=null&&lo(x,Y);)B++,Y=c[B];if(B===c.length){c=!0;break t}else for(x=x.child;x!==null;)l.push(x,B),x=x.sibling}}c=!1}return c;case qn:if((g===5||g===26||g===27)&&rg(l.stateNode,c.value))return!0;break;case ar:if((g===5||g===6||g===26||g===27)&&(l=sg(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case Os:if((g===5||g===26||g===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Gd(l){switch(l.$$typeof){case dc:return"<"+(u(l.value)||"Unknown")+">";case hs:return":has("+(Gd(l)||"")+")";case qn:return'[role="'+l.value+'"]';case ar:return'"'+l.value+'"';case Os:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function ba(l,c){var g=[];l=[l,0];for(var x=0;x<l.length;){var T=l[x++],B=T.tag,Y=l[x++],tt=c[Y];if(B!==5&&B!==26&&B!==27||!ec(T)){for(;tt!=null&&lo(T,tt);)Y++,tt=c[Y];if(Y===c.length)g.push(T);else for(T=T.child;T!==null;)l.push(T,Y),T=T.sibling}}return g}function ou(l,c){if(!yo)throw Error(a(363));l=Xl(l),l=ba(l,c),c=[],l=Array.from(l);for(var g=0;g<l.length;){var x=l[g++],T=x.tag;if(T===5||T===26||T===27)ec(x)||c.push(x.stateNode);else for(x=x.child;x!==null;)l.push(x),x=x.sibling}return c}function si(){if((mn&2)!==0&&cn!==0)return cn&-cn;if(Fe.T!==null){var l=Va;return l!==0?l:wt()}return ig()}function Vd(){ja===0&&(ja=(cn&536870912)===0||dn?k():536870912);var l=Xa.current;return l!==null&&(l.flags|=32),ja}function Ui(l,c,g){(l===Cn&&Nn===2||l.cancelPendingCommit!==null)&&(Xi(l,0),Ea(l,cn,ja,!1)),J(l,g),((mn&2)===0||l!==Cn)&&(l===Cn&&((mn&2)===0&&(zr|=g),Hn===4&&Ea(l,cn,ja,!1)),Vt(l))}function co(l,c,g){if((mn&6)!==0)throw Error(a(327));var x=!g&&(c&60)===0&&(c&l.expiredLanes)===0||I(l,c),T=x?Yd(l,c):Ff(l,c,!0),B=x;do{if(T===0){Ja&&!x&&Ea(l,c,0,!1);break}else if(T===6)Ea(l,c,0,!ps);else{if(g=l.current.alternate,B&&!Yl(g)){T=Ff(l,c,!1),B=!1;continue}if(T===2){if(B=c,l.errorRecoveryDisabledLanes&B)var Y=0;else Y=l.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){c=Y;t:{var tt=l;T=ll;var dt=Yi&&tt.current.memoizedState.isDehydrated;if(dt&&(Xi(tt,Y).flags|=256),Y=Ff(tt,Y,!1),Y!==2){if(Ti&&!dt){tt.errorRecoveryDisabledLanes|=B,zr|=B,T=4;break t}B=ei,ei=T,B!==null&&lu(B)}T=Y}if(B=!1,T!==2)continue}}if(T===1){Xi(l,0),Ea(l,c,0,!0);break}t:{switch(x=l,T){case 0:case 1:throw Error(a(345));case 4:if((c&4194176)===c){Ea(x,c,ja,!ps);break t}break;case 2:ei=null;break;case 3:case 5:break;default:throw Error(a(329))}if(x.finishedWork=g,x.finishedLanes=c,(c&62914560)===c&&(B=ma+300-ls(),10<B)){if(Ea(x,c,ja,!ps),P(x,0)!==0)break t;x.timeoutHandle=yi(zf.bind(null,x,g,ei,Du,mh,c,ja,zr,sr,ps,2,-0,0),B);break t}zf(x,g,ei,Du,mh,c,ja,zr,sr,ps,0,-0,0)}}break}while(!0);Vt(l)}function lu(l){ei===null?ei=l:ei.push.apply(ei,l)}function zf(l,c,g,x,T,B,Y,tt,dt,Ut,$t,ce,me){var Ye=c.subtreeFlags;if((Ye&8192||(Ye&16785408)===16785408)&&(ep(),Pf(c),c=_i(),c!==null)){l.cancelPendingCommit=c(fo.bind(null,l,g,x,T,Y,tt,dt,1,ce,me)),Ea(l,B,Y,!Ut);return}fo(l,g,x,T,Y,tt,dt,$t,ce,me)}function Yl(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var x=0;x<g.length;x++){var T=g[x],B=T.getSnapshot;T=T.value;try{if(!Ca(B(),T))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ea(l,c,g,x){c&=~wu,c&=~zr,l.suspendedLanes|=c,l.pingedLanes&=~c,x&&(l.warmLanes|=c),x=l.expirationTimes;for(var T=c;0<T;){var B=31-da(T),Y=1<<B;x[B]=-1,T&=~Y}g!==0&&at(l,g,c)}function cu(){return(mn&6)===0?(ie(0),!1):!0}function kl(){if(Ie!==null){if(Nn===0)var l=Ie.return;else l=Ie,ka=Ns=null,Ms(l),bo=null,Eo=0,l=Ie;for(;l!==null;)Jm(l.alternate,l),l=l.return;Ie=null}}function Xi(l,c){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;g!==go&&(l.timeoutHandle=go,jf(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),kl(),Cn=l,Ie=g=as(l.current,null),cn=c,Nn=0,$i=null,ps=!1,Ja=I(l,c),Ti=!1,sr=ja=wu=zr=Ka=Hn=0,ei=ll=null,mh=!1,(c&8)!==0&&(c|=c&32);var x=l.entangledLanes;if(x!==0)for(l=l.entanglements,x&=c;0<x;){var T=31-da(x),B=1<<T;c|=l[T],x&=~B}return ta=c,K(),g}function Ia(l,c){tn=null,Fe.H=$n,c===cc?(c=le(),Nn=3):c===Ru?(c=le(),Nn=4):Nn=c===dh?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,$i=c,Ie===null&&(Hn=1,Il(l,lt(c,l.current)))}function uo(){var l=Xa.current;return l===null?!0:(cn&4194176)===cn?In===null:(cn&62914560)===cn||(cn&536870912)!==0?l===In:!1}function qs(){var l=Fe.H;return Fe.H=$n,l===null?$n:l}function Js(){var l=Fe.A;return Fe.A=hc,l}function Tr(){Hn=4,ps||(cn&4194176)!==cn&&Xa.current!==null||(Ja=!0),(Ka&134217727)===0&&(zr&134217727)===0||Cn===null||Ea(Cn,cn,ja,!1)}function Ff(l,c,g){var x=mn;mn|=2;var T=qs(),B=Js();(Cn!==l||cn!==c)&&(Du=null,Xi(l,c)),c=!1;var Y=Hn;t:do try{if(Nn!==0&&Ie!==null){var tt=Ie,dt=$i;switch(Nn){case 8:kl(),Y=6;break t;case 3:case 2:case 6:Xa.current===null&&(c=!0);var Ut=Nn;if(Nn=0,$i=null,is(l,tt,dt,Ut),g&&Ja){Y=0;break t}break;default:Ut=Nn,Nn=0,$i=null,is(l,tt,dt,Ut)}}Xd(),Y=Hn;break}catch($t){Ia(l,$t)}while(!0);return c&&l.shellSuspendCounter++,ka=Ns=null,mn=x,Fe.H=T,Fe.A=B,Ie===null&&(Cn=null,cn=0,K()),Y}function Xd(){for(;Ie!==null;)Wn(Ie)}function Yd(l,c){var g=mn;mn|=2;var x=qs(),T=Js();Cn!==l||cn!==c?(Du=null,pc=ls()+500,Xi(l,c)):Ja=I(l,c);t:do try{if(Nn!==0&&Ie!==null){c=Ie;var B=$i;e:switch(Nn){case 1:Nn=0,$i=null,is(l,c,B,1);break;case 2:if(ae(B)){Nn=0,$i=null,yn(c);break}c=function(){Nn===2&&Cn===l&&(Nn=7),Vt(l)},B.then(c,c);break t;case 3:Nn=7;break t;case 4:Nn=5;break t;case 7:ae(B)?(Nn=0,$i=null,yn(c)):(Nn=0,$i=null,is(l,c,B,7));break;case 5:var Y=null;switch(Ie.tag){case 26:Y=Ie.memoizedState;case 5:case 27:var tt=Ie,dt=tt.type,Ut=tt.pendingProps;if(Y?Ko(Y):Wf(dt,Ut)){Nn=0,$i=null;var $t=tt.sibling;if($t!==null)Ie=$t;else{var ce=tt.return;ce!==null?(Ie=ce,Pa(ce)):Ie=null}break e}}Nn=0,$i=null,is(l,c,B,5);break;case 6:Nn=0,$i=null,is(l,c,B,6);break;case 8:kl(),Hn=6;break t;default:throw Error(a(462))}}ua();break}catch(me){Ia(l,me)}while(!0);return ka=Ns=null,Fe.H=x,Fe.A=T,mn=g,Ie!==null?0:(Cn=null,cn=0,K(),Hn)}function ua(){for(;Ie!==null&&!Pg();)Wn(Ie)}function Wn(l){var c=Ym(l.alternate,l,ta);l.memoizedProps=l.pendingProps,c===null?Pa(l):Ie=c}function yn(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=Hm(g,c,c.pendingProps,c.type,void 0,cn);break;case 11:c=Hm(g,c,c.pendingProps,c.type.render,c.ref,cn);break;case 5:Ms(c);default:Jm(g,c),c=Ie=fu(c,ta),c=Ym(g,c,ta)}l.memoizedProps=l.pendingProps,c===null?Pa(l):Ie=c}function is(l,c,g,x){ka=Ns=null,Ms(c),bo=null,Eo=0;var T=c.return;try{if(Ny(l,T,c,g,cn)){Hn=1,Il(l,lt(g,l.current)),Ie=null;return}}catch(B){if(T!==null)throw Ie=T,B;Hn=1,Il(l,lt(g,l.current)),Ie=null;return}c.flags&32768?(dn||x===1?l=!0:Ja||(cn&536870912)!==0?l=!1:(ps=l=!0,(x===2||x===3||x===6)&&(x=Xa.current,x!==null&&x.tag===13&&(x.flags|=16384))),Gf(c,l)):Pa(c)}function Pa(l){var c=l;do{if((c.flags&32768)!==0){Gf(c,ps);return}l=c.return;var g=qm(c.alternate,c,ta);if(g!==null){Ie=g;return}if(c=c.sibling,c!==null){Ie=c;return}Ie=c=l}while(c!==null);Hn===0&&(Hn=5)}function Gf(l,c){do{var g=Ly(l.alternate,l);if(g!==null){g.flags&=32767,Ie=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){Ie=l;return}Ie=l=g}while(l!==null);Hn=6,Ie=null}function fo(l,c,g,x,T,B,Y,tt,dt,Ut){var $t=Fe.T,ce=Ur();try{Zi(2),Fe.T=null,Qm(l,c,g,x,ce,T,B,Y,tt,dt,Ut)}finally{Fe.T=$t,Zi(ce)}}function Qm(l,c,g,x,T,B,Y,tt){do Es();while(rr!==null);if((mn&6)!==0)throw Error(a(327));var dt=l.finishedWork;if(x=l.finishedLanes,dt===null)return null;if(l.finishedWork=null,l.finishedLanes=0,dt===l.current)throw Error(a(177));l.callbackNode=null,l.callbackPriority=0,l.cancelPendingCommit=null;var Ut=dt.lanes|dt.childLanes;if(Ut|=Ds,ct(l,x,Ut,B,Y,tt),l===Cn&&(Ie=Cn=null,cn=0),(dt.subtreeFlags&10256)===0&&(dt.flags&10256)===0||Ls||(Ls=!0,wo=Ut,gh=g,Rr(ch,function(){return Es(),null})),g=(dt.flags&15990)!==0,(dt.subtreeFlags&15990)!==0||g?(g=Fe.T,Fe.T=null,B=Ur(),Zi(2),Y=mn,mn|=4,au(l,dt),Hd(dt,l),eg(l.containerInfo),l.current=dt,Of(l,dt.alternate,dt),oh(),mn=Y,Zi(B),Fe.T=g):l.current=dt,Ls?(Ls=!1,rr=l,cl=x):kd(l,Ut),Ut=l.pendingLanes,Ut===0&&(Bo=null),H(dt.stateNode),Vt(l),c!==null)for(T=l.onRecoverableError,dt=0;dt<c.length;dt++)Ut=c[dt],T(Ut.value,{componentStack:Ut.stack});return(cl&3)!==0&&Es(),Ut=l.pendingLanes,(x&4194218)!==0&&(Ut&42)!==0?l===vh?mc++:(mc=0,vh=l):mc=0,ie(0),null}function kd(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,tu(c)))}function Es(){if(rr!==null){var l=rr,c=wo;wo=0;var g=ut(cl),x=32>g?32:g;g=Fe.T;var T=Ur();try{if(Zi(x),Fe.T=null,rr===null)var B=!1;else{x=gh,gh=null;var Y=rr,tt=cl;if(rr=null,cl=0,(mn&6)!==0)throw Error(a(331));var dt=mn;if(mn|=4,Hf(Y.current),zd(Y,Y.current,tt,x),mn=dt,ie(0,!1),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(li,Y)}catch{}B=!0}return B}finally{Zi(T),Fe.T=g,kd(l,c)}}return!1}function ql(l,c,g){c=lt(g,c),c=Hl(l.stateNode,c,2),l=ee(l,c,2),l!==null&&(J(l,2),Vt(l))}function En(l,c,g){if(l.tag===3)ql(l,l,g);else for(;c!==null;){if(c.tag===3){ql(c,l,g);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Bo===null||!Bo.has(x))){l=lt(g,l),g=bd(2),x=ee(c,g,2),x!==null&&(Nm(g,x,c,l),J(x,2),Vt(x));break}}c=c.return}}function ko(l,c,g){var x=l.pingCache;if(x===null){x=l.pingCache=new ds;var T=new Set;x.set(c,T)}else T=x.get(c),T===void 0&&(T=new Set,x.set(c,T));T.has(g)||(Ti=!0,T.add(g),l=qd.bind(null,l,c,g),c.then(l,l))}function qd(l,c,g){var x=l.pingCache;x!==null&&x.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Cn===l&&(cn&g)===g&&(Hn===4||Hn===3&&(cn&62914560)===cn&&300>ls()-ma?(mn&2)===0&&Xi(l,0):wu|=g,sr===cn&&(sr=0)),Vt(l)}function ho(l,c){c===0&&(c=L()),l=Gt(l,c),l!==null&&(J(l,c),Vt(l))}function Cr(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),ho(l,g)}function po(l,c){var g=0;switch(l.tag){case 13:var x=l.stateNode,T=l.memoizedState;T!==null&&(g=T.retryLane);break;case 19:x=l.stateNode;break;case 22:x=l.stateNode._retryCache;break;default:throw Error(a(314))}x!==null&&x.delete(c),ho(l,g)}function Rr(l,c){return Eu(l,c)}function Jd(l,c,g,x){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uu(l){return l=l.prototype,!(!l||!l.isReactComponent)}function as(l,c){var g=l.alternate;return g===null?(g=e(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&31457280,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function fu(l,c){l.flags&=31457282;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function Ks(l,c,g,x,T,B){var Y=0;if(x=l,typeof l=="function")uu(l)&&(Y=1);else if(typeof l=="string")Y=za&&Ln?Su(l,g,bi.current)?26:Ws(l)?27:5:za?Su(l,g,bi.current)?26:5:Ln&&Ws(l)?27:5;else t:switch(l){case mo:return Zn(g.children,T,B,c);case mu:Y=8,T|=24;break;case kf:return l=e(12,g,c,T|2),l.elementType=kf,l.lanes=B,l;case qf:return l=e(13,g,c,T),l.elementType=qf,l.lanes=B,l;case Wl:return l=e(19,g,c,T),l.elementType=Wl,l.lanes=B,l;case Wd:return hu(g,T,B,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case gu:case Ts:Y=10;break t;case jd:Y=9;break t;case vu:Y=11;break t;case Jf:Y=14;break t;case rs:Y=16,x=null;break t}Y=29,g=Error(a(130,l===null?"null":typeof l,"")),x=null}return c=e(Y,g,c,T),c.elementType=l,c.type=x,c.lanes=B,c}function Zn(l,c,g,x){return l=e(7,l,x,c),l.lanes=g,l}function hu(l,c,g,x){l=e(22,l,x,c),l.elementType=Wd,l.lanes=g;var T={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var B=T._current;if(B===null)throw Error(a(456));if((T._pendingVisibility&2)===0){var Y=Gt(B,2);Y!==null&&(T._pendingVisibility|=2,Ui(Y,B,2))}},attach:function(){var B=T._current;if(B===null)throw Error(a(456));if((T._pendingVisibility&2)!==0){var Y=Gt(B,2);Y!==null&&(T._pendingVisibility&=-3,Ui(Y,B,2))}}};return l.stateNode=T,l}function Vf(l,c,g){return l=e(6,l,null,c),l.lanes=g,l}function Kd(l,c,g){return c=e(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function Iy(l,c,g,x,T,B,Y,tt){this.tag=1,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=go,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=N(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N(0),this.hiddenUpdates=N(null),this.identifierPrefix=x,this.onUncaughtError=T,this.onCaughtError=B,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=tt,this.incompleteTransitions=new Map}function Zm(l,c,g,x,T,B,Y,tt,dt,Ut,$t,ce){return l=new Iy(l,c,g,Y,tt,dt,Ut,ce),c=1,B===!0&&(c|=24),B=e(3,null,null,c),l.current=B,B.stateNode=l,c=ao(),c.refCount++,l.pooledCache=c,c.refCount++,B.memoizedState={element:x,isDehydrated:g,cache:c},ge(B),l}function vi(l){return l?(l=xo,l):xo}function Xf(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=S(c),l=l!==null?E(l):null,l===null?null:$l(l.stateNode)}function Jl(l,c,g,x,T,B){T=vi(T),x.context===null?x.context=T:x.pendingContext=T,x=Lt(c),x.payload={element:g},B=B===void 0?null:B,B!==null&&(x.callback=B),g=ee(l,x,c),g!==null&&(Ui(g,l,c),ye(g,l,c))}function Kl(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function du(l,c){Kl(l,c),(l=l.alternate)&&Kl(l,c)}var ke={},jl=fd(),Ha=kN(),Yf=Object.assign,Py=Symbol.for("react.element"),pu=Symbol.for("react.transitional.element"),ss=Symbol.for("react.portal"),mo=Symbol.for("react.fragment"),mu=Symbol.for("react.strict_mode"),kf=Symbol.for("react.profiler"),gu=Symbol.for("react.provider"),jd=Symbol.for("react.consumer"),Ts=Symbol.for("react.context"),vu=Symbol.for("react.forward_ref"),qf=Symbol.for("react.suspense"),Wl=Symbol.for("react.suspense_list"),Jf=Symbol.for("react.memo"),rs=Symbol.for("react.lazy"),Wd=Symbol.for("react.offscreen"),$m=Symbol.for("react.memo_cache_sentinel"),Br=Symbol.iterator,Qd=Symbol.for("react.client.reference"),Fe=jl.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,js,wr,qo=!1,Ql=Array.isArray,Zd=t.rendererVersion,yu=t.rendererPackageName,Zl=t.extraDevToolsConfig,$l=t.getPublicInstance,tg=t.getRootHostContext,tc=t.getChildHostContext,Kf=t.prepareForCommit,eg=t.resetAfterCommit,$d=t.createInstance,_u=t.appendInitialChild,Dr=t.finalizeInitialChildren,qe=t.shouldSetTextContent,wn=t.createTextInstance,yi=t.scheduleTimeout,jf=t.cancelTimeout,go=t.noTimeout,fa=t.isPrimaryRenderer;t.warnsIfNotActing;var Mi=t.supportsMutation,os=t.supportsPersistence,Yi=t.supportsHydration,ng=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var ri=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Zi=t.setCurrentUpdatePriority,Ur=t.getCurrentUpdatePriority,ig=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var ag=t.shouldAttemptEagerTransition,Hy=t.detachDeletedInstance;t.requestPostPaintCallback;var tp=t.maySuspendCommit,Wf=t.preloadInstance,ep=t.startSuspendingCommit,ha=t.suspendInstance,_i=t.waitForCommitToBeReady,vo=t.NotPendingTransition,Cs=t.HostTransitionContext,Qf=t.resetFormInstance;t.bindToConsole;var np=t.supportsMicrotasks,Nr=t.scheduleMicrotask,yo=t.supportsTestSelectors,ip=t.findFiberRoot,ap=t.getBoundingRect,sg=t.getTextContent,ec=t.isHiddenSubtree,rg=t.matchAccessibilityRole,og=t.setFocusIfFocusable,lg=t.setupIntersectionObserver,cg=t.appendChild,sp=t.appendChildToContainer,ug=t.commitTextUpdate,zy=t.commitMount,fg=t.commitUpdate,hg=t.insertBefore,dg=t.insertInContainerBefore,rp=t.removeChild,pg=t.removeChildFromContainer,op=t.resetTextContent,mg=t.hideInstance,gg=t.hideTextInstance,vg=t.unhideInstance,Fy=t.unhideTextInstance,yg=t.clearContainer,nc=t.cloneInstance,Au=t.createContainerChildSet,lp=t.appendChildToContainerChildSet,Zf=t.finalizeContainerChildren,ic=t.replaceContainerChildren,cp=t.cloneHiddenInstance,up=t.cloneHiddenTextInstance,$f=t.isSuspenseInstancePending,th=t.isSuspenseInstanceFallback,_g=t.getSuspenseInstanceFallbackErrorDetails,Ag=t.registerSuspenseInstanceRetry,fp=t.canHydrateFormStateMarker,xg=t.isFormStateMarkerMatching,hp=t.getNextHydratableSibling,eh=t.getFirstHydratableChild,Sg=t.getFirstHydratableChildWithinContainer,Mg=t.getFirstHydratableChildWithinSuspenseInstance,Gy=t.canHydrateInstance,dp=t.canHydrateTextInstance,bg=t.canHydrateSuspenseInstance,Eg=t.hydrateInstance,pp=t.hydrateTextInstance,Tg=t.hydrateSuspenseInstance,Cg=t.getNextHydratableInstanceAfterSuspenseInstance,Vy=t.commitHydratedContainer,Xy=t.commitHydratedSuspenseInstance,Rg=t.clearSuspenseBoundary,xu=t.clearSuspenseBoundaryFromContainer,nh=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var ih=t.validateHydratableInstance,Bg=t.validateHydratableTextInstance,za=t.supportsResources,Su=t.isHostHoistableType,ah=t.getHoistableRoot,mp=t.getResource,wg=t.acquireResource,Jo=t.releaseResource,Mu=t.hydrateHoistable,bu=t.mountHoistable,ac=t.unmountHoistable,sh=t.createHoistableInstance,Dg=t.prepareToCommitHoistables,Ug=t.mayResourceSuspendCommit,Ko=t.preloadResource,Ng=t.suspendResource,Ln=t.supportsSingletons,Rs=t.resolveSingletonInstance,_o=t.clearSingleton,Og=t.acquireSingletonInstance,Ao=t.releaseSingletonInstance,Ws=t.isHostSingletonType,oi=[],Or=-1,xo={},da=Math.clz32?Math.clz32:U,Lg=Math.log,Ig=Math.LN2,Qs=128,jo=4194304,Eu=Ha.unstable_scheduleCallback,rh=Ha.unstable_cancelCallback,Pg=Ha.unstable_shouldYield,oh=Ha.unstable_requestPaint,ls=Ha.unstable_now,lh=Ha.unstable_ImmediatePriority,Hg=Ha.unstable_UserBlockingPriority,ch=Ha.unstable_NormalPriority,Yy=Ha.unstable_IdlePriority,zg=Ha.log,Ni=Ha.unstable_setDisableYieldValue,li=null,Ta=null,Ca=typeof Object.is=="function"?Object.is:j,gp=new WeakMap,Wo=[],Qo=0,Zo=null,sc=0,Fa=[],Ga=0,So=null,Bs=1,ws="",bi=C(null),rc=C(null),Zs=C(null),$o=C(null),ki=null,qi=null,dn=!1,cs=null,Oi=!1,Tu=Error(a(519)),us=[],tl=0,Ds=0,Cu=null,Lr=null,el=!1,Gn=!1,vp=!1,oc=0,lc=null,nl=0,Va=0,il=null,Ir=!1,al=!1,$s=Object.prototype.hasOwnProperty,cc=Error(a(460)),Ru=Error(a(474)),Bu={then:function(){}},Mo=null,bo=null,Eo=0,To=Kn(!0),tr=Kn(!1),Vn=C(null),uc=C(0),Xa=C(null),In=null,Ei=C(0),Pr=0,tn=null,Ue=null,pn=null,fs=!1,sl=!1,Co=!1,uh=0,rl=0,Li=null,Us=0,fh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},$n={readContext:Fi,use:Mt,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useLayoutEffect:Dn,useInsertionEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useSyncExternalStore:Dn,useId:Dn};$n.useCacheRefresh=Dn,$n.useMemoCache=Dn,$n.useHostTransitionStatus=Dn,$n.useFormState=Dn,$n.useActionState=Dn,$n.useOptimistic=Dn;var Ro={readContext:Fi,use:Mt,useCallback:function(l,c){return V().memoizedState=[l,c===void 0?null:c],l},useContext:Fi,useEffect:Sf,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,Vc(4194308,4,Mf.bind(null,c,l),g)},useLayoutEffect:function(l,c){return Vc(4194308,4,l,c)},useInsertionEffect:function(l,c){Vc(4,2,l,c)},useMemo:function(l,c){var g=V();c=c===void 0?null:c;var x=l();if(Co){W(!0);try{l()}finally{W(!1)}}return g.memoizedState=[x,c],x},useReducer:function(l,c,g){var x=V();if(g!==void 0){var T=g(c);if(Co){W(!0);try{g(c)}finally{W(!1)}}}else T=c;return x.memoizedState=x.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},x.queue=l,l=l.dispatch=Ef.bind(null,tn,l),[x.memoizedState,l]},useRef:function(l){var c=V();return l={current:l},c.memoizedState=l},useState:function(l){l=$e(l);var c=l.queue,g=Md.bind(null,tn,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:$r,useDeferredValue:function(l,c){var g=V();return kc(g,l,c)},useTransition:function(){var l=$e(!1);return l=Dl.bind(null,tn,l.queue,!0,!1),V().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var x=tn,T=V();if(dn){if(g===void 0)throw Error(a(407));g=g()}else{if(g=c(),Cn===null)throw Error(a(349));(cn&60)!==0||Re(x,c,g)}T.memoizedState=g;var B={value:g,getSnapshot:c};return T.queue=B,Sf(We.bind(null,x,B,l),[l]),x.flags|=2048,oa(9,be.bind(null,x,B,g,c),{destroy:void 0},null),g},useId:function(){var l=V(),c=Cn.identifierPrefix;if(dn){var g=ws,x=Bs;g=(x&~(1<<32-da(x)-1)).toString(32)+g,c=":"+c+"R"+g,g=uh++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=Us++,c=":"+c+"r"+g.toString(32)+":";return l.memoizedState=c},useCacheRefresh:function(){return V().memoizedState=Sd.bind(null,tn)}};Ro.useMemoCache=ht,Ro.useHostTransitionStatus=qc,Ro.useFormState=Un,Ro.useActionState=Un,Ro.useOptimistic=function(l){var c=V();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=Nl.bind(null,tn,!0,g),g.dispatch=c,[l,c]};var pa={readContext:Fi,use:Mt,useCallback:Vo,useContext:Fi,useEffect:_d,useImperativeHandle:bf,useInsertionEffect:Dm,useLayoutEffect:Yc,useMemo:Ad,useReducer:ne,useRef:Ys,useState:function(){return ne(Yt)},useDebugValue:$r,useDeferredValue:function(l,c){var g=ot();return xd(g,Ue.memoizedState,l,c)},useTransition:function(){var l=ne(Yt)[0],c=ot().memoizedState;return[typeof l=="boolean"?l:St(l),c]},useSyncExternalStore:Le,useId:Ul};pa.useCacheRefresh=vr,pa.useMemoCache=ht,pa.useHostTransitionStatus=qc,pa.useFormState=Hi,pa.useActionState=Hi,pa.useOptimistic=function(l,c){var g=ot();return Sn(g,Ue,l,c)};var Ya={readContext:Fi,use:Mt,useCallback:Vo,useContext:Fi,useEffect:_d,useImperativeHandle:bf,useInsertionEffect:Dm,useLayoutEffect:Yc,useMemo:Ad,useReducer:pe,useRef:Ys,useState:function(){return pe(Yt)},useDebugValue:$r,useDeferredValue:function(l,c){var g=ot();return Ue===null?kc(g,l,c):xd(g,Ue.memoizedState,l,c)},useTransition:function(){var l=pe(Yt)[0],c=ot().memoizedState;return[typeof l=="boolean"?l:St(l),c]},useSyncExternalStore:Le,useId:Ul};Ya.useCacheRefresh=vr,Ya.useMemoCache=ht,Ya.useHostTransitionStatus=qc,Ya.useFormState=wi,Ya.useActionState=wi,Ya.useOptimistic=function(l,c){var g=ot();return Ue!==null?Sn(g,Ue,l,c):(g.baseState=l,[l,g.queue.dispatch])};var er={isMounted:function(l){return(l=l._reactInternals)?y(l)===l:!1},enqueueSetState:function(l,c,g){l=l._reactInternals;var x=si(),T=Lt(x);T.payload=c,g!=null&&(T.callback=g),c=ee(l,T,x),c!==null&&(Ui(c,l,x),ye(c,l,x))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var x=si(),T=Lt(x);T.tag=1,T.payload=c,g!=null&&(T.callback=g),c=ee(l,T,x),c!==null&&(Ui(c,l,x),ye(c,l,x))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=si(),x=Lt(g);x.tag=2,c!=null&&(x.callback=c),c=ee(l,x,g),c!==null&&(Ui(c,l,g),ye(c,l,g))}},hh=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},dh=Error(a(461)),Pn=!1,ph={dehydrated:null,treeContext:null,retryLane:0},Hr=C(null),Ns=null,ka=null,fc=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,x){l.push(x)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},Fg=Ha.unstable_scheduleCallback,Gg=Ha.unstable_NormalPriority,Xn={$$typeof:Ts,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},yp=Fe.S;Fe.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Bt(l,c),yp!==null&&yp(l,c)};var nr=C(null),ir=!1,ti=!1,_p=!1,Tn=typeof WeakSet=="function"?WeakSet:Set,Xe=null,rn=!1,we=null,Qe=!1,Qn=null,qa=8192,hc={getCacheForType:function(l){var c=Fi(Xn),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g}},dc=0,hs=1,qn=2,Os=3,ar=4;if(typeof Symbol=="function"&&Symbol.for){var ol=Symbol.for;dc=ol("selector.component"),hs=ol("selector.has_pseudo_class"),qn=ol("selector.role"),Os=ol("selector.test_id"),ar=ol("selector.text")}var ds=typeof WeakMap=="function"?WeakMap:Map,mn=0,Cn=null,Ie=null,cn=0,Nn=0,$i=null,ps=!1,Ja=!1,Ti=!1,ta=0,Hn=0,Ka=0,zr=0,wu=0,ja=0,sr=0,ll=null,ei=null,mh=!1,ma=0,pc=1/0,Du=null,Bo=null,Ls=!1,rr=null,cl=0,wo=0,gh=null,mc=0,vh=null;return ke.attemptContinuousHydration=function(l){if(l.tag===13){var c=Gt(l,67108864);c!==null&&Ui(c,l,67108864),du(l,67108864)}},ke.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=si(),g=Gt(l,c);g!==null&&Ui(g,l,c),du(l,c)}},ke.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=D(l.pendingLanes);if(c!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;c;){var g=1<<31-da(c);l.entanglements[1]|=g,c&=~g}Vt(l),(mn&6)===0&&(pc=ls()+500,ie(0))}}break;case 13:c=Gt(l,2),c!==null&&Ui(c,l,2),cu(),du(l,2)}},ke.batchedUpdates=function(l,c){return l(c)},ke.createComponentSelector=function(l){return{$$typeof:dc,value:l}},ke.createContainer=function(l,c,g,x,T,B,Y,tt,dt,Ut){return Zm(l,c,!1,null,g,x,B,Y,tt,dt,Ut,null)},ke.createHasPseudoClassSelector=function(l){return{$$typeof:hs,value:l}},ke.createHydrationContainer=function(l,c,g,x,T,B,Y,tt,dt,Ut,$t,ce,me){return l=Zm(g,x,!0,l,T,B,tt,dt,Ut,$t,ce,me),l.context=vi(null),g=l.current,x=si(),T=Lt(x),T.callback=c??null,ee(g,T,x),l.current.lanes=x,J(l,x),Vt(l),l},ke.createPortal=function(l,c,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ss,key:x==null?null:""+x,children:l,containerInfo:c,implementation:g}},ke.createRoleSelector=function(l){return{$$typeof:qn,value:l}},ke.createTestNameSelector=function(l){return{$$typeof:Os,value:l}},ke.createTextSelector=function(l){return{$$typeof:ar,value:l}},ke.defaultOnCaughtError=function(l){console.error(l)},ke.defaultOnRecoverableError=function(l){hh(l)},ke.defaultOnUncaughtError=function(l){hh(l)},ke.deferredUpdates=function(l){var c=Fe.T,g=Ur();try{return Zi(32),Fe.T=null,l()}finally{Zi(g),Fe.T=c}},ke.discreteUpdates=function(l,c,g,x,T){var B=Fe.T,Y=Ur();try{return Zi(2),Fe.T=null,l(c,g,x,T)}finally{Zi(Y),Fe.T=B,mn===0&&(pc=ls()+500)}},ke.findAllNodes=ou,ke.findBoundingRects=function(l,c){if(!yo)throw Error(a(363));c=ou(l,c),l=[];for(var g=0;g<c.length;g++)l.push(ap(c[g]));for(c=l.length-1;0<c;c--){g=l[c];for(var x=g.x,T=x+g.width,B=g.y,Y=B+g.height,tt=c-1;0<=tt;tt--)if(c!==tt){var dt=l[tt],Ut=dt.x,$t=Ut+dt.width,ce=dt.y,me=ce+dt.height;if(x>=Ut&&B>=ce&&T<=$t&&Y<=me){l.splice(c,1);break}else if(x!==Ut||g.width!==dt.width||me<B||ce>Y){if(!(B!==ce||g.height!==dt.height||$t<x||Ut>T)){Ut>x&&(dt.width+=Ut-x,dt.x=x),$t<T&&(dt.width=T-Ut),l.splice(c,1);break}}else{ce>B&&(dt.height+=ce-B,dt.y=B),me<Y&&(dt.height=Y-ce),l.splice(c,1);break}}}return l},ke.findHostInstance=Xf,ke.findHostInstanceWithNoPortals=function(l){return l=S(l),l=l!==null?R(l):null,l===null?null:$l(l.stateNode)},ke.findHostInstanceWithWarning=function(l){return Xf(l)},ke.flushPassiveEffects=Es,ke.flushSyncFromReconciler=function(l){var c=mn;mn|=1;var g=Fe.T,x=Ur();try{if(Zi(2),Fe.T=null,l)return l()}finally{Zi(x),Fe.T=g,mn=c,(mn&6)===0&&ie(0)}},ke.flushSyncWork=cu,ke.focusWithin=function(l,c){if(!yo)throw Error(a(363));for(l=Xl(l),c=ba(l,c),c=Array.from(c),l=0;l<c.length;){var g=c[l++],x=g.tag;if(!ec(g)){if((x===5||x===26||x===27)&&og(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},ke.getFindAllNodesFailureDescription=function(l,c){if(!yo)throw Error(a(363));var g=0,x=[];l=[Xl(l),0];for(var T=0;T<l.length;){var B=l[T++],Y=B.tag,tt=l[T++],dt=c[tt];if((Y!==5&&Y!==26&&Y!==27||!ec(B))&&(lo(B,dt)&&(x.push(Gd(dt)),tt++,tt>g&&(g=tt)),tt<c.length))for(B=B.child;B!==null;)l.push(B,tt),B=B.sibling}if(g<c.length){for(l=[];g<c.length;g++)l.push(Gd(c[g]));return`findAllNodes was able to match part of the selector:
  `+(x.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},ke.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return $l(l.child.stateNode);default:return l.child.stateNode}},ke.injectIntoDevTools=function(){var l={bundleType:0,version:Zd,rendererPackageName:yu,currentDispatcherRef:Fe,findFiberByHostInstance:ng,reconcilerVersion:"19.0.0"};if(Zl!==null&&(l.rendererConfig=Zl),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{li=c.inject(l),Ta=c}catch{}l=!!c.checkDCE}}return l},ke.isAlreadyRendering=function(){return!1},ke.observeVisibleRects=function(l,c,g,x){if(!yo)throw Error(a(363));l=ou(l,c);var T=lg(l,g,x).disconnect;return{disconnect:function(){T()}}},ke.shouldError=function(){return null},ke.shouldSuspend=function(){return!1},ke.startHostTransition=function(l,c,g,x){if(l.tag!==5)throw Error(a(476));var T=ks(l).queue;Dl(l,T,c,vo,g===null?n:function(){var B=ks(l).next.queue;return to(l,B,{},si()),g(x)})},ke.updateContainer=function(l,c,g,x){var T=c.current,B=si();return Jl(T,B,l,c,g,x),B},ke.updateContainerSync=function(l,c,g,x){return c.tag===0&&Es(),Jl(c.current,2,l,c,g,x),2},ke},r.exports.default=r.exports,Object.defineProperty(r.exports,"__esModule",{value:!0})}(gA)),gA.exports}var Lb;function JN(){return Lb||(Lb=1,mA.exports=qN()),mA.exports}var KN=JN();const jN=ax(KN);var _A={exports:{}},AA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ib;function WN(){return Ib||(Ib=1,function(r){function t(H,W){var j=H.length;H.push(W);t:for(;0<j;){var lt=j-1>>>1,X=H[lt];if(0<a(X,W))H[lt]=W,H[j]=X,j=lt;else break t}}function e(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var W=H[0],j=H.pop();if(j!==W){H[0]=j;t:for(var lt=0,X=H.length,nt=X>>>1;lt<nt;){var _t=2*(lt+1)-1,Tt=H[_t],it=_t+1,Ct=H[it];if(0>a(Tt,j))it<X&&0>a(Ct,Tt)?(H[lt]=Ct,H[it]=j,lt=it):(H[lt]=Tt,H[_t]=j,lt=_t);else if(it<X&&0>a(Ct,j))H[lt]=Ct,H[it]=j,lt=it;else break t}}return W}function a(H,W){var j=H.sortIndex-W.sortIndex;return j!==0?j:H.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();r.unstable_now=function(){return u.now()-h}}var d=[],m=[],v=1,y=null,A=3,S=!1,E=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function U(H){for(var W=e(m);W!==null;){if(W.callback===null)n(m);else if(W.startTime<=H)n(m),W.sortIndex=W.expirationTime,t(d,W);else break;W=e(m)}}function D(H){if(R=!1,U(H),!E)if(e(d)!==null)E=!0,pt();else{var W=e(m);W!==null&&ut(D,W.startTime-H)}}var P=!1,I=-1,F=5,k=-1;function L(){return!(r.unstable_now()-k<F)}function N(){if(P){var H=r.unstable_now();k=H;var W=!0;try{t:{E=!1,R&&(R=!1,M(I),I=-1),S=!0;var j=A;try{e:{for(U(H),y=e(d);y!==null&&!(y.expirationTime>H&&L());){var lt=y.callback;if(typeof lt=="function"){y.callback=null,A=y.priorityLevel;var X=lt(y.expirationTime<=H);if(H=r.unstable_now(),typeof X=="function"){y.callback=X,U(H),W=!0;break e}y===e(d)&&n(d),U(H)}else n(d);y=e(d)}if(y!==null)W=!0;else{var nt=e(m);nt!==null&&ut(D,nt.startTime-H),W=!1}}break t}finally{y=null,A=j,S=!1}W=void 0}}finally{W?J():P=!1}}}var J;if(typeof w=="function")J=function(){w(N)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,at=ct.port2;ct.port1.onmessage=N,J=function(){at.postMessage(null)}}else J=function(){C(N,0)};function pt(){P||(P=!0,J())}function ut(H,W){I=C(function(){H(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){E||S||(E=!0,pt())},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_getFirstCallbackNode=function(){return e(d)},r.unstable_next=function(H){switch(A){case 1:case 2:case 3:var W=3;break;default:W=A}var j=A;A=W;try{return H()}finally{A=j}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,W){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var j=A;A=H;try{return W()}finally{A=j}},r.unstable_scheduleCallback=function(H,W,j){var lt=r.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?lt+j:lt):j=lt,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=j+X,H={id:v++,callback:W,priorityLevel:H,startTime:j,expirationTime:X,sortIndex:-1},j>lt?(H.sortIndex=j,t(m,H),e(d)===null&&H===e(m)&&(R?(M(I),I=-1):R=!0,ut(D,j-lt))):(H.sortIndex=X,t(d,H),E||S||(E=!0,pt())),H},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(H){var W=A;return function(){var j=A;A=W;try{return H.apply(this,arguments)}finally{A=j}}}}(AA)),AA}var Pb;function QN(){return Pb||(Pb=1,_A.exports=WN()),_A.exports}var Hb=QN();const ZN=r=>typeof r=="object"&&typeof r.then=="function",af=[];function nT(r,t,e=(n,a)=>n===a){if(r===t)return!0;if(!r||!t)return!1;const n=r.length;if(t.length!==n)return!1;for(let a=0;a<n;a++)if(!e(r[a],t[a]))return!1;return!0}function iT(r,t=null,e=!1,n={}){t===null&&(t=[r]);for(const o of af)if(nT(t,o.keys,o.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return n.lifespan&&n.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,n.lifespan)),o.response;if(!e)throw o.promise}const a={keys:t,equal:n.equal,remove:()=>{const o=af.indexOf(a);o!==-1&&af.splice(o,1)},promise:(ZN(r)?r:r(...t)).then(o=>{a.response=o,n.lifespan&&n.lifespan>0&&(a.timeout=setTimeout(a.remove,n.lifespan))}).catch(o=>a.error=o)};if(af.push(a),!e)throw a.promise}const $N=(r,t,e)=>iT(r,t,!1,e),tO=(r,t,e)=>void iT(r,t,!0,e),eO=r=>{if(r===void 0||r.length===0)af.splice(0,af.length);else{const t=af.find(e=>nT(r,e.keys,e.equal));t&&t.remove()}};function Wx(r,t,e){if(!r)return;if(e(r)===!0)return r;let n=t?r.return:r.child;for(;n;){const a=Wx(n,t,e);if(a)return a;n=t?null:n.sibling}}function aT(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const Qx=aT(kt.createContext(null));class sT extends kt.Component{render(){return kt.createElement(Qx.Provider,{value:this._reactInternals},this.props.children)}}function rT(){const r=kt.useContext(Qx);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=kt.useId();return kt.useMemo(()=>{for(const e of[r,r?.alternate]){if(!e)continue;const n=Wx(e,!1,a=>{let o=a.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(n)return n}},[r,t])}const nO=Symbol.for("react.context"),iO=r=>r!==null&&typeof r=="object"&&"$$typeof"in r&&r.$$typeof===nO;function aO(){const r=rT(),[t]=kt.useState(()=>new Map);t.clear();let e=r;for(;e;){const n=e.type;iO(n)&&n!==Qx&&!t.has(n)&&t.set(n,kt.use(aT(n))),e=e.return}return t}function sO(){const r=aO();return kt.useMemo(()=>Array.from(r.keys()).reduce((t,e)=>n=>kt.createElement(t,null,kt.createElement(e.Provider,{...n,value:r.get(e)})),t=>kt.createElement(sT,{...t})),[r])}function oT(r){let t=r.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const lT=r=>r&&r.isOrthographicCamera,rO=r=>r&&r.hasOwnProperty("current"),oO=r=>r!=null&&(typeof r=="string"||typeof r=="number"||r.isColor),Bm=((r,t)=>typeof window<"u"&&(((r=window.document)==null?void 0:r.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?kt.useLayoutEffect:kt.useEffect;function cT(r){const t=kt.useRef(r);return Bm(()=>void(t.current=r),[r]),t}function lO(){const r=rT(),t=sO();return kt.useMemo(()=>({children:e})=>{const a=!!Wx(r,!0,o=>o.type===kt.StrictMode)?kt.StrictMode:kt.Fragment;return de.jsx(a,{children:de.jsx(t,{children:e})})},[r,t])}function cO({set:r}){return Bm(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}const uO=(r=>(r=class extends kt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},r.getDerivedStateFromError=()=>({error:!0}),r))();function uT(r){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],e),r[1]):r}function Vh(r){var t;return(t=r.__r3f)==null?void 0:t.root.getState()}const ni={obj:r=>r===Object(r)&&!ni.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,nul:r=>r===null,arr:r=>Array.isArray(r),equ(r,t,{arrays:e="shallow",objects:n="reference",strict:a=!0}={}){if(typeof r!=typeof t||!!r!=!!t)return!1;if(ni.str(r)||ni.num(r)||ni.boo(r))return r===t;const o=ni.obj(r);if(o&&n==="reference")return r===t;const u=ni.arr(r);if(u&&e==="reference")return r===t;if((u||o)&&r===t)return!0;let h;for(h in r)if(!(h in t))return!1;if(o&&e==="shallow"&&n==="shallow"){for(h in a?t:r)if(!ni.equ(r[h],t[h],{strict:a,objects:"reference"}))return!1}else for(h in a?t:r)if(r[h]!==t[h])return!1;if(ni.und(h)){if(u&&r.length===0&&t.length===0||o&&Object.keys(r).length===0&&Object.keys(t).length===0)return!0;if(r!==t)return!1}return!0}};function fO(r){const t={nodes:{},materials:{},meshes:{}};return r&&r.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material),e.isMesh&&!t.meshes[e.name]&&(t.meshes[e.name]=e)}),t}function hO(r){r.type!=="Scene"&&(r.dispose==null||r.dispose());for(const t in r){const e=r[t];e?.type!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const fT=["children","key","ref"];function dO(r){const t={};for(const e in r)fT.includes(e)||(t[e]=r[e]);return t}function kv(r,t,e,n){const a=r;let o=a?.__r3f;return o||(o={root:t,type:e,parent:null,children:[],props:dO(n),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=o)),o}function ym(r,t){let e=r[t];if(!t.includes("-"))return{root:r,key:t,target:e};e=r;for(const a of t.split("-")){var n;t=a,r=e,e=(n=e)==null?void 0:n[t]}return{root:r,key:t,target:e}}const zb=/-\d+$/;function qv(r,t){if(ni.str(t.props.attach)){if(zb.test(t.props.attach)){const a=t.props.attach.replace(zb,""),{root:o,key:u}=ym(r.object,a);Array.isArray(o[u])||(o[u]=[])}const{root:e,key:n}=ym(r.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else ni.fun(t.props.attach)&&(t.previousAttach=t.props.attach(r.object,t.object))}function Jv(r,t){if(ni.str(t.props.attach)){const{root:e,key:n}=ym(r.object,t.props.attach),a=t.previousAttach;a===void 0?delete e[n]:e[n]=a}else t.previousAttach==null||t.previousAttach(r.object,t.object);delete t.previousAttach}const jA=[...fT,"args","dispose","attach","object","onUpdate","dispose"],Fb=new Map;function pO(r){let t=Fb.get(r.constructor);try{t||(t=new r.constructor,Fb.set(r.constructor,t))}catch{}return t}function mO(r,t){const e={};for(const n in t)if(!jA.includes(n)&&!ni.equ(t[n],r.props[n])){e[n]=t[n];for(const a in t)a.startsWith(`${n}-`)&&(e[a]=t[a])}for(const n in r.props){if(jA.includes(n)||t.hasOwnProperty(n))continue;const{root:a,key:o}=ym(r.object,n);if(a.constructor&&a.constructor.length===0){const u=pO(a);ni.und(u)||(e[o]=u[o])}else e[o]=0}return e}const gO=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],vO=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Dc(r,t){var e;const n=r.__r3f,a=n&&oT(n).getState(),o=n?.eventCount;for(const h in t){let d=t[h];if(jA.includes(h))continue;if(n&&vO.test(h)){typeof d=="function"?n.handlers[h]=d:delete n.handlers[h],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:m,key:v,target:y}=ym(r,h);if(y instanceof rd&&d instanceof rd)y.mask=d.mask;else if(y instanceof oe&&oO(d))y.set(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&d!=null&&d.constructor&&y.constructor===d.constructor)y.copy(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(d))typeof y.fromArray=="function"?y.fromArray(d):y.set(...d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof d=="number")typeof y.setScalar=="function"?y.setScalar(d):y.set(d);else{var u;m[v]=d,a&&!a.linear&&gO.includes(v)&&(u=m[v])!=null&&u.isTexture&&m[v].format===Ua&&m[v].type===dr&&(m[v].colorSpace=Pi)}}if(n!=null&&n.parent&&a!=null&&a.internal&&(e=n.object)!=null&&e.isObject3D&&o!==n.eventCount){const h=n.object,d=a.internal.interaction.indexOf(h);d>-1&&a.internal.interaction.splice(d,1),n.eventCount&&h.raycast!==null&&a.internal.interaction.push(h)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&yd(n),r}function yd(r){var t;if(!r.parent)return;r.props.onUpdate==null||r.props.onUpdate(r.object);const e=(t=r.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function yO(r,t){r.manual||(lT(r)?(r.left=t.width/-2,r.right=t.width/2,r.top=t.height/2,r.bottom=t.height/-2):r.aspect=t.width/t.height,r.updateProjectionMatrix())}const $a=r=>r?.isObject3D;function j0(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function hT(r,t,e,n){const a=e.get(t);a&&(e.delete(t),e.size===0&&(r.delete(n),a.target.releasePointerCapture(n)))}function _O(r,t){const{internal:e}=r.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,a)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(a)}),e.capturedMap.forEach((n,a)=>{hT(e.capturedMap,t,n,a)})}function AO(r){function t(d){const{internal:m}=r.getState(),v=d.offsetX-m.initialClick[0],y=d.offsetY-m.initialClick[1];return Math.round(Math.sqrt(v*v+y*y))}function e(d){return d.filter(m=>["Move","Over","Enter","Out","Leave"].some(v=>{var y;return(y=m.__r3f)==null?void 0:y.handlers["onPointer"+v]}))}function n(d,m){const v=r.getState(),y=new Set,A=[],S=m?m(v.internal.interaction):v.internal.interaction;for(let M=0;M<S.length;M++){const w=Vh(S[M]);w&&(w.raycaster.camera=void 0)}v.previousRoot||v.events.compute==null||v.events.compute(d,v);function E(M){const w=Vh(M);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var U;w.events.compute==null||w.events.compute(d,w,(U=w.previousRoot)==null?void 0:U.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(M,!0):[]}let R=S.flatMap(E).sort((M,w)=>{const U=Vh(M.object),D=Vh(w.object);return!U||!D?M.distance-w.distance:D.events.priority-U.events.priority||M.distance-w.distance}).filter(M=>{const w=j0(M);return y.has(w)?!1:(y.add(w),!0)});v.events.filter&&(R=v.events.filter(R,v));for(const M of R){let w=M.object;for(;w;){var C;(C=w.__r3f)!=null&&C.eventCount&&A.push({...M,eventObject:w}),w=w.parent}}if("pointerId"in d&&v.internal.capturedMap.has(d.pointerId))for(let M of v.internal.capturedMap.get(d.pointerId).values())y.has(j0(M.intersection))||A.push(M.intersection);return A}function a(d,m,v,y){if(d.length){const A={stopped:!1};for(const S of d){let E=Vh(S.object);if(E||S.object.traverseAncestors(R=>{const C=Vh(R);if(C)return E=C,!1}),E){const{raycaster:R,pointer:C,camera:M,internal:w}=E,U=new q(C.x,C.y,0).unproject(M),D=L=>{var N,J;return(N=(J=w.capturedMap.get(L))==null?void 0:J.has(S.eventObject))!=null?N:!1},P=L=>{const N={intersection:S,target:m.target};w.capturedMap.has(L)?w.capturedMap.get(L).set(S.eventObject,N):w.capturedMap.set(L,new Map([[S.eventObject,N]])),m.target.setPointerCapture(L)},I=L=>{const N=w.capturedMap.get(L);N&&hT(w.capturedMap,S.eventObject,N,L)};let F={};for(let L in m){let N=m[L];typeof N!="function"&&(F[L]=N)}let k={...S,...F,pointer:C,intersections:d,stopped:A.stopped,delta:v,unprojectedPoint:U,ray:R.ray,camera:M,stopPropagation(){const L="pointerId"in m&&w.capturedMap.get(m.pointerId);if((!L||L.has(S.eventObject))&&(k.stopped=A.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(N=>N.eventObject===S.eventObject))){const N=d.slice(0,d.indexOf(S));o([...N,S])}},target:{hasPointerCapture:D,setPointerCapture:P,releasePointerCapture:I},currentTarget:{hasPointerCapture:D,setPointerCapture:P,releasePointerCapture:I},nativeEvent:m};if(y(k),A.stopped===!0)break}}}return d}function o(d){const{internal:m}=r.getState();for(const v of m.hovered.values())if(!d.length||!d.find(y=>y.object===v.object&&y.index===v.index&&y.instanceId===v.instanceId)){const A=v.eventObject.__r3f;if(m.hovered.delete(j0(v)),A!=null&&A.eventCount){const S=A.handlers,E={...v,intersections:d};S.onPointerOut==null||S.onPointerOut(E),S.onPointerLeave==null||S.onPointerLeave(E)}}}function u(d,m){for(let v=0;v<m.length;v++){const y=m[v].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function h(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return m=>{const{internal:v}=r.getState();"pointerId"in m&&v.capturedMap.has(m.pointerId)&&requestAnimationFrame(()=>{v.capturedMap.has(m.pointerId)&&(v.capturedMap.delete(m.pointerId),o([]))})}}return function(v){const{onPointerMissed:y,internal:A}=r.getState();A.lastEvent.current=v;const S=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",C=n(v,S?e:void 0),M=E?t(v):0;d==="onPointerDown"&&(A.initialClick=[v.offsetX,v.offsetY],A.initialHits=C.map(U=>U.eventObject)),E&&!C.length&&M<=2&&(u(v,A.interaction),y&&y(v)),S&&o(C);function w(U){const D=U.eventObject,P=D.__r3f;if(!(P!=null&&P.eventCount))return;const I=P.handlers;if(S){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const F=j0(U),k=A.hovered.get(F);k?k.stopped&&U.stopPropagation():(A.hovered.set(F,U),I.onPointerOver==null||I.onPointerOver(U),I.onPointerEnter==null||I.onPointerEnter(U))}I.onPointerMove==null||I.onPointerMove(U)}else{const F=I[d];F?(!E||A.initialHits.includes(D))&&(u(v,A.interaction.filter(k=>!A.initialHits.includes(k))),F(U)):E&&A.initialHits.includes(D)&&u(v,A.interaction.filter(k=>!A.initialHits.includes(k)))}}a(C,v,M,w)}}return{handlePointer:h}}const Gb=r=>!!(r!=null&&r.render),dT=kt.createContext(null),xO=(r,t)=>{const e=XN((h,d)=>{const m=new q,v=new q,y=new q;function A(M=d().camera,w=v,U=d().size){const{width:D,height:P,top:I,left:F}=U,k=D/P;w.isVector3?y.copy(w):y.set(...w);const L=M.getWorldPosition(m).distanceTo(y);if(lT(M))return{width:D/M.zoom,height:P/M.zoom,top:I,left:F,factor:1,distance:L,aspect:k};{const N=M.fov*Math.PI/180,J=2*Math.tan(N/2)*L,ct=J*(D/P);return{width:ct,height:J,top:I,left:F,factor:D/ct,distance:L,aspect:k}}}let S;const E=M=>h(w=>({performance:{...w.performance,current:M}})),R=new Ot;return{set:h,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>r(d(),M),advance:(M,w)=>t(M,w,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Yx,pointer:R,mouse:R,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();S&&clearTimeout(S),M.performance.current!==M.performance.min&&E(M.performance.min),S=setTimeout(()=>E(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:A},setEvents:M=>h(w=>({...w,events:{...w.events,...M}})),setSize:(M,w,U=0,D=0)=>{const P=d().camera,I={width:M,height:w,top:U,left:D};h(F=>({size:I,viewport:{...F.viewport,...A(P,v,I)}}))},setDpr:M=>h(w=>{const U=uT(M);return{viewport:{...w.viewport,dpr:U,initialDpr:w.viewport.initialDpr||U}}}),setFrameloop:(M="always")=>{const w=d().clock;w.stop(),w.elapsedTime=0,M!=="never"&&(w.start(),w.elapsedTime=0),h(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:kt.createRef(),active:!1,frames:0,priority:0,subscribe:(M,w,U)=>{const D=d().internal;return D.priority=D.priority+(w>0?1:0),D.subscribers.push({ref:M,priority:w,store:U}),D.subscribers=D.subscribers.sort((P,I)=>P.priority-I.priority),()=>{const P=d().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(w>0?1:0),P.subscribers=P.subscribers.filter(I=>I.ref!==M))}}}}}),n=e.getState();let a=n.size,o=n.viewport.dpr,u=n.camera;return e.subscribe(()=>{const{camera:h,size:d,viewport:m,gl:v,set:y}=e.getState();if(d.width!==a.width||d.height!==a.height||m.dpr!==o){a=d,o=m.dpr,yO(h,d),m.dpr>0&&v.setPixelRatio(m.dpr);const A=typeof HTMLCanvasElement<"u"&&v.domElement instanceof HTMLCanvasElement;v.setSize(d.width,d.height,A)}h!==u&&(u=h,y(A=>({viewport:{...A.viewport,...A.viewport.getCurrentViewport(h)}})))}),e.subscribe(h=>r(h)),e};function pT(){const r=kt.useContext(dT);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Hs(r=e=>e,t){return pT()(r,t)}function xf(r,t=0){const e=pT(),n=e.getState().internal.subscribe,a=cT(r);return Bm(()=>n(a,t,e),[t,n,e]),null}const Vb=new WeakMap,SO=r=>{var t;return typeof r=="function"&&(r==null||(t=r.prototype)==null?void 0:t.constructor)===r};function mT(r,t){return function(e,...n){let a;return SO(e)?(a=Vb.get(e),a||(a=new e,Vb.set(e,a))):a=e,r&&r(a),Promise.all(n.map(o=>new Promise((u,h)=>a.load(o,d=>{$a(d?.scene)&&Object.assign(d,fO(d.scene)),u(d)},t,d=>h(new Error(`Could not load ${o}: ${d?.message}`))))))}}function Oc(r,t,e,n){const a=Array.isArray(t)?t:[t],o=$N(mT(e,n),[r,...a],{equal:ni.equ});return Array.isArray(t)?o:o[0]}Oc.preload=function(r,t,e){const n=Array.isArray(t)?t:[t];return tO(mT(e),[r,...n])};Oc.clear=function(r,t){const e=Array.isArray(t)?t:[t];return eO([r,...e])};function MO(r){const t=jN(r);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:kt.version}),t}const gT=0,ud={},bO=/^three(?=[A-Z])/,Dy=r=>`${r[0].toUpperCase()}${r.slice(1)}`;let EO=0;const TO=r=>typeof r=="function";function CO(r){if(TO(r)){const t=`${EO++}`;return ud[t]=r,t}else Object.assign(ud,r)}function vT(r,t){const e=Dy(r),n=ud[e];if(r!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(r==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function RO(r,t,e){var n;return r=Dy(r)in ud?r:r.replace(bO,""),vT(r,t),r==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,kv(t.object,e,r,t)}function BO(r){if(!r.isHidden){var t;r.props.attach&&(t=r.parent)!=null&&t.object?Jv(r.parent,r):$a(r.object)&&(r.object.visible=!1),r.isHidden=!0,yd(r)}}function yT(r){if(r.isHidden){var t;r.props.attach&&(t=r.parent)!=null&&t.object?qv(r.parent,r):$a(r.object)&&r.props.visible!==!1&&(r.object.visible=!0),r.isHidden=!1,yd(r)}}function Zx(r,t,e){const n=t.root.getState();if(!(!r.parent&&r.object!==n.scene)){if(!t.object){var a,o;const u=ud[Dy(t.type)];t.object=(a=t.props.object)!=null?a:new u(...(o=t.props.args)!=null?o:[]),t.object.__r3f=t}if(Dc(t.object,t.props),t.props.attach)qv(r,t);else if($a(t.object)&&$a(r.object)){const u=r.object.children.indexOf(e?.object);if(e&&u!==-1){const h=r.object.children.indexOf(t.object);if(h!==-1){r.object.children.splice(h,1);const d=h<u?u-1:u;r.object.children.splice(d,0,t.object)}else t.object.parent=r.object,r.object.children.splice(u,0,t.object),t.object.dispatchEvent({type:"added"}),r.object.dispatchEvent({type:"childadded",child:t.object})}else r.object.add(t.object)}for(const u of t.children)Zx(t,u);yd(t)}}function xA(r,t){t&&(t.parent=r,r.children.push(t),Zx(r,t))}function Xb(r,t,e){if(!t||!e)return;t.parent=r;const n=r.children.indexOf(e);n!==-1?r.children.splice(n,0,t):r.children.push(t),Zx(r,t,e)}function _T(r){if(typeof r.dispose=="function"){const t=()=>{try{r.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():Hb.unstable_scheduleCallback(Hb.unstable_IdlePriority,t)}}function WA(r,t,e){if(!t)return;t.parent=null;const n=r.children.indexOf(t);n!==-1&&r.children.splice(n,1),t.props.attach?Jv(r,t):$a(t.object)&&$a(r.object)&&(r.object.remove(t.object),_O(oT(t),t.object));const a=t.props.dispose!==null&&e!==!1;for(let o=t.children.length-1;o>=0;o--){const u=t.children[o];WA(t,u,a)}t.children.length=0,delete t.object.__r3f,a&&t.type!=="primitive"&&t.object.type!=="Scene"&&_T(t.object),e===void 0&&yd(t)}function wO(r,t){for(const e of[r,r.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const av=[];function DO(){for(const[e]of av){const n=e.parent;if(n){e.props.attach?Jv(n,e):$a(e.object)&&$a(n.object)&&n.object.remove(e.object);for(const a of e.children)a.props.attach?Jv(e,a):$a(a.object)&&$a(e.object)&&e.object.remove(a.object)}e.isHidden&&yT(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&_T(e.object)}for(const[e,n,a]of av){e.props=n;const o=e.parent;if(o){var r,t;const u=ud[Dy(e.type)];e.object=(r=e.props.object)!=null?r:new u(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,wO(a,e.object),Dc(e.object,e.props),e.props.attach?qv(o,e):$a(e.object)&&$a(o.object)&&o.object.add(e.object);for(const h of e.children)h.props.attach?qv(e,h):$a(h.object)&&$a(e.object)&&e.object.add(h.object);yd(e)}}av.length=0}const SA=()=>{},Yb={};let W0=gT;const UO=0,NO=4,QA=MO({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:RO,removeChild:WA,appendChild:xA,appendInitialChild:xA,insertBefore:Xb,appendChildToContainer(r,t){const e=r.getState().scene.__r3f;!t||!e||xA(e,t)},removeChildFromContainer(r,t){const e=r.getState().scene.__r3f;!t||!e||WA(e,t)},insertInContainerBefore(r,t,e){const n=r.getState().scene.__r3f;!t||!e||!n||Xb(n,t,e)},getRootHostContext:()=>Yb,getChildHostContext:()=>Yb,commitUpdate(r,t,e,n,a){var o,u,h;vT(t,n);let d=!1;if((r.type==="primitive"&&e.object!==n.object||((o=n.args)==null?void 0:o.length)!==((u=e.args)==null?void 0:u.length)||(h=n.args)!=null&&h.some((v,y)=>{var A;return v!==((A=e.args)==null?void 0:A[y])}))&&(d=!0),d)av.push([r,{...n},a]);else{const v=mO(r,n);Object.keys(v).length&&(Object.assign(r.props,v),Dc(r.object,v))}(a.sibling===null||(a.flags&NO)===UO)&&DO()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:r=>r?.object,prepareForCommit:()=>null,preparePortalMount:r=>kv(r.getState().scene,r,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:BO,unhideInstance:yT,createTextInstance:SA,hideTextInstance:SA,unhideTextInstance:SA,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:kt.createContext(null),setCurrentUpdatePriority(r){W0=r},getCurrentUpdatePriority(){return W0},resolveUpdatePriority(){var r;if(W0!==gT)return W0;switch(typeof window<"u"&&((r=window.event)==null?void 0:r.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return iv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return iv.ContinuousEventPriority;default:return iv.DefaultEventPriority}},resetFormInstance(){}}),gf=new Map,Xh={objects:"shallow",strict:!1};function OO(r,t){if(!t&&typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:e,height:n,top:a,left:o}=r.parentElement.getBoundingClientRect();return{width:e,height:n,top:a,left:o}}else if(!t&&typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function LO(r){const t=gf.get(r),e=t?.fiber,n=t?.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,o=n||xO(tx,qb),u=e||QA.createContainer(o,iv.ConcurrentRoot,null,!1,null,"",a,a,a,null);t||gf.set(r,{fiber:u,store:o});let h,d,m=!1,v=null;return{async configure(y={}){let A;v=new Promise(nt=>A=nt);let{gl:S,size:E,scene:R,events:C,onCreated:M,shadows:w=!1,linear:U=!1,flat:D=!1,legacy:P=!1,orthographic:I=!1,frameloop:F="always",dpr:k=[1,2],performance:L,raycaster:N,camera:J,onPointerMissed:ct}=y,at=o.getState(),pt=at.gl;if(!at.gl){const nt={canvas:r,powerPreference:"high-performance",antialias:!0,alpha:!0},_t=typeof S=="function"?await S(nt):S;Gb(_t)?pt=_t:pt=new eT({...nt,...S}),at.set({gl:pt})}let ut=at.raycaster;ut||at.set({raycaster:ut=new J1});const{params:H,...W}=N||{};if(ni.equ(W,ut,Xh)||Dc(ut,{...W}),ni.equ(H,ut.params,Xh)||Dc(ut,{params:{...ut.params,...H}}),!at.camera||at.camera===d&&!ni.equ(d,J,Xh)){d=J;const nt=J?.isCamera,_t=nt?J:I?new Kr(0,0,0,0,.1,1e3):new ii(75,0,.1,1e3);nt||(_t.position.z=5,J&&(Dc(_t,J),_t.manual||("aspect"in J||"left"in J||"right"in J||"bottom"in J||"top"in J)&&(_t.manual=!0,_t.updateProjectionMatrix())),!at.camera&&!(J!=null&&J.rotation)&&_t.lookAt(0,0,0)),at.set({camera:_t}),ut.camera=_t}if(!at.scene){let nt;R!=null&&R.isScene?(nt=R,kv(nt,o,"",{})):(nt=new Ax,kv(nt,o,"",{}),R&&Dc(nt,R)),at.set({scene:nt})}C&&!at.events.handlers&&at.set({events:C(o)});const j=OO(r,E);if(ni.equ(j,at.size,Xh)||at.setSize(j.width,j.height,j.top,j.left),k&&at.viewport.dpr!==uT(k)&&at.setDpr(k),at.frameloop!==F&&at.setFrameloop(F),at.onPointerMissed||at.set({onPointerMissed:ct}),L&&!ni.equ(L,at.performance,Xh)&&at.set(nt=>({performance:{...nt.performance,...L}})),!at.xr){var lt;const nt=(it,Ct)=>{const Ht=o.getState();Ht.frameloop!=="never"&&qb(it,!0,Ht,Ct)},_t=()=>{const it=o.getState();it.gl.xr.enabled=it.gl.xr.isPresenting,it.gl.xr.setAnimationLoop(it.gl.xr.isPresenting?nt:null),it.gl.xr.isPresenting||tx(it)},Tt={connect(){const it=o.getState().gl;it.xr.addEventListener("sessionstart",_t),it.xr.addEventListener("sessionend",_t)},disconnect(){const it=o.getState().gl;it.xr.removeEventListener("sessionstart",_t),it.xr.removeEventListener("sessionend",_t)}};typeof((lt=pt.xr)==null?void 0:lt.addEventListener)=="function"&&Tt.connect(),at.set({xr:Tt})}if(pt.shadowMap){const nt=pt.shadowMap.enabled,_t=pt.shadowMap.type;if(pt.shadowMap.enabled=!!w,ni.boo(w))pt.shadowMap.type=Wp;else if(ni.str(w)){var X;const Tt={basic:oE,percentage:Qv,soft:Wp,variance:Yr};pt.shadowMap.type=(X=Tt[w])!=null?X:Wp}else ni.obj(w)&&Object.assign(pt.shadowMap,w);(nt!==pt.shadowMap.enabled||_t!==pt.shadowMap.type)&&(pt.shadowMap.needsUpdate=!0)}return gn.enabled=!P,m||(pt.outputColorSpace=U?Ic:Pi,pt.toneMapping=D?Po:sx),at.legacy!==P&&at.set(()=>({legacy:P})),at.linear!==U&&at.set(()=>({linear:U})),at.flat!==D&&at.set(()=>({flat:D})),S&&!ni.fun(S)&&!Gb(S)&&!ni.equ(S,pt,Xh)&&Dc(pt,S),h=M,m=!0,A(),this},render(y){return!m&&!v&&this.configure(),v.then(()=>{QA.updateContainer(de.jsx(IO,{store:o,children:y,onCreated:h,rootElement:r}),u,null,()=>{})}),o},unmount(){AT(r)}}}function IO({store:r,children:t,onCreated:e,rootElement:n}){return Bm(()=>{const a=r.getState();a.set(o=>({internal:{...o.internal,active:!0}})),e&&e(a),r.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),de.jsx(dT.Provider,{value:r,children:t})}function AT(r,t){const e=gf.get(r),n=e?.fiber;if(n){const a=e?.store.getState();a&&(a.internal.active=!1),QA.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var o,u,h,d;a.events.disconnect==null||a.events.disconnect(),(o=a.gl)==null||(u=o.renderLists)==null||u.dispose==null||u.dispose(),(h=a.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),hO(a.scene),gf.delete(r)}catch{}},500)})}}const PO=new Set,HO=new Set,zO=new Set;function MA(r,t){if(r.size)for(const{callback:e}of r.values())e(t)}function rm(r,t){switch(r){case"before":return MA(PO,t);case"after":return MA(HO,t);case"tail":return MA(zO,t)}}let bA,EA;function ZA(r,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof r=="number"&&(n=r-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=r),bA=t.internal.subscribers;for(let a=0;a<bA.length;a++)EA=bA[a],EA.ref.current(EA.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let Kv=!1,$A=!1,TA,kb,Yh;function xT(r){kb=requestAnimationFrame(xT),Kv=!0,TA=0,rm("before",r),$A=!0;for(const e of gf.values()){var t;Yh=e.store.getState(),Yh.internal.active&&(Yh.frameloop==="always"||Yh.internal.frames>0)&&!((t=Yh.gl.xr)!=null&&t.isPresenting)&&(TA+=ZA(r,Yh))}if($A=!1,rm("after",r),TA===0)return rm("tail",r),Kv=!1,cancelAnimationFrame(kb)}function tx(r,t=1){var e;if(!r)return gf.forEach(n=>tx(n.store.getState(),t));(e=r.gl.xr)!=null&&e.isPresenting||!r.internal.active||r.frameloop==="never"||(t>1?r.internal.frames=Math.min(60,r.internal.frames+t):$A?r.internal.frames=2:r.internal.frames=1,Kv||(Kv=!0,requestAnimationFrame(xT)))}function qb(r,t=!0,e,n){if(t&&rm("before",r),e)ZA(r,e,n);else for(const a of gf.values())ZA(r,a.store.getState());t&&rm("after",r)}const CA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function FO(r){const{handlePointer:t}=AO(r);return{priority:1,enabled:!0,compute(e,n,a){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(CA).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:a}=r.getState();(e=a.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:e=>{const{set:n,events:a}=r.getState();if(a.disconnect==null||a.disconnect(),n(o=>({events:{...o.events,connected:e}})),a.handlers)for(const o in a.handlers){const u=a.handlers[o],[h,d]=CA[o];e.addEventListener(h,u,{passive:d})}},disconnect:()=>{const{set:e,events:n}=r.getState();if(n.connected){if(n.handlers)for(const a in n.handlers){const o=n.handlers[a],[u]=CA[a];n.connected.removeEventListener(u,o)}e(a=>({events:{...a.events,connected:void 0}}))}}}}function Jb(r,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>r(...n),t)}}function GO({debounce:r,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const a=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,u]=kt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=kt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),d=r?typeof r=="number"?r:r.scroll:null,m=r?typeof r=="number"?r:r.resize:null,v=kt.useRef(!1);kt.useEffect(()=>(v.current=!0,()=>void(v.current=!1)));const[y,A,S]=kt.useMemo(()=>{const M=()=>{if(!h.current.element)return;const{left:w,top:U,width:D,height:P,bottom:I,right:F,x:k,y:L}=h.current.element.getBoundingClientRect(),N={left:w,top:U,width:D,height:P,bottom:I,right:F,x:k,y:L};h.current.element instanceof HTMLElement&&n&&(N.height=h.current.element.offsetHeight,N.width=h.current.element.offsetWidth),Object.freeze(N),v.current&&!kO(h.current.lastBounds,N)&&u(h.current.lastBounds=N)};return[M,m?Jb(M,m):M,d?Jb(M,d):M]},[u,n,d,m]);function E(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",S,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function R(){h.current.element&&(h.current.resizeObserver=new a(S),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(M=>M.addEventListener("scroll",S,{capture:!0,passive:!0})),h.current.orientationHandler=()=>{S()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}const C=M=>{!M||M===h.current.element||(E(),h.current.element=M,h.current.scrollContainers=ST(M),R())};return XO(S,!!t),VO(A),kt.useEffect(()=>{E(),R()},[t,S,A]),kt.useEffect(()=>E,[]),[C,o,y]}function VO(r){kt.useEffect(()=>{const t=r;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[r])}function XO(r,t){kt.useEffect(()=>{if(t){const e=r;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[r,t])}function ST(r){const t=[];if(!r||r===document.body)return t;const{overflow:e,overflowX:n,overflowY:a}=window.getComputedStyle(r);return[e,n,a].some(o=>o==="auto"||o==="scroll")&&t.push(r),[...t,...ST(r.parentElement)]}const YO=["x","y","top","bottom","left","right","width","height"],kO=(r,t)=>YO.every(e=>r[e]===t[e]);function qO({ref:r,children:t,fallback:e,resize:n,style:a,gl:o,events:u=FO,eventSource:h,eventPrefix:d,shadows:m,linear:v,flat:y,legacy:A,orthographic:S,frameloop:E,dpr:R,performance:C,raycaster:M,camera:w,scene:U,onPointerMissed:D,onCreated:P,...I}){kt.useMemo(()=>CO(wN),[]);const F=lO(),[k,L]=GO({scroll:!0,debounce:{scroll:50,resize:0},...n}),N=kt.useRef(null),J=kt.useRef(null);kt.useImperativeHandle(r,()=>N.current);const ct=cT(D),[at,pt]=kt.useState(!1),[ut,H]=kt.useState(!1);if(at)throw at;if(ut)throw ut;const W=kt.useRef(null);Bm(()=>{const lt=N.current;if(L.width>0&&L.height>0&&lt){W.current||(W.current=LO(lt));async function X(){await W.current.configure({gl:o,scene:U,events:u,shadows:m,linear:v,flat:y,legacy:A,orthographic:S,frameloop:E,dpr:R,performance:C,raycaster:M,camera:w,size:L,onPointerMissed:(...nt)=>ct.current==null?void 0:ct.current(...nt),onCreated:nt=>{nt.events.connect==null||nt.events.connect(h?rO(h)?h.current:h:J.current),d&&nt.setEvents({compute:(_t,Tt)=>{const it=_t[d+"X"],Ct=_t[d+"Y"];Tt.pointer.set(it/Tt.size.width*2-1,-(Ct/Tt.size.height)*2+1),Tt.raycaster.setFromCamera(Tt.pointer,Tt.camera)}}),P?.(nt)}}),W.current.render(de.jsx(F,{children:de.jsx(uO,{set:H,children:de.jsx(kt.Suspense,{fallback:de.jsx(cO,{set:pt}),children:t??null})})}))}X()}}),kt.useEffect(()=>{const lt=N.current;if(lt)return()=>AT(lt)},[]);const j=h?"none":"auto";return de.jsx("div",{ref:J,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:j,...a},...I,children:de.jsx("div",{ref:k,style:{width:"100%",height:"100%"},children:de.jsx("canvas",{ref:N,style:{display:"block"},children:e})})})}function JO(r){return de.jsx(sT,{children:de.jsx(qO,{...r})})}function jv(){return jv=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)({}).hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},jv.apply(null,arguments)}const wm=new q,$x=new q,KO=new q,Kb=new Ot;function jO(r,t,e){const n=wm.setFromMatrixPosition(r.matrixWorld);n.project(t);const a=e.width/2,o=e.height/2;return[n.x*a+a,-(n.y*o)+o]}function WO(r,t){const e=wm.setFromMatrixPosition(r.matrixWorld),n=$x.setFromMatrixPosition(t.matrixWorld),a=e.sub(n),o=t.getWorldDirection(KO);return a.angleTo(o)>Math.PI/2}function QO(r,t,e,n){const a=wm.setFromMatrixPosition(r.matrixWorld),o=a.clone();o.project(t),Kb.set(o.x,o.y),e.setFromCamera(Kb,t);const u=e.intersectObjects(n,!0);if(u.length){const h=u[0].distance;return a.distanceTo(e.ray.origin)<h}return!0}function ZO(r,t){if(t instanceof Kr)return t.zoom;if(t instanceof ii){const e=wm.setFromMatrixPosition(r.matrixWorld),n=$x.setFromMatrixPosition(t.matrixWorld),a=t.fov*Math.PI/180,o=e.distanceTo(n);return 1/(2*Math.tan(a/2)*o)}else return 1}function $O(r,t,e){if(t instanceof ii||t instanceof Kr){const n=wm.setFromMatrixPosition(r.matrixWorld),a=$x.setFromMatrixPosition(t.matrixWorld),o=n.distanceTo(a),u=(e[1]-e[0])/(t.far-t.near),h=e[1]-u*t.far;return Math.round(u*o+h)}}const ex=r=>Math.abs(r)<1e-10?0:r;function MT(r,t,e=""){let n="matrix3d(";for(let a=0;a!==16;a++)n+=ex(t[a]*r.elements[a])+(a!==15?",":")");return e+n}const tL=(r=>t=>MT(t,r))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),eL=(r=>(t,e)=>MT(t,r(e),"translate(-50%,-50%)"))(r=>[1/r,1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1]);function nL(r){return r&&typeof r=="object"&&"current"in r}const iL=kt.forwardRef(({children:r,eps:t=.001,style:e,className:n,prepend:a,center:o,fullscreen:u,portal:h,distanceFactor:d,sprite:m=!1,transform:v=!1,occlude:y,onOcclude:A,castShadow:S,receiveShadow:E,material:R,geometry:C,zIndexRange:M=[16777271,0],calculatePosition:w=jO,as:U="div",wrapperClass:D,pointerEvents:P="auto",...I},F)=>{const{gl:k,camera:L,scene:N,size:J,raycaster:ct,events:at,viewport:pt}=Hs(),[ut]=kt.useState(()=>document.createElement(U)),H=kt.useRef(null),W=kt.useRef(null),j=kt.useRef(0),lt=kt.useRef([0,0]),X=kt.useRef(null),nt=kt.useRef(null),_t=h?.current||at.connected||k.domElement.parentNode,Tt=kt.useRef(null),it=kt.useRef(!1),Ct=kt.useMemo(()=>y&&y!=="blending"||Array.isArray(y)&&y.length&&nL(y[0]),[y]);kt.useLayoutEffect(()=>{const fe=k.domElement;y&&y==="blending"?(fe.style.zIndex=`${Math.floor(M[0]/2)}`,fe.style.position="absolute",fe.style.pointerEvents="none"):(fe.style.zIndex=null,fe.style.position=null,fe.style.pointerEvents=null)},[y]),kt.useLayoutEffect(()=>{if(W.current){const fe=H.current=aE.createRoot(ut);if(N.updateMatrixWorld(),v)ut.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const _e=w(W.current,L,J);ut.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${_e[0]}px,${_e[1]}px,0);transform-origin:0 0;`}return _t&&(a?_t.prepend(ut):_t.appendChild(ut)),()=>{_t&&_t.removeChild(ut),fe.unmount()}}},[_t,v]),kt.useLayoutEffect(()=>{D&&(ut.className=D)},[D]);const Ht=kt.useMemo(()=>v?{position:"absolute",top:0,left:0,width:J.width,height:J.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...u&&{top:-J.height/2,left:-J.width/2,width:J.width,height:J.height},...e},[e,o,u,J,v]),Qt=kt.useMemo(()=>({position:"absolute",pointerEvents:P}),[P]);kt.useLayoutEffect(()=>{if(it.current=!1,v){var fe;(fe=H.current)==null||fe.render(kt.createElement("div",{ref:X,style:Ht},kt.createElement("div",{ref:nt,style:Qt},kt.createElement("div",{ref:F,className:n,style:e,children:r}))))}else{var _e;(_e=H.current)==null||_e.render(kt.createElement("div",{ref:F,style:Ht,className:n,children:r}))}});const qt=kt.useRef(!0);xf(fe=>{if(W.current){L.updateMatrixWorld(),W.current.updateWorldMatrix(!0,!1);const _e=v?lt.current:w(W.current,L,J);if(v||Math.abs(j.current-L.zoom)>t||Math.abs(lt.current[0]-_e[0])>t||Math.abs(lt.current[1]-_e[1])>t){const De=WO(W.current,L);let Ae=!1;Ct&&(Array.isArray(y)?Ae=y.map(Gt=>Gt.current):y!=="blending"&&(Ae=[N]));const K=qt.current;if(Ae){const Gt=QO(W.current,L,ct,Ae);qt.current=Gt&&!De}else qt.current=!De;K!==qt.current&&(A?A(!qt.current):ut.style.display=qt.current?"block":"none");const Wt=Math.floor(M[0]/2),Xt=y?Ct?[M[0],Wt]:[Wt-1,0]:M;if(ut.style.zIndex=`${$O(W.current,L,Xt)}`,v){const[Gt,Dt]=[J.width/2,J.height/2],se=L.projectionMatrix.elements[5]*Dt,{isOrthographicCamera:Vt,top:ie,left:Oe,bottom:Q,right:z}=L,mt=tL(L.matrixWorldInverse),Rt=Vt?`scale(${se})translate(${ex(-(z+Oe)/2)}px,${ex((ie+Q)/2)}px)`:`translateZ(${se}px)`;let wt=W.current.matrixWorld;m&&(wt=L.matrixWorldInverse.clone().transpose().copyPosition(wt).scale(W.current.scale),wt.elements[3]=wt.elements[7]=wt.elements[11]=0,wt.elements[15]=1),ut.style.width=J.width+"px",ut.style.height=J.height+"px",ut.style.perspective=Vt?"":`${se}px`,X.current&&nt.current&&(X.current.style.transform=`${Rt}${mt}translate(${Gt}px,${Dt}px)`,nt.current.style.transform=eL(wt,1/((d||10)/400)))}else{const Gt=d===void 0?1:ZO(W.current,L)*d;ut.style.transform=`translate3d(${_e[0]}px,${_e[1]}px,0) scale(${Gt})`}lt.current=_e,j.current=L.zoom}}if(!Ct&&Tt.current&&!it.current)if(v){if(X.current){const _e=X.current.children[0];if(_e!=null&&_e.clientWidth&&_e!=null&&_e.clientHeight){const{isOrthographicCamera:De}=L;if(De||C)I.scale&&(Array.isArray(I.scale)?I.scale instanceof q?Tt.current.scale.copy(I.scale.clone().divideScalar(1)):Tt.current.scale.set(1/I.scale[0],1/I.scale[1],1/I.scale[2]):Tt.current.scale.setScalar(1/I.scale));else{const Ae=(d||10)/400,K=_e.clientWidth*Ae,Wt=_e.clientHeight*Ae;Tt.current.scale.set(K,Wt,1)}it.current=!0}}}else{const _e=ut.children[0];if(_e!=null&&_e.clientWidth&&_e!=null&&_e.clientHeight){const De=1/pt.factor,Ae=_e.clientWidth*De,K=_e.clientHeight*De;Tt.current.scale.set(Ae,K,1),it.current=!0}Tt.current.lookAt(fe.camera.position)}});const Ee=kt.useMemo(()=>({vertexShader:v?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[v]);return kt.createElement("group",jv({},I,{ref:W}),y&&!Ct&&kt.createElement("mesh",{castShadow:S,receiveShadow:E,ref:Tt},C||kt.createElement("planeGeometry",null),R||kt.createElement("shaderMaterial",{side:va,vertexShader:Ee.vertexShader,fragmentShader:Ee.fragmentShader})))}),aL=parseInt(_m.replace(/\D+/g,""));function jb(r,t){if(t===FE)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(t===Fv||t===px){let e=r.getIndex();if(e===null){const u=[],h=r.getAttribute("position");if(h!==void 0){for(let d=0;d<h.count;d++)u.push(d);r.setIndex(u),e=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=e.count-2,a=[];if(e)if(t===Fv)for(let u=1;u<=n;u++)a.push(e.getX(0)),a.push(e.getX(u)),a.push(e.getX(u+1));else for(let u=0;u<n;u++)u%2===0?(a.push(e.getX(u)),a.push(e.getX(u+1)),a.push(e.getX(u+2))):(a.push(e.getX(u+2)),a.push(e.getX(u+1)),a.push(e.getX(u)));a.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=r.clone();return o.setIndex(a),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),r}var sL=Object.defineProperty,rL=(r,t,e)=>t in r?sL(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,oL=(r,t,e)=>(rL(r,t+"",e),e);class lL{constructor(){oL(this,"_listeners")}addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const a=this._listeners[t];if(a!==void 0){const o=a.indexOf(e);o!==-1&&a.splice(o,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const a=n.slice(0);for(let o=0,u=a.length;o<u;o++)a[o].call(this,t);t.target=null}}}var cL=Object.defineProperty,uL=(r,t,e)=>t in r?cL(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Pe=(r,t,e)=>(uL(r,typeof t!="symbol"?t+"":t,e),e);const Q0=new vf,Wb=new _l,fL=Math.cos(70*(Math.PI/180)),Qb=(r,t)=>(r%t+t)%t;let hL=class extends lL{constructor(t,e){super(),Pe(this,"object"),Pe(this,"domElement"),Pe(this,"enabled",!0),Pe(this,"target",new q),Pe(this,"minDistance",0),Pe(this,"maxDistance",1/0),Pe(this,"minZoom",0),Pe(this,"maxZoom",1/0),Pe(this,"minPolarAngle",0),Pe(this,"maxPolarAngle",Math.PI),Pe(this,"minAzimuthAngle",-1/0),Pe(this,"maxAzimuthAngle",1/0),Pe(this,"enableDamping",!1),Pe(this,"dampingFactor",.05),Pe(this,"enableZoom",!0),Pe(this,"zoomSpeed",1),Pe(this,"enableRotate",!0),Pe(this,"rotateSpeed",1),Pe(this,"enablePan",!0),Pe(this,"panSpeed",1),Pe(this,"screenSpacePanning",!0),Pe(this,"keyPanSpeed",7),Pe(this,"zoomToCursor",!1),Pe(this,"autoRotate",!1),Pe(this,"autoRotateSpeed",2),Pe(this,"reverseOrbit",!1),Pe(this,"reverseHorizontalOrbit",!1),Pe(this,"reverseVerticalOrbit",!1),Pe(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Pe(this,"mouseButtons",{LEFT:Ku.ROTATE,MIDDLE:Ku.DOLLY,RIGHT:Ku.PAN}),Pe(this,"touches",{ONE:ju.ROTATE,TWO:ju.DOLLY_PAN}),Pe(this,"target0"),Pe(this,"position0"),Pe(this,"zoom0"),Pe(this,"_domElementKeyEvents",null),Pe(this,"getPolarAngle"),Pe(this,"getAzimuthalAngle"),Pe(this,"setPolarAngle"),Pe(this,"setAzimuthalAngle"),Pe(this,"getDistance"),Pe(this,"getZoomScale"),Pe(this,"listenToKeyEvents"),Pe(this,"stopListenToKeyEvents"),Pe(this,"saveState"),Pe(this,"reset"),Pe(this,"update"),Pe(this,"connect"),Pe(this,"dispose"),Pe(this,"dollyIn"),Pe(this,"dollyOut"),Pe(this,"getScale"),Pe(this,"setScale"),this.object=t,this.domElement=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>v.phi,this.getAzimuthalAngle=()=>v.theta,this.setPolarAngle=et=>{let gt=Qb(et,2*Math.PI),Jt=v.phi;Jt<0&&(Jt+=2*Math.PI),gt<0&&(gt+=2*Math.PI);let $=Math.abs(gt-Jt);2*Math.PI-$<$&&(gt<Jt?gt+=2*Math.PI:Jt+=2*Math.PI),y.phi=gt-Jt,n.update()},this.setAzimuthalAngle=et=>{let gt=Qb(et,2*Math.PI),Jt=v.theta;Jt<0&&(Jt+=2*Math.PI),gt<0&&(gt+=2*Math.PI);let $=Math.abs(gt-Jt);2*Math.PI-$<$&&(gt<Jt?gt+=2*Math.PI:Jt+=2*Math.PI),y.theta=gt-Jt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=et=>{et.addEventListener("keydown",Bt),this._domElementKeyEvents=et},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Bt),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),d=h.NONE},this.update=(()=>{const et=new q,gt=new q(0,1,0),Jt=new ui().setFromUnitVectors(t.up,gt),$=Jt.clone().invert(),jt=new q,zt=new ui,ae=2*Math.PI;return function(){const It=n.object.position;Jt.setFromUnitVectors(t.up,gt),$.copy(Jt).invert(),et.copy(It).sub(n.target),et.applyQuaternion(Jt),v.setFromVector3(et),n.autoRotate&&d===h.NONE&&pt(ct()),n.enableDamping?(v.theta+=y.theta*n.dampingFactor,v.phi+=y.phi*n.dampingFactor):(v.theta+=y.theta,v.phi+=y.phi);let le=n.minAzimuthAngle,Me=n.maxAzimuthAngle;isFinite(le)&&isFinite(Me)&&(le<-Math.PI?le+=ae:le>Math.PI&&(le-=ae),Me<-Math.PI?Me+=ae:Me>Math.PI&&(Me-=ae),le<=Me?v.theta=Math.max(le,Math.min(Me,v.theta)):v.theta=v.theta>(le+Me)/2?Math.max(le,v.theta):Math.min(Me,v.theta)),v.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,v.phi)),v.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(S,n.dampingFactor):n.target.add(S),n.zoomToCursor&&L||n.object.isOrthographicCamera?v.radius=Tt(v.radius):v.radius=Tt(v.radius*A),et.setFromSpherical(v),et.applyQuaternion($),It.copy(n.target).add(et),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(y.theta*=1-n.dampingFactor,y.phi*=1-n.dampingFactor,S.multiplyScalar(1-n.dampingFactor)):(y.set(0,0,0),S.set(0,0,0));let nn=!1;if(n.zoomToCursor&&L){let je=null;if(n.object instanceof ii&&n.object.isPerspectiveCamera){const di=et.length();je=Tt(di*A);const Kn=di-je;n.object.position.addScaledVector(F,Kn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const di=new q(k.x,k.y,0);di.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/A)),n.object.updateProjectionMatrix(),nn=!0;const Kn=new q(k.x,k.y,0);Kn.unproject(n.object),n.object.position.sub(Kn).add(di),n.object.updateMatrixWorld(),je=et.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;je!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(je).add(n.object.position):(Q0.origin.copy(n.object.position),Q0.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Q0.direction))<fL?t.lookAt(n.target):(Wb.setFromNormalAndCoplanarPoint(n.object.up,n.target),Q0.intersectPlane(Wb,n.target))))}else n.object instanceof Kr&&n.object.isOrthographicCamera&&(nn=A!==1,nn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/A)),n.object.updateProjectionMatrix()));return A=1,L=!1,nn||jt.distanceToSquared(n.object.position)>m||8*(1-zt.dot(n.object.quaternion))>m?(n.dispatchEvent(a),jt.copy(n.object.position),zt.copy(n.object.quaternion),nn=!1,!0):!1}})(),this.connect=et=>{n.domElement=et,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ge),n.domElement.addEventListener("pointerdown",Oe),n.domElement.addEventListener("pointercancel",z),n.domElement.addEventListener("wheel",wt)},this.dispose=()=>{var et,gt,Jt,$,jt,zt;n.domElement&&(n.domElement.style.touchAction="auto"),(et=n.domElement)==null||et.removeEventListener("contextmenu",ge),(gt=n.domElement)==null||gt.removeEventListener("pointerdown",Oe),(Jt=n.domElement)==null||Jt.removeEventListener("pointercancel",z),($=n.domElement)==null||$.removeEventListener("wheel",wt),(jt=n.domElement)==null||jt.ownerDocument.removeEventListener("pointermove",Q),(zt=n.domElement)==null||zt.ownerDocument.removeEventListener("pointerup",z),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Bt)};const n=this,a={type:"change"},o={type:"start"},u={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=h.NONE;const m=1e-6,v=new kA,y=new kA;let A=1;const S=new q,E=new Ot,R=new Ot,C=new Ot,M=new Ot,w=new Ot,U=new Ot,D=new Ot,P=new Ot,I=new Ot,F=new q,k=new Ot;let L=!1;const N=[],J={};function ct(){return 2*Math.PI/60/60*n.autoRotateSpeed}function at(){return Math.pow(.95,n.zoomSpeed)}function pt(et){n.reverseOrbit||n.reverseHorizontalOrbit?y.theta+=et:y.theta-=et}function ut(et){n.reverseOrbit||n.reverseVerticalOrbit?y.phi+=et:y.phi-=et}const H=(()=>{const et=new q;return function(Jt,$){et.setFromMatrixColumn($,0),et.multiplyScalar(-Jt),S.add(et)}})(),W=(()=>{const et=new q;return function(Jt,$){n.screenSpacePanning===!0?et.setFromMatrixColumn($,1):(et.setFromMatrixColumn($,0),et.crossVectors(n.object.up,et)),et.multiplyScalar(Jt),S.add(et)}})(),j=(()=>{const et=new q;return function(Jt,$){const jt=n.domElement;if(jt&&n.object instanceof ii&&n.object.isPerspectiveCamera){const zt=n.object.position;et.copy(zt).sub(n.target);let ae=et.length();ae*=Math.tan(n.object.fov/2*Math.PI/180),H(2*Jt*ae/jt.clientHeight,n.object.matrix),W(2*$*ae/jt.clientHeight,n.object.matrix)}else jt&&n.object instanceof Kr&&n.object.isOrthographicCamera?(H(Jt*(n.object.right-n.object.left)/n.object.zoom/jt.clientWidth,n.object.matrix),W($*(n.object.top-n.object.bottom)/n.object.zoom/jt.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function lt(et){n.object instanceof ii&&n.object.isPerspectiveCamera||n.object instanceof Kr&&n.object.isOrthographicCamera?A=et:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function X(et){lt(A/et)}function nt(et){lt(A*et)}function _t(et){if(!n.zoomToCursor||!n.domElement)return;L=!0;const gt=n.domElement.getBoundingClientRect(),Jt=et.clientX-gt.left,$=et.clientY-gt.top,jt=gt.width,zt=gt.height;k.x=Jt/jt*2-1,k.y=-($/zt)*2+1,F.set(k.x,k.y,1).unproject(n.object).sub(n.object.position).normalize()}function Tt(et){return Math.max(n.minDistance,Math.min(n.maxDistance,et))}function it(et){E.set(et.clientX,et.clientY)}function Ct(et){_t(et),D.set(et.clientX,et.clientY)}function Ht(et){M.set(et.clientX,et.clientY)}function Qt(et){R.set(et.clientX,et.clientY),C.subVectors(R,E).multiplyScalar(n.rotateSpeed);const gt=n.domElement;gt&&(pt(2*Math.PI*C.x/gt.clientHeight),ut(2*Math.PI*C.y/gt.clientHeight)),E.copy(R),n.update()}function qt(et){P.set(et.clientX,et.clientY),I.subVectors(P,D),I.y>0?X(at()):I.y<0&&nt(at()),D.copy(P),n.update()}function Ee(et){w.set(et.clientX,et.clientY),U.subVectors(w,M).multiplyScalar(n.panSpeed),j(U.x,U.y),M.copy(w),n.update()}function fe(et){_t(et),et.deltaY<0?nt(at()):et.deltaY>0&&X(at()),n.update()}function _e(et){let gt=!1;switch(et.code){case n.keys.UP:j(0,n.keyPanSpeed),gt=!0;break;case n.keys.BOTTOM:j(0,-n.keyPanSpeed),gt=!0;break;case n.keys.LEFT:j(n.keyPanSpeed,0),gt=!0;break;case n.keys.RIGHT:j(-n.keyPanSpeed,0),gt=!0;break}gt&&(et.preventDefault(),n.update())}function De(){if(N.length==1)E.set(N[0].pageX,N[0].pageY);else{const et=.5*(N[0].pageX+N[1].pageX),gt=.5*(N[0].pageY+N[1].pageY);E.set(et,gt)}}function Ae(){if(N.length==1)M.set(N[0].pageX,N[0].pageY);else{const et=.5*(N[0].pageX+N[1].pageX),gt=.5*(N[0].pageY+N[1].pageY);M.set(et,gt)}}function K(){const et=N[0].pageX-N[1].pageX,gt=N[0].pageY-N[1].pageY,Jt=Math.sqrt(et*et+gt*gt);D.set(0,Jt)}function Wt(){n.enableZoom&&K(),n.enablePan&&Ae()}function Xt(){n.enableZoom&&K(),n.enableRotate&&De()}function Gt(et){if(N.length==1)R.set(et.pageX,et.pageY);else{const Jt=ye(et),$=.5*(et.pageX+Jt.x),jt=.5*(et.pageY+Jt.y);R.set($,jt)}C.subVectors(R,E).multiplyScalar(n.rotateSpeed);const gt=n.domElement;gt&&(pt(2*Math.PI*C.x/gt.clientHeight),ut(2*Math.PI*C.y/gt.clientHeight)),E.copy(R)}function Dt(et){if(N.length==1)w.set(et.pageX,et.pageY);else{const gt=ye(et),Jt=.5*(et.pageX+gt.x),$=.5*(et.pageY+gt.y);w.set(Jt,$)}U.subVectors(w,M).multiplyScalar(n.panSpeed),j(U.x,U.y),M.copy(w)}function se(et){const gt=ye(et),Jt=et.pageX-gt.x,$=et.pageY-gt.y,jt=Math.sqrt(Jt*Jt+$*$);P.set(0,jt),I.set(0,Math.pow(P.y/D.y,n.zoomSpeed)),X(I.y),D.copy(P)}function Vt(et){n.enableZoom&&se(et),n.enablePan&&Dt(et)}function ie(et){n.enableZoom&&se(et),n.enableRotate&&Gt(et)}function Oe(et){var gt,Jt;n.enabled!==!1&&(N.length===0&&((gt=n.domElement)==null||gt.ownerDocument.addEventListener("pointermove",Q),(Jt=n.domElement)==null||Jt.ownerDocument.addEventListener("pointerup",z)),ve(et),et.pointerType==="touch"?re(et):mt(et))}function Q(et){n.enabled!==!1&&(et.pointerType==="touch"?te(et):Rt(et))}function z(et){var gt,Jt,$;Lt(et),N.length===0&&((gt=n.domElement)==null||gt.releasePointerCapture(et.pointerId),(Jt=n.domElement)==null||Jt.ownerDocument.removeEventListener("pointermove",Q),($=n.domElement)==null||$.ownerDocument.removeEventListener("pointerup",z)),n.dispatchEvent(u),d=h.NONE}function mt(et){let gt;switch(et.button){case 0:gt=n.mouseButtons.LEFT;break;case 1:gt=n.mouseButtons.MIDDLE;break;case 2:gt=n.mouseButtons.RIGHT;break;default:gt=-1}switch(gt){case Ku.DOLLY:if(n.enableZoom===!1)return;Ct(et),d=h.DOLLY;break;case Ku.ROTATE:if(et.ctrlKey||et.metaKey||et.shiftKey){if(n.enablePan===!1)return;Ht(et),d=h.PAN}else{if(n.enableRotate===!1)return;it(et),d=h.ROTATE}break;case Ku.PAN:if(et.ctrlKey||et.metaKey||et.shiftKey){if(n.enableRotate===!1)return;it(et),d=h.ROTATE}else{if(n.enablePan===!1)return;Ht(et),d=h.PAN}break;default:d=h.NONE}d!==h.NONE&&n.dispatchEvent(o)}function Rt(et){if(n.enabled!==!1)switch(d){case h.ROTATE:if(n.enableRotate===!1)return;Qt(et);break;case h.DOLLY:if(n.enableZoom===!1)return;qt(et);break;case h.PAN:if(n.enablePan===!1)return;Ee(et);break}}function wt(et){n.enabled===!1||n.enableZoom===!1||d!==h.NONE&&d!==h.ROTATE||(et.preventDefault(),n.dispatchEvent(o),fe(et),n.dispatchEvent(u))}function Bt(et){n.enabled===!1||n.enablePan===!1||_e(et)}function re(et){switch(ee(et),N.length){case 1:switch(n.touches.ONE){case ju.ROTATE:if(n.enableRotate===!1)return;De(),d=h.TOUCH_ROTATE;break;case ju.PAN:if(n.enablePan===!1)return;Ae(),d=h.TOUCH_PAN;break;default:d=h.NONE}break;case 2:switch(n.touches.TWO){case ju.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Wt(),d=h.TOUCH_DOLLY_PAN;break;case ju.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Xt(),d=h.TOUCH_DOLLY_ROTATE;break;default:d=h.NONE}break;default:d=h.NONE}d!==h.NONE&&n.dispatchEvent(o)}function te(et){switch(ee(et),d){case h.TOUCH_ROTATE:if(n.enableRotate===!1)return;Gt(et),n.update();break;case h.TOUCH_PAN:if(n.enablePan===!1)return;Dt(et),n.update();break;case h.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Vt(et),n.update();break;case h.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ie(et),n.update();break;default:d=h.NONE}}function ge(et){n.enabled!==!1&&et.preventDefault()}function ve(et){N.push(et)}function Lt(et){delete J[et.pointerId];for(let gt=0;gt<N.length;gt++)if(N[gt].pointerId==et.pointerId){N.splice(gt,1);return}}function ee(et){let gt=J[et.pointerId];gt===void 0&&(gt=new Ot,J[et.pointerId]=gt),gt.set(et.pageX,et.pageY)}function ye(et){const gt=et.pointerId===N[0].pointerId?N[1]:N[0];return J[gt.pointerId]}this.dollyIn=(et=at())=>{nt(et),n.update()},this.dollyOut=(et=at())=>{X(et),n.update()},this.getScale=()=>A,this.setScale=et=>{lt(et),n.update()},this.getZoomScale=()=>at(),e!==void 0&&this.connect(e),this.update()}};function Wv(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);let t="";for(let e=0,n=r.length;e<n;e++)t+=String.fromCharCode(r[e]);try{return decodeURIComponent(escape(t))}catch{return t}}const sf="srgb",El="srgb-linear",Zb=3001,dL=3e3;class tS extends La{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new yL(e)}),this.register(function(e){return new _L(e)}),this.register(function(e){return new RL(e)}),this.register(function(e){return new BL(e)}),this.register(function(e){return new wL(e)}),this.register(function(e){return new xL(e)}),this.register(function(e){return new SL(e)}),this.register(function(e){return new ML(e)}),this.register(function(e){return new bL(e)}),this.register(function(e){return new vL(e)}),this.register(function(e){return new EL(e)}),this.register(function(e){return new AL(e)}),this.register(function(e){return new CL(e)}),this.register(function(e){return new TL(e)}),this.register(function(e){return new mL(e)}),this.register(function(e){return new DL(e)}),this.register(function(e){return new UL(e)})}load(t,e,n,a){const o=this;let u;if(this.resourcePath!=="")u=this.resourcePath;else if(this.path!==""){const m=Nc.extractUrlBase(t);u=Nc.resolveURL(m,this.path)}else u=Nc.extractUrlBase(t);this.manager.itemStart(t);const h=function(m){a?a(m):console.error(m),o.manager.itemError(t),o.manager.itemEnd(t)},d=new Gs(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(t,function(m){try{o.parse(m,u,function(v){e(v),o.manager.itemEnd(t)},h)}catch(v){h(v)}},n,h)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,a){let o;const u={},h={};if(typeof t=="string")o=JSON.parse(t);else if(t instanceof ArrayBuffer)if(Wv(new Uint8Array(t.slice(0,4)))===bT){try{u[hn.KHR_BINARY_GLTF]=new NL(t)}catch(v){a&&a(v);return}o=JSON.parse(u[hn.KHR_BINARY_GLTF].content)}else o=JSON.parse(Wv(new Uint8Array(t)));else o=t;if(o.asset===void 0||o.asset.version[0]<2){a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new qL(o,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let m=0;m<this.pluginCallbacks.length;m++){const v=this.pluginCallbacks[m](d);v.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),h[v.name]=v,u[v.name]=!0}if(o.extensionsUsed)for(let m=0;m<o.extensionsUsed.length;++m){const v=o.extensionsUsed[m],y=o.extensionsRequired||[];switch(v){case hn.KHR_MATERIALS_UNLIT:u[v]=new gL;break;case hn.KHR_DRACO_MESH_COMPRESSION:u[v]=new OL(o,this.dracoLoader);break;case hn.KHR_TEXTURE_TRANSFORM:u[v]=new LL;break;case hn.KHR_MESH_QUANTIZATION:u[v]=new IL;break;default:y.indexOf(v)>=0&&h[v]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}d.setExtensions(u),d.setPlugins(h),d.parse(n,a)}parseAsync(t,e){const n=this;return new Promise(function(a,o){n.parse(t,e,a,o)})}}function pL(){let r={};return{get:function(t){return r[t]},add:function(t,e){r[t]=e},remove:function(t){delete r[t]},removeAll:function(){r={}}}}const hn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class mL{constructor(t){this.parser=t,this.name=hn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,a=e.length;n<a;n++){const o=e[n];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let a=e.cache.get(n);if(a)return a;const o=e.json,d=((o.extensions&&o.extensions[this.name]||{}).lights||[])[t];let m;const v=new oe(16777215);d.color!==void 0&&v.setRGB(d.color[0],d.color[1],d.color[2],El);const y=d.range!==void 0?d.range:0;switch(d.type){case"directional":m=new Vx(v),m.target.position.set(0,0,-1),m.add(m.target);break;case"point":m=new Gx(v),m.distance=y;break;case"spot":m=new Fx(v),m.distance=y,d.spot=d.spot||{},d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0,d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4,m.angle=d.spot.outerConeAngle,m.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,m.target.position.set(0,0,-1),m.add(m.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return m.position.set(0,0,0),m.decay=2,yl(m,d),d.intensity!==void 0&&(m.intensity=d.intensity),m.name=e.createUniqueName(d.name||"light_"+t),a=Promise.resolve(m),e.cache.add(n,a),a}getDependency(t,e){if(t==="light")return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,o=n.json.nodes[t],h=(o.extensions&&o.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(d){return n._getNodeRef(e.cache,h,d)})}}class gL{constructor(){this.name=hn.KHR_MATERIALS_UNLIT}getMaterialType(){return es}extendParams(t,e,n){const a=[];t.color=new oe(1,1,1),t.opacity=1;const o=e.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const u=o.baseColorFactor;t.color.setRGB(u[0],u[1],u[2],El),t.opacity=u[3]}o.baseColorTexture!==void 0&&a.push(n.assignTexture(t,"map",o.baseColorTexture,sf))}return Promise.all(a)}}class vL{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=a.extensions[this.name].emissiveStrength;return o!==void 0&&(e.emissiveIntensity=o),Promise.resolve()}}class yL{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const n=this.parser,a=n.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],u=a.extensions[this.name];if(u.clearcoatFactor!==void 0&&(e.clearcoat=u.clearcoatFactor),u.clearcoatTexture!==void 0&&o.push(n.assignTexture(e,"clearcoatMap",u.clearcoatTexture)),u.clearcoatRoughnessFactor!==void 0&&(e.clearcoatRoughness=u.clearcoatRoughnessFactor),u.clearcoatRoughnessTexture!==void 0&&o.push(n.assignTexture(e,"clearcoatRoughnessMap",u.clearcoatRoughnessTexture)),u.clearcoatNormalTexture!==void 0&&(o.push(n.assignTexture(e,"clearcoatNormalMap",u.clearcoatNormalTexture)),u.clearcoatNormalTexture.scale!==void 0)){const h=u.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new Ot(h,h)}return Promise.all(o)}}class _L{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=a.extensions[this.name];return e.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}}class AL{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const n=this.parser,a=n.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],u=a.extensions[this.name];return u.iridescenceFactor!==void 0&&(e.iridescence=u.iridescenceFactor),u.iridescenceTexture!==void 0&&o.push(n.assignTexture(e,"iridescenceMap",u.iridescenceTexture)),u.iridescenceIor!==void 0&&(e.iridescenceIOR=u.iridescenceIor),e.iridescenceThicknessRange===void 0&&(e.iridescenceThicknessRange=[100,400]),u.iridescenceThicknessMinimum!==void 0&&(e.iridescenceThicknessRange[0]=u.iridescenceThicknessMinimum),u.iridescenceThicknessMaximum!==void 0&&(e.iridescenceThicknessRange[1]=u.iridescenceThicknessMaximum),u.iridescenceThicknessTexture!==void 0&&o.push(n.assignTexture(e,"iridescenceThicknessMap",u.iridescenceThicknessTexture)),Promise.all(o)}}class xL{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const n=this.parser,a=n.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[];e.sheenColor=new oe(0,0,0),e.sheenRoughness=0,e.sheen=1;const u=a.extensions[this.name];if(u.sheenColorFactor!==void 0){const h=u.sheenColorFactor;e.sheenColor.setRGB(h[0],h[1],h[2],El)}return u.sheenRoughnessFactor!==void 0&&(e.sheenRoughness=u.sheenRoughnessFactor),u.sheenColorTexture!==void 0&&o.push(n.assignTexture(e,"sheenColorMap",u.sheenColorTexture,sf)),u.sheenRoughnessTexture!==void 0&&o.push(n.assignTexture(e,"sheenRoughnessMap",u.sheenRoughnessTexture)),Promise.all(o)}}class SL{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const n=this.parser,a=n.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],u=a.extensions[this.name];return u.transmissionFactor!==void 0&&(e.transmission=u.transmissionFactor),u.transmissionTexture!==void 0&&o.push(n.assignTexture(e,"transmissionMap",u.transmissionTexture)),Promise.all(o)}}class ML{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const n=this.parser,a=n.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],u=a.extensions[this.name];e.thickness=u.thicknessFactor!==void 0?u.thicknessFactor:0,u.thicknessTexture!==void 0&&o.push(n.assignTexture(e,"thicknessMap",u.thicknessTexture)),e.attenuationDistance=u.attenuationDistance||1/0;const h=u.attenuationColor||[1,1,1];return e.attenuationColor=new oe().setRGB(h[0],h[1],h[2],El),Promise.all(o)}}class bL{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const a=this.parser.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=a.extensions[this.name];return e.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class EL{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const n=this.parser,a=n.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],u=a.extensions[this.name];e.specularIntensity=u.specularFactor!==void 0?u.specularFactor:1,u.specularTexture!==void 0&&o.push(n.assignTexture(e,"specularIntensityMap",u.specularTexture));const h=u.specularColorFactor||[1,1,1];return e.specularColor=new oe().setRGB(h[0],h[1],h[2],El),u.specularColorTexture!==void 0&&o.push(n.assignTexture(e,"specularColorMap",u.specularColorTexture,sf)),Promise.all(o)}}class TL{constructor(t){this.parser=t,this.name=hn.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const n=this.parser,a=n.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],u=a.extensions[this.name];return e.bumpScale=u.bumpFactor!==void 0?u.bumpFactor:1,u.bumpTexture!==void 0&&o.push(n.assignTexture(e,"bumpMap",u.bumpTexture)),Promise.all(o)}}class CL{constructor(t){this.parser=t,this.name=hn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return!n.extensions||!n.extensions[this.name]?null:pr}extendMaterialParams(t,e){const n=this.parser,a=n.json.materials[t];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],u=a.extensions[this.name];return u.anisotropyStrength!==void 0&&(e.anisotropy=u.anisotropyStrength),u.anisotropyRotation!==void 0&&(e.anisotropyRotation=u.anisotropyRotation),u.anisotropyTexture!==void 0&&o.push(n.assignTexture(e,"anisotropyMap",u.anisotropyTexture)),Promise.all(o)}}class RL{constructor(t){this.parser=t,this.name=hn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,a=n.textures[t];if(!a.extensions||!a.extensions[this.name])return null;const o=a.extensions[this.name],u=e.options.ktx2Loader;if(!u){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o.source,u)}}class BL{constructor(t){this.parser=t,this.name=hn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,a=n.json,o=a.textures[t];if(!o.extensions||!o.extensions[e])return null;const u=o.extensions[e],h=a.images[u.source];let d=n.textureLoader;if(h.uri){const m=n.options.manager.getHandler(h.uri);m!==null&&(d=m)}return this.detectSupport().then(function(m){if(m)return n.loadTextureImage(t,u.source,d);if(a.extensionsRequired&&a.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class wL{constructor(t){this.parser=t,this.name=hn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,a=n.json,o=a.textures[t];if(!o.extensions||!o.extensions[e])return null;const u=o.extensions[e],h=a.images[u.source];let d=n.textureLoader;if(h.uri){const m=n.options.manager.getHandler(h.uri);m!==null&&(d=m)}return this.detectSupport().then(function(m){if(m)return n.loadTextureImage(t,u.source,d);if(a.extensionsRequired&&a.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(e.height===1)}})),this.isSupported}}class DL{constructor(t){this.name=hn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const a=n.extensions[this.name],o=this.parser.getDependency("buffer",a.buffer),u=this.parser.options.meshoptDecoder;if(!u||!u.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(h){const d=a.byteOffset||0,m=a.byteLength||0,v=a.count,y=a.byteStride,A=new Uint8Array(h,d,m);return u.decodeGltfBufferAsync?u.decodeGltfBufferAsync(v,y,A,a.mode,a.filter).then(function(S){return S.buffer}):u.ready.then(function(){const S=new ArrayBuffer(v*y);return u.decodeGltfBuffer(new Uint8Array(S),v,y,A,a.mode,a.filter),S})})}else return null}}class UL{constructor(t){this.name=hn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const a=e.meshes[n.mesh];for(const m of a.primitives)if(m.mode!==ur.TRIANGLES&&m.mode!==ur.TRIANGLE_STRIP&&m.mode!==ur.TRIANGLE_FAN&&m.mode!==void 0)return null;const u=n.extensions[this.name].attributes,h=[],d={};for(const m in u)h.push(this.parser.getDependency("accessor",u[m]).then(v=>(d[m]=v,d[m])));return h.length<1?null:(h.push(this.parser.createNodeMesh(t)),Promise.all(h).then(m=>{const v=m.pop(),y=v.isGroup?v.children:[v],A=m[0].count,S=[];for(const E of y){const R=new Ne,C=new q,M=new ui,w=new q(1,1,1),U=new Mx(E.geometry,E.material,A);for(let D=0;D<A;D++)d.TRANSLATION&&C.fromBufferAttribute(d.TRANSLATION,D),d.ROTATION&&M.fromBufferAttribute(d.ROTATION,D),d.SCALE&&w.fromBufferAttribute(d.SCALE,D),U.setMatrixAt(D,R.compose(C,M,w));for(const D in d)if(D==="_COLOR_0"){const P=d[D];U.instanceColor=new uf(P.array,P.itemSize,P.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&E.geometry.setAttribute(D,d[D]);vn.prototype.copy.call(U,E),this.parser.assignFinalMaterial(U),S.push(U)}return v.isGroup?(v.clear(),v.add(...S),v):S[0]}))}}const bT="glTF",qp=12,$b={JSON:1313821514,BIN:5130562};class NL{constructor(t){this.name=hn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,qp);if(this.header={magic:Wv(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==bT)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-qp,a=new DataView(t,qp);let o=0;for(;o<n;){const u=a.getUint32(o,!0);o+=4;const h=a.getUint32(o,!0);if(o+=4,h===$b.JSON){const d=new Uint8Array(t,qp+o,u);this.content=Wv(d)}else if(h===$b.BIN){const d=qp+o;this.body=t.slice(d,d+u)}o+=u}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class OL{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=hn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,a=this.dracoLoader,o=t.extensions[this.name].bufferView,u=t.extensions[this.name].attributes,h={},d={},m={};for(const v in u){const y=nx[v]||v.toLowerCase();h[y]=u[v]}for(const v in t.attributes){const y=nx[v]||v.toLowerCase();if(u[v]!==void 0){const A=n.accessors[t.attributes[v]],S=Qh[A.componentType];m[y]=S.name,d[y]=A.normalized===!0}}return e.getDependency("bufferView",o).then(function(v){return new Promise(function(y,A){a.decodeDracoFile(v,function(S){for(const E in S.attributes){const R=S.attributes[E],C=d[E];C!==void 0&&(R.normalized=C)}y(S)},h,m,El,A)})})}}class LL{constructor(){this.name=hn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(e.texCoord===void 0||e.texCoord===t.channel)&&e.offset===void 0&&e.rotation===void 0&&e.scale===void 0||(t=t.clone(),e.texCoord!==void 0&&(t.channel=e.texCoord),e.offset!==void 0&&t.offset.fromArray(e.offset),e.rotation!==void 0&&(t.rotation=e.rotation),e.scale!==void 0&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class IL{constructor(){this.name=hn.KHR_MESH_QUANTIZATION}}class ET extends gd{constructor(t,e,n,a){super(t,e,n,a)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=t*a*3+a;for(let u=0;u!==a;u++)e[u]=n[o+u];return e}interpolate_(t,e,n,a){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,d=h*2,m=h*3,v=a-e,y=(n-e)/v,A=y*y,S=A*y,E=t*m,R=E-m,C=-2*S+3*A,M=S-A,w=1-C,U=M-A+y;for(let D=0;D!==h;D++){const P=u[R+D+h],I=u[R+D+d]*v,F=u[E+D+h],k=u[E+D]*v;o[D]=w*P+U*I+C*F+M*k}return o}}const PL=new ui;class HL extends ET{interpolate_(t,e,n,a){const o=super.interpolate_(t,e,n,a);return PL.fromArray(o).normalize().toArray(o),o}}const ur={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Qh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tE={9728:aa,9729:hi,9984:$v,9985:Kh,9986:$u,9987:fr},eE={33071:zs,33648:Zh,10497:Jr},RA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nx={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...aL>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zL={CUBICSPLINE:void 0,LINEAR:ad,STEP:id},BA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function FL(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new hf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:zo})),r.DefaultMaterial}function Ju(r,t,e){for(const n in e.extensions)r[n]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function yl(r,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(r.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function GL(r,t,e){let n=!1,a=!1,o=!1;for(let m=0,v=t.length;m<v;m++){const y=t[m];if(y.POSITION!==void 0&&(n=!0),y.NORMAL!==void 0&&(a=!0),y.COLOR_0!==void 0&&(o=!0),n&&a&&o)break}if(!n&&!a&&!o)return Promise.resolve(r);const u=[],h=[],d=[];for(let m=0,v=t.length;m<v;m++){const y=t[m];if(n){const A=y.POSITION!==void 0?e.getDependency("accessor",y.POSITION):r.attributes.position;u.push(A)}if(a){const A=y.NORMAL!==void 0?e.getDependency("accessor",y.NORMAL):r.attributes.normal;h.push(A)}if(o){const A=y.COLOR_0!==void 0?e.getDependency("accessor",y.COLOR_0):r.attributes.color;d.push(A)}}return Promise.all([Promise.all(u),Promise.all(h),Promise.all(d)]).then(function(m){const v=m[0],y=m[1],A=m[2];return n&&(r.morphAttributes.position=v),a&&(r.morphAttributes.normal=y),o&&(r.morphAttributes.color=A),r.morphTargetsRelative=!0,r})}function VL(r,t){if(r.updateMorphTargets(),t.weights!==void 0)for(let e=0,n=t.weights.length;e<n;e++)r.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(r.morphTargetInfluences.length===e.length){r.morphTargetDictionary={};for(let n=0,a=e.length;n<a;n++)r.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function XL(r){let t;const e=r.extensions&&r.extensions[hn.KHR_DRACO_MESH_COMPRESSION];if(e?t="draco:"+e.bufferView+":"+e.indices+":"+wA(e.attributes):t=r.indices+":"+wA(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,a=r.targets.length;n<a;n++)t+=":"+wA(r.targets[n]);return t}function wA(r){let t="";const e=Object.keys(r).sort();for(let n=0,a=e.length;n<a;n++)t+=e[n]+":"+r[e[n]]+";";return t}function ix(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function YL(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const kL=new Ne;class qL{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new pL,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,a=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,a=navigator.userAgent.indexOf("Firefox")>-1,o=a?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||a&&o<98?this.textureLoader=new sm(this.options.manager):this.textureLoader=new V1(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Gs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,a=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(u){return u._markDefs&&u._markDefs()}),Promise.all(this._invokeAll(function(u){return u.beforeRoot&&u.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(u){const h={scene:u[0][a.scene||0],scenes:u[0],animations:u[1],cameras:u[2],asset:a.asset,parser:n,userData:{}};return Ju(o,h,a),yl(h,a),Promise.all(n._invokeAll(function(d){return d.afterRoot&&d.afterRoot(h)})).then(function(){for(const d of h.scenes)d.updateMatrixWorld();t(h)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let a=0,o=e.length;a<o;a++){const u=e[a].joints;for(let h=0,d=u.length;h<d;h++)t[u[h]].isBone=!0}for(let a=0,o=t.length;a<o;a++){const u=t[a];u.mesh!==void 0&&(this._addNodeRef(this.meshCache,u.mesh),u.skin!==void 0&&(n[u.mesh].isSkinnedMesh=!0)),u.camera!==void 0&&this._addNodeRef(this.cameraCache,u.camera)}}_addNodeRef(t,e){e!==void 0&&(t.refs[e]===void 0&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const a=n.clone(),o=(u,h)=>{const d=this.associations.get(u);d!=null&&this.associations.set(h,d);for(const[m,v]of u.children.entries())o(v,h.children[m])};return o(n,a),a.name+="_instance_"+t.uses[e]++,a}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const a=t(e[n]);if(a)return a}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let a=0;a<e.length;a++){const o=t(e[a]);o&&n.push(o)}return n}getDependency(t,e){const n=t+":"+e;let a=this.cache.get(n);if(!a){switch(t){case"scene":a=this.loadScene(e);break;case"node":a=this._invokeOne(function(o){return o.loadNode&&o.loadNode(e)});break;case"mesh":a=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(e)});break;case"accessor":a=this.loadAccessor(e);break;case"bufferView":a=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(e)});break;case"buffer":a=this.loadBuffer(e);break;case"material":a=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(e)});break;case"texture":a=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(e)});break;case"skin":a=this.loadSkin(e);break;case"animation":a=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(e)});break;case"camera":a=this.loadCamera(e);break;default:if(a=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(t,e)}),!a)throw new Error("Unknown type: "+t);break}this.cache.add(n,a)}return a}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,a=this.json[t+(t==="mesh"?"es":"s")]||[];e=Promise.all(a.map(function(o,u){return n.getDependency(t,u)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&e.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(e.uri===void 0&&t===0)return Promise.resolve(this.extensions[hn.KHR_BINARY_GLTF].body);const a=this.options;return new Promise(function(o,u){n.load(Nc.resolveURL(e.uri,a.path),o,void 0,function(){u(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const a=e.byteLength||0,o=e.byteOffset||0;return n.slice(o,o+a)})}loadAccessor(t){const e=this,n=this.json,a=this.json.accessors[t];if(a.bufferView===void 0&&a.sparse===void 0){const u=RA[a.type],h=Qh[a.componentType],d=a.normalized===!0,m=new h(a.count*u);return Promise.resolve(new bn(m,u,d))}const o=[];return a.bufferView!==void 0?o.push(this.getDependency("bufferView",a.bufferView)):o.push(null),a.sparse!==void 0&&(o.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(o).then(function(u){const h=u[0],d=RA[a.type],m=Qh[a.componentType],v=m.BYTES_PER_ELEMENT,y=v*d,A=a.byteOffset||0,S=a.bufferView!==void 0?n.bufferViews[a.bufferView].byteStride:void 0,E=a.normalized===!0;let R,C;if(S&&S!==y){const M=Math.floor(A/S),w="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+M+":"+a.count;let U=e.cache.get(w);U||(R=new m(h,M*S,a.count*S/v),U=new Mm(R,S/v),e.cache.add(w,U)),C=new Pc(U,d,A%S/v,E)}else h===null?R=new m(a.count*d):R=new m(h,A,a.count*d),C=new bn(R,d,E);if(a.sparse!==void 0){const M=RA.SCALAR,w=Qh[a.sparse.indices.componentType],U=a.sparse.indices.byteOffset||0,D=a.sparse.values.byteOffset||0,P=new w(u[1],U,a.sparse.count*M),I=new m(u[2],D,a.sparse.count*d);h!==null&&(C=new bn(C.array.slice(),C.itemSize,C.normalized));for(let F=0,k=P.length;F<k;F++){const L=P[F];if(C.setX(L,I[F*d]),d>=2&&C.setY(L,I[F*d+1]),d>=3&&C.setZ(L,I[F*d+2]),d>=4&&C.setW(L,I[F*d+3]),d>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return C})}loadTexture(t){const e=this.json,n=this.options,o=e.textures[t].source,u=e.images[o];let h=this.textureLoader;if(u.uri){const d=n.manager.getHandler(u.uri);d!==null&&(h=d)}return this.loadTextureImage(t,o,h)}loadTextureImage(t,e,n){const a=this,o=this.json,u=o.textures[t],h=o.images[e],d=(h.uri||h.bufferView)+":"+u.sampler;if(this.textureCache[d])return this.textureCache[d];const m=this.loadImageSource(e,n).then(function(v){v.flipY=!1,v.name=u.name||h.name||"",v.name===""&&typeof h.uri=="string"&&h.uri.startsWith("data:image/")===!1&&(v.name=h.uri);const A=(o.samplers||{})[u.sampler]||{};return v.magFilter=tE[A.magFilter]||hi,v.minFilter=tE[A.minFilter]||fr,v.wrapS=eE[A.wrapS]||Jr,v.wrapT=eE[A.wrapT]||Jr,a.associations.set(v,{textures:t}),v}).catch(function(){return null});return this.textureCache[d]=m,m}loadImageSource(t,e){const n=this,a=this.json,o=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(y=>y.clone());const u=a.images[t],h=self.URL||self.webkitURL;let d=u.uri||"",m=!1;if(u.bufferView!==void 0)d=n.getDependency("bufferView",u.bufferView).then(function(y){m=!0;const A=new Blob([y],{type:u.mimeType});return d=h.createObjectURL(A),d});else if(u.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const v=Promise.resolve(d).then(function(y){return new Promise(function(A,S){let E=A;e.isImageBitmapLoader===!0&&(E=function(R){const C=new ai(R);C.needsUpdate=!0,A(C)}),e.load(Nc.resolveURL(y,o.path),E,void 0,S)})}).then(function(y){return m===!0&&h.revokeObjectURL(d),yl(y,u),y.userData.mimeType=u.mimeType||YL(u.uri),y}).catch(function(y){throw console.error("THREE.GLTFLoader: Couldn't load texture",d),y});return this.sourceCache[t]=v,v}assignTexture(t,e,n,a){const o=this;return this.getDependency("texture",n.index).then(function(u){if(!u)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(u=u.clone(),u.channel=n.texCoord),o.extensions[hn.KHR_TEXTURE_TRANSFORM]){const h=n.extensions!==void 0?n.extensions[hn.KHR_TEXTURE_TRANSFORM]:void 0;if(h){const d=o.associations.get(u);u=o.extensions[hn.KHR_TEXTURE_TRANSFORM].extendTexture(u,h),o.associations.set(u,d)}}return a!==void 0&&(typeof a=="number"&&(a=a===Zb?sf:El),"colorSpace"in u?u.colorSpace=a:u.encoding=a===sf?Zb:dL),t[e]=u,u})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const a=e.attributes.tangent===void 0,o=e.attributes.color!==void 0,u=e.attributes.normal===void 0;if(t.isPoints){const h="PointsMaterial:"+n.uuid;let d=this.cache.get(h);d||(d=new py,Ji.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.sizeAttenuation=!1,this.cache.add(h,d)),n=d}else if(t.isLine){const h="LineBasicMaterial:"+n.uuid;let d=this.cache.get(h);d||(d=new Oa,Ji.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,this.cache.add(h,d)),n=d}if(a||o||u){let h="ClonedMaterial:"+n.uuid+":";a&&(h+="derivative-tangents:"),o&&(h+="vertex-colors:"),u&&(h+="flat-shading:");let d=this.cache.get(h);d||(d=n.clone(),o&&(d.vertexColors=!0),u&&(d.flatShading=!0),a&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(h,d),this.associations.set(d,this.associations.get(n))),n=d}t.material=n}getMaterialType(){return hf}loadMaterial(t){const e=this,n=this.json,a=this.extensions,o=n.materials[t];let u;const h={},d=o.extensions||{},m=[];if(d[hn.KHR_MATERIALS_UNLIT]){const y=a[hn.KHR_MATERIALS_UNLIT];u=y.getMaterialType(),m.push(y.extendParams(h,o,e))}else{const y=o.pbrMetallicRoughness||{};if(h.color=new oe(1,1,1),h.opacity=1,Array.isArray(y.baseColorFactor)){const A=y.baseColorFactor;h.color.setRGB(A[0],A[1],A[2],El),h.opacity=A[3]}y.baseColorTexture!==void 0&&m.push(e.assignTexture(h,"map",y.baseColorTexture,sf)),h.metalness=y.metallicFactor!==void 0?y.metallicFactor:1,h.roughness=y.roughnessFactor!==void 0?y.roughnessFactor:1,y.metallicRoughnessTexture!==void 0&&(m.push(e.assignTexture(h,"metalnessMap",y.metallicRoughnessTexture)),m.push(e.assignTexture(h,"roughnessMap",y.metallicRoughnessTexture))),u=this._invokeOne(function(A){return A.getMaterialType&&A.getMaterialType(t)}),m.push(Promise.all(this._invokeAll(function(A){return A.extendMaterialParams&&A.extendMaterialParams(t,h)})))}o.doubleSided===!0&&(h.side=va);const v=o.alphaMode||BA.OPAQUE;if(v===BA.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,v===BA.MASK&&(h.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&u!==es&&(m.push(e.assignTexture(h,"normalMap",o.normalTexture)),h.normalScale=new Ot(1,1),o.normalTexture.scale!==void 0)){const y=o.normalTexture.scale;h.normalScale.set(y,y)}if(o.occlusionTexture!==void 0&&u!==es&&(m.push(e.assignTexture(h,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&u!==es){const y=o.emissiveFactor;h.emissive=new oe().setRGB(y[0],y[1],y[2],El)}return o.emissiveTexture!==void 0&&u!==es&&m.push(e.assignTexture(h,"emissiveMap",o.emissiveTexture,sf)),Promise.all(m).then(function(){const y=new u(h);return o.name&&(y.name=o.name),yl(y,o),e.associations.set(y,{materials:t}),o.extensions&&Ju(a,y,o),y})}createUniqueName(t){const e=An.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,a=this.primitiveCache;function o(h){return n[hn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,e).then(function(d){return nE(d,h,e)})}const u=[];for(let h=0,d=t.length;h<d;h++){const m=t[h],v=XL(m),y=a[v];if(y)u.push(y.promise);else{let A;m.extensions&&m.extensions[hn.KHR_DRACO_MESH_COMPRESSION]?A=o(m):A=nE(new Ke,m,e),a[v]={primitive:m,promise:A},u.push(A)}}return Promise.all(u)}loadMesh(t){const e=this,n=this.json,a=this.extensions,o=n.meshes[t],u=o.primitives,h=[];for(let d=0,m=u.length;d<m;d++){const v=u[d].material===void 0?FL(this.cache):this.getDependency("material",u[d].material);h.push(v)}return h.push(e.loadGeometries(u)),Promise.all(h).then(function(d){const m=d.slice(0,d.length-1),v=d[d.length-1],y=[];for(let S=0,E=v.length;S<E;S++){const R=v[S],C=u[S];let M;const w=m[S];if(C.mode===ur.TRIANGLES||C.mode===ur.TRIANGLE_STRIP||C.mode===ur.TRIANGLE_FAN||C.mode===void 0)M=o.isSkinnedMesh===!0?new Sx(R,w):new Ri(R,w),M.isSkinnedMesh===!0&&M.normalizeSkinWeights(),C.mode===ur.TRIANGLE_STRIP?M.geometry=jb(M.geometry,px):C.mode===ur.TRIANGLE_FAN&&(M.geometry=jb(M.geometry,Fv));else if(C.mode===ur.LINES)M=new Wr(R,w);else if(C.mode===ur.LINE_STRIP)M=new Rl(R,w);else if(C.mode===ur.LINE_LOOP)M=new bx(R,w);else if(C.mode===ur.POINTS)M=new Ex(R,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);Object.keys(M.geometry.morphAttributes).length>0&&VL(M,o),M.name=e.createUniqueName(o.name||"mesh_"+t),yl(M,o),C.extensions&&Ju(a,M,C),e.assignFinalMaterial(M),y.push(M)}for(let S=0,E=y.length;S<E;S++)e.associations.set(y[S],{meshes:t,primitives:S});if(y.length===1)return o.extensions&&Ju(a,y[0],o),y[0];const A=new Sl;o.extensions&&Ju(a,A,o),e.associations.set(A,{meshes:t});for(let S=0,E=y.length;S<E;S++)A.add(y[S]);return A})}loadCamera(t){let e;const n=this.json.cameras[t],a=n[n.type];if(!a){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?e=new ii(kh.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):n.type==="orthographic"&&(e=new Kr(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),yl(e,n),Promise.resolve(e)}loadSkin(t){const e=this.json.skins[t],n=[];for(let a=0,o=e.joints.length;a<o;a++)n.push(this._loadNodeShallow(e.joints[a]));return e.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",e.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(a){const o=a.pop(),u=a,h=[],d=[];for(let m=0,v=u.length;m<v;m++){const y=u[m];if(y){h.push(y);const A=new Ne;o!==null&&A.fromArray(o.array,m*16),d.push(A)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[m])}return new bm(h,d)})}loadAnimation(t){const e=this.json,n=this,a=e.animations[t],o=a.name?a.name:"animation_"+t,u=[],h=[],d=[],m=[],v=[];for(let y=0,A=a.channels.length;y<A;y++){const S=a.channels[y],E=a.samplers[S.sampler],R=S.target,C=R.node,M=a.parameters!==void 0?a.parameters[E.input]:E.input,w=a.parameters!==void 0?a.parameters[E.output]:E.output;R.node!==void 0&&(u.push(this.getDependency("node",C)),h.push(this.getDependency("accessor",M)),d.push(this.getDependency("accessor",w)),m.push(E),v.push(R))}return Promise.all([Promise.all(u),Promise.all(h),Promise.all(d),Promise.all(m),Promise.all(v)]).then(function(y){const A=y[0],S=y[1],E=y[2],R=y[3],C=y[4],M=[];for(let w=0,U=A.length;w<U;w++){const D=A[w],P=S[w],I=E[w],F=R[w],k=C[w];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const L=n._createAnimationTracks(D,P,I,F,k);if(L)for(let N=0;N<L.length;N++)M.push(L[N])}return new cd(o,void 0,M)})}createNodeMesh(t){const e=this.json,n=this,a=e.nodes[t];return a.mesh===void 0?null:n.getDependency("mesh",a.mesh).then(function(o){const u=n._getNodeRef(n.meshCache,a.mesh,o);return a.weights!==void 0&&u.traverse(function(h){if(h.isMesh)for(let d=0,m=a.weights.length;d<m;d++)h.morphTargetInfluences[d]=a.weights[d]}),u})}loadNode(t){const e=this.json,n=this,a=e.nodes[t],o=n._loadNodeShallow(t),u=[],h=a.children||[];for(let m=0,v=h.length;m<v;m++)u.push(n.getDependency("node",h[m]));const d=a.skin===void 0?Promise.resolve(null):n.getDependency("skin",a.skin);return Promise.all([o,Promise.all(u),d]).then(function(m){const v=m[0],y=m[1],A=m[2];A!==null&&v.traverse(function(S){S.isSkinnedMesh&&S.bind(A,kL)});for(let S=0,E=y.length;S<E;S++)v.add(y[S]);return v})}_loadNodeShallow(t){const e=this.json,n=this.extensions,a=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const o=e.nodes[t],u=o.name?a.createUniqueName(o.name):"",h=[],d=a._invokeOne(function(m){return m.createNodeMesh&&m.createNodeMesh(t)});return d&&h.push(d),o.camera!==void 0&&h.push(a.getDependency("camera",o.camera).then(function(m){return a._getNodeRef(a.cameraCache,o.camera,m)})),a._invokeAll(function(m){return m.createNodeAttachment&&m.createNodeAttachment(t)}).forEach(function(m){h.push(m)}),this.nodeCache[t]=Promise.all(h).then(function(m){let v;if(o.isBone===!0?v=new hy:m.length>1?v=new Sl:m.length===1?v=m[0]:v=new vn,v!==m[0])for(let y=0,A=m.length;y<A;y++)v.add(m[y]);if(o.name&&(v.userData.name=o.name,v.name=u),yl(v,o),o.extensions&&Ju(n,v,o),o.matrix!==void 0){const y=new Ne;y.fromArray(o.matrix),v.applyMatrix4(y)}else o.translation!==void 0&&v.position.fromArray(o.translation),o.rotation!==void 0&&v.quaternion.fromArray(o.rotation),o.scale!==void 0&&v.scale.fromArray(o.scale);return a.associations.has(v)||a.associations.set(v,{}),a.associations.get(v).nodes=t,v}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],a=this,o=new Sl;n.name&&(o.name=a.createUniqueName(n.name)),yl(o,n),n.extensions&&Ju(e,o,n);const u=n.nodes||[],h=[];for(let d=0,m=u.length;d<m;d++)h.push(a.getDependency("node",u[d]));return Promise.all(h).then(function(d){for(let v=0,y=d.length;v<y;v++)o.add(d[v]);const m=v=>{const y=new Map;for(const[A,S]of a.associations)(A instanceof Ji||A instanceof ai)&&y.set(A,S);return v.traverse(A=>{const S=a.associations.get(A);S!=null&&y.set(A,S)}),y};return a.associations=m(o),o})}_createAnimationTracks(t,e,n,a,o){const u=[],h=t.name?t.name:t.uuid,d=[];Bc[o.path]===Bc.weights?t.traverse(function(A){A.morphTargetInfluences&&d.push(A.name?A.name:A.uuid)}):d.push(h);let m;switch(Bc[o.path]){case Bc.weights:m=df;break;case Bc.rotation:m=pf;break;case Bc.position:case Bc.scale:m=mf;break;default:switch(n.itemSize){case 1:m=df;break;case 2:case 3:default:m=mf;break}break}const v=a.interpolation!==void 0?zL[a.interpolation]:ad,y=this._getArrayFromAccessor(n);for(let A=0,S=d.length;A<S;A++){const E=new m(d[A]+"."+Bc[o.path],e.array,y,v);a.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(E),u.push(E)}return u}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=ix(e.constructor),a=new Float32Array(e.length);for(let o=0,u=e.length;o<u;o++)a[o]=e[o]*n;e=a}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){const a=this instanceof pf?HL:ET;return new a(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function JL(r,t,e){const n=t.attributes,a=new ya;if(n.POSITION!==void 0){const h=e.json.accessors[n.POSITION],d=h.min,m=h.max;if(d!==void 0&&m!==void 0){if(a.set(new q(d[0],d[1],d[2]),new q(m[0],m[1],m[2])),h.normalized){const v=ix(Qh[h.componentType]);a.min.multiplyScalar(v),a.max.multiplyScalar(v)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=t.targets;if(o!==void 0){const h=new q,d=new q;for(let m=0,v=o.length;m<v;m++){const y=o[m];if(y.POSITION!==void 0){const A=e.json.accessors[y.POSITION],S=A.min,E=A.max;if(S!==void 0&&E!==void 0){if(d.setX(Math.max(Math.abs(S[0]),Math.abs(E[0]))),d.setY(Math.max(Math.abs(S[1]),Math.abs(E[1]))),d.setZ(Math.max(Math.abs(S[2]),Math.abs(E[2]))),A.normalized){const R=ix(Qh[A.componentType]);d.multiplyScalar(R)}h.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(h)}r.boundingBox=a;const u=new sa;a.getCenter(u.center),u.radius=a.min.distanceTo(a.max)/2,r.boundingSphere=u}function nE(r,t,e){const n=t.attributes,a=[];function o(u,h){return e.getDependency("accessor",u).then(function(d){r.setAttribute(h,d)})}for(const u in n){const h=nx[u]||u.toLowerCase();h in r.attributes||a.push(o(n[u],h))}if(t.indices!==void 0&&!r.index){const u=e.getDependency("accessor",t.indices).then(function(h){r.setIndex(h)});a.push(u)}return yl(r,t),JL(r,t,e),Promise.all(a).then(function(){return t.targets!==void 0?GL(r,t.targets,e):r})}const DA=new WeakMap;class KL extends La{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,a){const o=new Gs(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,u=>{const h={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(u,h).then(e).catch(a)},n,a)}decodeDracoFile(t,e,n,a){const o={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:a||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,o).then(e)}decodeGeometry(t,e){for(const d in e.attributeTypes){const m=e.attributeTypes[d];m.BYTES_PER_ELEMENT!==void 0&&(e.attributeTypes[d]=m.name)}const n=JSON.stringify(e);if(DA.has(t)){const d=DA.get(t);if(d.key===n)return d.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let a;const o=this.workerNextTaskID++,u=t.byteLength,h=this._getWorker(o,u).then(d=>(a=d,new Promise((m,v)=>{a._callbacks[o]={resolve:m,reject:v},a.postMessage({type:"decode",id:o,taskConfig:e,buffer:t},[t])}))).then(d=>this._createGeometry(d.geometry));return h.catch(()=>!0).then(()=>{a&&o&&this._releaseTask(a,o)}),DA.set(t,{key:n,promise:h}),h}_createGeometry(t){const e=new Ke;t.index&&e.setIndex(new bn(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const a=t.attributes[n],o=a.name,u=a.array,h=a.itemSize;e.setAttribute(o,new bn(u,h))}return e}_loadLibrary(t,e){const n=new Gs(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((a,o)=>{n.load(t,a,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(n=>{const a=n[0];t||(this.decoderConfig.wasmBinary=n[1]);const o=jL.toString(),u=["/* draco decoder */",a,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([u]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const a=new Worker(this.workerSourceURL);a._callbacks={},a._taskCosts={},a._taskLoad=0,a.postMessage({type:"init",decoderConfig:this.decoderConfig}),a.onmessage=function(o){const u=o.data;switch(u.type){case"decode":a._callbacks[u.id].resolve(u);break;case"error":a._callbacks[u.id].reject(u);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+u.type+'"')}},this.workerPool.push(a)}else this.workerPool.sort(function(a,o){return a._taskLoad>o._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function jL(){let r,t;onmessage=function(u){const h=u.data;switch(h.type){case"init":r=h.decoderConfig,t=new Promise(function(v){r.onModuleLoaded=function(y){v({draco:y})},DracoDecoderModule(r)});break;case"decode":const d=h.buffer,m=h.taskConfig;t.then(v=>{const y=v.draco,A=new y.Decoder,S=new y.DecoderBuffer;S.Init(new Int8Array(d),d.byteLength);try{const E=e(y,A,S,m),R=E.attributes.map(C=>C.array.buffer);E.index&&R.push(E.index.array.buffer),self.postMessage({type:"decode",id:h.id,geometry:E},R)}catch(E){console.error(E),self.postMessage({type:"error",id:h.id,error:E.message})}finally{y.destroy(S),y.destroy(A)}});break}};function e(u,h,d,m){const v=m.attributeIDs,y=m.attributeTypes;let A,S;const E=h.GetEncodedGeometryType(d);if(E===u.TRIANGULAR_MESH)A=new u.Mesh,S=h.DecodeBufferToMesh(d,A);else if(E===u.POINT_CLOUD)A=new u.PointCloud,S=h.DecodeBufferToPointCloud(d,A);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!S.ok()||A.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+S.error_msg());const R={index:null,attributes:[]};for(const C in v){const M=self[y[C]];let w,U;if(m.useUniqueIDs)U=v[C],w=h.GetAttributeByUniqueId(A,U);else{if(U=h.GetAttributeId(A,u[v[C]]),U===-1)continue;w=h.GetAttribute(A,U)}R.attributes.push(a(u,h,A,C,M,w))}return E===u.TRIANGULAR_MESH&&(R.index=n(u,h,A)),u.destroy(A),R}function n(u,h,d){const v=d.num_faces()*3,y=v*4,A=u._malloc(y);h.GetTrianglesUInt32Array(d,y,A);const S=new Uint32Array(u.HEAPF32.buffer,A,v).slice();return u._free(A),{array:S,itemSize:1}}function a(u,h,d,m,v,y){const A=y.num_components(),E=d.num_points()*A,R=E*v.BYTES_PER_ELEMENT,C=o(u,v),M=u._malloc(R);h.GetAttributeDataArrayForAllPoints(d,y,C,R,M);const w=new v(u.HEAPF32.buffer,M,E).slice();return u._free(M),{name:m,array:w,itemSize:A}}function o(u,h){switch(h){case Float32Array:return u.DT_FLOAT32;case Int8Array:return u.DT_INT8;case Int16Array:return u.DT_INT16;case Int32Array:return u.DT_INT32;case Uint8Array:return u.DT_UINT8;case Uint16Array:return u.DT_UINT16;case Uint32Array:return u.DT_UINT32}}}let Z0;const UA=()=>{if(Z0)return Z0;const r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let a=r;WebAssembly.validate(e)&&(a=t);let o;const u=WebAssembly.instantiate(h(a),{}).then(y=>{o=y.instance,o.exports.__wasm_call_ctors()});function h(y){const A=new Uint8Array(y.length);for(let E=0;E<y.length;++E){const R=y.charCodeAt(E);A[E]=R>96?R-71:R>64?R-65:R>47?R+4:R>46?63:62}let S=0;for(let E=0;E<y.length;++E)A[S++]=A[E]<60?n[A[E]]:(A[E]-60)*64+A[++E];return A.buffer.slice(0,S)}function d(y,A,S,E,R,C){const M=o.exports.sbrk,w=S+3&-4,U=M(w*E),D=M(R.length),P=new Uint8Array(o.exports.memory.buffer);P.set(R,D);const I=y(U,S,E,D,R.length);if(I===0&&C&&C(U,w,E),A.set(P.subarray(U,U+S*E)),M(U-M(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const m={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},v={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Z0={ready:u,supported:!0,decodeVertexBuffer(y,A,S,E,R){d(o.exports.meshopt_decodeVertexBuffer,y,A,S,E,o.exports[m[R]])},decodeIndexBuffer(y,A,S,E){d(o.exports.meshopt_decodeIndexBuffer,y,A,S,E)},decodeIndexSequence(y,A,S,E){d(o.exports.meshopt_decodeIndexSequence,y,A,S,E)},decodeGltfBuffer(y,A,S,E,R,C){d(o.exports[v[R]],y,A,S,E,o.exports[m[C]])}},Z0};let $0=null,TT="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function CT(r=!0,t=!0,e){return n=>{e&&e(n),r&&($0||($0=new KL),$0.setDecoderPath(typeof r=="string"?r:TT),n.setDRACOLoader($0)),t&&n.setMeshoptDecoder(typeof UA=="function"?UA():UA)}}const Uy=(r,t,e,n)=>Oc(tS,r,CT(t,e,n));Uy.preload=(r,t,e,n)=>Oc.preload(tS,r,CT(t,e,n));Uy.clear=r=>Oc.clear(tS,r);Uy.setDecoderPath=r=>{TT=r};const WL=kt.forwardRef(({makeDefault:r,camera:t,regress:e,domElement:n,enableDamping:a=!0,keyEvents:o=!1,onChange:u,onStart:h,onEnd:d,...m},v)=>{const y=Hs(I=>I.invalidate),A=Hs(I=>I.camera),S=Hs(I=>I.gl),E=Hs(I=>I.events),R=Hs(I=>I.setEvents),C=Hs(I=>I.set),M=Hs(I=>I.get),w=Hs(I=>I.performance),U=t||A,D=n||E.connected||S.domElement,P=kt.useMemo(()=>new hL(U),[U]);return xf(()=>{P.enabled&&P.update()},-1),kt.useEffect(()=>(o&&P.connect(o===!0?D:o),P.connect(D),()=>void P.dispose()),[o,D,e,P,y]),kt.useEffect(()=>{const I=L=>{y(),e&&w.regress(),u&&u(L)},F=L=>{h&&h(L)},k=L=>{d&&d(L)};return P.addEventListener("change",I),P.addEventListener("start",F),P.addEventListener("end",k),()=>{P.removeEventListener("start",F),P.removeEventListener("end",k),P.removeEventListener("change",I)}},[u,h,d,P,y,R]),kt.useEffect(()=>{if(r){const I=M().controls;return C({controls:P}),()=>C({controls:I})}},[r,P]),kt.createElement("primitive",jv({ref:v,object:P,enableDamping:a},m))});function QL({controlsRef:r,cameraPos:t,target:e,isStarted:n,onTransitionComplete:a}){const{camera:o}=Hs(),u=kt.useRef(!1);return kt.useEffect(()=>{u.current=!1},[t,e]),xf(()=>{if(!r.current||!t||!e||u.current||!n)return;const h=o.position.distanceTo(t),d=r.current.target.distanceTo(e);if(h<.2&&d<.2){o.position.copy(t),r.current.target.copy(e),r.current.update(),u.current=!0,a?.();return}o.position.lerp(t,.05),r.current.target.lerp(e,.05),r.current.update()}),null}function ZL({controlsRef:r,floorHeight:t=7}){const{camera:e}=Hs();return xf(()=>{r.current&&(e.position.y<t&&(e.position.y=t,r.current.update()),r.current.target.y<t&&(r.current.target.y=t,r.current.update()))}),null}function $L({controlsRef:r,widthFromCentre:t}){return xf(({camera:e})=>{if(!r.current)return;const n=-t+5,a=t-5,o=70,u=-20;e.position.x=kh.clamp(e.position.x,n,a),e.position.z=kh.clamp(e.position.z,u,o),r.current.target&&(r.current.target.x=kh.clamp(r.current.target.x,n,a),r.current.target.z=kh.clamp(r.current.target.z,u,o)),r.current.update()}),null}function tI({controlsRef:r,ceilingHeight:t}){const{camera:e}=Hs();return xf(()=>{r.current&&(e.position.y>t&&(e.position.y=t,r.current.update()),r.current.target.y>t&&(r.current.target.y=t,r.current.update()))}),null}function eI(){const[r,t]=kt.useState("overview"),e=kt.useMemo(()=>({overview:{position:new q(-8,23.5,5),target:new q(-3,12.5,-12)},monitor:{position:new q(-.5,11,-12),target:new q(-.5,10,-19)},clipboard:{position:new q(6.5,10.5,-13.6),target:new q(6.5,7,-13.9)},tablet:{position:new q(0,13,-13.5),target:new q(.2,-9,-14.7)}}),[]),n=a=>{e[a]?t(a):console.warn(`Unknown camera view: ${a}`)};return{position:e[r].position,target:e[r].target,activeView:r,goTo:n}}function nI({controlsRef:r,activeView:t}){return xf(()=>{const e=r.current;if(!e)return;const n=t!=="overview";if(e.enablePan=!n,e.enableRotate=!n,n)switch(t){case"monitor":e.minDistance=7.3,e.maxDistance=7.3;break;case"clipboard":e.minDistance=3.5,e.maxDistance=3.5;break;case"tablet":e.minDistance=6.5,e.maxDistance=6.5;break;default:e.minDistance=0,e.maxDistance=5.5}else e.minDistance=1,e.maxDistance=60;e.update()}),null}const iI={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0, 0, 0, 0.95)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,fontSize:"3rem",flexDirection:"column",font:"Arial",transition:"opacity 1s ease"};function aI(){return de.jsxs("div",{style:iI,children:[de.jsx("div",{className:"spinner",style:{marginBottom:20},children:de.jsx("svg",{width:"60",height:"60",viewBox:"0 0 44 44",stroke:"#fff",children:de.jsxs("g",{fill:"none",fillRule:"evenodd",strokeWidth:"4",children:[de.jsx("circle",{cx:"22",cy:"22",r:"18",strokeOpacity:".5"}),de.jsx("path",{d:"M40 22c0-9.94-8.06-18-18-18",children:de.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 22 22",to:"360 22 22",dur:"1s",repeatCount:"indefinite"})})]})})}),"Loading...",de.jsxs("p",{style:{marginTop:24,fontSize:"1.2rem",textAlign:"center"},children:["Left-click and drag to look around",de.jsx("br",{}),"Right-click and drag to move around",de.jsx("br",{}),"Scroll to zoom in and out",de.jsx("br",{}),"Click on objects to interact",de.jsx("br",{})]})]})}const iE=1118481;function sI({onPositionsReady:r,hasClickedMonitor:t,monitorOpacity:e}){const{scene:n}=Uy("/kennyhuynh1/kenny_portfolio_copy (13).glb"),a=kt.useRef(),o=Oc(sm,"/kennyhuynh1/portfolio2.png");o.flipY=!1,o.wrapS=Jr,o.repeat.x=-1,o.colorSpace=Pi;const u=Oc(sm,"/kennyhuynh1/resume12.png");u.flipY=!1,u.wrapS=Jr,u.repeat.x=1,u.colorSpace=Pi,u.generateMipmaps=!1,u.magFilter=hi,u.minFilter=LE,u.anisotropy=32;const h=Oc(sm,"/kennyhuynh1/ipad.png");return h.flipY=!0,h.wrapS=Jr,h.repeat.x=1,h.colorSpace=Pi,h.magFilter=hi,h.minFilter=IE,h.anisotropy=162,kt.useEffect(()=>{n.traverse(j=>{j.isMesh&&(j.castShadow=!0,j.receiveShadow=!0,j.material&&(j.material.side=va,j.material.map&&(j.material.transparent=!0,j.material.alphaTest=1)))});const d=n.getObjectByName("scene_main"),v=d?.getObjectByName("lamp")?.getObjectByName("lamp_lightbulb");let y=null;v&&(y=new q,v.getWorldPosition(y),v.material=new hf({color:16709321,emissive:16709321,emissiveIntensity:1.5}));const A=d?.getObjectByName("table")?.getObjectByName("table"),S=new q,E=new q;A?.getWorldPosition(S),S.add(new q(0,10,0));const R=n.getObjectByName("title_text");R&&R.material.color.set(16777215);const M=d?.getObjectByName("monitor")?.getObjectByName("monitor_screen");let w=null,U=new ia;if(M){a.current=M,w=new q,M.getWorldPosition(w);const j=new ui;M.getWorldQuaternion(j),U.setFromQuaternion(j);const lt=new q(0,0,1);lt.applyEuler(U),lt.multiplyScalar(.01),w.add(lt),M.material=new hf({map:o,transparent:!0,opacity:e,polygonOffset:!0,polygonOffsetFactor:-1})}const P=d?.getObjectByName("clipboard")?.getObjectByName("clipboard_paper");let I=null,F=new ia;if(P){P.material=new es({map:u,transparent:!1,polygonOffset:!0,polygonOffsetFactor:-1}),P.rotation.x=Math.PI,I=new q,P.getWorldPosition(I);const j=new ui;P.getWorldQuaternion(j),F.setFromQuaternion(j)}const L=d?.getObjectByName("tablet")?.getObjectByName("tablet_screen");let N=null,J=new ia;if(L){N=new q,L.getWorldPosition(N);const j=new ui;L.getWorldQuaternion(j),J.setFromQuaternion(j);const lt=new q(0,0,1);lt.applyEuler(J),lt.multiplyScalar(.01),N.add(lt),L.material=new es({map:h,transparent:!1,opacity:t?0:1,polygonOffset:!0,polygonOffsetFactor:-1})}const ct=n.getObjectByName("scene_main")?.getObjectByName("sticky_note_board")?.getObjectByName("Notes")?.getObjectByName("board_kh_linkedin");let at=null,pt=new ia;if(ct){at=new q,ct.getWorldPosition(at);const j=new ui;ct.getWorldQuaternion(j),pt.setFromQuaternion(j)}const ut=n.getObjectByName("scene_main")?.getObjectByName("sticky_note_board")?.getObjectByName("Notes")?.getObjectByName("board_gmail_icon");let H=null,W=new ia;if(ut){H=new q,ut.getWorldPosition(H);const j=new ui;ut.getWorldQuaternion(j),W.setFromQuaternion(j)}r?.({title:E,table:S,lightbulb:y,monitor:w,monitorRot:U,clipboard:I,clipboardRot:F,tablet:N,tabletRot:J,linkedin:at,linkedinRot:pt,gmail:H,gmailRot:W})},[n,r,t]),kt.useEffect(()=>{a.current&&(a.current.material.opacity=parseFloat(e),a.current.material.needsUpdate=!0)},[e]),de.jsx("primitive",{object:n,position:[0,-1,0],scale:1})}function rI({color:r}){const{scene:t}=Hs();return kt.useEffect(()=>{t.background=new oe(r)},[t,r]),null}function oI(){const r=kt.useRef(),t=kt.useRef(),e=kt.useRef(),{position:n,target:a,activeView:o,goTo:u}=eI(),[h,d]=kt.useState(null),[m,v]=kt.useState(!1),[y,A]=kt.useState(!1),[S,E]=kt.useState(1),[R,C]=kt.useState(!0),[M,w]=kt.useState(!1),[U,D]=kt.useState(!1),[P,I]=kt.useState(!1);return kt.useEffect(()=>{const F=setTimeout(()=>D(!0),5e3);return()=>clearTimeout(F)},[]),kt.useEffect(()=>{U&&P&&(w(!0),setTimeout(()=>C(!1),1e3))},[U,P]),de.jsxs(de.Fragment,{children:[R&&de.jsx(aI,{}),de.jsxs(JO,{shadows:!0,dpr:[Math.min(window.devicePixelRatio,1.5)],camera:{position:[-11,20,10],fov:50},style:{width:"100vw",height:"100vh"},gl:{outputColorSpace:Pi},children:[de.jsx("ambientLight",{color:4210752,intensity:0}),de.jsx(rI,{color:"black"}),de.jsx("mesh",{ref:t,position:[0,15,-12],visible:!1}),de.jsx("spotLight",{position:[0,33,0],color:16777215,target:t.current,angle:.6,penumbra:.5,intensity:6,distance:1020,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-bias":-1e-4,decay:0}),de.jsx("mesh",{ref:e,position:[-.04590791803643568,9.59,-16.253016925609586],visible:!1}),h?.lightbulb&&h?.table&&de.jsx(de.Fragment,{children:de.jsx("spotLight",{position:[h.lightbulb.x-1,h.lightbulb.y,h.lightbulb.z],color:"#faca07ff",angle:.8,penumbra:.2,intensity:8,distance:30,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-bias":-.03,decay:.1,target:e.current})}),de.jsxs("mesh",{position:[0,10,-23],receiveShadow:!0,children:[de.jsx("planeGeometry",{args:[90,50]}),de.jsx("meshStandardMaterial",{color:iE,roughness:1,metalness:0})," "]}),de.jsxs("mesh",{position:[0,-.5,0],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[de.jsx("planeGeometry",{args:[100,60]}),de.jsx("meshStandardMaterial",{color:iE,roughness:1,metalness:0})]}),de.jsx(ZL,{controlsRef:r}),de.jsx($L,{controlsRef:r,widthFromCentre:30}),de.jsx(tI,{controlsRef:r,ceilingHeight:30}),de.jsx(kt.Suspense,{fallback:null,children:de.jsx(sI,{onPositionsReady:F=>{d(F),I(!0)},hasClickedMonitor:m,monitorOpacity:S})}),de.jsx(WL,{ref:r,enableDamping:!0,dampingFactor:.1,mouseButtons:{LEFT:0,MIDDLE:1,RIGHT:2},minDistance:1,maxDistance:60,minPolarAngle:-1/0,maxPolarAngle:1/0,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0}),de.jsx(nI,{controlsRef:r,activeView:o}),h?.monitor&&!m&&de.jsxs("mesh",{position:[h.monitor.x,h.monitor.y,h.monitor.z],rotation:[h.monitorRot.x,h.monitorRot.y+Math.PI,h.monitorRot.z+Math.PI],onClick:()=>{u("monitor"),v(!0);let F=0;const k=500,L=setInterval(()=>{F+=100,E((1-F/k).toFixed(2)),F>=k&&(clearInterval(L),A(!0))},50)},children:[de.jsx("planeGeometry",{args:[6.7,3.9]})," ",de.jsx("meshBasicMaterial",{color:"red",transparent:!0,opacity:0,side:Na})]}),h?.monitor&&y&&de.jsx(iL,{transform:!0,occlude:!0,position:[h.monitor.x,h.monitor.y,h.monitor.z],rotation:[h.monitorRot.x,h.monitorRot.y,h.monitorRot.z+Math.PI],scale:.3,style:{pointerEvents:"auto",overflow:"auto"},children:de.jsx("iframe",{src:"https://kennyhuynhhh.github.io/kenny_website/",width:858,height:482,allow:"fullscreen",sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-top-navigation",style:{border:"black solid 2px",borderRadius:"12px",overflow:"auto",pointerEvents:"auto"}})}),h?.clipboard&&de.jsxs("mesh",{position:[h.clipboard.x,h.clipboard.y+.05,h.clipboard.z],rotation:[h.clipboardRot.x,h.clipboardRot.y+Math.PI,h.clipboardRot.z+Math.PI],onClick:()=>{u("clipboard")},children:[de.jsx("planeGeometry",{args:[1.8,2.65]})," ",de.jsx("meshBasicMaterial",{color:"blue",transparent:!0,opacity:0,side:va})]}),h?.linkedin&&de.jsxs("mesh",{position:[h.linkedin.x,h.linkedin.y,h.linkedin.z],rotation:[h.linkedinRot.x,h.linkedinRot.y,h.linkedinRot.z],onClick:()=>window.open("https://www.linkedin.com/in/kennyhuynh1910/","_blank"),children:[de.jsx("planeGeometry",{args:[.7,.6]})," ",de.jsx("meshBasicMaterial",{transparent:!0,opacity:0,color:"cyan",side:va})]}),h?.gmail&&de.jsxs("mesh",{position:[h.gmail.x,h.gmail.y,h.gmail.z],rotation:[h.gmailRot.x,h.gmailRot.y,h.gmailRot.z],onClick:()=>window.open("mailto:kennyhuynh2003@gmail.com?subject=Portfolio%20Inquiry&body=Hi%20Kenny%2C%0D%0A%0D%0AI%20found%20your%20portfolio%20interesting...","_blank"),onPointerOver:F=>{F.stopPropagation(),document.body.style.cursor="pointer"},onPointerOut:()=>{document.body.style.cursor="auto"},children:[de.jsx("planeGeometry",{args:[.75,.55]})," ",de.jsx("meshBasicMaterial",{transparent:!0,opacity:0,side:va})]}),h?.tablet&&de.jsxs("mesh",{position:[h.tablet.x,h.tablet.y+.05,h.tablet.z],rotation:[h.tabletRot.x,h.tabletRot.y+Math.PI,h.tabletRot.z+Math.PI+.22],onClick:()=>{u("tablet")},children:[de.jsx("planeGeometry",{args:[3.8,2.4]})," ",de.jsx("meshBasicMaterial",{color:"purple",transparent:!0,opacity:0,side:va})]}),de.jsx(QL,{controlsRef:r,cameraPos:n,target:a,isStarted:!0})]}),o!=="overview"&&de.jsx("div",{style:{position:"absolute",top:"60px",right:"60px",zIndex:10},children:de.jsx("button",{onClick:()=>{u("overview"),v(!1),A(!1),E(1)},style:{width:"65px",height:"65px",borderRadius:"50%",border:"none",backgroundColor:"rgba(255, 255, 255, 0.5)",color:"black",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",backdropFilter:"blur(4px)",position:""},children:de.jsx("img",{src:"/kennyhuynh1/back_arrow.png",alt:"Back",style:{width:"45px",height:"45px",display:"block",margin:"auto",marginLeft:"-6px"}})})})]})}aE.createRoot(document.getElementById("root")).render(de.jsx(kt.StrictMode,{children:de.jsx(oI,{})}));
